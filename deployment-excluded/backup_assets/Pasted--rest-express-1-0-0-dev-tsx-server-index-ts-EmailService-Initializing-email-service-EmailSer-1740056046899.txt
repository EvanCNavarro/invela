
> rest-express@1.0.0 dev
> tsx server/index.ts

[EmailService] Initializing email service
[EmailService] Email service initialized successfully
[Auth] Setting up authentication...
[Auth] Authentication setup completed
[Routes] Routes setup completed
[WebSocket] Server initialized on path: /ws
12:52:38 PM [express] Server running on port 5000
[2025-02-20T12:52:38.789Z] New client connected to the pool
[Auth] Deserializing user: 113
[2025-02-20T12:52:42.023Z] New client connected to the pool
[Auth] Deserializing user: 113
[2025-02-20T12:52:42.255Z] New client connected to the pool
New WebSocket client connected
[Auth] Deserializing user: 113
[Auth] Unauthenticated user session
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[2025-02-20T12:52:42.918Z] New client connected to the pool
[Auth] Deserializing user: 113
WebSocket client disconnected with code 1001 and reason: 
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[2025-02-20T12:52:43.296Z] New client connected to the pool
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
New WebSocket client connected
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Returning user session data
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 113, companyId: 87, email: 'e.vancnavarro@gmail.com' }
[Tasks] Building query conditions
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assignedTo = 113',
    condition2: 'tasks.createdBy = 113',
    condition3: "tasks.companyId = 87 AND tasks.assignedTo IS NULL AND tasks.taskScope = 'company'"
  }
}
[Tasks] Executing database query
[Auth] Deserializing user: 113
[Tasks] Query completed
[Tasks] Number of tasks found: 1
[Tasks] Task details: [
  {
    id: 129,
    title: 'New User Invitation: e.vancnavarro@gmail.com',
    assignedTo: 113,
    companyId: 87,
    taskScope: 'user',
    status: 'completed'
  }
]
12:52:50 PM [info] GET /api/tasks 200 in 71ms :: [{"id":129,"title":"New User Invitation: e.vancnavarro@gmail.com","descriptio...
12:52:50 PM [info] GET /api/companies/current 304 in 83ms :: {"id":87,"name":"TestCompany1","description":"FinTech partner company TestCom...
[Auth] Deserializing user: 113
[Auth] Returning user session data
[Auth] Deserializing user: 113
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 113, companyId: 87, email: 'e.vancnavarro@gmail.com' }
[Tasks] Building query conditions
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assignedTo = 113',
    condition2: 'tasks.createdBy = 113',
    condition3: "tasks.companyId = 87 AND tasks.assignedTo IS NULL AND tasks.taskScope = 'company'"
  }
}
[Tasks] Executing database query
[Tasks] Query completed
[Tasks] Number of tasks found: 1
[Tasks] Task details: [
  {
    id: 129,
    title: 'New User Invitation: e.vancnavarro@gmail.com',
    assignedTo: 113,
    companyId: 87,
    taskScope: 'user',
    status: 'completed'
  }
]
New WebSocket client connected
[Auth] Deserializing user: 113
[Auth] Deserializing user: 113
12:52:50 PM [info] GET /api/tasks 304 in 61ms :: [{"id":129,"title":"New User Invitation: e.vancnavarro@gmail.com","descriptio...
12:52:50 PM [info] GET /api/companies/current 304 in 60ms :: {"id":87,"name":"TestCompany1","description":"FinTech partner company TestCom...
[Auth] Deserializing user: 113
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 113, companyId: 87, email: 'e.vancnavarro@gmail.com' }
[Tasks] Building query conditions
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assignedTo = 113',
    condition2: 'tasks.createdBy = 113',
    condition3: "tasks.companyId = 87 AND tasks.assignedTo IS NULL AND tasks.taskScope = 'company'"
  }
}
[Tasks] Executing database query
[Tasks] Query completed
[Tasks] Number of tasks found: 1
[Tasks] Task details: [
  {
    id: 129,
    title: 'New User Invitation: e.vancnavarro@gmail.com',
    assignedTo: 113,
    companyId: 87,
    taskScope: 'user',
    status: 'completed'
  }
]
12:52:51 PM [info] GET /api/tasks 304 in 60ms :: [{"id":129,"title":"New User Invitation: e.vancnavarro@gmail.com","descriptio...
[Auth] Deserializing user: 113
12:52:51 PM [info] GET /api/companies/current 304 in 59ms :: {"id":87,"name":"TestCompany1","description":"FinTech partner company TestCom...
[Auth] Deserializing user: 113
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 113, companyId: 87, email: 'e.vancnavarro@gmail.com' }
[Tasks] Building query conditions
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assignedTo = 113',
    condition2: 'tasks.createdBy = 113',
    condition3: "tasks.companyId = 87 AND tasks.assignedTo IS NULL AND tasks.taskScope = 'company'"
  }
}
[Tasks] Executing database query
[Tasks] Query completed
[Tasks] Number of tasks found: 1
[Tasks] Task details: [
  {
    id: 129,
    title: 'New User Invitation: e.vancnavarro@gmail.com',
    assignedTo: 113,
    companyId: 87,
    taskScope: 'user',
    status: 'completed'
  }
]
New WebSocket client connected
12:52:51 PM [info] GET /api/tasks 304 in 60ms :: [{"id":129,"title":"New User Invitation: e.vancnavarro@gmail.com","descriptio...
New WebSocket client connected
New WebSocket client connected
New WebSocket client connected
New WebSocket client connected
WebSocket client disconnected with code 1005 and reason: 
WebSocket client disconnected with code 1005 and reason: 
WebSocket client disconnected with code 1005 and reason: 
New WebSocket client connected
New WebSocket client connected
WebSocket client disconnected with code 1005 and reason: 
WebSocket client disconnected with code 1005 and reason: 
New WebSocket client connected
New WebSocket client connected
New WebSocket client connected
New WebSocket client connected
New WebSocket client connected
New WebSocket client connected
New WebSocket client connected
WebSocket client disconnected with code 1005 and reason: 
New WebSocket client connected
WebSocket client disconnected with code 1005 and reason: 
WebSocket client disconnected with code 1005 and reason: 
[WebSocket] Received pong from client
New WebSocket client connected
New WebSocket client connected
WebSocket client disconnected with code 1005 and reason: 
WebSocket client disconnected with code 1005 and reason: 
New WebSocket client connected
[WebSocket] Received pong from client
New WebSocket client connected
New WebSocket client connected
New WebSocket client connected
New WebSocket client connected
New WebSocket client connected
WebSocket client disconnected with code 1005 and reason: 
New WebSocket client connected
WebSocket client disconnected with code 1005 and reason: 
WebSocket client disconnected with code 1005 and reason: 
New WebSocket client connected
New WebSocket client connected
New WebSocket client connected
New WebSocket client connected
WebSocket client disconnected with code 1005 and reason: 
WebSocket client disconnected with code 1005 and reason: 
New WebSocket client connected
WebSocket client disconnected with code 1005 and reason: 
WebSocket client disconnected with code 1005 and reason: 
New WebSocket client connected
WebSocket client disconnected with code 1005 and reason: 
WebSocket client disconnected with code 1005 and reason: 
New WebSocket client connected
New WebSocket client connected
New WebSocket client connected
WebSocket client disconnected with code 1005 and reason: 
WebSocket client disconnected with code 1005 and reason: 
New WebSocket client connected
New WebSocket client connected
New WebSocket client connected
New WebSocket client connected
New WebSocket client connected
New WebSocket client connected
New WebSocket client connected
WebSocket client disconnected with code 1005 and reason: 
New WebSocket client connected
New WebSocket client connected