[2025-05-17T17:00:54.909Z] [INFO] [App] [TaskDependencies] Unlocking ALL tasks for company {"companyId":1}
[Current Company] Onboarding status check: {
  userId: 8,
  companyId: 1,
  userOnboardingStatus: true,
  freshFromDatabase: true,
  companyOnboardingStatus: true,
  timestamp: '2025-05-17T17:00:54.929Z'
}
[2025-05-17T17:00:54.949Z] [INFO] [App] [TabTutorials] Retrieved tutorial status for dashboard for user 8: completed=true, step=2 
[2025-05-17T17:00:54.960Z] [INFO] [App] GET /api/companies/current 200 in 103ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-17T17:00:54.973Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":121,"userEmail":"darek.nehrebecki@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-17T17:00:54.973Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":858,"userEmail":"marcin.figiel@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-17T17:00:54.973Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":123,"userEmail":"dev.kurbur@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-17T17:00:54.974Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":338,"userEmail":"nathanael.coffing@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-17T17:00:54.974Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":168,"userEmail":"preston.mcfarland@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-17T17:00:54.974Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":251,"userEmail":"krzysztof.pniak@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-17T17:00:54.974Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":188,"userEmail":"amin.swessi@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-17T17:00:54.974Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":720,"userEmail":"jim.wadsworth@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-17T17:00:54.974Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":124,"userEmail":"amar.karvir@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-17T17:00:54.974Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":122,"userEmail":"gaby.sulbaran@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-17T17:00:54.974Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":875,"userEmail":"jd@email.com","currentStatus":"completed","currentProgress":100}
[2025-05-17T17:00:54.974Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":920,"userEmail":"jd@jd.com","currentStatus":"completed","currentProgress":100}
[2025-05-17T17:00:54.974Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":921,"userEmail":"jd@d.com","currentStatus":"completed","currentProgress":100}
[2025-05-17T17:00:54.974Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":922,"userEmail":"bb@2.com","currentStatus":"completed","currentProgress":100}
[2025-05-17T17:00:54.974Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":897,"userEmail":"bt@e.com","currentStatus":"completed","currentProgress":100}
[2025-05-17T17:00:54.974Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":876,"userEmail":"bb@e.com","currentStatus":"completed","currentProgress":100}
[2025-05-17T17:00:54.974Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":898,"userEmail":"jamesb@e.com","currentStatus":"completed","currentProgress":100}
[2025-05-17T17:00:54.974Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":899,"userEmail":"jd@1.com","currentStatus":"completed","currentProgress":100}
[2025-05-17T17:00:54.974Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":172,"userEmail":"krzysztof.pniak@proopro.com","currentStatus":"completed","currentProgress":100}
[2025-05-17T17:00:54.974Z] [INFO] [App] [TaskDependencies] Found tasks to unlock {"companyId":1,"count":19,"taskIds":[121,858,123,338,168,251,188,720,124,122,875,920,921,922,897,876,898,899,172],"taskTypes":["user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding"],"ky3pTaskCount":0,"ky3pTaskIds":[]}
[2025-05-17T17:00:54.974Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":121,"userEmail":"darek.nehrebecki@invela.com","timestamp":"2025-05-17T17:00:54.974Z"}
[2025-05-17T17:00:54.981Z] [INFO] [App] GET /api/user-tab-tutorials/dashboard/status 200 in 103ms :: {"exists":true,"completed":true,"currentStep":2,"lastSeenAt":"2025-05-17T13:3... 
[2025-05-17T17:00:55.016Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":121,"status":"completed"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501255016_b835hdrbh' }
[2025-05-17T17:00:55.016Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:00:55.016Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":858,"userEmail":"marcin.figiel@invela.com","timestamp":"2025-05-17T17:00:55.016Z"}
[2025-05-17T17:00:55.053Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":858,"status":"completed"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501255053_15mc4axm1' }
[2025-05-17T17:00:55.053Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:00:55.053Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":123,"userEmail":"dev.kurbur@invela.com","timestamp":"2025-05-17T17:00:55.053Z"}
[2025-05-17T17:00:55.087Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":123,"status":"completed"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501255087_b91ka5orb' }
[2025-05-17T17:00:55.088Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:00:55.088Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":338,"userEmail":"nathanael.coffing@invela.com","timestamp":"2025-05-17T17:00:55.088Z"}
[2025-05-17T17:00:55.121Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":338,"status":"completed"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501255122_qw0adnmdf' }
[2025-05-17T17:00:55.122Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:00:55.122Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":168,"userEmail":"preston.mcfarland@invela.com","timestamp":"2025-05-17T17:00:55.122Z"}
[2025-05-17T17:00:55.150Z] [INFO] [App] GET /api/companies/current 304 in 33ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-17T17:00:55.163Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":168,"status":"completed"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501255163_od9xq5qcm' }
[2025-05-17T17:00:55.164Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:00:55.164Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":251,"userEmail":"krzysztof.pniak@invela.com","timestamp":"2025-05-17T17:00:55.164Z"}
[2025-05-17T17:00:55.208Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":251,"status":"completed"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501255208_qzsxuk7jf' }
[2025-05-17T17:00:55.208Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:00:55.208Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":188,"userEmail":"amin.swessi@invela.com","timestamp":"2025-05-17T17:00:55.208Z"}
[2025-05-17T17:00:55.238Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":188,"status":"completed"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501255238_5fd47knwv' }
[2025-05-17T17:00:55.239Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:00:55.239Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":720,"userEmail":"jim.wadsworth@invela.com","timestamp":"2025-05-17T17:00:55.239Z"}
[2025-05-17T17:00:55.271Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":720,"status":"completed"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501255272_nbtwuo537' }
[2025-05-17T17:00:55.272Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:00:55.272Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":124,"userEmail":"amar.karvir@invela.com","timestamp":"2025-05-17T17:00:55.272Z"}
[2025-05-17T17:00:55.306Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":124,"status":"completed"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501255306_iyagj05ro' }
[2025-05-17T17:00:55.306Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:00:55.306Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":122,"userEmail":"gaby.sulbaran@invela.com","timestamp":"2025-05-17T17:00:55.306Z"}
[Relationships] Fetching network for company: 1
[Network Visualization] Fetching network data for company: 1
[2025-05-17T17:00:55.338Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":122,"status":"completed"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501255338_mw0re9z2f' }
[2025-05-17T17:00:55.339Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:00:55.339Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":875,"userEmail":"jd@email.com","timestamp":"2025-05-17T17:00:55.339Z"}
[2025-05-17T17:00:55.373Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":875,"status":"completed"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501255373_g4zoionkf' }
[2025-05-17T17:00:55.374Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:00:55.374Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":920,"userEmail":"jd@jd.com","timestamp":"2025-05-17T17:00:55.374Z"}
[2025-05-17T17:00:55.405Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":920,"status":"completed"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501255405_l1zcm98p7' }
[2025-05-17T17:00:55.406Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:00:55.406Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":921,"userEmail":"jd@d.com","timestamp":"2025-05-17T17:00:55.406Z"}
[Relationships] Found network members: { count: 170 }
[2025-05-17T17:00:55.443Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":921,"status":"completed"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501255443_d7yroe86h' }
[2025-05-17T17:00:55.443Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:00:55.443Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":922,"userEmail":"bb@2.com","timestamp":"2025-05-17T17:00:55.443Z"}
[Network Visualization] Found network relationships: { count: 170 }
[Network Visualization] Returning visualization data: { centerNode: 'Invela', nodeCount: 170 }
[2025-05-17T17:00:55.473Z] [INFO] [App] GET /api/relationships 200 in 161ms :: [{"id":12,"companyId":1,"relatedCompanyId":33,"relationshipType":"network_mem... 
[2025-05-17T17:00:55.476Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":922,"status":"completed"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501255476_a51p3p0gm' }
[2025-05-17T17:00:55.477Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:00:55.477Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":897,"userEmail":"bt@e.com","timestamp":"2025-05-17T17:00:55.477Z"}
[2025-05-17T17:00:55.498Z] [INFO] [App] GET /api/network/visualization 200 in 162ms :: {"center":{"id":1,"name":"Invela","riskScore":0,"riskBucket":"none","accredit... 
[2025-05-17T17:00:55.509Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":897,"status":"completed"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501255509_wwsh8mnwu' }
[2025-05-17T17:00:55.510Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:00:55.510Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":876,"userEmail":"bb@e.com","timestamp":"2025-05-17T17:00:55.510Z"}
[2025-05-17T17:00:55.543Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":876,"status":"completed"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501255543_ax0buyff5' }
[2025-05-17T17:00:55.543Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:00:55.543Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":898,"userEmail":"jamesb@e.com","timestamp":"2025-05-17T17:00:55.543Z"}
[2025-05-17T17:00:55.577Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":898,"status":"completed"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501255577_c7yn3dmv0' }
[2025-05-17T17:00:55.577Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:00:55.577Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":899,"userEmail":"jd@1.com","timestamp":"2025-05-17T17:00:55.577Z"}
[2025-05-17T17:00:55.620Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":899,"status":"completed"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501255620_rsanj9f95' }
[2025-05-17T17:00:55.620Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:00:55.620Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":172,"userEmail":"krzysztof.pniak@proopro.com","timestamp":"2025-05-17T17:00:55.620Z"}
[2025-05-17T17:00:55.621Z] [INFO] [WebSocket] Received message from client client-1747500055478-12gjh1x {"module":"WebSocket","type":"ping"}
[2025-05-17T17:00:55.650Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":172,"status":"completed"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501255650_e5rhj22mt' }
[2025-05-17T17:00:55.651Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:00:55.651Z] [INFO] [App] [TaskDependencies] Successfully unlocked all tasks {"companyId":1,"count":19}
[Tasks] Successfully unlocked all tasks for company: 1
[Tasks] KYB tasks found: { count: 0 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 8',
    condition2: 'tasks.created_by = 8',
    condition3: "tasks.company_id = 1 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('evan.navarro@invela.com')"
  }
}
[Tasks] Tasks found: { count: 243 }
[2025-05-17T17:00:55.942Z] [INFO] [App] GET /api/tasks 200 in 1063ms :: [{"id":942,"title":"1. KYB Form: DevTest55","description":"Complete KYB verif... 
[2025-05-17T17:00:56.636Z] [INFO] [WebSocket] Received message from client client-1747500056513-5tbk8pw {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:00:56.473Z","connectionId":"ws_1747500056456_oaqjnh1qy"}
[2025-05-17T17:00:57.134Z] [INFO] [WebSocket] Received message from client client-1747500057005-e1h7lpg {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:00:56.965Z","connectionId":"ws_1747500055935_gsnobtgc3"}
[2025-05-17T17:00:57.694Z] [INFO] [WebSocket] Received message from client client-1747500057559-9sqaeoc {"module":"WebSocket","type":"ping"}
[2025-05-17T17:00:58.186Z] [INFO] [WebSocket] Received message from client client-1747500058054-i5u5v3u {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:00:58.015Z","connectionId":"ws_1747500055916_rs84c6ncc"}
[2025-05-17T17:00:58.347Z] [INFO] [App] GET /api/companies/current 304 in 33ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-17T17:01:01.341Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-17T17:01:04.376Z] [INFO] [App] GET /api/companies/current 304 in 33ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-17T17:01:07.344Z] [INFO] [App] GET /api/companies/current 304 in 36ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[Auth] Processing logout request
[Auth] Clearing user 8 from cache during logout
[Auth] Clearing company 1 from cache during logout
[Cache] Invalidating company cache for company 1
[Auth] Cache invalidation result for company 1: true
[Auth] Broadcasting cache invalidation WebSocket message
[WebSocket] Broadcast cache_invalidation to 6 clients (0 errors) { messageId: 'msg_1747501267883_gmkikuh8o' }
[2025-05-17T17:01:07.883Z] [INFO] [App] Successfully broadcasted cache_invalidation message 
[Auth] Logout successful for user: 8
[Auth] Session successfully destroyed
[Auth] Unauthenticated user session
[Auth] Processing login request
[Auth] Login request body: {
  email: 'evan.navarro@invela.com',
  hasPassword: true,
  passwordLength: 11
}
[Auth] Login attempt for: evan.navarro@invela.com
[Auth] Password received (first 4 chars): pass
[Auth] Looking up user by email: evan.navarro@invela.com
[Auth] User lookup result: {
  found: true,
  userId: 8,
  hasPassword: true,
  passwordLength: 60,
  passwordStart: '$2a$'
}
[Auth] Found user, checking password
[Auth] Comparing passwords:
[Auth] - Stored hash length: 60
[Auth] - Stored hash format check: true
[Auth] - Supplied password length: 11
[Auth] - Stored hash: $2a$10$unOdtqMesInbTmdENGrZleCmx5Ckl6XTzhCRVIaPxXof0RFBTahii
[Auth] - Supplied password (first 4 chars): pass
[Auth] Starting to hash password
[Auth] Password hashed successfully: { hashLength: 60, startsWithBcrypt: true, rounds: 10 }
[Auth] - Test hash generated: $2b$10$vMSVbmJQENGDQj0yrIWlzeVlRvBj5UlpoocTHXuazy5.kdV1gpnQ2
[Auth] Password comparison result: true
[Auth] Password validation result: true
[Auth] Login successful for user: 8
[Auth] Serializing user: 8
[Auth] Login successful for user: 8
[Tasks] Using cached task data for user: 8
[2025-05-17T17:01:15.076Z] [INFO] [App] GET /api/tasks 304 in 35ms :: [{"id":942,"title":"1. KYB Form: DevTest55","description":"Complete KYB verif... 
[2025-05-17T17:01:15.189Z] [INFO] [App] [TabTutorials] Status request for tab "dashboard" from authenticated user ID: 8 
[2025-05-17T17:01:15.189Z] [INFO] [App] [TabTutorials] Normalizing tab name from 'dashboard' to canonical form 
[2025-05-17T17:01:15.189Z] [INFO] [App] [TabTutorials] Tab name already in canonical form: 'dashboard' 
[2025-05-17T17:01:15.189Z] [INFO] [App] [TabTutorials] Checking tutorial status for tab: dashboard (raw: dashboard), user: 8 
[Current Company] Fetching company for user: { userId: 8, companyId: 1 }
[Current Company] Found company: {
  id: 1,
  name: 'Invela',
  onboardingCompleted: true,
  riskScore: 0,
  chosenScore: 86,
  isDemo: null
}
[2025-05-17T17:01:15.250Z] [INFO] [App] [TabTutorials] Retrieved tutorial status for dashboard for user 8: completed=true, step=2 
[Current Company] Onboarding status check: {
  userId: 8,
  companyId: 1,
  userOnboardingStatus: true,
  freshFromDatabase: true,
  companyOnboardingStatus: true,
  timestamp: '2025-05-17T17:01:15.276Z'
}
[2025-05-17T17:01:15.280Z] [INFO] [App] GET /api/user-tab-tutorials/dashboard/status 200 in 91ms :: {"exists":true,"completed":true,"currentStep":2,"lastSeenAt":"2025-05-17T17:0... 
[2025-05-17T17:01:15.306Z] [INFO] [App] GET /api/companies/current 304 in 89ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-17T17:01:15.494Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[Relationships] Fetching network for company: 1
[2025-05-17T17:01:15.679Z] [INFO] [App] GET /api/network/visualization 304 in 30ms :: {"center":{"id":1,"name":"Invela","riskScore":0,"riskBucket":"none","accredit... 
[Relationships] Found network members: { count: 170 }
[2025-05-17T17:01:15.774Z] [INFO] [App] GET /api/relationships 304 in 127ms :: [{"id":12,"companyId":1,"relatedCompanyId":33,"relationshipType":"network_mem... 
[2025-05-17T17:01:16.508Z] [INFO] [App] GET /api/companies/current 304 in 32ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-17T17:01:16.517Z] [INFO] [App] GET /api/tasks 304 in 34ms :: [{"id":942,"title":"1. KYB Form: DevTest55","description":"Complete KYB verif... 
[2025-05-17T17:01:18.177Z] [INFO] [WebSocket] Received message from client client-1747500058054-i5u5v3u {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:01:18.014Z","connectionId":"ws_1747500055916_rs84c6ncc"}
[2025-05-17T17:01:19.509Z] [INFO] [App] GET /api/companies/current 304 in 38ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-17T17:01:20.222Z] [INFO] [App] GET /api/companies/current 304 in 32ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-17T17:01:23.222Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-17T17:01:25.602Z] [INFO] [WebSocket] Received message from client client-1747500055478-12gjh1x {"module":"WebSocket","type":"ping"}
[2025-05-17T17:01:26.230Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-17T17:01:26.637Z] [INFO] [WebSocket] Received message from client client-1747500056513-5tbk8pw {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:01:26.472Z","connectionId":"ws_1747500056456_oaqjnh1qy"}
[2025-05-17T17:01:27.127Z] [INFO] [WebSocket] Received message from client client-1747500057005-e1h7lpg {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:01:26.964Z","connectionId":"ws_1747500055935_gsnobtgc3"}
[2025-05-17T17:01:29.217Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-17T17:01:29.743Z] [INFO] [App] POST /api/fintech/check-company 200 in 72ms :: {"exists":false} 
[Current Company] Using cached company data: 1
[2025-05-17T17:01:32.230Z] [INFO] [App] GET /api/companies/current 304 in 33ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-17T17:01:35.220Z] [INFO] [App] GET /api/companies/current 304 in 32ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[FinTech Invite] Starting invitation process with payload: {
  email: '***@***.***',
  full_name: 'John Doe',
  company_name: 'DevTest56',
  sender_name: 'Evan Navarro',
  sender_company: 'Invela',
  is_demo: true
}
[FinTech Invite] Found sender company: { name: 'Invela', duration: 36 }
[FinTech Invite] Created company: { id: 314, duration: 85 }
[FinTech Invite] Created user: { id: 378, duration: 178 }
[FinTech Invite] Creating user onboarding task
[FinTech Invite] Created onboarding task: { taskId: 946, status: 'email_sent', assignedTo: 378, duration: 215 }
[FinTech Invite] Created invitation: { id: 385, code: 'EB572E', duration: 249 }
[FinTech Invite] Creating company tasks with existing transaction
[Company Service] Creating new company: DevTest56 { hasExistingTransaction: true, timestamp: '2025-05-17T17:01:36.923Z' }
[Company Service] Using existing transaction for company creation
[Company Service] Using existing company record: { id: 314, name: 'DevTest56' }
[Company Service] Creating tasks with creator ID: 8
[Company Service] Creating KYB task for company: 314
[Company Service] Created KYB task: { taskId: 947, companyId: 314, duration: 34 }
[Company Service] Creating S&P KY3P Security Assessment task for company: 314
[Company Service] Created S&P KY3P Security Assessment task: { taskId: 948, companyId: 314, duration: 68 }
[Company Service] Creating Open Banking Survey task for company: 314
[Company Service] Created Open Banking Survey task: { taskId: 949, companyId: 314, duration: 101 }
[Company Service] Creating relationship with Invela for company: 314
[Company Service] Creating relationship with creator company: 1
[Company Service] Created relationships: {
  invelaRelationshipId: 416,
  creatorRelationshipId: 417,
  newCompanyId: 314,
  duration: 178
}
[2025-05-17T17:01:37.101Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":947,"status":"not_started"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501297101_1yfhlmdez' }
[2025-05-17T17:01:37.101Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:01:37.101Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":948,"status":"not_started"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501297102_xph3hge9n' }
[2025-05-17T17:01:37.102Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:01:37.102Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":949,"status":"not_started"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501297102_x7rv3w27e' }
[2025-05-17T17:01:37.102Z] [INFO] [App] Successfully broadcasted task_update message 
[FinTech Invite] Tasks created successfully: {
  companyId: 314,
  tasks: { kyb: 947, security: 948, card: 949, onboarding: 946 },
  duration: 428
}
[2025-05-17T17:01:37.103Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[FinTech Invite] Sending invitation email
[EmailService] Starting to send template email
[EmailService] Template type: fintech_invite
[EmailService] Recipient: 56@e.com
[EmailService] Template data (raw): {
  "recipientName": "John Doe",
  "recipientEmail": "56@e.com",
  "senderName": "Evan Navarro",
  "senderCompany": "Invela",
  "targetCompany": "DevTest56",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=EB572E&email=56%40e.com",
  "code": "EB572E"
}
[EmailService] Starting email validation for: 56@e.com
[EmailService] Checking MX records for domain: e.com
[EmailService] MX record check failed: Error: queryMx ENOTFOUND e.com
    at QueryReqWrap.onresolve [as oncomplete] (node:internal/dns/callback_resolver:45:19) {
  errno: undefined,
  code: 'ENOTFOUND',
  syscall: 'queryMx',
  hostname: 'e.com'
}
[EmailService] Continuing despite MX check failure
[EmailService] Email validation successful for: 56@e.com
[EmailService] Transforming template data
[EmailService] Starting template data transformation
[EmailService] Input template data: {
  "recipientName": "John Doe",
  "recipientEmail": "56@e.com",
  "senderName": "Evan Navarro",
  "senderCompany": "Invela",
  "targetCompany": "DevTest56",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=EB572E&email=56%40e.com",
  "code": "EB572E"
}
[EmailService] Built invite URL: https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=EB572E&email=56%40e.com
[EmailService] Transformed template data: {
  "recipientName": "John Doe",
  "recipientEmail": "56@e.com",
  "senderName": "Evan Navarro",
  "senderCompany": "Invela",
  "targetCompany": "DevTest56",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=EB572E&email=56%40e.com",
  "code": "EB572E"
}
[EmailService] Getting email template: fintech_invite
[EmailTemplate] Getting template: fintech_invite
[EmailTemplate] Template data: {
  "recipientName": "John Doe",
  "recipientEmail": "56@e.com",
  "senderName": "Evan Navarro",
  "senderCompany": "Invela",
  "targetCompany": "DevTest56",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=EB572E&email=56%40e.com",
  "code": "EB572E"
}
[Template:invitation] Received template data: {
  "recipientName": "John Doe",
  "recipientEmail": "56@e.com",
  "senderName": "Evan Navarro",
  "senderCompany": "Invela",
  "targetCompany": "DevTest56",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=EB572E&email=56%40e.com",
  "code": "EB572E",
  "inviteType": "fintech"
}
[EmailService] Template generated successfully
[EmailService] Preparing to send email with configuration: {
  from: 'EvanCNavarro@gmail.com',
  to: '56@e.com',
  subject: 'Invitation to join Invela',
  textLength: 601,
  htmlLength: 1673
}
[2025-05-17T17:01:38.183Z] [INFO] [WebSocket] Received message from client client-1747500058054-i5u5v3u {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:01:38.016Z","connectionId":"ws_1747500055916_rs84c6ncc"}
[2025-05-17T17:01:38.225Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[EmailService] Email sent successfully to: 56@e.com
[FinTech Invite] Invitation email sent successfully
[FinTech Invite] Process completed: {
  companyId: 314,
  userId: 378,
  invitationId: 385,
  onboardingTaskId: 946,
  duration: 1730
}
[2025-05-17T17:01:38.374Z] [INFO] [App] POST /api/fintech/invite 201 in 1761ms :: {"message":"FinTech company invited successfully","company":{"id":314,"name":... 
[2025-05-17T17:01:41.224Z] [INFO] [App] GET /api/companies/current 304 in 34ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-17T17:01:42.591Z] [INFO] [App] POST /api/fintech/check-company 200 in 63ms :: {"exists":false} 
[2025-05-17T17:01:44.218Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[FinTech Invite] Starting invitation process with payload: {
  email: '***@***.***',
  full_name: 'John Doe',
  company_name: 'DevTest57',
  sender_name: 'Evan Navarro',
  sender_company: 'Invela',
  is_demo: true
}
[FinTech Invite] Found sender company: { name: 'Invela', duration: 29 }
[FinTech Invite] Created company: { id: 315, duration: 59 }
[FinTech Invite] Created user: { id: 379, duration: 145 }
[FinTech Invite] Creating user onboarding task
[FinTech Invite] Created onboarding task: { taskId: 950, status: 'email_sent', assignedTo: 379, duration: 173 }
[FinTech Invite] Created invitation: { id: 386, code: '451FF2', duration: 208 }
[FinTech Invite] Creating company tasks with existing transaction
[Company Service] Creating new company: DevTest57 { hasExistingTransaction: true, timestamp: '2025-05-17T17:01:46.299Z' }
[Company Service] Using existing transaction for company creation
[Company Service] Using existing company record: { id: 315, name: 'DevTest57' }
[Company Service] Creating tasks with creator ID: 8
[Company Service] Creating KYB task for company: 315
[Company Service] Created KYB task: { taskId: 951, companyId: 315, duration: 32 }
[Company Service] Creating S&P KY3P Security Assessment task for company: 315
[Company Service] Created S&P KY3P Security Assessment task: { taskId: 952, companyId: 315, duration: 69 }
[Company Service] Creating Open Banking Survey task for company: 315
[Company Service] Created Open Banking Survey task: { taskId: 953, companyId: 315, duration: 98 }
[Company Service] Creating relationship with Invela for company: 315
[Company Service] Creating relationship with creator company: 1
[Company Service] Created relationships: {
  invelaRelationshipId: 418,
  creatorRelationshipId: 419,
  newCompanyId: 315,
  duration: 155
}
[2025-05-17T17:01:46.454Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":951,"status":"not_started"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501306454_kjifzbict' }
[2025-05-17T17:01:46.454Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:01:46.454Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":952,"status":"not_started"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501306454_4gxncal4f' }
[2025-05-17T17:01:46.455Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:01:46.455Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":953,"status":"not_started"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501306455_mnf15jk7c' }
[2025-05-17T17:01:46.455Z] [INFO] [App] Successfully broadcasted task_update message 
[FinTech Invite] Tasks created successfully: {
  companyId: 315,
  tasks: { kyb: 951, security: 952, card: 953, onboarding: 950 },
  duration: 364
}
[2025-05-17T17:01:46.455Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[FinTech Invite] Sending invitation email
[EmailService] Starting to send template email
[EmailService] Template type: fintech_invite
[EmailService] Recipient: 57@e.com
[EmailService] Template data (raw): {
  "recipientName": "John Doe",
  "recipientEmail": "57@e.com",
  "senderName": "Evan Navarro",
  "senderCompany": "Invela",
  "targetCompany": "DevTest57",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=451FF2&email=57%40e.com",
  "code": "451FF2"
}
[EmailService] Starting email validation for: 57@e.com
[EmailService] Checking MX records for domain: e.com
[EmailService] MX record check failed: Error: queryMx ENOTFOUND e.com
    at QueryReqWrap.onresolve [as oncomplete] (node:internal/dns/callback_resolver:45:19) {
  errno: undefined,
  code: 'ENOTFOUND',
  syscall: 'queryMx',
  hostname: 'e.com'
}
[EmailService] Continuing despite MX check failure
[EmailService] Email validation successful for: 57@e.com
[EmailService] Transforming template data
[EmailService] Starting template data transformation
[EmailService] Input template data: {
  "recipientName": "John Doe",
  "recipientEmail": "57@e.com",
  "senderName": "Evan Navarro",
  "senderCompany": "Invela",
  "targetCompany": "DevTest57",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=451FF2&email=57%40e.com",
  "code": "451FF2"
}
[EmailService] Built invite URL: https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=451FF2&email=57%40e.com
[EmailService] Transformed template data: {
  "recipientName": "John Doe",
  "recipientEmail": "57@e.com",
  "senderName": "Evan Navarro",
  "senderCompany": "Invela",
  "targetCompany": "DevTest57",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=451FF2&email=57%40e.com",
  "code": "451FF2"
}
[EmailService] Getting email template: fintech_invite
[EmailTemplate] Getting template: fintech_invite
[EmailTemplate] Template data: {
  "recipientName": "John Doe",
  "recipientEmail": "57@e.com",
  "senderName": "Evan Navarro",
  "senderCompany": "Invela",
  "targetCompany": "DevTest57",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=451FF2&email=57%40e.com",
  "code": "451FF2"
}
[Template:invitation] Received template data: {
  "recipientName": "John Doe",
  "recipientEmail": "57@e.com",
  "senderName": "Evan Navarro",
  "senderCompany": "Invela",
  "targetCompany": "DevTest57",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=451FF2&email=57%40e.com",
  "code": "451FF2",
  "inviteType": "fintech"
}
[EmailService] Template generated successfully
[EmailService] Preparing to send email with configuration: {
  from: 'EvanCNavarro@gmail.com',
  to: '57@e.com',
  subject: 'Invitation to join Invela',
  textLength: 601,
  htmlLength: 1673
}
[2025-05-17T17:01:47.230Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[EmailService] Email sent successfully to: 57@e.com
[FinTech Invite] Invitation email sent successfully
[FinTech Invite] Process completed: {
  companyId: 315,
  userId: 379,
  invitationId: 386,
  onboardingTaskId: 950,
  duration: 1548
}
[2025-05-17T17:01:47.610Z] [INFO] [App] POST /api/fintech/invite 201 in 1579ms :: {"message":"FinTech company invited successfully","company":{"id":315,"name":... 
[2025-05-17T17:01:50.218Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-17T17:01:51.925Z] [INFO] [App] POST /api/fintech/check-company 200 in 66ms :: {"exists":false} 
[2025-05-17T17:01:53.217Z] [INFO] [App] GET /api/companies/current 304 in 32ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-17T17:01:55.600Z] [INFO] [WebSocket] Received message from client client-1747500055478-12gjh1x {"module":"WebSocket","type":"ping"}
[FinTech Invite] Starting invitation process with payload: {
  email: '***@***.***',
  full_name: 'John Doe',
  company_name: 'DevTest58',
  sender_name: 'Evan Navarro',
  sender_company: 'Invela',
  is_demo: true
}
[FinTech Invite] Found sender company: { name: 'Invela', duration: 29 }
[FinTech Invite] Created company: { id: 316, duration: 58 }
[FinTech Invite] Created user: { id: 380, duration: 145 }
[FinTech Invite] Creating user onboarding task
[FinTech Invite] Created onboarding task: { taskId: 954, status: 'email_sent', assignedTo: 380, duration: 174 }
[FinTech Invite] Created invitation: { id: 387, code: 'C6D206', duration: 206 }
[FinTech Invite] Creating company tasks with existing transaction
[Company Service] Creating new company: DevTest58 { hasExistingTransaction: true, timestamp: '2025-05-17T17:01:55.992Z' }
[Company Service] Using existing transaction for company creation
[Company Service] Using existing company record: { id: 316, name: 'DevTest58' }
[Company Service] Creating tasks with creator ID: 8
[Company Service] Creating KYB task for company: 316
[Company Service] Created KYB task: { taskId: 955, companyId: 316, duration: 28 }
[Company Service] Creating S&P KY3P Security Assessment task for company: 316
[Company Service] Created S&P KY3P Security Assessment task: { taskId: 956, companyId: 316, duration: 60 }
[Company Service] Creating Open Banking Survey task for company: 316
[Company Service] Created Open Banking Survey task: { taskId: 957, companyId: 316, duration: 89 }
[Company Service] Creating relationship with Invela for company: 316
[Company Service] Creating relationship with creator company: 1
[Company Service] Created relationships: {
  invelaRelationshipId: 420,
  creatorRelationshipId: 421,
  newCompanyId: 316,
  duration: 147
}
[2025-05-17T17:01:56.139Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":955,"status":"not_started"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501316139_ezpbjjuhj' }
[2025-05-17T17:01:56.139Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:01:56.139Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":956,"status":"not_started"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501316139_ixdnsrj24' }
[2025-05-17T17:01:56.140Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:01:56.140Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":957,"status":"not_started"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501316140_n6l7ll4ko' }
[2025-05-17T17:01:56.140Z] [INFO] [App] Successfully broadcasted task_update message 
[FinTech Invite] Tasks created successfully: {
  companyId: 316,
  tasks: { kyb: 955, security: 956, card: 957, onboarding: 954 },
  duration: 354
}
[2025-05-17T17:01:56.140Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[FinTech Invite] Sending invitation email
[EmailService] Starting to send template email
[EmailService] Template type: fintech_invite
[EmailService] Recipient: 58@e.com
[EmailService] Template data (raw): {
  "recipientName": "John Doe",
  "recipientEmail": "58@e.com",
  "senderName": "Evan Navarro",
  "senderCompany": "Invela",
  "targetCompany": "DevTest58",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=C6D206&email=58%40e.com",
  "code": "C6D206"
}
[EmailService] Starting email validation for: 58@e.com
[EmailService] Checking MX records for domain: e.com
[EmailService] MX record check failed: Error: queryMx ENOTFOUND e.com
    at QueryReqWrap.onresolve [as oncomplete] (node:internal/dns/callback_resolver:45:19) {
  errno: undefined,
  code: 'ENOTFOUND',
  syscall: 'queryMx',
  hostname: 'e.com'
}
[EmailService] Continuing despite MX check failure
[EmailService] Email validation successful for: 58@e.com
[EmailService] Transforming template data
[EmailService] Starting template data transformation
[EmailService] Input template data: {
  "recipientName": "John Doe",
  "recipientEmail": "58@e.com",
  "senderName": "Evan Navarro",
  "senderCompany": "Invela",
  "targetCompany": "DevTest58",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=C6D206&email=58%40e.com",
  "code": "C6D206"
}
[EmailService] Built invite URL: https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=C6D206&email=58%40e.com
[EmailService] Transformed template data: {
  "recipientName": "John Doe",
  "recipientEmail": "58@e.com",
  "senderName": "Evan Navarro",
  "senderCompany": "Invela",
  "targetCompany": "DevTest58",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=C6D206&email=58%40e.com",
  "code": "C6D206"
}
[EmailService] Getting email template: fintech_invite
[EmailTemplate] Getting template: fintech_invite
[EmailTemplate] Template data: {
  "recipientName": "John Doe",
  "recipientEmail": "58@e.com",
  "senderName": "Evan Navarro",
  "senderCompany": "Invela",
  "targetCompany": "DevTest58",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=C6D206&email=58%40e.com",
  "code": "C6D206"
}
[Template:invitation] Received template data: {
  "recipientName": "John Doe",
  "recipientEmail": "58@e.com",
  "senderName": "Evan Navarro",
  "senderCompany": "Invela",
  "targetCompany": "DevTest58",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=C6D206&email=58%40e.com",
  "code": "C6D206",
  "inviteType": "fintech"
}
[EmailService] Template generated successfully
[EmailService] Preparing to send email with configuration: {
  from: 'EvanCNavarro@gmail.com',
  to: '58@e.com',
  subject: 'Invitation to join Invela',
  textLength: 601,
  htmlLength: 1673
}
[2025-05-17T17:01:56.214Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-17T17:01:56.634Z] [INFO] [WebSocket] Received message from client client-1747500056513-5tbk8pw {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:01:56.472Z","connectionId":"ws_1747500056456_oaqjnh1qy"}
[EmailService] Email sent successfully to: 58@e.com
[FinTech Invite] Invitation email sent successfully
[FinTech Invite] Process completed: {
  companyId: 316,
  userId: 380,
  invitationId: 387,
  onboardingTaskId: 954,
  duration: 1243
}
[2025-05-17T17:01:57.000Z] [INFO] [App] POST /api/fintech/invite 201 in 1274ms :: {"message":"FinTech company invited successfully","company":{"id":316,"name":... 
[2025-05-17T17:01:57.136Z] [INFO] [WebSocket] Received message from client client-1747500057005-e1h7lpg {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:01:56.973Z","connectionId":"ws_1747500055935_gsnobtgc3"}
[2025-05-17T17:01:58.180Z] [INFO] [WebSocket] Received message from client client-1747500058054-i5u5v3u {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:01:58.015Z","connectionId":"ws_1747500055916_rs84c6ncc"}
[2025-05-17T17:01:59.234Z] [INFO] [App] GET /api/companies/current 304 in 37ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-17T17:02:00.141Z] [INFO] [App] POST /api/fintech/check-company 200 in 69ms :: {"exists":false} 
[2025-05-17T17:02:02.224Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-17T17:02:05.225Z] [INFO] [App] GET /api/companies/current 304 in 38ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-17T17:02:08.219Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[FinTech Invite] Starting invitation process with payload: {
  email: '***@***.***',
  full_name: 'John Doe',
  company_name: 'DevTest60',
  sender_name: 'Evan Navarro',
  sender_company: 'Invela',
  is_demo: true
}
[FinTech Invite] Found sender company: { name: 'Invela', duration: 32 }
[FinTech Invite] Created company: { id: 317, duration: 70 }
[FinTech Invite] Created user: { id: 381, duration: 159 }
[FinTech Invite] Creating user onboarding task
[FinTech Invite] Created onboarding task: { taskId: 958, status: 'email_sent', assignedTo: 381, duration: 188 }
[FinTech Invite] Created invitation: { id: 388, code: '1706DA', duration: 217 }
[FinTech Invite] Creating company tasks with existing transaction
[Company Service] Creating new company: DevTest60 { hasExistingTransaction: true, timestamp: '2025-05-17T17:02:08.677Z' }
[Company Service] Using existing transaction for company creation
[Company Service] Using existing company record: { id: 317, name: 'DevTest60' }
[Company Service] Creating tasks with creator ID: 8
[Company Service] Creating KYB task for company: 317
[Company Service] Created KYB task: { taskId: 959, companyId: 317, duration: 31 }
[Company Service] Creating S&P KY3P Security Assessment task for company: 317
[Company Service] Created S&P KY3P Security Assessment task: { taskId: 960, companyId: 317, duration: 61 }
[Company Service] Creating Open Banking Survey task for company: 317
[Company Service] Created Open Banking Survey task: { taskId: 961, companyId: 317, duration: 90 }
[Company Service] Creating relationship with Invela for company: 317
[Company Service] Creating relationship with creator company: 1
[Company Service] Created relationships: {
  invelaRelationshipId: 422,
  creatorRelationshipId: 423,
  newCompanyId: 317,
  duration: 149
}
[2025-05-17T17:02:08.826Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":959,"status":"not_started"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501328826_4i8y0p0n8' }
[2025-05-17T17:02:08.827Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:02:08.827Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":960,"status":"not_started"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501328827_5fmwv8753' }
[2025-05-17T17:02:08.827Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:02:08.827Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":961,"status":"not_started"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501328827_mx5ma62lz' }
[2025-05-17T17:02:08.827Z] [INFO] [App] Successfully broadcasted task_update message 
[FinTech Invite] Tasks created successfully: {
  companyId: 317,
  tasks: { kyb: 959, security: 960, card: 961, onboarding: 958 },
  duration: 367
}
[2025-05-17T17:02:08.828Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[FinTech Invite] Sending invitation email
[EmailService] Starting to send template email
[EmailService] Template type: fintech_invite
[EmailService] Recipient: 60@e.com
[EmailService] Template data (raw): {
  "recipientName": "John Doe",
  "recipientEmail": "60@e.com",
  "senderName": "Evan Navarro",
  "senderCompany": "Invela",
  "targetCompany": "DevTest60",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=1706DA&email=60%40e.com",
  "code": "1706DA"
}
[EmailService] Starting email validation for: 60@e.com
[EmailService] Checking MX records for domain: e.com
[EmailService] MX record check failed: Error: queryMx ENOTFOUND e.com
    at QueryReqWrap.onresolve [as oncomplete] (node:internal/dns/callback_resolver:45:19) {
  errno: undefined,
  code: 'ENOTFOUND',
  syscall: 'queryMx',
  hostname: 'e.com'
}
[EmailService] Continuing despite MX check failure
[EmailService] Email validation successful for: 60@e.com
[EmailService] Transforming template data
[EmailService] Starting template data transformation
[EmailService] Input template data: {
  "recipientName": "John Doe",
  "recipientEmail": "60@e.com",
  "senderName": "Evan Navarro",
  "senderCompany": "Invela",
  "targetCompany": "DevTest60",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=1706DA&email=60%40e.com",
  "code": "1706DA"
}
[EmailService] Built invite URL: https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=1706DA&email=60%40e.com
[EmailService] Transformed template data: {
  "recipientName": "John Doe",
  "recipientEmail": "60@e.com",
  "senderName": "Evan Navarro",
  "senderCompany": "Invela",
  "targetCompany": "DevTest60",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=1706DA&email=60%40e.com",
  "code": "1706DA"
}
[EmailService] Getting email template: fintech_invite
[EmailTemplate] Getting template: fintech_invite
[EmailTemplate] Template data: {
  "recipientName": "John Doe",
  "recipientEmail": "60@e.com",
  "senderName": "Evan Navarro",
  "senderCompany": "Invela",
  "targetCompany": "DevTest60",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=1706DA&email=60%40e.com",
  "code": "1706DA"
}
[Template:invitation] Received template data: {
  "recipientName": "John Doe",
  "recipientEmail": "60@e.com",
  "senderName": "Evan Navarro",
  "senderCompany": "Invela",
  "targetCompany": "DevTest60",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=1706DA&email=60%40e.com",
  "code": "1706DA",
  "inviteType": "fintech"
}
[EmailService] Template generated successfully
[EmailService] Preparing to send email with configuration: {
  from: 'EvanCNavarro@gmail.com',
  to: '60@e.com',
  subject: 'Invitation to join Invela',
  textLength: 601,
  htmlLength: 1673
}
[EmailService] Email sent successfully to: 60@e.com
[FinTech Invite] Invitation email sent successfully
[FinTech Invite] Process completed: {
  companyId: 317,
  userId: 381,
  invitationId: 388,
  onboardingTaskId: 958,
  duration: 1293
}
[2025-05-17T17:02:09.714Z] [INFO] [App] POST /api/fintech/invite 201 in 1324ms :: {"message":"FinTech company invited successfully","company":{"id":317,"name":... 
[2025-05-17T17:02:11.227Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[Auth] Processing logout request
[Auth] Clearing user 8 from cache during logout
[Auth] Clearing company 1 from cache during logout
[Cache] Invalidating company cache for company 1
[Auth] Cache invalidation result for company 1: true
[Auth] Broadcasting cache invalidation WebSocket message
[WebSocket] Broadcast cache_invalidation to 6 clients (0 errors) { messageId: 'msg_1747501332706_jc12wwt61' }
[2025-05-17T17:02:12.706Z] [INFO] [App] Successfully broadcasted cache_invalidation message 
[Auth] Logout successful for user: 8
[Auth] Session successfully destroyed
[Auth] Unauthenticated user session
[2025-05-17T17:02:14.784Z] [INFO] [WebSocket] Client disconnected {"module":"WebSocket","clientId":"client-1747500055478-12gjh1x","code":1001,"reason":"","remainingClients":5}
[2025-05-17T17:02:14.786Z] [INFO] [WebSocket] Client disconnected {"module":"WebSocket","clientId":"client-1747500056513-5tbk8pw","code":1001,"reason":"","remainingClients":4}
[2025-05-17T17:02:14.787Z] [INFO] [WebSocket] Client disconnected {"module":"WebSocket","clientId":"client-1747500057005-e1h7lpg","code":1001,"reason":"","remainingClients":3}
[2025-05-17T17:02:14.787Z] [INFO] [WebSocket] Client disconnected {"module":"WebSocket","clientId":"client-1747500057559-9sqaeoc","code":1001,"reason":"","remainingClients":2}
[2025-05-17T17:02:14.787Z] [INFO] [WebSocket] Client disconnected {"module":"WebSocket","clientId":"client-1747500055992-vuzyfcv","code":1001,"reason":"","remainingClients":1}
[2025-05-17T17:02:14.787Z] [INFO] [WebSocket] Client disconnected {"module":"WebSocket","clientId":"client-1747500058054-i5u5v3u","code":1001,"reason":"","remainingClients":0}
[Auth] Unauthenticated user session
[2025-05-17T17:02:22.430Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747501342430-crhkwsb","clients":1}
[2025-05-17T17:02:22.547Z] [INFO] [WebSocket] Received message from client client-1747501342430-crhkwsb {"module":"WebSocket","type":"authenticate","data":{"timestamp":"2025-05-17T17:02:22.384Z"}}
[2025-05-17T17:02:22.548Z] [INFO] [WebSocket] Authentication from client client-1747501342430-crhkwsb {"module":"WebSocket","hasToken":true}
[2025-05-17T17:02:22.917Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747501342917-9d7tgr7","clients":2}
[2025-05-17T17:02:23.482Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747501343482-976h5xj","clients":3}
[2025-05-17T17:02:24.065Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747501344065-4fr9567","clients":4}
[2025-05-17T17:02:24.600Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747501344600-ot7dt59","clients":5}
[Auth] Unauthenticated user session
[2025-05-17T17:02:24.909Z] [INFO] [WebSocket] Received message from client client-1747501344600-ot7dt59 {"module":"WebSocket","type":"authenticate","userId":"374","companyId":"311","clientId":"ws_1747501342922_91rdewjgu","timestamp":"2025-05-17T17:02:24.733Z"}
[2025-05-17T17:02:24.910Z] [INFO] [WebSocket] Authentication from client client-1747501344600-ot7dt59 {"module":"WebSocket","userId":"374","companyId":"311","hasToken":true}
[Invite Debug] Starting validation for code: EB572E
[Invite Debug] Found valid invitation: {
  id: 385,
  email: '56@e.com',
  status: 'pending',
  expires_at: 2025-05-24T17:01:36.889Z
}
[2025-05-17T17:02:41.073Z] [INFO] [App] GET /api/invitations/EB572E/validate 200 in 30ms :: {"valid":true,"invitation":{"email":"56@e.com","invitee_name":"John Doe","com... 
[Account Setup] Processing setup request for: 56@e.com
[2025-05-17T17:02:44.728Z] [INFO] [WebSocket] Received message from client client-1747501344600-ot7dt59 {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:02:44.564Z","connectionId":"ws_1747501342922_91rdewjgu"}
[Account Setup] Updated user: { id: 378, email: '56@e.com', onboarding_completed: false }
[Account Setup] Updated task status: { taskId: 946, status: 'completed', progress: 100 }
[2025-05-17T17:02:44.877Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 5 clients {"module":"WebSocket","messageType":"task_updated","recipients":5,"totalClients":5,"filtered":false}
[Auth] Serializing user: 378
[Account Setup] Login successful for user ID: 378
[2025-05-17T17:02:44.995Z] [INFO] [App] POST /api/account/setup 200 in 322ms :: {"id":378,"email":"56@e.com","full_name":"John Doe","first_name":"John","last... 
[Current Company] Fetching company for user: { userId: 378, companyId: 314 }
[Current Company] Found company: {
  id: 314,
  name: 'DevTest56',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 378, company_id: 314, email: '56@e.com' }
[2025-05-17T17:02:45.248Z] [INFO] [App] Performing dynamic task unlocking check for company {"companyId":314,"userId":378}
[Current Company] Onboarding status check: {
  userId: 378,
  companyId: 314,
  userOnboardingStatus: false,
  freshFromDatabase: true,
  companyOnboardingStatus: false,
  timestamp: '2025-05-17T17:02:45.250Z'
}
[2025-05-17T17:02:45.276Z] [INFO] [App] No completed KYB tasks found, skipping security task unlock check {"companyId":314}
[Tasks] Automatically unlocking all tasks for company { userId: 378, companyId: 314, requestedBy: 'automatic_task_unlock' }
[2025-05-17T17:02:45.277Z] [INFO] [App] [TaskDependencies] Unlocking ALL tasks for company {"companyId":314}
[2025-05-17T17:02:45.279Z] [INFO] [App] GET /api/companies/current 200 in 85ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:02:45.305Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":946,"userEmail":"56@e.com","currentStatus":"completed","currentProgress":100}
[2025-05-17T17:02:45.305Z] [INFO] [App] [TaskDependencies] Found tasks to unlock {"companyId":314,"count":4,"taskIds":[947,948,949,946],"taskTypes":["company_kyb","ky3p","open_banking","user_onboarding"],"ky3pTaskCount":1,"ky3pTaskIds":[948]}
[UnifiedProgress] Starting progress update for task 947 (company_kyb) {
  taskId: 947,
  taskType: 'company_kyb',
  diagnosticId: 'prog-1747501365306-619',
  metadata: [
    'locked',
    'prerequisite_completed',
    'prerequisite_completed_at',
    'dependencyUnlockOperation',
    'previousProgress',
    'previousStatus',
    'isKy3pTask',
    'isUserOnboardingTask'
  ]
}
[2025-05-17T17:02:45.354Z] [INFO] [App] [TabTutorials] Status request for tab "dashboard" from authenticated user ID: 378 
[2025-05-17T17:02:45.354Z] [INFO] [App] [TabTutorials] Normalizing tab name from 'dashboard' to canonical form 
[2025-05-17T17:02:45.354Z] [INFO] [App] [TabTutorials] Tab name already in canonical form: 'dashboard' 
[2025-05-17T17:02:45.354Z] [INFO] [App] [TabTutorials] Checking tutorial status for tab: dashboard (raw: dashboard), user: 378 
[UnifiedProgressCalc] Calculating progress for task 947 (company_kyb)
[2025-05-17T17:02:45.384Z] [INFO] [App] [TabTutorials] No tutorial status found for dashboard for user 378 
[2025-05-17T17:02:45.414Z] [INFO] [App] GET /api/user-tab-tutorials/dashboard/status 200 in 60ms :: {"exists":false,"completed":false,"currentStep":0,"tabName":"dashboard"} 
[UnifiedProgressCalc] Task 947 (company_kyb) progress: 0/30 = 0%
[Relationships] Fetching network for company: 314
[2025-05-17T17:02:45.448Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 5 clients {"module":"WebSocket","messageType":"task_updated","recipients":5,"totalClients":5,"filtered":false}
[2025-05-17T17:02:45.448Z] [INFO] [WebSocket] Broadcast message of type 'task_update' sent to 5 clients {"module":"WebSocket","messageType":"task_update","recipients":5,"totalClients":5,"filtered":false}
[2025-05-17T17:02:45.448Z] [DEBUG] [App] [UnifiedProgressCalc] Successfully broadcast task update using unified implementation {"taskId":947,"messageId":"msg_1747501365448_5xonc0z8"}
[2025-05-17T17:02:45.448Z] [INFO] [App] [UnifiedProgressCalc] Successfully broadcast task update for task 947 {"progress":0,"status":"not_started","messageId":"msg_1747501365448_5xonc0z8"}
[2025-05-17T17:02:45.449Z] [INFO] [App] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":314,"taskId":947,"taskType":"company_kyb","isKy3pTask":false,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[2025-05-17T17:02:45.449Z] [INFO] [App] [TaskDependencies] Processing KY3P task {"taskId":948,"taskType":"ky3p","currentProgress":0,"currentStatus":"not_started","timestamp":"2025-05-17T17:02:45.449Z"}
[UnifiedProgress] Starting progress update for task 948 (ky3p) {
  taskId: 948,
  taskType: 'ky3p',
  diagnosticId: 'prog-1747501365449-284',
  metadata: [
    'locked',
    'prerequisite_completed',
    'prerequisite_completed_at',
    'dependencyUnlockOperation',
    'previousProgress',
    'previousStatus',
    'isKy3pTask',
    'isUserOnboardingTask'
  ]
}
[Relationships] Found network members: { count: 2 }
[2025-05-17T17:02:45.473Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:02:45.497Z] [INFO] [App] GET /api/relationships 200 in 61ms :: [{"id":416,"companyId":1,"relatedCompanyId":314,"relationshipType":"network_m... 
[UnifiedProgressCalc] Calculating progress for task 948 (ky3p)
[2025-05-17T17:02:45.513Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747501365513-nn19qo7","clients":6}
[KY3P Progress] Calculated progress for task 948: {
  taskId: 948,
  taskType: 'ky3p',
  normalizedTaskType: 'ky3p',
  totalFields: 120,
  completedFields: 0,
  progress: 0,
  timeStamp: '2025-05-17T17:02:45.567Z'
}
[UnifiedProgressCalc] Task 948 (ky3p) progress: 0/120 = 0%
[2025-05-17T17:02:45.598Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:02:45.598Z] [INFO] [WebSocket] Broadcast message of type 'task_update' sent to 6 clients {"module":"WebSocket","messageType":"task_update","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:02:45.598Z] [DEBUG] [App] [UnifiedProgressCalc] Successfully broadcast task update using unified implementation {"taskId":948,"messageId":"msg_1747501365598_b98r3dcz"}
[2025-05-17T17:02:45.598Z] [INFO] [App] [UnifiedProgressCalc] Successfully broadcast task update for task 948 {"progress":0,"status":"not_started","messageId":"msg_1747501365598_b98r3dcz"}
[2025-05-17T17:02:45.598Z] [INFO] [App] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":314,"taskId":948,"taskType":"ky3p","isKy3pTask":true,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[UnifiedProgress] Starting progress update for task 949 (open_banking) {
  taskId: 949,
  taskType: 'open_banking',
  diagnosticId: 'prog-1747501365599-547',
  metadata: [
    'locked',
    'prerequisite_completed',
    'prerequisite_completed_at',
    'dependencyUnlockOperation',
    'previousProgress',
    'previousStatus',
    'isKy3pTask',
    'isUserOnboardingTask'
  ]
}
[2025-05-17T17:02:45.638Z] [INFO] [WebSocket] Received message from client client-1747501365513-nn19qo7 {"module":"WebSocket","type":"authenticate","userId":null,"companyId":null,"clientId":"ws_1747501341561_eqty68de5","timestamp":"2025-05-17T17:02:45.466Z"}
[2025-05-17T17:02:45.638Z] [INFO] [WebSocket] Authentication from client client-1747501365513-nn19qo7 {"module":"WebSocket","userId":null,"companyId":null,"hasToken":true}
[UnifiedProgressCalc] Calculating progress for task 949 (open_banking)
[UnifiedProgressCalc] Task 949 (open_banking) progress: 0/44 = 0%
[2025-05-17T17:02:45.745Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:02:45.745Z] [INFO] [WebSocket] Broadcast message of type 'task_update' sent to 6 clients {"module":"WebSocket","messageType":"task_update","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:02:45.745Z] [DEBUG] [App] [UnifiedProgressCalc] Successfully broadcast task update using unified implementation {"taskId":949,"messageId":"msg_1747501365744_do7ef2f4"}
[2025-05-17T17:02:45.745Z] [INFO] [App] [UnifiedProgressCalc] Successfully broadcast task update for task 949 {"progress":0,"status":"not_started","messageId":"msg_1747501365744_do7ef2f4"}
[2025-05-17T17:02:45.745Z] [INFO] [App] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":314,"taskId":949,"taskType":"open_banking","isKy3pTask":false,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[2025-05-17T17:02:45.745Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":946,"userEmail":"56@e.com","timestamp":"2025-05-17T17:02:45.745Z"}
[2025-05-17T17:02:45.775Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":946,"status":"completed"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501365775_7h0je8tch' }
[2025-05-17T17:02:45.775Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:02:45.775Z] [INFO] [App] [TaskDependencies] Successfully unlocked all tasks {"companyId":314,"count":4}
[Tasks] Successfully unlocked all tasks for company: 314
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 378',
    condition2: 'tasks.created_by = 378',
    condition3: "tasks.company_id = 314 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('56@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
[2025-05-17T17:02:45.863Z] [INFO] [App] GET /api/tasks 200 in 615ms :: [{"id":947,"title":"1. KYB Form: DevTest56","description":"Complete KYB verif... 
[2025-05-17T17:02:48.487Z] [INFO] [App] GET /api/companies/current 304 in 34ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:02:51.478Z] [INFO] [App] GET /api/companies/current 304 in 32ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:02:52.549Z] [INFO] [WebSocket] Received message from client client-1747501342430-crhkwsb {"module":"WebSocket","type":"ping"}
[2025-05-17T17:02:53.628Z] [INFO] [WebSocket] Received message from client client-1747501343482-976h5xj {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:02:53.465Z","connectionId":"ws_1747501343463_g8eznl1w4"}
[2025-05-17T17:02:54.186Z] [INFO] [WebSocket] Received message from client client-1747501344065-4fr9567 {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:02:54.023Z","connectionId":"ws_1747501342882_t63apcmq6"}
[2025-05-17T17:02:54.478Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[Complete Onboarding] Processing request for user: { userId: 378, companyId: 314, timestamp: '2025-05-17T17:02:56.511Z' }
[Complete Onboarding] Successfully updated user record: {
  userId: 378,
  companyId: 314,
  userOnboardingStatus: true,
  elapsedMs: 56
}
[updateOnboardingTaskStatus] Error updating task status: TypeError: undefined is not a function
    at Array.find (<anonymous>)
    at updateOnboardingTaskStatus (/home/runner/workspace/server/routes.ts:3507:139)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:2864:27)
[Complete Onboarding] Successfully completed onboarding for user: { userId: 378, taskId: undefined, elapsedMs: 115 }
[Cache] Invalidating company cache for company 314
[2025-05-17T17:02:56.692Z] [INFO] [App] POST /api/users/complete-onboarding 200 in 181ms :: {"message":"Onboarding completed successfully","success":true,"user":{"id":37... 
[Company API] Updating company 314 with data: { revenue: 50000000, revenue_tier: 'large', num_employees: 625 }
[Company API] Processed update data: { revenue: 50000000, revenue_tier: 'large', num_employees: 625 }
[Company API] Successfully updated company 314
[2025-05-17T17:02:56.902Z] [INFO] [App] PATCH /api/companies/current 200 in 60ms :: {"success":true,"message":"Company updated successfully","data":{"id":314,"na... 
[Current Company] Fetching company for user: { userId: 378, companyId: 314 }
[Current Company] Found company: {
  id: 314,
  name: 'DevTest56',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
[Current Company] User onboarding status discrepancy detected: {
  userId: 378,
  sessionValue: false,
  databaseValue: true,
  timestamp: '2025-05-17T17:02:57.511Z'
}
[Current Company] Onboarding status check: {
  userId: 378,
  companyId: 314,
  userOnboardingStatus: true,
  freshFromDatabase: true,
  companyOnboardingStatus: false,
  timestamp: '2025-05-17T17:02:57.511Z'
}
[2025-05-17T17:02:57.541Z] [INFO] [App] GET /api/companies/current 200 in 88ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:03:00.486Z] [INFO] [App] GET /api/companies/current 304 in 34ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:03:01.112Z] [INFO] [App] GET /api/tasks/947 200 in 69ms :: {"id":947,"title":"1. KYB Form: DevTest56","description":"Complete KYB verifi... 
[2025-05-17T17:03:01.287Z] [INFO] [App] GET /api/companies/current 304 in 37ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[Task Templates API] Fetching template for task type: company_kyb, user: 378
[Task Templates API] Found template: 1 (KYB Form) for task type: company_kyb
[Task Templates API] Retrieved 9 configuration items for template ID: 1
[2025-05-17T17:03:02.156Z] [INFO] [App] GET /api/tasks/947 304 in 74ms :: {"id":947,"title":"1. KYB Form: DevTest56","description":"Complete KYB verifi... 
[2025-05-17T17:03:02.192Z] [INFO] [App] GET /api/task-templates/by-type/company_kyb 304 in 111ms :: {"id":1,"name":"KYB Form","description":"Know Your Business form for company ... 
[2025-05-17T17:03:02.939Z] [INFO] [App] Fetching KYB fields 
[2025-05-17T17:03:02.996Z] [INFO] [App] KYB fields retrieved successfully {"fieldCount":30,"groups":["companyProfile","financialProfile","governanceLeadership","operationsCompliance"]}
[2025-05-17T17:03:03.029Z] [INFO] [App] GET /api/kyb/fields 304 in 90ms :: [{"id":1,"field_key":"legalEntityName","display_name":"Legal Entity Name","fi... 
[KYB API Debug] Loading progress for task: 947
[Task Reconciliation] Task submission indicators: {
  taskId: 947,
  status: 'not_started',
  progress: 0,
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasFileId: false,
  submissionDate: undefined,
  isTerminalState: false,
  hasBeenSubmitted: false
}
[Task Reconciliation] Found 0 responses for task 947 (type: company_kyb)
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: false,
  timestamp: '2025-05-17T17:03:03.257Z'
}
[STATUS DETERMINATION] Task has 0% progress and no responses, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 947,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 947
[KYB API Debug] Retrieved task: {
  taskId: 947,
  status: 'not_started',
  progress: 0,
  metadata: [
    'locked',
    'company_id',
    'created_at',
    'isKy3pTask',
    'created_via',
    'status_flow',
    'company_name',
    'last_updated',
    'created_by_id',
    'progressHistory',
    'prerequisite_for'
  ],
  timestamp: '2025-05-17T17:03:03.289Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-05-17T17:03:03.333Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 947,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-05-17T17:03:03.333Z
[SERVER DEBUG] Task ID: 947, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
[2025-05-17T17:03:03.364Z] [INFO] [App] GET /api/kyb/progress/947 200 in 171ms :: {"formData":{},"progress":0,"status":"not_started"} 
[KYB API Debug] Loading progress for task: 947
[Task Reconciliation] Task submission indicators: {
  taskId: 947,
  status: 'not_started',
  progress: 0,
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasFileId: false,
  submissionDate: undefined,
  isTerminalState: false,
  hasBeenSubmitted: false
}
[Task Reconciliation] Found 0 responses for task 947 (type: company_kyb)
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: false,
  timestamp: '2025-05-17T17:03:03.585Z'
}
[STATUS DETERMINATION] Task has 0% progress and no responses, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 947,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 947
[KYB API Debug] Retrieved task: {
  taskId: 947,
  status: 'not_started',
  progress: 0,
  metadata: [
    'locked',
    'company_id',
    'created_at',
    'isKy3pTask',
    'created_via',
    'status_flow',
    'company_name',
    'last_updated',
    'created_by_id',
    'progressHistory',
    'prerequisite_for'
  ],
  timestamp: '2025-05-17T17:03:03.616Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-05-17T17:03:03.645Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 947,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-05-17T17:03:03.645Z
[SERVER DEBUG] Task ID: 947, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
[2025-05-17T17:03:03.682Z] [INFO] [App] GET /api/kyb/progress/947 304 in 164ms :: {"formData":{},"progress":0,"status":"not_started"} 
[Current Company] Using cached company data: 314
[2025-05-17T17:03:04.308Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:03:04.740Z] [INFO] [WebSocket] Received message from client client-1747501344600-ot7dt59 {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:03:04.565Z","connectionId":"ws_1747501342922_91rdewjgu"}
[2025-05-17T17:03:06.110Z] [INFO] [App] Demo auto-fill requested for KYB task (GET) {"taskId":947,"userId":378}
[2025-05-17T17:03:06.110Z] [INFO] [App] Generating demo data {"taskId":947,"formType":"kyb","userId":378}
[2025-05-17T17:03:06.253Z] [INFO] [App] Retrieved fields for demo auto-fill {"count":30}
[2025-05-17T17:03:06.253Z] [INFO] [App] Successfully generated demo data {"taskId":947,"formType":"kyb","fieldCount":30}
[2025-05-17T17:03:06.253Z] [INFO] [App] Generated demo data for KYB auto-fill using universal service {"fieldCount":30,"taskId":947}
[2025-05-17T17:03:06.283Z] [INFO] [App] GET /api/kyb/demo-autofill/947 200 in 173ms :: {"legalEntityName":"DevTest56","registrationNumber":"12-3456789","incorporati... 
[TimestampHandler] Saving 30 timestamps for task 947
[TimestampHandler] Successfully saved timestamps for task 947
[TimestampAPI] Saved 30 timestamps for task 947
[2025-05-17T17:03:07.015Z] [INFO] [App] POST /api/kyb/timestamps/947 200 in 66ms :: {"message":"Timestamps saved successfully","count":30} 
===============================================
[SERVER DEBUG] KYB PROGRESS SAVE REQUEST RECEIVED at 2025-05-17T17:03:07.170Z
===============================================
Task ID: 947
Progress: 100
Status: ready_for_submission
Field count: 30
Sample form data values:
- legalEntityName: "DevTest56" (string)
- registrationNumber: "12-3456789" (string)
- incorporationDate: "5/12/2010" (string)
- businessType: "Limited Liability Company (LLC)" (string)
- jurisdiction: "Delaware, United States" (string)
Request details:
- Method: POST
- Content-Type: application/json
- Content-Length: 2506
===============================================
===============================================
[SERVER DEBUG] PROCESSING FORM DATA FIELDS AT 2025-05-17T17:03:07.253Z
[SERVER DEBUG] Task ID: 947, Field count: 30
===============================================
[SERVER DEBUG] COMPLETE FORM DATA DUMP:
[SERVER DEBUG] legalEntityName: "DevTest56" (string)
[SERVER DEBUG] registrationNumber: "12-3456789" (string)
[SERVER DEBUG] incorporationDate: "5/12/2010" (string)
[SERVER DEBUG] businessType: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] jurisdiction: "Delaware, United States" (string)
[SERVER DEBUG] registeredAddress: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] companyPhone: "(302) 555-1234" (string)
[SERVER DEBUG] priorNames: "None" (string)
[SERVER DEBUG] licenses: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] goodStanding: "Yes" (string)
[SERVER DEBUG] corporateRegistration: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010" (string)
[SERVER DEBUG] externalAudit: "No" (string)
[SERVER DEBUG] controlEnvironment: "Yes" (string)
[SERVER DEBUG] authorizedSigners: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] governmentOwnership: "No" (string)
[SERVER DEBUG] ultimateBeneficialOwners: "None" (string)
[SERVER DEBUG] directorsAndOfficers: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] contactEmail: "56@e.com" (string)
[SERVER DEBUG] marketCapitalization: "$75 million (privately held)" (string)
[SERVER DEBUG] lifetimeCustomerValue: "$1,250" (string)
[SERVER DEBUG] annualRecurringRevenue: "5,000,000" (string)
[SERVER DEBUG] monthlyRecurringRevenue: "12,500,000" (string)
[SERVER DEBUG] investigationsIncidents: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] financialStatements: "Yes" (string)
[SERVER DEBUG] operationalPolicies: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] dataVolume: "Approximately 2 million records per month" (string)
[SERVER DEBUG] dataTypes: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] sanctionsCheck: "Approximately 2 million records per month" (string)
[SERVER DEBUG] dueDiligence: "Yes" (string)
[SERVER DEBUG] regulatoryActions: "Yes" (string)
[SERVER DEBUG] END OF FORM DATA DUMP
[SERVER DEBUG] No fields with value "asdf" found in incoming data
[SERVER DEBUG] Processing field: "legalEntityName" (ID: 1)
[SERVER DEBUG] Original value: DevTest56
[SERVER DEBUG] Normalized value: "DevTest56" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "legalEntityName"
[SERVER DEBUG] - Value: "DevTest56" (string)
[SERVER DEBUG] - Status: COMPLETE
[2025-05-17T17:03:07.308Z] [INFO] [App] GET /api/companies/current 304 in 33ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "legalEntityName":
[SERVER DEBUG] - Expected: "DevTest56"
[SERVER DEBUG] - Actual: "DevTest56"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "legalEntityName"
[SERVER DEBUG] Broadcasting legalEntityName insert via WebSocket: "DevTest56"
[WebSocket] Broadcast field_update to 6 clients (0 errors) { messageId: 'msg_1747501387341_opt8bovtl' }
[2025-05-17T17:03:07.342Z] [INFO] [App] Successfully broadcasted field_update message 
[Progress Utils] Broadcasting field update for task 947, field legalEntityName: {
  value: 'DevTest56',
  fieldId: 1,
  timestamp: '2025-05-17T17:03:07.342Z'
}
[SERVER DEBUG] --- Finished processing field "legalEntityName" ---

[SERVER DEBUG] Processing field: "registrationNumber" (ID: 2)
[SERVER DEBUG] Original value: 12-3456789
[SERVER DEBUG] Normalized value: "12-3456789" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "registrationNumber"
[SERVER DEBUG] - Value: "12-3456789" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "registrationNumber":
[SERVER DEBUG] - Expected: "12-3456789"
[SERVER DEBUG] - Actual: "12-3456789"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "registrationNumber"
[SERVER DEBUG] --- Finished processing field "registrationNumber" ---

[SERVER DEBUG] Processing field: "incorporationDate" (ID: 3)
[SERVER DEBUG] Original value: 5/12/2010
[SERVER DEBUG] Normalized value: "5/12/2010" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "incorporationDate"
[SERVER DEBUG] - Value: "5/12/2010" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "incorporationDate":
[SERVER DEBUG] - Expected: "5/12/2010"
[SERVER DEBUG] - Actual: "5/12/2010"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "incorporationDate"
[SERVER DEBUG] --- Finished processing field "incorporationDate" ---

[SERVER DEBUG] Processing field: "businessType" (ID: 4)
[SERVER DEBUG] Original value: Limited Liability Company (LLC)
[SERVER DEBUG] Normalized value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "businessType"
[SERVER DEBUG] - Value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "businessType":
[SERVER DEBUG] - Expected: "Limited Liability Company (LLC)"
[SERVER DEBUG] - Actual: "Limited Liability Company (LLC)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "businessType"
[SERVER DEBUG] --- Finished processing field "businessType" ---

[SERVER DEBUG] Processing field: "jurisdiction" (ID: 5)
[SERVER DEBUG] Original value: Delaware, United States
[SERVER DEBUG] Normalized value: "Delaware, United States" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "jurisdiction"
[SERVER DEBUG] - Value: "Delaware, United States" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "jurisdiction":
[SERVER DEBUG] - Expected: "Delaware, United States"
[SERVER DEBUG] - Actual: "Delaware, United States"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "jurisdiction"
[SERVER DEBUG] --- Finished processing field "jurisdiction" ---

[SERVER DEBUG] Processing field: "registeredAddress" (ID: 6)
[SERVER DEBUG] Original value: 123 Market Street, Wilmington, DE 19801
[SERVER DEBUG] Normalized value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "registeredAddress"
[SERVER DEBUG] - Value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "registeredAddress":
[SERVER DEBUG] - Expected: "123 Market Street, Wilmington, DE 19801"
[SERVER DEBUG] - Actual: "123 Market Street, Wilmington, DE 19801"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "registeredAddress"
[SERVER DEBUG] --- Finished processing field "registeredAddress" ---

[SERVER DEBUG] Processing field: "companyPhone" (ID: 7)
[SERVER DEBUG] Original value: (302) 555-1234
[SERVER DEBUG] Normalized value: "(302) 555-1234" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "companyPhone"
[SERVER DEBUG] - Value: "(302) 555-1234" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "companyPhone":
[SERVER DEBUG] - Expected: "(302) 555-1234"
[SERVER DEBUG] - Actual: "(302) 555-1234"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "companyPhone"
[SERVER DEBUG] --- Finished processing field "companyPhone" ---

[SERVER DEBUG] Processing field: "priorNames" (ID: 8)
[SERVER DEBUG] Original value: None
[SERVER DEBUG] Normalized value: "None" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "priorNames"
[SERVER DEBUG] - Value: "None" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "priorNames":
[SERVER DEBUG] - Expected: "None"
[SERVER DEBUG] - Actual: "None"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "priorNames"
[SERVER DEBUG] --- Finished processing field "priorNames" ---

[SERVER DEBUG] Processing field: "licenses" (ID: 9)
[SERVER DEBUG] Original value: Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765
[SERVER DEBUG] Normalized value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "licenses"
[SERVER DEBUG] - Value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "licenses":
[SERVER DEBUG] - Expected: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] - Actual: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "licenses"
[SERVER DEBUG] --- Finished processing field "licenses" ---

[SERVER DEBUG] Processing field: "goodStanding" (ID: 10)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "goodStanding"
[SERVER DEBUG] - Value: "Yes" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "goodStanding":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "goodStanding"
[SERVER DEBUG] --- Finished processing field "goodStanding" ---

[SERVER DEBUG] Processing field: "corporateRegistration" (ID: 11)
[SERVER DEBUG] Original value: Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010
[SERVER DEBUG] Normalized value: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "corporateRegistration"
[SERVER DEBUG] - Value: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "corporateRegistration":
[SERVER DEBUG] - Expected: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010"
[SERVER DEBUG] - Actual: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "corporateRegistration"
[SERVER DEBUG] --- Finished processing field "corporateRegistration" ---

[SERVER DEBUG] Processing field: "externalAudit" (ID: 12)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "externalAudit"
[SERVER DEBUG] - Value: "No" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "externalAudit":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "externalAudit"
[SERVER DEBUG] --- Finished processing field "externalAudit" ---

[SERVER DEBUG] Processing field: "controlEnvironment" (ID: 13)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "controlEnvironment"
[SERVER DEBUG] - Value: "Yes" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "controlEnvironment":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "controlEnvironment"
[SERVER DEBUG] --- Finished processing field "controlEnvironment" ---

[SERVER DEBUG] Processing field: "authorizedSigners" (ID: 14)
[SERVER DEBUG] Original value: John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)
[SERVER DEBUG] Normalized value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "authorizedSigners"
[SERVER DEBUG] - Value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "authorizedSigners":
[SERVER DEBUG] - Expected: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] - Actual: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "authorizedSigners"
[SERVER DEBUG] --- Finished processing field "authorizedSigners" ---

[SERVER DEBUG] Processing field: "governmentOwnership" (ID: 15)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "governmentOwnership"
[SERVER DEBUG] - Value: "No" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "governmentOwnership":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "governmentOwnership"
[SERVER DEBUG] --- Finished processing field "governmentOwnership" ---

[SERVER DEBUG] Processing field: "ultimateBeneficialOwners" (ID: 16)
[SERVER DEBUG] Original value: None
[SERVER DEBUG] Normalized value: "None" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "ultimateBeneficialOwners"
[SERVER DEBUG] - Value: "None" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "ultimateBeneficialOwners":
[SERVER DEBUG] - Expected: "None"
[SERVER DEBUG] - Actual: "None"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "ultimateBeneficialOwners"
[SERVER DEBUG] --- Finished processing field "ultimateBeneficialOwners" ---

[SERVER DEBUG] Processing field: "directorsAndOfficers" (ID: 17)
[SERVER DEBUG] Original value: John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)
[SERVER DEBUG] Normalized value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "directorsAndOfficers"
[SERVER DEBUG] - Value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "directorsAndOfficers":
[SERVER DEBUG] - Expected: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] - Actual: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "directorsAndOfficers"
[SERVER DEBUG] --- Finished processing field "directorsAndOfficers" ---

[SERVER DEBUG] Processing field: "contactEmail" (ID: 18)
[SERVER DEBUG] Original value: 56@e.com
[SERVER DEBUG] Normalized value: "56@e.com" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "contactEmail"
[SERVER DEBUG] - Value: "56@e.com" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "contactEmail":
[SERVER DEBUG] - Expected: "56@e.com"
[SERVER DEBUG] - Actual: "56@e.com"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "contactEmail"
[SERVER DEBUG] --- Finished processing field "contactEmail" ---

[SERVER DEBUG] Processing field: "marketCapitalization" (ID: 19)
[SERVER DEBUG] Original value: $75 million (privately held)
[SERVER DEBUG] Normalized value: "$75 million (privately held)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "marketCapitalization"
[SERVER DEBUG] - Value: "$75 million (privately held)" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "marketCapitalization":
[SERVER DEBUG] - Expected: "$75 million (privately held)"
[SERVER DEBUG] - Actual: "$75 million (privately held)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "marketCapitalization"
[SERVER DEBUG] --- Finished processing field "marketCapitalization" ---

[SERVER DEBUG] Processing field: "lifetimeCustomerValue" (ID: 20)
[SERVER DEBUG] Original value: $1,250
[SERVER DEBUG] Normalized value: "$1,250" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "lifetimeCustomerValue"
[SERVER DEBUG] - Value: "$1,250" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "lifetimeCustomerValue":
[SERVER DEBUG] - Expected: "$1,250"
[SERVER DEBUG] - Actual: "$1,250"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "lifetimeCustomerValue"
[SERVER DEBUG] --- Finished processing field "lifetimeCustomerValue" ---

[SERVER DEBUG] Processing field: "annualRecurringRevenue" (ID: 21)
[SERVER DEBUG] Original value: 5,000,000
[SERVER DEBUG] Normalized value: "5,000,000" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "annualRecurringRevenue"
[SERVER DEBUG] - Value: "5,000,000" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "annualRecurringRevenue":
[SERVER DEBUG] - Expected: "5,000,000"
[SERVER DEBUG] - Actual: "5,000,000"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "annualRecurringRevenue"
[SERVER DEBUG] --- Finished processing field "annualRecurringRevenue" ---

[SERVER DEBUG] Processing field: "monthlyRecurringRevenue" (ID: 22)
[SERVER DEBUG] Original value: 12,500,000
[SERVER DEBUG] Normalized value: "12,500,000" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "monthlyRecurringRevenue"
[SERVER DEBUG] - Value: "12,500,000" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "monthlyRecurringRevenue":
[SERVER DEBUG] - Expected: "12,500,000"
[SERVER DEBUG] - Actual: "12,500,000"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "monthlyRecurringRevenue"
[SERVER DEBUG] --- Finished processing field "monthlyRecurringRevenue" ---

[SERVER DEBUG] Processing field: "investigationsIncidents" (ID: 23)
[SERVER DEBUG] Original value: No significant incidents in the past 3 years
[SERVER DEBUG] Normalized value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "investigationsIncidents"
[SERVER DEBUG] - Value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "investigationsIncidents":
[SERVER DEBUG] - Expected: "No significant incidents in the past 3 years"
[SERVER DEBUG] - Actual: "No significant incidents in the past 3 years"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "investigationsIncidents"
[SERVER DEBUG] --- Finished processing field "investigationsIncidents" ---

[SERVER DEBUG] Processing field: "financialStatements" (ID: 24)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "financialStatements"
[SERVER DEBUG] - Value: "Yes" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "financialStatements":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "financialStatements"
[SERVER DEBUG] --- Finished processing field "financialStatements" ---

[SERVER DEBUG] Processing field: "operationalPolicies" (ID: 25)
[SERVER DEBUG] Original value: ISO 27001 certified, SOC 2 Type II compliant
[SERVER DEBUG] Normalized value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "operationalPolicies"
[SERVER DEBUG] - Value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "operationalPolicies":
[SERVER DEBUG] - Expected: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] - Actual: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "operationalPolicies"
[SERVER DEBUG] --- Finished processing field "operationalPolicies" ---

[SERVER DEBUG] Processing field: "dataVolume" (ID: 26)
[SERVER DEBUG] Original value: Approximately 2 million records per month
[SERVER DEBUG] Normalized value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "dataVolume"
[SERVER DEBUG] - Value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "dataVolume":
[SERVER DEBUG] - Expected: "Approximately 2 million records per month"
[SERVER DEBUG] - Actual: "Approximately 2 million records per month"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "dataVolume"
[SERVER DEBUG] --- Finished processing field "dataVolume" ---

[SERVER DEBUG] Processing field: "dataTypes" (ID: 27)
[SERVER DEBUG] Original value: Financial transaction data, Account balances, Customer KYC information
[SERVER DEBUG] Normalized value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "dataTypes"
[SERVER DEBUG] - Value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "dataTypes":
[SERVER DEBUG] - Expected: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] - Actual: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "dataTypes"
[SERVER DEBUG] --- Finished processing field "dataTypes" ---

[SERVER DEBUG] Processing field: "sanctionsCheck" (ID: 28)
[SERVER DEBUG] Original value: Approximately 2 million records per month
[SERVER DEBUG] Normalized value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "sanctionsCheck"
[SERVER DEBUG] - Value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "sanctionsCheck":
[SERVER DEBUG] - Expected: "Approximately 2 million records per month"
[SERVER DEBUG] - Actual: "Approximately 2 million records per month"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "sanctionsCheck"
[SERVER DEBUG] --- Finished processing field "sanctionsCheck" ---

[SERVER DEBUG] Processing field: "dueDiligence" (ID: 29)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "dueDiligence"
[SERVER DEBUG] - Value: "Yes" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "dueDiligence":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "dueDiligence"
[SERVER DEBUG] --- Finished processing field "dueDiligence" ---

[SERVER DEBUG] Processing field: "regulatoryActions" (ID: 30)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "regulatoryActions"
[SERVER DEBUG] - Value: "Yes" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "regulatoryActions":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "regulatoryActions"
[SERVER DEBUG] --- Finished processing field "regulatoryActions" ---

[KYB API Debug] Using client-provided status: ready_for_submission
[WebSocket] Broadcasting task update for task 947: progress=100, status=ready_for_submission
[Progress Broadcast broadcast-1747501390082-39] Broadcasting progress update for task 947: {
  taskId: 947,
  progress: 100,
  status: 'ready_for_submission',
  timestamp: '2025-05-17T17:03:10.082Z',
  source: 'at <anonymous> (/home/runner/workspace/server/routes/kyb.ts:1202:7)',
  hasMetadata: true
}
[Progress Utils] Broadcasting task progress update: {
  taskId: 947,
  progress: 100,
  requestedStatus: 'ready_for_submission',
  finalStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  timestamp: '2025-05-17T17:03:10.082Z'
}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501390083_6mc3w39xf' }
[2025-05-17T17:03:10.083Z] [INFO] [App] Successfully broadcasted task_update message 
[Progress Broadcast broadcast-1747501390082-39] Successfully broadcast progress update for task 947
===============================================
[SERVER DEBUG] PREPARING RESPONSE at 2025-05-17T17:03:10.112Z
[SERVER DEBUG] Found 30 fields in database after update
===============================================
[SERVER DEBUG] Checking field corporateRegistration in updated data: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010"
[SERVER DEBUG] Checking field goodStanding in updated data: "Yes"
[SERVER DEBUG] Checking field regulatoryActions in updated data: "Yes"
[SERVER DEBUG] Checking field investigationsIncidents in updated data: "No significant incidents in the past 3 years"
[SERVER DEBUG] No fields with value "asdf" found in response data
[SERVER DEBUG] Sending response with 30 fields, status: ready_for_submission, progress: 100%
[KYB API] ℹ️ Form has reached ready_for_submission status but File Vault tab will only unlock after formal submission
[SERVER DEBUG] Updating task.savedFormData to ensure persistence across navigation
[SERVER DEBUG] ✅ Successfully updated task.savedFormData with latest form data
===============================================
[2025-05-17T17:03:10.183Z] [INFO] [App] POST /api/kyb/progress 200 in 3013ms :: {"success":true,"savedData":{"progress":100,"status":"ready_for_submission","... 
[2025-05-17T17:03:10.304Z] [INFO] [App] GET /api/companies/current 304 in 34ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[TimestampHandler] Saving 30 timestamps for task 947
[TimestampHandler] Successfully saved timestamps for task 947
[TimestampAPI] Saved 30 timestamps for task 947
[2025-05-17T17:03:10.907Z] [INFO] [App] POST /api/kyb/timestamps/947 200 in 65ms :: {"message":"Timestamps saved successfully","count":30} 
===============================================
[SERVER DEBUG] KYB PROGRESS SAVE REQUEST RECEIVED at 2025-05-17T17:03:11.058Z
===============================================
Task ID: 947
Progress: 100
Status: ready_for_submission
Field count: 30
Sample form data values:
- legalEntityName: "DevTest56" (string)
- registrationNumber: "12-3456789" (string)
- incorporationDate: "5/12/2010" (string)
- businessType: "Limited Liability Company (LLC)" (string)
- jurisdiction: "Delaware, United States" (string)
Request details:
- Method: POST
- Content-Type: application/json
- Content-Length: 2506
===============================================
===============================================
[SERVER DEBUG] PROCESSING FORM DATA FIELDS AT 2025-05-17T17:03:11.142Z
[SERVER DEBUG] Task ID: 947, Field count: 30
===============================================
[SERVER DEBUG] COMPLETE FORM DATA DUMP:
[SERVER DEBUG] legalEntityName: "DevTest56" (string)
[SERVER DEBUG] registrationNumber: "12-3456789" (string)
[SERVER DEBUG] incorporationDate: "5/12/2010" (string)
[SERVER DEBUG] businessType: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] jurisdiction: "Delaware, United States" (string)
[SERVER DEBUG] registeredAddress: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] companyPhone: "(302) 555-1234" (string)
[SERVER DEBUG] priorNames: "None" (string)
[SERVER DEBUG] licenses: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] goodStanding: "Yes" (string)
[SERVER DEBUG] corporateRegistration: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010" (string)
[SERVER DEBUG] externalAudit: "No" (string)
[SERVER DEBUG] controlEnvironment: "Yes" (string)
[SERVER DEBUG] authorizedSigners: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] governmentOwnership: "No" (string)
[SERVER DEBUG] ultimateBeneficialOwners: "None" (string)
[SERVER DEBUG] directorsAndOfficers: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] contactEmail: "56@e.com" (string)
[SERVER DEBUG] marketCapitalization: "$75 million (privately held)" (string)
[SERVER DEBUG] lifetimeCustomerValue: "$1,250" (string)
[SERVER DEBUG] annualRecurringRevenue: "5,000,000" (string)
[SERVER DEBUG] monthlyRecurringRevenue: "12,500,000" (string)
[SERVER DEBUG] investigationsIncidents: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] financialStatements: "Yes" (string)
[SERVER DEBUG] operationalPolicies: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] dataVolume: "Approximately 2 million records per month" (string)
[SERVER DEBUG] dataTypes: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] sanctionsCheck: "Approximately 2 million records per month" (string)
[SERVER DEBUG] dueDiligence: "Yes" (string)
[SERVER DEBUG] regulatoryActions: "Yes" (string)
[SERVER DEBUG] END OF FORM DATA DUMP
[SERVER DEBUG] No fields with value "asdf" found in incoming data
[SERVER DEBUG] Processing field: "legalEntityName" (ID: 1)
[SERVER DEBUG] Original value: DevTest56
[SERVER DEBUG] Normalized value: "DevTest56" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "legalEntityName" in database
[SERVER DEBUG] - Old value: "DevTest56" (string)
[SERVER DEBUG] - New value: "DevTest56" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: legalEntityName
[SERVER DEBUG] - field_id: 1
[SERVER DEBUG] - response_value: "DevTest56"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "legalEntityName":
[SERVER DEBUG] - Expected: "DevTest56"
[SERVER DEBUG] - Actual: "DevTest56"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "legalEntityName" (ID: 7927)
[SERVER DEBUG] Broadcasting legalEntityName update via WebSocket: "DevTest56"
[WebSocket] Broadcast field_update to 6 clients (0 errors) { messageId: 'msg_1747501391228_di8vd6w9d' }
[2025-05-17T17:03:11.229Z] [INFO] [App] Successfully broadcasted field_update message 
[Progress Utils] Broadcasting field update for task 947, field legalEntityName: {
  value: 'DevTest56',
  fieldId: 1,
  timestamp: '2025-05-17T17:03:11.229Z'
}
[SERVER DEBUG] --- Finished processing field "legalEntityName" ---

[SERVER DEBUG] Processing field: "registrationNumber" (ID: 2)
[SERVER DEBUG] Original value: 12-3456789
[SERVER DEBUG] Normalized value: "12-3456789" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "registrationNumber" in database
[SERVER DEBUG] - Old value: "12-3456789" (string)
[SERVER DEBUG] - New value: "12-3456789" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: registrationNumber
[SERVER DEBUG] - field_id: 2
[SERVER DEBUG] - response_value: "12-3456789"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "registrationNumber":
[SERVER DEBUG] - Expected: "12-3456789"
[SERVER DEBUG] - Actual: "12-3456789"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "registrationNumber" (ID: 7928)
[SERVER DEBUG] --- Finished processing field "registrationNumber" ---

[SERVER DEBUG] Processing field: "incorporationDate" (ID: 3)
[SERVER DEBUG] Original value: 5/12/2010
[SERVER DEBUG] Normalized value: "5/12/2010" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "incorporationDate" in database
[SERVER DEBUG] - Old value: "5/12/2010" (string)
[SERVER DEBUG] - New value: "5/12/2010" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: incorporationDate
[SERVER DEBUG] - field_id: 3
[SERVER DEBUG] - response_value: "5/12/2010"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "incorporationDate":
[SERVER DEBUG] - Expected: "5/12/2010"
[SERVER DEBUG] - Actual: "5/12/2010"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "incorporationDate" (ID: 7929)
[SERVER DEBUG] --- Finished processing field "incorporationDate" ---

[SERVER DEBUG] Processing field: "businessType" (ID: 4)
[SERVER DEBUG] Original value: Limited Liability Company (LLC)
[SERVER DEBUG] Normalized value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "businessType" in database
[SERVER DEBUG] - Old value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] - New value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: businessType
[SERVER DEBUG] - field_id: 4
[SERVER DEBUG] - response_value: "Limited Liability Company (LLC)"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "businessType":
[SERVER DEBUG] - Expected: "Limited Liability Company (LLC)"
[SERVER DEBUG] - Actual: "Limited Liability Company (LLC)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "businessType" (ID: 7930)
[SERVER DEBUG] --- Finished processing field "businessType" ---

[SERVER DEBUG] Processing field: "jurisdiction" (ID: 5)
[SERVER DEBUG] Original value: Delaware, United States
[SERVER DEBUG] Normalized value: "Delaware, United States" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "jurisdiction" in database
[SERVER DEBUG] - Old value: "Delaware, United States" (string)
[SERVER DEBUG] - New value: "Delaware, United States" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: jurisdiction
[SERVER DEBUG] - field_id: 5
[SERVER DEBUG] - response_value: "Delaware, United States"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "jurisdiction":
[SERVER DEBUG] - Expected: "Delaware, United States"
[SERVER DEBUG] - Actual: "Delaware, United States"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "jurisdiction" (ID: 7931)
[SERVER DEBUG] --- Finished processing field "jurisdiction" ---

[SERVER DEBUG] Processing field: "registeredAddress" (ID: 6)
[SERVER DEBUG] Original value: 123 Market Street, Wilmington, DE 19801
[SERVER DEBUG] Normalized value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "registeredAddress" in database
[SERVER DEBUG] - Old value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] - New value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: registeredAddress
[SERVER DEBUG] - field_id: 6
[SERVER DEBUG] - response_value: "123 Market Street, Wilmington, DE 19801"
[TransactionalFormRoutes] 📬 FORM SUBMISSION START - 2025-05-17T17:03:11.630Z {
  path: '/submit/kyb/947',
  method: 'POST',
  params: { formType: 'kyb', taskId: '947' },
  userPresent: true,
  userIdPresent: true,
  bodyKeys: [ 'taskId', 'formType', 'formData', 'companyId' ],
  timestamp: '2025-05-17T17:03:11.630Z'
}
[TransactionalFormRoutes] 🧾 Form submission parameters validated: {
  taskId: 947,
  formType: 'kyb',
  companyId: 314,
  userId: 378,
  formDataFields: 4
}
[2025-05-17T17:03:11.630Z] [INFO] [App] Received form submission request {"taskId":947,"formType":"kyb","userId":378,"companyId":314,"dataKeysCount":4}
[WebSocket] Broadcast form_submission to 6 clients (0 errors) { messageId: 'msg_1747501391631_ntti00e6h' }
[2025-05-17T17:03:11.631Z] [INFO] [App] Successfully broadcasted form_submission message 
[2025-05-17T17:03:11.631Z] [INFO] [App] Starting transactional form submission {"taskId":947,"userId":378,"companyId":314,"formType":"kyb","fieldsCount":4}
[2025-05-17T17:03:11.631Z] [INFO] [App] Starting form submission transaction {"taskId":947,"userId":378,"companyId":314,"formType":"kyb","transactionId":"tx-1747501391631-xbscl","logContext":{"service":"TransactionalFormHandler"}}
[2025-05-17T17:03:11.631Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:03:11.632Z] [INFO] [WebSocket] Broadcast message of type 'task_update' sent to 6 clients {"module":"WebSocket","messageType":"task_update","recipients":6,"totalClients":6,"filtered":false}
[FormNotifications] Sent in-progress notification for kyb task 947 (25%)
[2025-05-17T17:03:11.632Z] [DEBUG] [TransactionManager] Starting new transaction {"module":"TransactionManager"}
[2025-05-17T17:03:11.659Z] [DEBUG] [TransactionManager] Transaction started successfully {"module":"TransactionManager"}
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "registeredAddress":
[SERVER DEBUG] - Expected: "123 Market Street, Wilmington, DE 19801"
[SERVER DEBUG] - Actual: "123 Market Street, Wilmington, DE 19801"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "registeredAddress" (ID: 7932)
[SERVER DEBUG] --- Finished processing field "registeredAddress" ---

[SERVER DEBUG] Processing field: "companyPhone" (ID: 7)
[SERVER DEBUG] Original value: (302) 555-1234
[SERVER DEBUG] Normalized value: "(302) 555-1234" (string)
[SERVER DEBUG] Field status: COMPLETE
[TransactionalFormHandler] Starting file creation for task 947 {
  taskId: 947,
  formType: 'kyb',
  companyId: 314,
  userId: 378,
  formDataKeys: 4,
  timestamp: '2025-05-17T17:03:11.688Z'
}
[2025-05-17T17:03:11.688Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:03:11.689Z] [INFO] [WebSocket] Broadcast message of type 'task_update' sent to 6 clients {"module":"WebSocket","messageType":"task_update","recipients":6,"totalClients":6,"filtered":false}
[FormNotifications] Sent in-progress notification for kyb task 947 (50%)
[2025-05-17T17:03:11.689Z] [INFO] [App] Creating file for kyb task 947 {"taskId":947,"normalizedFormType":"kyb"}
[2025-05-17T17:03:11.691Z] [INFO] [App] GET /api/tasks/947 200 in 59ms :: {"id":947,"title":"1. KYB Form: DevTest56","description":"Complete KYB verifi... 
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "companyPhone" in database
[SERVER DEBUG] - Old value: "(302) 555-1234" (string)
[SERVER DEBUG] - New value: "(302) 555-1234" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: companyPhone
[SERVER DEBUG] - field_id: 7
[SERVER DEBUG] - response_value: "(302) 555-1234"
[FileCreation] Retrieved 30 KYB responses for task 947 ordered by UI form order
[2025-05-17T17:03:11.717Z] [INFO] [App] [FileCreation] Filtering responses with status 'complete' (case-insensitive) {"taskId":947,"formType":"kyb","totalResponses":30,"completeResponses":30,"timestamp":"2025-05-17T17:03:11.717Z"}
[2025-05-17T17:03:11.717Z] [INFO] [App] Response status distribution: {"COMPLETE":30} {"taskId":947}
[2025-05-17T17:03:11.718Z] [INFO] [App] Building CSV from 30 complete responses {"taskId":947}
[2025-05-17T17:03:11.718Z] [INFO] [App] Created 30 data rows from database responses {"taskId":947}
[2025-05-17T17:03:11.718Z] [INFO] [App] Created CSV with 30 rows (form fields only, no metadata rows) {"taskId":947}
[FileCreation] Created standard CSV file with 30 data rows for task 947
[FileCreation] CSV file created with 30 fields: {
  rowCount: 31,
  headerRow: [ 'id', 'question', 'response', 'field_key', 'timestamp' ],
  contentLength: 4089
}
[FileCreation] Created CSV file for task 947
[FileCreation] Creating file with metadata for task 947: {
  taskId: 947,
  formType: 'kyb',
  fileName: 'kyb_947_314_v1.0_20250517170311.csv',
  metadataFields: [
    'taskId',
    'taskType',
    'submissionDate',
    'formType',
    'formSubmission',
    'fieldCount',
    'fileName',
    'version',
    'jsonBackup'
  ]
}
[2025-05-17T17:03:11.718Z] [INFO] [App] Creating file: kyb_947_314_v1.0_20250517170311.csv {"companyId":314,"userId":378,"fileType":"text/csv","fileSize":4089}
[FileCreation] Creating file for company 314 by user 378 {
  fileName: 'kyb_947_314_v1.0_20250517170311.csv',
  fileType: 'text/csv',
  fileSize: 4089,
  timestamp: '2025-05-17T17:03:11.718Z'
}
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "companyPhone":
[SERVER DEBUG] - Expected: "(302) 555-1234"
[SERVER DEBUG] - Actual: "(302) 555-1234"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "companyPhone" (ID: 7933)
[SERVER DEBUG] --- Finished processing field "companyPhone" ---

[SERVER DEBUG] Processing field: "priorNames" (ID: 8)
[SERVER DEBUG] Original value: None
[SERVER DEBUG] Normalized value: "None" (string)
[SERVER DEBUG] Field status: COMPLETE
[2025-05-17T17:03:11.753Z] [INFO] [App] File created successfully {"fileId":964,"fileName":"kyb_947_314_v1.0_20250517170311.csv","companyId":314}
[TransactionalFormHandler] File creation result for task 947: {
  success: true,
  fileId: 964,
  fileName: 'kyb_947_314_v1.0_20250517170311.csv',
  error: undefined,
  timestamp: '2025-05-17T17:03:11.754Z'
}
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "priorNames" in database
[SERVER DEBUG] - Old value: "None" (string)
[SERVER DEBUG] - New value: "None" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: priorNames
[SERVER DEBUG] - field_id: 8
[SERVER DEBUG] - response_value: "None"
[FileCreation] ✅ File 964 created for task 947 and linked to file vault
[TransactionalFormHandler] Updating task 947 status to 'submitted' with 100% progress
[2025-05-17T17:03:11.823Z] [INFO] [App] [TransactionalFormHandler] Starting task status update to 'submitted' for task 947 {"taskId":947,"formType":"kyb","companyId":314,"transactionId":"tx-1747501391823-rucb9"}
[TransactionalFormHandler] 🔴 TASK UPDATE START for task 947: {
  taskType: 'kyb',
  companyId: 314,
  submissionDate: '2025-05-17T17:03:11.823Z',
  timestamp: '2025-05-17T17:03:11.823Z',
  traceId: 'task_update_947_1747501391823',
  thread: 'main_transaction'
}
[TransactionalFormHandler] 📊 PRE-UPDATE TASK STATE for task 947: {
  originalStatus: 'submitted',
  originalProgress: 100,
  hasRows: true,
  timestamp: '2025-05-17T17:03:11.858Z'
}
[2025-05-17T17:03:11.859Z] [INFO] [App] [TransactionalFormHandler] Pre-update task state: {"taskId":947,"status":"submitted","progress":100,"timestamp":"2025-05-17T17:03:11.859Z"}
[TransactionalFormHandler] 🔄 EXECUTING SQL UPDATE for task 947...
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "priorNames":
[SERVER DEBUG] - Expected: "None"
[SERVER DEBUG] - Actual: "None"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "priorNames" (ID: 7934)
[SERVER DEBUG] --- Finished processing field "priorNames" ---

[SERVER DEBUG] Processing field: "licenses" (ID: 9)
[SERVER DEBUG] Original value: Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765
[SERVER DEBUG] Normalized value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "licenses" in database
[SERVER DEBUG] - Old value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] - New value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: licenses
[SERVER DEBUG] - field_id: 9
[SERVER DEBUG] - response_value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[TransactionalFormHandler] ✅ SQL UPDATE RESULT for task 947: {
  success: true,
  rowCount: 1,
  updatedStatus: 'submitted',
  updatedProgress: 100,
  hasMetadata: true,
  returnedRowCount: 1,
  timestamp: '2025-05-17T17:03:11.898Z'
}
[TransactionalFormHandler] 🔍 VERIFICATION QUERY RESULT for task 947: {
  verifiedStatus: 'submitted',
  verifiedProgress: 100,
  submitted: true,
  submissionDate: '2025-05-17T17:03:11.823Z',
  hasRows: true,
  timestamp: '2025-05-17T17:03:11.926Z'
}
[2025-05-17T17:03:11.927Z] [INFO] [App] [TransactionalFormHandler] Task status update result: {"taskId":947,"formType":"kyb","rowCount":1,"success":true,"returnedStatus":"submitted","returnedProgress":100,"hasMetadata":true,"submissionDate":"2025-05-17T17:03:11.823Z","timestamp":"2025-05-17T17:03:11.927Z"}
[TransactionalFormHandler] ✅ Successfully updated task 947 status: {
  updatedStatus: 'submitted',
  updatedProgress: 100,
  timestamp: '2025-05-17T17:03:11.927Z'
}
[2025-05-17T17:03:11.927Z] [INFO] [App] [TabAccess] Unlocking tabs for form submission {"companyId":314,"formType":"kyb"}
[2025-05-17T17:03:11.927Z] [INFO] [App] [TabAccess] Adding tabs to company {"companyId":314,"tabs":["file-vault"],"source":"form_submission"}
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "licenses":
[SERVER DEBUG] - Expected: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] - Actual: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "licenses" (ID: 7935)
[SERVER DEBUG] --- Finished processing field "licenses" ---

[SERVER DEBUG] Processing field: "goodStanding" (ID: 10)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[2025-05-17T17:03:11.988Z] [ERROR] [App] WebSocket server not available, cannot broadcast company_tabs_updated message 
[2025-05-17T17:03:11.988Z] [DEBUG] [App] [TabAccess] Broadcast company tabs update via WebSocket {"companyId":314,"availableTabs":["task-center","file-vault"],"source":"form_submission"}
[2025-05-17T17:03:11.988Z] [INFO] [App] [TabAccess] Successfully added tabs to company {"companyId":314,"addedTabs":["file-vault"],"allTabs":["task-center","file-vault"],"source":"form_submission"}
[TransactionalFormHandler] Broadcasting form submission for task 947: {
  formType: 'kyb',
  taskId: 947,
  companyId: 314,
  hasFileId: true,
  hasUnlockedTabs: true,
  timestamp: '2025-05-17T17:03:11.989Z'
}
[2025-05-17T17:03:11.989Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:03:11.989Z] [INFO] [WebSocket] Broadcast message of type 'task_update' sent to 6 clients {"module":"WebSocket","messageType":"task_update","recipients":6,"totalClients":6,"filtered":false}
[FormNotifications] Sent in-progress notification for kyb task 947 (90%)
[TransactionalFormHandler] Sending FINAL completion message for task 947: {
  formType: 'kyb',
  taskId: 947,
  companyId: 314,
  hasCompletedActions: 3,
  timestamp: '2025-05-17T17:03:11.989Z'
}
[2025-05-17T17:03:11.990Z] [INFO] [WebSocket] Broadcast message of type 'form_submission_completed' sent to 6 clients {"module":"WebSocket","messageType":"form_submission_completed","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:03:11.990Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:03:11.990Z] [INFO] [WebSocket] Broadcast message of type 'task_update' sent to 6 clients {"module":"WebSocket","messageType":"task_update","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:03:11.990Z] [DEBUG] [TransactionManager] Committing transaction {"module":"TransactionManager"}
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "goodStanding" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: goodStanding
[SERVER DEBUG] - field_id: 10
[SERVER DEBUG] - response_value: "Yes"
[2025-05-17T17:03:12.022Z] [DEBUG] [TransactionManager] Transaction committed successfully {"module":"TransactionManager"}
[2025-05-17T17:03:12.022Z] [INFO] [App] Sending form submission completion event {"taskId":947,"formType":"kyb","companyId":314,"fileId":964,"actionCount":2,"timestamp":"2025-05-17T17:03:12.022Z"}
[2025-05-17T17:03:12.022Z] [INFO] [WebSocket] Broadcast message of type 'form_submission_completed' sent to 6 clients {"module":"WebSocket","messageType":"form_submission_completed","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:03:12.022Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:03:12.023Z] [INFO] [WebSocket] Broadcast message of type 'task_update' sent to 6 clients {"module":"WebSocket","messageType":"task_update","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:03:12.052Z] [INFO] [App] POST /api/forms-tx/submit/kyb/947 200 in 422ms :: {"success":true,"message":"Form submitted successfully","fileId":964} 
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "goodStanding":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "goodStanding" (ID: 7936)
[SERVER DEBUG] --- Finished processing field "goodStanding" ---

[SERVER DEBUG] Processing field: "corporateRegistration" (ID: 11)
[SERVER DEBUG] Original value: Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010
[SERVER DEBUG] Normalized value: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "corporateRegistration" in database
[SERVER DEBUG] - Old value: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010" (string)
[SERVER DEBUG] - New value: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: corporateRegistration
[SERVER DEBUG] - field_id: 11
[SERVER DEBUG] - response_value: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "corporateRegistration":
[SERVER DEBUG] - Expected: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010"
[SERVER DEBUG] - Actual: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "corporateRegistration" (ID: 7937)
[SERVER DEBUG] --- Finished processing field "corporateRegistration" ---

[SERVER DEBUG] Processing field: "externalAudit" (ID: 12)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "externalAudit" in database
[SERVER DEBUG] - Old value: "No" (string)
[SERVER DEBUG] - New value: "No" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: externalAudit
[SERVER DEBUG] - field_id: 12
[SERVER DEBUG] - response_value: "No"
[2025-05-17T17:03:12.201Z] [INFO] [App] GET /api/tasks 304 in 30ms :: [{"id":947,"title":"1. KYB Form: DevTest56","description":"Complete KYB verif... 
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "externalAudit":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "externalAudit" (ID: 7938)
[SERVER DEBUG] --- Finished processing field "externalAudit" ---

[SERVER DEBUG] Processing field: "controlEnvironment" (ID: 13)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "controlEnvironment" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: controlEnvironment
[SERVER DEBUG] - field_id: 13
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "controlEnvironment":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "controlEnvironment" (ID: 7939)
[SERVER DEBUG] --- Finished processing field "controlEnvironment" ---

[SERVER DEBUG] Processing field: "authorizedSigners" (ID: 14)
[SERVER DEBUG] Original value: John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)
[SERVER DEBUG] Normalized value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "authorizedSigners" in database
[SERVER DEBUG] - Old value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] - New value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: authorizedSigners
[SERVER DEBUG] - field_id: 14
[SERVER DEBUG] - response_value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[2025-05-17T17:03:12.386Z] [INFO] [App] GET /api/tasks 304 in 31ms :: [{"id":947,"title":"1. KYB Form: DevTest56","description":"Complete KYB verif... 
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "authorizedSigners":
[SERVER DEBUG] - Expected: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] - Actual: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "authorizedSigners" (ID: 7940)
[SERVER DEBUG] --- Finished processing field "authorizedSigners" ---

[SERVER DEBUG] Processing field: "governmentOwnership" (ID: 15)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "governmentOwnership" in database
[SERVER DEBUG] - Old value: "No" (string)
[SERVER DEBUG] - New value: "No" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: governmentOwnership
[SERVER DEBUG] - field_id: 15
[SERVER DEBUG] - response_value: "No"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "governmentOwnership":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "governmentOwnership" (ID: 7941)
[SERVER DEBUG] --- Finished processing field "governmentOwnership" ---

[SERVER DEBUG] Processing field: "ultimateBeneficialOwners" (ID: 16)
[SERVER DEBUG] Original value: None
[SERVER DEBUG] Normalized value: "None" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "ultimateBeneficialOwners" in database
[SERVER DEBUG] - Old value: "None" (string)
[SERVER DEBUG] - New value: "None" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: ultimateBeneficialOwners
[SERVER DEBUG] - field_id: 16
[SERVER DEBUG] - response_value: "None"
[Tasks] Using cached task data for user: 378
[2025-05-17T17:03:12.564Z] [INFO] [App] GET /api/tasks 304 in 31ms :: [{"id":947,"title":"1. KYB Form: DevTest56","description":"Complete KYB verif... 
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "ultimateBeneficialOwners":
[SERVER DEBUG] - Expected: "None"
[SERVER DEBUG] - Actual: "None"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "ultimateBeneficialOwners" (ID: 7942)
[SERVER DEBUG] --- Finished processing field "ultimateBeneficialOwners" ---

[SERVER DEBUG] Processing field: "directorsAndOfficers" (ID: 17)
[SERVER DEBUG] Original value: John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)
[SERVER DEBUG] Normalized value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "directorsAndOfficers" in database
[SERVER DEBUG] - Old value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] - New value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: directorsAndOfficers
[SERVER DEBUG] - field_id: 17
[SERVER DEBUG] - response_value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "directorsAndOfficers":
[SERVER DEBUG] - Expected: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] - Actual: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "directorsAndOfficers" (ID: 7943)
[SERVER DEBUG] --- Finished processing field "directorsAndOfficers" ---

[SERVER DEBUG] Processing field: "contactEmail" (ID: 18)
[SERVER DEBUG] Original value: 56@e.com
[SERVER DEBUG] Normalized value: "56@e.com" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "contactEmail" in database
[SERVER DEBUG] - Old value: "56@e.com" (string)
[SERVER DEBUG] - New value: "56@e.com" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: contactEmail
[SERVER DEBUG] - field_id: 18
[SERVER DEBUG] - response_value: "56@e.com"
[2025-05-17T17:03:12.744Z] [INFO] [App] GET /api/tasks 304 in 33ms :: [{"id":947,"title":"1. KYB Form: DevTest56","description":"Complete KYB verif... 
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "contactEmail":
[SERVER DEBUG] - Expected: "56@e.com"
[SERVER DEBUG] - Actual: "56@e.com"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "contactEmail" (ID: 7944)
[SERVER DEBUG] --- Finished processing field "contactEmail" ---

[SERVER DEBUG] Processing field: "marketCapitalization" (ID: 19)
[SERVER DEBUG] Original value: $75 million (privately held)
[SERVER DEBUG] Normalized value: "$75 million (privately held)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "marketCapitalization" in database
[SERVER DEBUG] - Old value: "$75 million (privately held)" (string)
[SERVER DEBUG] - New value: "$75 million (privately held)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: marketCapitalization
[SERVER DEBUG] - field_id: 19
[SERVER DEBUG] - response_value: "$75 million (privately held)"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "marketCapitalization":
[SERVER DEBUG] - Expected: "$75 million (privately held)"
[SERVER DEBUG] - Actual: "$75 million (privately held)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "marketCapitalization" (ID: 7945)
[SERVER DEBUG] --- Finished processing field "marketCapitalization" ---

[SERVER DEBUG] Processing field: "lifetimeCustomerValue" (ID: 20)
[SERVER DEBUG] Original value: $1,250
[SERVER DEBUG] Normalized value: "$1,250" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "lifetimeCustomerValue" in database
[SERVER DEBUG] - Old value: "$1,250" (string)
[SERVER DEBUG] - New value: "$1,250" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: lifetimeCustomerValue
[SERVER DEBUG] - field_id: 20
[SERVER DEBUG] - response_value: "$1,250"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "lifetimeCustomerValue":
[SERVER DEBUG] - Expected: "$1,250"
[SERVER DEBUG] - Actual: "$1,250"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "lifetimeCustomerValue" (ID: 7946)
[SERVER DEBUG] --- Finished processing field "lifetimeCustomerValue" ---

[SERVER DEBUG] Processing field: "annualRecurringRevenue" (ID: 21)
[SERVER DEBUG] Original value: 5,000,000
[SERVER DEBUG] Normalized value: "5,000,000" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "annualRecurringRevenue" in database
[SERVER DEBUG] - Old value: "5,000,000" (string)
[SERVER DEBUG] - New value: "5,000,000" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: annualRecurringRevenue
[SERVER DEBUG] - field_id: 21
[SERVER DEBUG] - response_value: "5,000,000"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "annualRecurringRevenue":
[SERVER DEBUG] - Expected: "5,000,000"
[SERVER DEBUG] - Actual: "5,000,000"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "annualRecurringRevenue" (ID: 7947)
[SERVER DEBUG] --- Finished processing field "annualRecurringRevenue" ---

[SERVER DEBUG] Processing field: "monthlyRecurringRevenue" (ID: 22)
[SERVER DEBUG] Original value: 12,500,000
[SERVER DEBUG] Normalized value: "12,500,000" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "monthlyRecurringRevenue" in database
[SERVER DEBUG] - Old value: "12,500,000" (string)
[SERVER DEBUG] - New value: "12,500,000" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: monthlyRecurringRevenue
[SERVER DEBUG] - field_id: 22
[SERVER DEBUG] - response_value: "12,500,000"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "monthlyRecurringRevenue":
[SERVER DEBUG] - Expected: "12,500,000"
[SERVER DEBUG] - Actual: "12,500,000"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "monthlyRecurringRevenue" (ID: 7948)
[SERVER DEBUG] --- Finished processing field "monthlyRecurringRevenue" ---

[SERVER DEBUG] Processing field: "investigationsIncidents" (ID: 23)
[SERVER DEBUG] Original value: No significant incidents in the past 3 years
[SERVER DEBUG] Normalized value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "investigationsIncidents" in database
[SERVER DEBUG] - Old value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] - New value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: investigationsIncidents
[SERVER DEBUG] - field_id: 23
[SERVER DEBUG] - response_value: "No significant incidents in the past 3 years"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "investigationsIncidents":
[SERVER DEBUG] - Expected: "No significant incidents in the past 3 years"
[SERVER DEBUG] - Actual: "No significant incidents in the past 3 years"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "investigationsIncidents" (ID: 7949)
[SERVER DEBUG] --- Finished processing field "investigationsIncidents" ---

[SERVER DEBUG] Processing field: "financialStatements" (ID: 24)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "financialStatements" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: financialStatements
[SERVER DEBUG] - field_id: 24
[SERVER DEBUG] - response_value: "Yes"
[2025-05-17T17:03:13.301Z] [INFO] [App] GET /api/companies/current 304 in 34ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "financialStatements":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "financialStatements" (ID: 7950)
[SERVER DEBUG] --- Finished processing field "financialStatements" ---

[SERVER DEBUG] Processing field: "operationalPolicies" (ID: 25)
[SERVER DEBUG] Original value: ISO 27001 certified, SOC 2 Type II compliant
[SERVER DEBUG] Normalized value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "operationalPolicies" in database
[SERVER DEBUG] - Old value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] - New value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: operationalPolicies
[SERVER DEBUG] - field_id: 25
[SERVER DEBUG] - response_value: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "operationalPolicies":
[SERVER DEBUG] - Expected: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] - Actual: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "operationalPolicies" (ID: 7951)
[SERVER DEBUG] --- Finished processing field "operationalPolicies" ---

[SERVER DEBUG] Processing field: "dataVolume" (ID: 26)
[SERVER DEBUG] Original value: Approximately 2 million records per month
[SERVER DEBUG] Normalized value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "dataVolume" in database
[SERVER DEBUG] - Old value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - New value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: dataVolume
[SERVER DEBUG] - field_id: 26
[SERVER DEBUG] - response_value: "Approximately 2 million records per month"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "dataVolume":
[SERVER DEBUG] - Expected: "Approximately 2 million records per month"
[SERVER DEBUG] - Actual: "Approximately 2 million records per month"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "dataVolume" (ID: 7952)
[SERVER DEBUG] --- Finished processing field "dataVolume" ---

[SERVER DEBUG] Processing field: "dataTypes" (ID: 27)
[SERVER DEBUG] Original value: Financial transaction data, Account balances, Customer KYC information
[SERVER DEBUG] Normalized value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "dataTypes" in database
[SERVER DEBUG] - Old value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] - New value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: dataTypes
[SERVER DEBUG] - field_id: 27
[SERVER DEBUG] - response_value: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "dataTypes":
[SERVER DEBUG] - Expected: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] - Actual: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "dataTypes" (ID: 7953)
[SERVER DEBUG] --- Finished processing field "dataTypes" ---

[SERVER DEBUG] Processing field: "sanctionsCheck" (ID: 28)
[SERVER DEBUG] Original value: Approximately 2 million records per month
[SERVER DEBUG] Normalized value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "sanctionsCheck" in database
[SERVER DEBUG] - Old value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - New value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: sanctionsCheck
[SERVER DEBUG] - field_id: 28
[SERVER DEBUG] - response_value: "Approximately 2 million records per month"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "sanctionsCheck":
[SERVER DEBUG] - Expected: "Approximately 2 million records per month"
[SERVER DEBUG] - Actual: "Approximately 2 million records per month"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "sanctionsCheck" (ID: 7954)
[SERVER DEBUG] --- Finished processing field "sanctionsCheck" ---

[SERVER DEBUG] Processing field: "dueDiligence" (ID: 29)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "dueDiligence" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: dueDiligence
[SERVER DEBUG] - field_id: 29
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "dueDiligence":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "dueDiligence" (ID: 7955)
[SERVER DEBUG] --- Finished processing field "dueDiligence" ---

[SERVER DEBUG] Processing field: "regulatoryActions" (ID: 30)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "regulatoryActions" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: regulatoryActions
[SERVER DEBUG] - field_id: 30
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "regulatoryActions":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "regulatoryActions" (ID: 7956)
[SERVER DEBUG] --- Finished processing field "regulatoryActions" ---

[KYB API Debug] Using client-provided status: ready_for_submission
[WebSocket] Broadcasting task update for task 947: progress=100, status=ready_for_submission
[Progress Broadcast broadcast-1747501393961-546] Broadcasting progress update for task 947: {
  taskId: 947,
  progress: 100,
  status: 'ready_for_submission',
  timestamp: '2025-05-17T17:03:13.961Z',
  source: 'at <anonymous> (/home/runner/workspace/server/routes/kyb.ts:1202:7)',
  hasMetadata: true
}
[Progress Utils] Broadcasting task progress update: {
  taskId: 947,
  progress: 100,
  requestedStatus: 'ready_for_submission',
  finalStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  timestamp: '2025-05-17T17:03:13.961Z'
}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501393961_094jst546' }
[2025-05-17T17:03:13.962Z] [INFO] [App] Successfully broadcasted task_update message 
[Progress Broadcast broadcast-1747501393961-546] Successfully broadcast progress update for task 947
===============================================
[SERVER DEBUG] PREPARING RESPONSE at 2025-05-17T17:03:13.997Z
[SERVER DEBUG] Found 30 fields in database after update
===============================================
[SERVER DEBUG] Checking field corporateRegistration in updated data: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010"
[SERVER DEBUG] Checking field goodStanding in updated data: "Yes"
[SERVER DEBUG] Checking field regulatoryActions in updated data: "Yes"
[SERVER DEBUG] Checking field investigationsIncidents in updated data: "No significant incidents in the past 3 years"
[SERVER DEBUG] No fields with value "asdf" found in response data
[SERVER DEBUG] Sending response with 30 fields, status: ready_for_submission, progress: 100%
[KYB API] ℹ️ Form has reached ready_for_submission status but File Vault tab will only unlock after formal submission
[SERVER DEBUG] Updating task.savedFormData to ensure persistence across navigation
[SERVER DEBUG] ✅ Successfully updated task.savedFormData with latest form data
===============================================
[2025-05-17T17:03:14.057Z] [INFO] [App] POST /api/kyb/progress 200 in 2999ms :: {"success":true,"savedData":{"progress":100,"status":"ready_for_submission","... 
[TimestampHandler] Saving 30 timestamps for task 947
[TimestampHandler] Successfully saved timestamps for task 947
[TimestampAPI] Saved 30 timestamps for task 947
[2025-05-17T17:03:14.779Z] [INFO] [App] POST /api/kyb/timestamps/947 200 in 60ms :: {"message":"Timestamps saved successfully","count":30} 
===============================================
[SERVER DEBUG] KYB PROGRESS SAVE REQUEST RECEIVED at 2025-05-17T17:03:14.926Z
===============================================
Task ID: 947
Progress: 100
Status: ready_for_submission
Field count: 30
Sample form data values:
- legalEntityName: "DevTest56" (string)
- registrationNumber: "12-3456789" (string)
- incorporationDate: "5/12/2010" (string)
- businessType: "Limited Liability Company (LLC)" (string)
- jurisdiction: "Delaware, United States" (string)
Request details:
- Method: POST
- Content-Type: application/json
- Content-Length: 2506
===============================================
===============================================
[SERVER DEBUG] PROCESSING FORM DATA FIELDS AT 2025-05-17T17:03:15.009Z
[SERVER DEBUG] Task ID: 947, Field count: 30
===============================================
[SERVER DEBUG] COMPLETE FORM DATA DUMP:
[SERVER DEBUG] legalEntityName: "DevTest56" (string)
[SERVER DEBUG] registrationNumber: "12-3456789" (string)
[SERVER DEBUG] incorporationDate: "5/12/2010" (string)
[SERVER DEBUG] businessType: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] jurisdiction: "Delaware, United States" (string)
[SERVER DEBUG] registeredAddress: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] companyPhone: "(302) 555-1234" (string)
[SERVER DEBUG] priorNames: "None" (string)
[SERVER DEBUG] licenses: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] goodStanding: "Yes" (string)
[SERVER DEBUG] corporateRegistration: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010" (string)
[SERVER DEBUG] externalAudit: "No" (string)
[SERVER DEBUG] controlEnvironment: "Yes" (string)
[SERVER DEBUG] authorizedSigners: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] governmentOwnership: "No" (string)
[SERVER DEBUG] ultimateBeneficialOwners: "None" (string)
[SERVER DEBUG] directorsAndOfficers: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] contactEmail: "56@e.com" (string)
[SERVER DEBUG] marketCapitalization: "$75 million (privately held)" (string)
[SERVER DEBUG] lifetimeCustomerValue: "$1,250" (string)
[SERVER DEBUG] annualRecurringRevenue: "5,000,000" (string)
[SERVER DEBUG] monthlyRecurringRevenue: "12,500,000" (string)
[SERVER DEBUG] investigationsIncidents: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] financialStatements: "Yes" (string)
[SERVER DEBUG] operationalPolicies: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] dataVolume: "Approximately 2 million records per month" (string)
[SERVER DEBUG] dataTypes: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] sanctionsCheck: "Approximately 2 million records per month" (string)
[SERVER DEBUG] dueDiligence: "Yes" (string)
[SERVER DEBUG] regulatoryActions: "Yes" (string)
[SERVER DEBUG] END OF FORM DATA DUMP
[SERVER DEBUG] No fields with value "asdf" found in incoming data
[SERVER DEBUG] Processing field: "legalEntityName" (ID: 1)
[SERVER DEBUG] Original value: DevTest56
[SERVER DEBUG] Normalized value: "DevTest56" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "legalEntityName" in database
[SERVER DEBUG] - Old value: "DevTest56" (string)
[SERVER DEBUG] - New value: "DevTest56" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: legalEntityName
[SERVER DEBUG] - field_id: 1
[SERVER DEBUG] - response_value: "DevTest56"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "legalEntityName":
[SERVER DEBUG] - Expected: "DevTest56"
[SERVER DEBUG] - Actual: "DevTest56"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "legalEntityName" (ID: 7927)
[SERVER DEBUG] Broadcasting legalEntityName update via WebSocket: "DevTest56"
[WebSocket] Broadcast field_update to 6 clients (0 errors) { messageId: 'msg_1747501395118_wue1t7hch' }
[2025-05-17T17:03:15.119Z] [INFO] [App] Successfully broadcasted field_update message 
[Progress Utils] Broadcasting field update for task 947, field legalEntityName: {
  value: 'DevTest56',
  fieldId: 1,
  timestamp: '2025-05-17T17:03:15.119Z'
}
[SERVER DEBUG] --- Finished processing field "legalEntityName" ---

[SERVER DEBUG] Processing field: "registrationNumber" (ID: 2)
[SERVER DEBUG] Original value: 12-3456789
[SERVER DEBUG] Normalized value: "12-3456789" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "registrationNumber" in database
[SERVER DEBUG] - Old value: "12-3456789" (string)
[SERVER DEBUG] - New value: "12-3456789" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: registrationNumber
[SERVER DEBUG] - field_id: 2
[SERVER DEBUG] - response_value: "12-3456789"
[Tasks Routes] Updating task progress: { taskId: 947, timestamp: '2025-05-17T17:03:15.193Z' }
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "registrationNumber":
[SERVER DEBUG] - Expected: "12-3456789"
[SERVER DEBUG] - Actual: "12-3456789"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "registrationNumber" (ID: 7928)
[SERVER DEBUG] --- Finished processing field "registrationNumber" ---

[SERVER DEBUG] Processing field: "incorporationDate" (ID: 3)
[SERVER DEBUG] Original value: 5/12/2010
[SERVER DEBUG] Normalized value: "5/12/2010" (string)
[SERVER DEBUG] Field status: COMPLETE
[Task Reconciliation] Task submission indicators: {
  taskId: 947,
  status: 'ready_for_submission',
  progress: 100,
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasFileId: false,
  submissionDate: undefined,
  isTerminalState: false,
  hasBeenSubmitted: false
}
[2025-05-17T17:03:15.237Z] [INFO] [App] GET /api/companies/current 304 in 37ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "incorporationDate" in database
[SERVER DEBUG] - Old value: "5/12/2010" (string)
[SERVER DEBUG] - New value: "5/12/2010" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: incorporationDate
[SERVER DEBUG] - field_id: 3
[SERVER DEBUG] - response_value: "5/12/2010"
[Task Reconciliation] Found 30 responses for task 947 (type: company_kyb)
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: true,
  effectiveHasResponses: true,
  timestamp: '2025-05-17T17:03:15.258Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[Task Reconciliation] Progress calculation: {
  taskId: 947,
  currentProgress: 100,
  calculatedProgress: 100,
  currentStatus: 'ready_for_submission',
  calculatedStatus: 'ready_for_submission',
  responseCount: 30,
  completeCount: 30
}
[Task Reconciliation] Correcting task 947: {
  progressFrom: 100,
  progressTo: 100,
  statusFrom: 'ready_for_submission',
  statusTo: 'ready_for_submission',
  forceUpdate: true
}
[Progress Broadcast broadcast-1747501395297-486] Broadcasting progress update for task 947: {
  taskId: 947,
  progress: 100,
  status: 'ready_for_submission',
  timestamp: '2025-05-17T17:03:15.297Z',
  source: 'at reconcileTaskProgress (/home/runner/workspace/server/utils/task-reconciliation.ts:504:7)',
  hasMetadata: true
}
[Progress Utils] Broadcasting task progress update: {
  taskId: 947,
  progress: 100,
  requestedStatus: 'ready_for_submission',
  finalStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  timestamp: '2025-05-17T17:03:15.297Z'
}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501395297_iq7icynxg' }
[2025-05-17T17:03:15.297Z] [INFO] [App] Successfully broadcasted task_update message 
[Progress Broadcast broadcast-1747501395297-486] Successfully broadcast progress update for task 947
[Tasks Routes] Task progress reconciled: {
  taskId: 947,
  progress: 100,
  status: 'ready_for_submission',
  timestamp: '2025-05-17T17:03:15.331Z'
}
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "incorporationDate":
[SERVER DEBUG] - Expected: "5/12/2010"
[SERVER DEBUG] - Actual: "5/12/2010"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "incorporationDate" (ID: 7929)
[SERVER DEBUG] --- Finished processing field "incorporationDate" ---

[SERVER DEBUG] Processing field: "businessType" (ID: 4)
[SERVER DEBUG] Original value: Limited Liability Company (LLC)
[SERVER DEBUG] Normalized value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "businessType" in database
[SERVER DEBUG] - Old value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] - New value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: businessType
[SERVER DEBUG] - field_id: 4
[SERVER DEBUG] - response_value: "Limited Liability Company (LLC)"
[2025-05-17T17:03:15.365Z] [INFO] [App] POST /api/tasks/947/update-progress 200 in 172ms :: {"success":true,"progress":100,"status":"ready_for_submission","taskId":947} 
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 378, company_id: 314, email: '56@e.com' }
[2025-05-17T17:03:15.422Z] [INFO] [App] Performing dynamic task unlocking check for company {"companyId":314,"userId":378}
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "businessType":
[SERVER DEBUG] - Expected: "Limited Liability Company (LLC)"
[SERVER DEBUG] - Actual: "Limited Liability Company (LLC)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "businessType" (ID: 7930)
[SERVER DEBUG] --- Finished processing field "businessType" ---

[SERVER DEBUG] Processing field: "jurisdiction" (ID: 5)
[SERVER DEBUG] Original value: Delaware, United States
[SERVER DEBUG] Normalized value: "Delaware, United States" (string)
[SERVER DEBUG] Field status: COMPLETE
[2025-05-17T17:03:15.457Z] [INFO] [App] No completed KYB tasks found, skipping security task unlock check {"companyId":314}
[Tasks] Automatically unlocking all tasks for company { userId: 378, companyId: 314, requestedBy: 'automatic_task_unlock' }
[2025-05-17T17:03:15.458Z] [INFO] [App] [TaskDependencies] Unlocking ALL tasks for company {"companyId":314}
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "jurisdiction" in database
[SERVER DEBUG] - Old value: "Delaware, United States" (string)
[SERVER DEBUG] - New value: "Delaware, United States" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: jurisdiction
[SERVER DEBUG] - field_id: 5
[SERVER DEBUG] - response_value: "Delaware, United States"
[2025-05-17T17:03:15.491Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":946,"userEmail":"56@e.com","currentStatus":"completed","currentProgress":100}
[TaskDependencies] Skipping task 947 with submission indicators {
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasFileId: false,
  status: 'ready_for_submission',
  progress: 100,
  isReadyForSubmission: true
}
[2025-05-17T17:03:15.491Z] [INFO] [App] [TaskDependencies] Found tasks to unlock {"companyId":314,"count":3,"taskIds":[948,949,946],"taskTypes":["ky3p","open_banking","user_onboarding"],"ky3pTaskCount":1,"ky3pTaskIds":[948]}
[2025-05-17T17:03:15.491Z] [INFO] [App] [TaskDependencies] Processing KY3P task {"taskId":948,"taskType":"ky3p","currentProgress":0,"currentStatus":"not_started","timestamp":"2025-05-17T17:03:15.491Z"}
[UnifiedProgress] Starting progress update for task 948 (ky3p) {
  taskId: 948,
  taskType: 'ky3p',
  diagnosticId: 'prog-1747501395492-568',
  metadata: [
    'locked',
    'prerequisite_completed',
    'prerequisite_completed_at',
    'dependencyUnlockOperation',
    'previousProgress',
    'previousStatus',
    'isKy3pTask',
    'isUserOnboardingTask'
  ]
}
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "jurisdiction":
[SERVER DEBUG] - Expected: "Delaware, United States"
[SERVER DEBUG] - Actual: "Delaware, United States"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "jurisdiction" (ID: 7931)
[SERVER DEBUG] --- Finished processing field "jurisdiction" ---

[SERVER DEBUG] Processing field: "registeredAddress" (ID: 6)
[SERVER DEBUG] Original value: 123 Market Street, Wilmington, DE 19801
[SERVER DEBUG] Normalized value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] Field status: COMPLETE
[UnifiedProgressCalc] Calculating progress for task 948 (ky3p)
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "registeredAddress" in database
[SERVER DEBUG] - Old value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] - New value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: registeredAddress
[SERVER DEBUG] - field_id: 6
[SERVER DEBUG] - response_value: "123 Market Street, Wilmington, DE 19801"
[KY3P Progress] Calculated progress for task 948: {
  taskId: 948,
  taskType: 'ky3p',
  normalizedTaskType: 'ky3p',
  totalFields: 120,
  completedFields: 0,
  progress: 0,
  timeStamp: '2025-05-17T17:03:15.615Z'
}
[UnifiedProgressCalc] Task 948 (ky3p) progress: 0/120 = 0%
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "registeredAddress":
[SERVER DEBUG] - Expected: "123 Market Street, Wilmington, DE 19801"
[SERVER DEBUG] - Actual: "123 Market Street, Wilmington, DE 19801"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "registeredAddress" (ID: 7932)
[SERVER DEBUG] --- Finished processing field "registeredAddress" ---

[SERVER DEBUG] Processing field: "companyPhone" (ID: 7)
[SERVER DEBUG] Original value: (302) 555-1234
[SERVER DEBUG] Normalized value: "(302) 555-1234" (string)
[SERVER DEBUG] Field status: COMPLETE
[2025-05-17T17:03:15.648Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:03:15.648Z] [INFO] [WebSocket] Broadcast message of type 'task_update' sent to 6 clients {"module":"WebSocket","messageType":"task_update","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:03:15.649Z] [DEBUG] [App] [UnifiedProgressCalc] Successfully broadcast task update using unified implementation {"taskId":948,"messageId":"msg_1747501395648_qau3cqzq"}
[2025-05-17T17:03:15.649Z] [INFO] [App] [UnifiedProgressCalc] Successfully broadcast task update for task 948 {"progress":0,"status":"not_started","messageId":"msg_1747501395648_qau3cqzq"}
[2025-05-17T17:03:15.649Z] [INFO] [App] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":314,"taskId":948,"taskType":"ky3p","isKy3pTask":true,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "companyPhone" in database
[SERVER DEBUG] - Old value: "(302) 555-1234" (string)
[SERVER DEBUG] - New value: "(302) 555-1234" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: companyPhone
[SERVER DEBUG] - field_id: 7
[SERVER DEBUG] - response_value: "(302) 555-1234"
[UnifiedProgress] Starting progress update for task 949 (open_banking) {
  taskId: 949,
  taskType: 'open_banking',
  diagnosticId: 'prog-1747501395650-408',
  metadata: [
    'locked',
    'prerequisite_completed',
    'prerequisite_completed_at',
    'dependencyUnlockOperation',
    'previousProgress',
    'previousStatus',
    'isKy3pTask',
    'isUserOnboardingTask'
  ]
}
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "companyPhone":
[SERVER DEBUG] - Expected: "(302) 555-1234"
[SERVER DEBUG] - Actual: "(302) 555-1234"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "companyPhone" (ID: 7933)
[SERVER DEBUG] --- Finished processing field "companyPhone" ---

[SERVER DEBUG] Processing field: "priorNames" (ID: 8)
[SERVER DEBUG] Original value: None
[SERVER DEBUG] Normalized value: "None" (string)
[SERVER DEBUG] Field status: COMPLETE
[UnifiedProgressCalc] Calculating progress for task 949 (open_banking)
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "priorNames" in database
[SERVER DEBUG] - Old value: "None" (string)
[SERVER DEBUG] - New value: "None" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: priorNames
[SERVER DEBUG] - field_id: 8
[SERVER DEBUG] - response_value: "None"
[UnifiedProgressCalc] Task 949 (open_banking) progress: 0/44 = 0%
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "priorNames":
[SERVER DEBUG] - Expected: "None"
[SERVER DEBUG] - Actual: "None"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "priorNames" (ID: 7934)
[SERVER DEBUG] --- Finished processing field "priorNames" ---

[SERVER DEBUG] Processing field: "licenses" (ID: 9)
[SERVER DEBUG] Original value: Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765
[SERVER DEBUG] Normalized value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] Field status: COMPLETE
[2025-05-17T17:03:15.809Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:03:15.809Z] [INFO] [WebSocket] Broadcast message of type 'task_update' sent to 6 clients {"module":"WebSocket","messageType":"task_update","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:03:15.809Z] [DEBUG] [App] [UnifiedProgressCalc] Successfully broadcast task update using unified implementation {"taskId":949,"messageId":"msg_1747501395809_pqk7nr0u"}
[2025-05-17T17:03:15.809Z] [INFO] [App] [UnifiedProgressCalc] Successfully broadcast task update for task 949 {"progress":0,"status":"not_started","messageId":"msg_1747501395809_pqk7nr0u"}
[2025-05-17T17:03:15.809Z] [INFO] [App] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":314,"taskId":949,"taskType":"open_banking","isKy3pTask":false,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[2025-05-17T17:03:15.809Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":946,"userEmail":"56@e.com","timestamp":"2025-05-17T17:03:15.809Z"}
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "licenses" in database
[SERVER DEBUG] - Old value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] - New value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: licenses
[SERVER DEBUG] - field_id: 9
[SERVER DEBUG] - response_value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[2025-05-17T17:03:15.842Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":946,"status":"completed"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501395842_47xctr7rc' }
[2025-05-17T17:03:15.842Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:03:15.842Z] [INFO] [App] [TaskDependencies] Successfully unlocked all tasks {"companyId":314,"count":3}
[Tasks] Successfully unlocked all tasks for company: 314
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 378',
    condition2: 'tasks.created_by = 378',
    condition3: "tasks.company_id = 314 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('56@e.com')"
  }
}
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "licenses":
[SERVER DEBUG] - Expected: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] - Actual: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "licenses" (ID: 7935)
[SERVER DEBUG] --- Finished processing field "licenses" ---

[SERVER DEBUG] Processing field: "goodStanding" (ID: 10)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[Tasks] Tasks found: { count: 4 }
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "goodStanding" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: goodStanding
[SERVER DEBUG] - field_id: 10
[SERVER DEBUG] - response_value: "Yes"
[2025-05-17T17:03:15.947Z] [INFO] [App] GET /api/tasks 200 in 525ms :: [{"id":948,"title":"2. S&P KY3P Security Assessment: DevTest56","description"... 
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "goodStanding":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "goodStanding" (ID: 7936)
[SERVER DEBUG] --- Finished processing field "goodStanding" ---

[SERVER DEBUG] Processing field: "corporateRegistration" (ID: 11)
[SERVER DEBUG] Original value: Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010
[SERVER DEBUG] Normalized value: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "corporateRegistration" in database
[SERVER DEBUG] - Old value: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010" (string)
[SERVER DEBUG] - New value: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: corporateRegistration
[SERVER DEBUG] - field_id: 11
[SERVER DEBUG] - response_value: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "corporateRegistration":
[SERVER DEBUG] - Expected: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010"
[SERVER DEBUG] - Actual: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "corporateRegistration" (ID: 7937)
[SERVER DEBUG] --- Finished processing field "corporateRegistration" ---

[SERVER DEBUG] Processing field: "externalAudit" (ID: 12)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "externalAudit" in database
[SERVER DEBUG] - Old value: "No" (string)
[SERVER DEBUG] - New value: "No" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: externalAudit
[SERVER DEBUG] - field_id: 12
[SERVER DEBUG] - response_value: "No"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "externalAudit":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "externalAudit" (ID: 7938)
[SERVER DEBUG] --- Finished processing field "externalAudit" ---

[SERVER DEBUG] Processing field: "controlEnvironment" (ID: 13)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "controlEnvironment" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: controlEnvironment
[SERVER DEBUG] - field_id: 13
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "controlEnvironment":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "controlEnvironment" (ID: 7939)
[SERVER DEBUG] --- Finished processing field "controlEnvironment" ---

[SERVER DEBUG] Processing field: "authorizedSigners" (ID: 14)
[SERVER DEBUG] Original value: John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)
[SERVER DEBUG] Normalized value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "authorizedSigners" in database
[SERVER DEBUG] - Old value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] - New value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: authorizedSigners
[SERVER DEBUG] - field_id: 14
[SERVER DEBUG] - response_value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "authorizedSigners":
[SERVER DEBUG] - Expected: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] - Actual: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "authorizedSigners" (ID: 7940)
[SERVER DEBUG] --- Finished processing field "authorizedSigners" ---

[SERVER DEBUG] Processing field: "governmentOwnership" (ID: 15)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "governmentOwnership" in database
[SERVER DEBUG] - Old value: "No" (string)
[SERVER DEBUG] - New value: "No" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: governmentOwnership
[SERVER DEBUG] - field_id: 15
[SERVER DEBUG] - response_value: "No"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "governmentOwnership":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "governmentOwnership" (ID: 7941)
[SERVER DEBUG] --- Finished processing field "governmentOwnership" ---

[SERVER DEBUG] Processing field: "ultimateBeneficialOwners" (ID: 16)
[SERVER DEBUG] Original value: None
[SERVER DEBUG] Normalized value: "None" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "ultimateBeneficialOwners" in database
[SERVER DEBUG] - Old value: "None" (string)
[SERVER DEBUG] - New value: "None" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: ultimateBeneficialOwners
[SERVER DEBUG] - field_id: 16
[SERVER DEBUG] - response_value: "None"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "ultimateBeneficialOwners":
[SERVER DEBUG] - Expected: "None"
[SERVER DEBUG] - Actual: "None"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "ultimateBeneficialOwners" (ID: 7942)
[SERVER DEBUG] --- Finished processing field "ultimateBeneficialOwners" ---

[SERVER DEBUG] Processing field: "directorsAndOfficers" (ID: 17)
[SERVER DEBUG] Original value: John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)
[SERVER DEBUG] Normalized value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "directorsAndOfficers" in database
[SERVER DEBUG] - Old value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] - New value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: directorsAndOfficers
[SERVER DEBUG] - field_id: 17
[SERVER DEBUG] - response_value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "directorsAndOfficers":
[SERVER DEBUG] - Expected: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] - Actual: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "directorsAndOfficers" (ID: 7943)
[SERVER DEBUG] --- Finished processing field "directorsAndOfficers" ---

[SERVER DEBUG] Processing field: "contactEmail" (ID: 18)
[SERVER DEBUG] Original value: 56@e.com
[SERVER DEBUG] Normalized value: "56@e.com" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "contactEmail" in database
[SERVER DEBUG] - Old value: "56@e.com" (string)
[SERVER DEBUG] - New value: "56@e.com" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: contactEmail
[SERVER DEBUG] - field_id: 18
[SERVER DEBUG] - response_value: "56@e.com"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "contactEmail":
[SERVER DEBUG] - Expected: "56@e.com"
[SERVER DEBUG] - Actual: "56@e.com"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "contactEmail" (ID: 7944)
[SERVER DEBUG] --- Finished processing field "contactEmail" ---

[SERVER DEBUG] Processing field: "marketCapitalization" (ID: 19)
[SERVER DEBUG] Original value: $75 million (privately held)
[SERVER DEBUG] Normalized value: "$75 million (privately held)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "marketCapitalization" in database
[SERVER DEBUG] - Old value: "$75 million (privately held)" (string)
[SERVER DEBUG] - New value: "$75 million (privately held)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: marketCapitalization
[SERVER DEBUG] - field_id: 19
[SERVER DEBUG] - response_value: "$75 million (privately held)"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "marketCapitalization":
[SERVER DEBUG] - Expected: "$75 million (privately held)"
[SERVER DEBUG] - Actual: "$75 million (privately held)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "marketCapitalization" (ID: 7945)
[SERVER DEBUG] --- Finished processing field "marketCapitalization" ---

[SERVER DEBUG] Processing field: "lifetimeCustomerValue" (ID: 20)
[SERVER DEBUG] Original value: $1,250
[SERVER DEBUG] Normalized value: "$1,250" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "lifetimeCustomerValue" in database
[SERVER DEBUG] - Old value: "$1,250" (string)
[SERVER DEBUG] - New value: "$1,250" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: lifetimeCustomerValue
[SERVER DEBUG] - field_id: 20
[SERVER DEBUG] - response_value: "$1,250"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "lifetimeCustomerValue":
[SERVER DEBUG] - Expected: "$1,250"
[SERVER DEBUG] - Actual: "$1,250"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "lifetimeCustomerValue" (ID: 7946)
[SERVER DEBUG] --- Finished processing field "lifetimeCustomerValue" ---

[SERVER DEBUG] Processing field: "annualRecurringRevenue" (ID: 21)
[SERVER DEBUG] Original value: 5,000,000
[SERVER DEBUG] Normalized value: "5,000,000" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "annualRecurringRevenue" in database
[SERVER DEBUG] - Old value: "5,000,000" (string)
[SERVER DEBUG] - New value: "5,000,000" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: annualRecurringRevenue
[SERVER DEBUG] - field_id: 21
[SERVER DEBUG] - response_value: "5,000,000"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "annualRecurringRevenue":
[SERVER DEBUG] - Expected: "5,000,000"
[SERVER DEBUG] - Actual: "5,000,000"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "annualRecurringRevenue" (ID: 7947)
[SERVER DEBUG] --- Finished processing field "annualRecurringRevenue" ---

[SERVER DEBUG] Processing field: "monthlyRecurringRevenue" (ID: 22)
[SERVER DEBUG] Original value: 12,500,000
[SERVER DEBUG] Normalized value: "12,500,000" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "monthlyRecurringRevenue" in database
[SERVER DEBUG] - Old value: "12,500,000" (string)
[SERVER DEBUG] - New value: "12,500,000" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: monthlyRecurringRevenue
[SERVER DEBUG] - field_id: 22
[SERVER DEBUG] - response_value: "12,500,000"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "monthlyRecurringRevenue":
[SERVER DEBUG] - Expected: "12,500,000"
[SERVER DEBUG] - Actual: "12,500,000"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "monthlyRecurringRevenue" (ID: 7948)
[SERVER DEBUG] --- Finished processing field "monthlyRecurringRevenue" ---

[SERVER DEBUG] Processing field: "investigationsIncidents" (ID: 23)
[SERVER DEBUG] Original value: No significant incidents in the past 3 years
[SERVER DEBUG] Normalized value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "investigationsIncidents" in database
[SERVER DEBUG] - Old value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] - New value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: investigationsIncidents
[SERVER DEBUG] - field_id: 23
[SERVER DEBUG] - response_value: "No significant incidents in the past 3 years"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "investigationsIncidents":
[SERVER DEBUG] - Expected: "No significant incidents in the past 3 years"
[SERVER DEBUG] - Actual: "No significant incidents in the past 3 years"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "investigationsIncidents" (ID: 7949)
[SERVER DEBUG] --- Finished processing field "investigationsIncidents" ---

[SERVER DEBUG] Processing field: "financialStatements" (ID: 24)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "financialStatements" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: financialStatements
[SERVER DEBUG] - field_id: 24
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "financialStatements":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "financialStatements" (ID: 7950)
[SERVER DEBUG] --- Finished processing field "financialStatements" ---

[SERVER DEBUG] Processing field: "operationalPolicies" (ID: 25)
[SERVER DEBUG] Original value: ISO 27001 certified, SOC 2 Type II compliant
[SERVER DEBUG] Normalized value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "operationalPolicies" in database
[SERVER DEBUG] - Old value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] - New value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: operationalPolicies
[SERVER DEBUG] - field_id: 25
[SERVER DEBUG] - response_value: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "operationalPolicies":
[SERVER DEBUG] - Expected: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] - Actual: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "operationalPolicies" (ID: 7951)
[SERVER DEBUG] --- Finished processing field "operationalPolicies" ---

[SERVER DEBUG] Processing field: "dataVolume" (ID: 26)
[SERVER DEBUG] Original value: Approximately 2 million records per month
[SERVER DEBUG] Normalized value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "dataVolume" in database
[SERVER DEBUG] - Old value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - New value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: dataVolume
[SERVER DEBUG] - field_id: 26
[SERVER DEBUG] - response_value: "Approximately 2 million records per month"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "dataVolume":
[SERVER DEBUG] - Expected: "Approximately 2 million records per month"
[SERVER DEBUG] - Actual: "Approximately 2 million records per month"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "dataVolume" (ID: 7952)
[SERVER DEBUG] --- Finished processing field "dataVolume" ---

[SERVER DEBUG] Processing field: "dataTypes" (ID: 27)
[SERVER DEBUG] Original value: Financial transaction data, Account balances, Customer KYC information
[SERVER DEBUG] Normalized value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "dataTypes" in database
[SERVER DEBUG] - Old value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] - New value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: dataTypes
[SERVER DEBUG] - field_id: 27
[SERVER DEBUG] - response_value: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "dataTypes":
[SERVER DEBUG] - Expected: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] - Actual: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "dataTypes" (ID: 7953)
[SERVER DEBUG] --- Finished processing field "dataTypes" ---

[SERVER DEBUG] Processing field: "sanctionsCheck" (ID: 28)
[SERVER DEBUG] Original value: Approximately 2 million records per month
[SERVER DEBUG] Normalized value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "sanctionsCheck" in database
[SERVER DEBUG] - Old value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - New value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: sanctionsCheck
[SERVER DEBUG] - field_id: 28
[SERVER DEBUG] - response_value: "Approximately 2 million records per month"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "sanctionsCheck":
[SERVER DEBUG] - Expected: "Approximately 2 million records per month"
[SERVER DEBUG] - Actual: "Approximately 2 million records per month"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "sanctionsCheck" (ID: 7954)
[SERVER DEBUG] --- Finished processing field "sanctionsCheck" ---

[SERVER DEBUG] Processing field: "dueDiligence" (ID: 29)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "dueDiligence" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: dueDiligence
[SERVER DEBUG] - field_id: 29
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "dueDiligence":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "dueDiligence" (ID: 7955)
[SERVER DEBUG] --- Finished processing field "dueDiligence" ---

[SERVER DEBUG] Processing field: "regulatoryActions" (ID: 30)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "regulatoryActions" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: regulatoryActions
[SERVER DEBUG] - field_id: 30
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "regulatoryActions":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "regulatoryActions" (ID: 7956)
[SERVER DEBUG] --- Finished processing field "regulatoryActions" ---

[KYB API Debug] Using client-provided status: ready_for_submission
[WebSocket] Broadcasting task update for task 947: progress=100, status=ready_for_submission
[Progress Broadcast broadcast-1747501397973-478] Broadcasting progress update for task 947: {
  taskId: 947,
  progress: 100,
  status: 'ready_for_submission',
  timestamp: '2025-05-17T17:03:17.973Z',
  source: 'at <anonymous> (/home/runner/workspace/server/routes/kyb.ts:1202:7)',
  hasMetadata: true
}
[Progress Utils] Broadcasting task progress update: {
  taskId: 947,
  progress: 100,
  requestedStatus: 'ready_for_submission',
  finalStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  timestamp: '2025-05-17T17:03:17.973Z'
}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501397974_ia611irf1' }
[2025-05-17T17:03:17.974Z] [INFO] [App] Successfully broadcasted task_update message 
[Progress Broadcast broadcast-1747501397973-478] Successfully broadcast progress update for task 947
===============================================
[SERVER DEBUG] PREPARING RESPONSE at 2025-05-17T17:03:18.003Z
[SERVER DEBUG] Found 30 fields in database after update
===============================================
[SERVER DEBUG] Checking field corporateRegistration in updated data: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010"
[SERVER DEBUG] Checking field goodStanding in updated data: "Yes"
[SERVER DEBUG] Checking field regulatoryActions in updated data: "Yes"
[SERVER DEBUG] Checking field investigationsIncidents in updated data: "No significant incidents in the past 3 years"
[SERVER DEBUG] No fields with value "asdf" found in response data
[SERVER DEBUG] Sending response with 30 fields, status: ready_for_submission, progress: 100%
[KYB API] ℹ️ Form has reached ready_for_submission status but File Vault tab will only unlock after formal submission
[SERVER DEBUG] Updating task.savedFormData to ensure persistence across navigation
[SERVER DEBUG] ✅ Successfully updated task.savedFormData with latest form data
===============================================
[2025-05-17T17:03:18.063Z] [INFO] [App] POST /api/kyb/progress 200 in 3137ms :: {"success":true,"savedData":{"progress":100,"status":"ready_for_submission","... 
[2025-05-17T17:03:18.235Z] [INFO] [App] GET /api/companies/current 304 in 33ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[TimestampHandler] Saving 30 timestamps for task 947
[TimestampHandler] Successfully saved timestamps for task 947
[TimestampAPI] Saved 30 timestamps for task 947
[2025-05-17T17:03:18.800Z] [INFO] [App] POST /api/kyb/timestamps/947 200 in 70ms :: {"message":"Timestamps saved successfully","count":30} 
===============================================
[SERVER DEBUG] KYB PROGRESS SAVE REQUEST RECEIVED at 2025-05-17T17:03:18.947Z
===============================================
Task ID: 947
Progress: 100
Status: ready_for_submission
Field count: 30
Sample form data values:
- legalEntityName: "DevTest56" (string)
- registrationNumber: "12-3456789" (string)
- incorporationDate: "5/12/2010" (string)
- businessType: "Limited Liability Company (LLC)" (string)
- jurisdiction: "Delaware, United States" (string)
Request details:
- Method: POST
- Content-Type: application/json
- Content-Length: 2506
===============================================
===============================================
[SERVER DEBUG] PROCESSING FORM DATA FIELDS AT 2025-05-17T17:03:19.036Z
[SERVER DEBUG] Task ID: 947, Field count: 30
===============================================
[SERVER DEBUG] COMPLETE FORM DATA DUMP:
[SERVER DEBUG] legalEntityName: "DevTest56" (string)
[SERVER DEBUG] registrationNumber: "12-3456789" (string)
[SERVER DEBUG] incorporationDate: "5/12/2010" (string)
[SERVER DEBUG] businessType: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] jurisdiction: "Delaware, United States" (string)
[SERVER DEBUG] registeredAddress: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] companyPhone: "(302) 555-1234" (string)
[SERVER DEBUG] priorNames: "None" (string)
[SERVER DEBUG] licenses: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] goodStanding: "Yes" (string)
[SERVER DEBUG] corporateRegistration: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010" (string)
[SERVER DEBUG] externalAudit: "No" (string)
[SERVER DEBUG] controlEnvironment: "Yes" (string)
[SERVER DEBUG] authorizedSigners: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] governmentOwnership: "No" (string)
[SERVER DEBUG] ultimateBeneficialOwners: "None" (string)
[SERVER DEBUG] directorsAndOfficers: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] contactEmail: "56@e.com" (string)
[SERVER DEBUG] marketCapitalization: "$75 million (privately held)" (string)
[SERVER DEBUG] lifetimeCustomerValue: "$1,250" (string)
[SERVER DEBUG] annualRecurringRevenue: "5,000,000" (string)
[SERVER DEBUG] monthlyRecurringRevenue: "12,500,000" (string)
[SERVER DEBUG] investigationsIncidents: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] financialStatements: "Yes" (string)
[SERVER DEBUG] operationalPolicies: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] dataVolume: "Approximately 2 million records per month" (string)
[SERVER DEBUG] dataTypes: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] sanctionsCheck: "Approximately 2 million records per month" (string)
[SERVER DEBUG] dueDiligence: "Yes" (string)
[SERVER DEBUG] regulatoryActions: "Yes" (string)
[SERVER DEBUG] END OF FORM DATA DUMP
[SERVER DEBUG] No fields with value "asdf" found in incoming data
[SERVER DEBUG] Processing field: "legalEntityName" (ID: 1)
[SERVER DEBUG] Original value: DevTest56
[SERVER DEBUG] Normalized value: "DevTest56" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "legalEntityName" in database
[SERVER DEBUG] - Old value: "DevTest56" (string)
[SERVER DEBUG] - New value: "DevTest56" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: legalEntityName
[SERVER DEBUG] - field_id: 1
[SERVER DEBUG] - response_value: "DevTest56"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "legalEntityName":
[SERVER DEBUG] - Expected: "DevTest56"
[SERVER DEBUG] - Actual: "DevTest56"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "legalEntityName" (ID: 7927)
[SERVER DEBUG] Broadcasting legalEntityName update via WebSocket: "DevTest56"
[WebSocket] Broadcast field_update to 6 clients (0 errors) { messageId: 'msg_1747501399124_fejkffkh8' }
[2025-05-17T17:03:19.125Z] [INFO] [App] Successfully broadcasted field_update message 
[Progress Utils] Broadcasting field update for task 947, field legalEntityName: {
  value: 'DevTest56',
  fieldId: 1,
  timestamp: '2025-05-17T17:03:19.125Z'
}
[SERVER DEBUG] --- Finished processing field "legalEntityName" ---

[SERVER DEBUG] Processing field: "registrationNumber" (ID: 2)
[SERVER DEBUG] Original value: 12-3456789
[SERVER DEBUG] Normalized value: "12-3456789" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "registrationNumber" in database
[SERVER DEBUG] - Old value: "12-3456789" (string)
[SERVER DEBUG] - New value: "12-3456789" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: registrationNumber
[SERVER DEBUG] - field_id: 2
[SERVER DEBUG] - response_value: "12-3456789"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "registrationNumber":
[SERVER DEBUG] - Expected: "12-3456789"
[SERVER DEBUG] - Actual: "12-3456789"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "registrationNumber" (ID: 7928)
[SERVER DEBUG] --- Finished processing field "registrationNumber" ---

[SERVER DEBUG] Processing field: "incorporationDate" (ID: 3)
[SERVER DEBUG] Original value: 5/12/2010
[SERVER DEBUG] Normalized value: "5/12/2010" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "incorporationDate" in database
[SERVER DEBUG] - Old value: "5/12/2010" (string)
[SERVER DEBUG] - New value: "5/12/2010" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: incorporationDate
[SERVER DEBUG] - field_id: 3
[SERVER DEBUG] - response_value: "5/12/2010"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "incorporationDate":
[SERVER DEBUG] - Expected: "5/12/2010"
[SERVER DEBUG] - Actual: "5/12/2010"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "incorporationDate" (ID: 7929)
[SERVER DEBUG] --- Finished processing field "incorporationDate" ---

[SERVER DEBUG] Processing field: "businessType" (ID: 4)
[SERVER DEBUG] Original value: Limited Liability Company (LLC)
[SERVER DEBUG] Normalized value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "businessType" in database
[SERVER DEBUG] - Old value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] - New value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: businessType
[SERVER DEBUG] - field_id: 4
[SERVER DEBUG] - response_value: "Limited Liability Company (LLC)"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "businessType":
[SERVER DEBUG] - Expected: "Limited Liability Company (LLC)"
[SERVER DEBUG] - Actual: "Limited Liability Company (LLC)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "businessType" (ID: 7930)
[SERVER DEBUG] --- Finished processing field "businessType" ---

[SERVER DEBUG] Processing field: "jurisdiction" (ID: 5)
[SERVER DEBUG] Original value: Delaware, United States
[SERVER DEBUG] Normalized value: "Delaware, United States" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "jurisdiction" in database
[SERVER DEBUG] - Old value: "Delaware, United States" (string)
[SERVER DEBUG] - New value: "Delaware, United States" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: jurisdiction
[SERVER DEBUG] - field_id: 5
[SERVER DEBUG] - response_value: "Delaware, United States"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "jurisdiction":
[SERVER DEBUG] - Expected: "Delaware, United States"
[SERVER DEBUG] - Actual: "Delaware, United States"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "jurisdiction" (ID: 7931)
[SERVER DEBUG] --- Finished processing field "jurisdiction" ---

[SERVER DEBUG] Processing field: "registeredAddress" (ID: 6)
[SERVER DEBUG] Original value: 123 Market Street, Wilmington, DE 19801
[SERVER DEBUG] Normalized value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "registeredAddress" in database
[SERVER DEBUG] - Old value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] - New value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: registeredAddress
[SERVER DEBUG] - field_id: 6
[SERVER DEBUG] - response_value: "123 Market Street, Wilmington, DE 19801"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "registeredAddress":
[SERVER DEBUG] - Expected: "123 Market Street, Wilmington, DE 19801"
[SERVER DEBUG] - Actual: "123 Market Street, Wilmington, DE 19801"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "registeredAddress" (ID: 7932)
[SERVER DEBUG] --- Finished processing field "registeredAddress" ---

[SERVER DEBUG] Processing field: "companyPhone" (ID: 7)
[SERVER DEBUG] Original value: (302) 555-1234
[SERVER DEBUG] Normalized value: "(302) 555-1234" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "companyPhone" in database
[SERVER DEBUG] - Old value: "(302) 555-1234" (string)
[SERVER DEBUG] - New value: "(302) 555-1234" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: companyPhone
[SERVER DEBUG] - field_id: 7
[SERVER DEBUG] - response_value: "(302) 555-1234"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "companyPhone":
[SERVER DEBUG] - Expected: "(302) 555-1234"
[SERVER DEBUG] - Actual: "(302) 555-1234"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "companyPhone" (ID: 7933)
[SERVER DEBUG] --- Finished processing field "companyPhone" ---

[SERVER DEBUG] Processing field: "priorNames" (ID: 8)
[SERVER DEBUG] Original value: None
[SERVER DEBUG] Normalized value: "None" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "priorNames" in database
[SERVER DEBUG] - Old value: "None" (string)
[SERVER DEBUG] - New value: "None" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: priorNames
[SERVER DEBUG] - field_id: 8
[SERVER DEBUG] - response_value: "None"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "priorNames":
[SERVER DEBUG] - Expected: "None"
[SERVER DEBUG] - Actual: "None"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "priorNames" (ID: 7934)
[SERVER DEBUG] --- Finished processing field "priorNames" ---

[SERVER DEBUG] Processing field: "licenses" (ID: 9)
[SERVER DEBUG] Original value: Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765
[SERVER DEBUG] Normalized value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "licenses" in database
[SERVER DEBUG] - Old value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] - New value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: licenses
[SERVER DEBUG] - field_id: 9
[SERVER DEBUG] - response_value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "licenses":
[SERVER DEBUG] - Expected: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] - Actual: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "licenses" (ID: 7935)
[SERVER DEBUG] --- Finished processing field "licenses" ---

[SERVER DEBUG] Processing field: "goodStanding" (ID: 10)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "goodStanding" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: goodStanding
[SERVER DEBUG] - field_id: 10
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "goodStanding":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "goodStanding" (ID: 7936)
[SERVER DEBUG] --- Finished processing field "goodStanding" ---

[SERVER DEBUG] Processing field: "corporateRegistration" (ID: 11)
[SERVER DEBUG] Original value: Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010
[SERVER DEBUG] Normalized value: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "corporateRegistration" in database
[SERVER DEBUG] - Old value: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010" (string)
[SERVER DEBUG] - New value: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: corporateRegistration
[SERVER DEBUG] - field_id: 11
[SERVER DEBUG] - response_value: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "corporateRegistration":
[SERVER DEBUG] - Expected: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010"
[SERVER DEBUG] - Actual: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "corporateRegistration" (ID: 7937)
[SERVER DEBUG] --- Finished processing field "corporateRegistration" ---

[SERVER DEBUG] Processing field: "externalAudit" (ID: 12)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "externalAudit" in database
[SERVER DEBUG] - Old value: "No" (string)
[SERVER DEBUG] - New value: "No" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: externalAudit
[SERVER DEBUG] - field_id: 12
[SERVER DEBUG] - response_value: "No"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "externalAudit":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "externalAudit" (ID: 7938)
[SERVER DEBUG] --- Finished processing field "externalAudit" ---

[SERVER DEBUG] Processing field: "controlEnvironment" (ID: 13)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "controlEnvironment" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: controlEnvironment
[SERVER DEBUG] - field_id: 13
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "controlEnvironment":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "controlEnvironment" (ID: 7939)
[SERVER DEBUG] --- Finished processing field "controlEnvironment" ---

[SERVER DEBUG] Processing field: "authorizedSigners" (ID: 14)
[SERVER DEBUG] Original value: John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)
[SERVER DEBUG] Normalized value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "authorizedSigners" in database
[SERVER DEBUG] - Old value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] - New value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: authorizedSigners
[SERVER DEBUG] - field_id: 14
[SERVER DEBUG] - response_value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "authorizedSigners":
[SERVER DEBUG] - Expected: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] - Actual: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "authorizedSigners" (ID: 7940)
[SERVER DEBUG] --- Finished processing field "authorizedSigners" ---

[SERVER DEBUG] Processing field: "governmentOwnership" (ID: 15)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "governmentOwnership" in database
[SERVER DEBUG] - Old value: "No" (string)
[SERVER DEBUG] - New value: "No" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: governmentOwnership
[SERVER DEBUG] - field_id: 15
[SERVER DEBUG] - response_value: "No"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "governmentOwnership":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "governmentOwnership" (ID: 7941)
[SERVER DEBUG] --- Finished processing field "governmentOwnership" ---

[SERVER DEBUG] Processing field: "ultimateBeneficialOwners" (ID: 16)
[SERVER DEBUG] Original value: None
[SERVER DEBUG] Normalized value: "None" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "ultimateBeneficialOwners" in database
[SERVER DEBUG] - Old value: "None" (string)
[SERVER DEBUG] - New value: "None" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: ultimateBeneficialOwners
[SERVER DEBUG] - field_id: 16
[SERVER DEBUG] - response_value: "None"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "ultimateBeneficialOwners":
[SERVER DEBUG] - Expected: "None"
[SERVER DEBUG] - Actual: "None"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "ultimateBeneficialOwners" (ID: 7942)
[SERVER DEBUG] --- Finished processing field "ultimateBeneficialOwners" ---

[SERVER DEBUG] Processing field: "directorsAndOfficers" (ID: 17)
[SERVER DEBUG] Original value: John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)
[SERVER DEBUG] Normalized value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "directorsAndOfficers" in database
[SERVER DEBUG] - Old value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] - New value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: directorsAndOfficers
[SERVER DEBUG] - field_id: 17
[SERVER DEBUG] - response_value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "directorsAndOfficers":
[SERVER DEBUG] - Expected: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] - Actual: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "directorsAndOfficers" (ID: 7943)
[SERVER DEBUG] --- Finished processing field "directorsAndOfficers" ---

[SERVER DEBUG] Processing field: "contactEmail" (ID: 18)
[SERVER DEBUG] Original value: 56@e.com
[SERVER DEBUG] Normalized value: "56@e.com" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "contactEmail" in database
[SERVER DEBUG] - Old value: "56@e.com" (string)
[SERVER DEBUG] - New value: "56@e.com" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: contactEmail
[SERVER DEBUG] - field_id: 18
[SERVER DEBUG] - response_value: "56@e.com"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "contactEmail":
[SERVER DEBUG] - Expected: "56@e.com"
[SERVER DEBUG] - Actual: "56@e.com"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "contactEmail" (ID: 7944)
[SERVER DEBUG] --- Finished processing field "contactEmail" ---

[SERVER DEBUG] Processing field: "marketCapitalization" (ID: 19)
[SERVER DEBUG] Original value: $75 million (privately held)
[SERVER DEBUG] Normalized value: "$75 million (privately held)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "marketCapitalization" in database
[SERVER DEBUG] - Old value: "$75 million (privately held)" (string)
[SERVER DEBUG] - New value: "$75 million (privately held)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: marketCapitalization
[SERVER DEBUG] - field_id: 19
[SERVER DEBUG] - response_value: "$75 million (privately held)"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "marketCapitalization":
[SERVER DEBUG] - Expected: "$75 million (privately held)"
[SERVER DEBUG] - Actual: "$75 million (privately held)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "marketCapitalization" (ID: 7945)
[SERVER DEBUG] --- Finished processing field "marketCapitalization" ---

[SERVER DEBUG] Processing field: "lifetimeCustomerValue" (ID: 20)
[SERVER DEBUG] Original value: $1,250
[SERVER DEBUG] Normalized value: "$1,250" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "lifetimeCustomerValue" in database
[SERVER DEBUG] - Old value: "$1,250" (string)
[SERVER DEBUG] - New value: "$1,250" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: lifetimeCustomerValue
[SERVER DEBUG] - field_id: 20
[SERVER DEBUG] - response_value: "$1,250"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "lifetimeCustomerValue":
[SERVER DEBUG] - Expected: "$1,250"
[SERVER DEBUG] - Actual: "$1,250"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "lifetimeCustomerValue" (ID: 7946)
[SERVER DEBUG] --- Finished processing field "lifetimeCustomerValue" ---

[SERVER DEBUG] Processing field: "annualRecurringRevenue" (ID: 21)
[SERVER DEBUG] Original value: 5,000,000
[SERVER DEBUG] Normalized value: "5,000,000" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "annualRecurringRevenue" in database
[SERVER DEBUG] - Old value: "5,000,000" (string)
[SERVER DEBUG] - New value: "5,000,000" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: annualRecurringRevenue
[SERVER DEBUG] - field_id: 21
[SERVER DEBUG] - response_value: "5,000,000"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "annualRecurringRevenue":
[SERVER DEBUG] - Expected: "5,000,000"
[SERVER DEBUG] - Actual: "5,000,000"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "annualRecurringRevenue" (ID: 7947)
[SERVER DEBUG] --- Finished processing field "annualRecurringRevenue" ---

[SERVER DEBUG] Processing field: "monthlyRecurringRevenue" (ID: 22)
[SERVER DEBUG] Original value: 12,500,000
[SERVER DEBUG] Normalized value: "12,500,000" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "monthlyRecurringRevenue" in database
[SERVER DEBUG] - Old value: "12,500,000" (string)
[SERVER DEBUG] - New value: "12,500,000" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: monthlyRecurringRevenue
[SERVER DEBUG] - field_id: 22
[SERVER DEBUG] - response_value: "12,500,000"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "monthlyRecurringRevenue":
[SERVER DEBUG] - Expected: "12,500,000"
[SERVER DEBUG] - Actual: "12,500,000"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "monthlyRecurringRevenue" (ID: 7948)
[SERVER DEBUG] --- Finished processing field "monthlyRecurringRevenue" ---

[SERVER DEBUG] Processing field: "investigationsIncidents" (ID: 23)
[SERVER DEBUG] Original value: No significant incidents in the past 3 years
[SERVER DEBUG] Normalized value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "investigationsIncidents" in database
[SERVER DEBUG] - Old value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] - New value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: investigationsIncidents
[SERVER DEBUG] - field_id: 23
[SERVER DEBUG] - response_value: "No significant incidents in the past 3 years"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "investigationsIncidents":
[SERVER DEBUG] - Expected: "No significant incidents in the past 3 years"
[SERVER DEBUG] - Actual: "No significant incidents in the past 3 years"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "investigationsIncidents" (ID: 7949)
[SERVER DEBUG] --- Finished processing field "investigationsIncidents" ---

[SERVER DEBUG] Processing field: "financialStatements" (ID: 24)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "financialStatements" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: financialStatements
[SERVER DEBUG] - field_id: 24
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "financialStatements":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "financialStatements" (ID: 7950)
[SERVER DEBUG] --- Finished processing field "financialStatements" ---

[SERVER DEBUG] Processing field: "operationalPolicies" (ID: 25)
[SERVER DEBUG] Original value: ISO 27001 certified, SOC 2 Type II compliant
[SERVER DEBUG] Normalized value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "operationalPolicies" in database
[SERVER DEBUG] - Old value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] - New value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: operationalPolicies
[SERVER DEBUG] - field_id: 25
[SERVER DEBUG] - response_value: "ISO 27001 certified, SOC 2 Type II compliant"
[2025-05-17T17:03:21.235Z] [INFO] [App] GET /api/companies/current 304 in 32ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "operationalPolicies":
[SERVER DEBUG] - Expected: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] - Actual: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "operationalPolicies" (ID: 7951)
[SERVER DEBUG] --- Finished processing field "operationalPolicies" ---

[SERVER DEBUG] Processing field: "dataVolume" (ID: 26)
[SERVER DEBUG] Original value: Approximately 2 million records per month
[SERVER DEBUG] Normalized value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "dataVolume" in database
[SERVER DEBUG] - Old value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - New value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: dataVolume
[SERVER DEBUG] - field_id: 26
[SERVER DEBUG] - response_value: "Approximately 2 million records per month"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "dataVolume":
[SERVER DEBUG] - Expected: "Approximately 2 million records per month"
[SERVER DEBUG] - Actual: "Approximately 2 million records per month"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "dataVolume" (ID: 7952)
[SERVER DEBUG] --- Finished processing field "dataVolume" ---

[SERVER DEBUG] Processing field: "dataTypes" (ID: 27)
[SERVER DEBUG] Original value: Financial transaction data, Account balances, Customer KYC information
[SERVER DEBUG] Normalized value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "dataTypes" in database
[SERVER DEBUG] - Old value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] - New value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: dataTypes
[SERVER DEBUG] - field_id: 27
[SERVER DEBUG] - response_value: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "dataTypes":
[SERVER DEBUG] - Expected: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] - Actual: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "dataTypes" (ID: 7953)
[SERVER DEBUG] --- Finished processing field "dataTypes" ---

[SERVER DEBUG] Processing field: "sanctionsCheck" (ID: 28)
[SERVER DEBUG] Original value: Approximately 2 million records per month
[SERVER DEBUG] Normalized value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "sanctionsCheck" in database
[SERVER DEBUG] - Old value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - New value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: sanctionsCheck
[SERVER DEBUG] - field_id: 28
[SERVER DEBUG] - response_value: "Approximately 2 million records per month"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "sanctionsCheck":
[SERVER DEBUG] - Expected: "Approximately 2 million records per month"
[SERVER DEBUG] - Actual: "Approximately 2 million records per month"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "sanctionsCheck" (ID: 7954)
[SERVER DEBUG] --- Finished processing field "sanctionsCheck" ---

[SERVER DEBUG] Processing field: "dueDiligence" (ID: 29)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "dueDiligence" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: dueDiligence
[SERVER DEBUG] - field_id: 29
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "dueDiligence":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "dueDiligence" (ID: 7955)
[SERVER DEBUG] --- Finished processing field "dueDiligence" ---

[SERVER DEBUG] Processing field: "regulatoryActions" (ID: 30)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "regulatoryActions" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: regulatoryActions
[SERVER DEBUG] - field_id: 30
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "regulatoryActions":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "regulatoryActions" (ID: 7956)
[SERVER DEBUG] --- Finished processing field "regulatoryActions" ---

[KYB API Debug] Using client-provided status: ready_for_submission
[WebSocket] Broadcasting task update for task 947: progress=100, status=ready_for_submission
[Progress Broadcast broadcast-1747501401730-327] Broadcasting progress update for task 947: {
  taskId: 947,
  progress: 100,
  status: 'ready_for_submission',
  timestamp: '2025-05-17T17:03:21.730Z',
  source: 'at <anonymous> (/home/runner/workspace/server/routes/kyb.ts:1202:7)',
  hasMetadata: true
}
[Progress Utils] Broadcasting task progress update: {
  taskId: 947,
  progress: 100,
  requestedStatus: 'ready_for_submission',
  finalStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  timestamp: '2025-05-17T17:03:21.731Z'
}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501401731_9xdr5yhth' }
[2025-05-17T17:03:21.731Z] [INFO] [App] Successfully broadcasted task_update message 
[Progress Broadcast broadcast-1747501401730-327] Successfully broadcast progress update for task 947
===============================================
[SERVER DEBUG] PREPARING RESPONSE at 2025-05-17T17:03:21.760Z
[SERVER DEBUG] Found 30 fields in database after update
===============================================
[SERVER DEBUG] Checking field corporateRegistration in updated data: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010"
[SERVER DEBUG] Checking field goodStanding in updated data: "Yes"
[SERVER DEBUG] Checking field regulatoryActions in updated data: "Yes"
[SERVER DEBUG] Checking field investigationsIncidents in updated data: "No significant incidents in the past 3 years"
[SERVER DEBUG] No fields with value "asdf" found in response data
[SERVER DEBUG] Sending response with 30 fields, status: ready_for_submission, progress: 100%
[KYB API] ℹ️ Form has reached ready_for_submission status but File Vault tab will only unlock after formal submission
[SERVER DEBUG] Updating task.savedFormData to ensure persistence across navigation
[SERVER DEBUG] ✅ Successfully updated task.savedFormData with latest form data
===============================================
[2025-05-17T17:03:21.818Z] [INFO] [App] POST /api/kyb/progress 200 in 2871ms :: {"success":true,"savedData":{"progress":100,"status":"ready_for_submission","... 
[2025-05-17T17:03:22.549Z] [INFO] [WebSocket] Received message from client client-1747501342430-crhkwsb {"module":"WebSocket","type":"ping"}
[2025-05-17T17:03:23.628Z] [INFO] [WebSocket] Received message from client client-1747501343482-976h5xj {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:03:23.465Z","connectionId":"ws_1747501343463_g8eznl1w4"}
[2025-05-17T17:03:24.187Z] [INFO] [WebSocket] Received message from client client-1747501344065-4fr9567 {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:03:24.024Z","connectionId":"ws_1747501342882_t63apcmq6"}
[2025-05-17T17:03:24.250Z] [INFO] [App] GET /api/companies/current 304 in 34ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:03:24.768Z] [INFO] [WebSocket] Received message from client client-1747501344600-ot7dt59 {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:03:24.566Z","connectionId":"ws_1747501342922_91rdewjgu"}
[2025-05-17T17:03:27.244Z] [INFO] [App] GET /api/companies/current 304 in 37ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[Current Company] Using cached company data: 314
[2025-05-17T17:03:30.228Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:03:33.236Z] [INFO] [App] GET /api/companies/current 304 in 35ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:03:36.242Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:03:36.919Z] [INFO] [App] GET /api/tasks 304 in 32ms :: [{"id":948,"title":"2. S&P KY3P Security Assessment: DevTest56","description"... 
[2025-05-17T17:03:39.233Z] [INFO] [App] GET /api/companies/current 304 in 33ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:03:42.235Z] [INFO] [App] GET /api/companies/current 304 in 29ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:03:44.730Z] [INFO] [WebSocket] Received message from client client-1747501344600-ot7dt59 {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:03:44.565Z","connectionId":"ws_1747501342922_91rdewjgu"}
[2025-05-17T17:03:45.232Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:03:48.238Z] [INFO] [App] GET /api/companies/current 304 in 29ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:03:51.238Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 378, company_id: 314, email: '56@e.com' }
[2025-05-17T17:03:52.095Z] [INFO] [App] Performing dynamic task unlocking check for company {"companyId":314,"userId":378}
[2025-05-17T17:03:52.124Z] [INFO] [App] No completed KYB tasks found, skipping security task unlock check {"companyId":314}
[Tasks] Automatically unlocking all tasks for company { userId: 378, companyId: 314, requestedBy: 'automatic_task_unlock' }
[2025-05-17T17:03:52.124Z] [INFO] [App] [TaskDependencies] Unlocking ALL tasks for company {"companyId":314}
[2025-05-17T17:03:52.153Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":946,"userEmail":"56@e.com","currentStatus":"completed","currentProgress":100}
[TaskDependencies] Skipping task 947 with submission indicators {
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasFileId: false,
  status: 'ready_for_submission',
  progress: 100,
  isReadyForSubmission: true
}
[2025-05-17T17:03:52.153Z] [INFO] [App] [TaskDependencies] Found tasks to unlock {"companyId":314,"count":3,"taskIds":[948,949,946],"taskTypes":["ky3p","open_banking","user_onboarding"],"ky3pTaskCount":1,"ky3pTaskIds":[948]}
[2025-05-17T17:03:52.153Z] [INFO] [App] [TaskDependencies] Processing KY3P task {"taskId":948,"taskType":"ky3p","currentProgress":0,"currentStatus":"not_started","timestamp":"2025-05-17T17:03:52.153Z"}
[UnifiedProgress] Starting progress update for task 948 (ky3p) {
  taskId: 948,
  taskType: 'ky3p',
  diagnosticId: 'prog-1747501432154-896',
  metadata: [
    'locked',
    'prerequisite_completed',
    'prerequisite_completed_at',
    'dependencyUnlockOperation',
    'previousProgress',
    'previousStatus',
    'isKy3pTask',
    'isUserOnboardingTask'
  ]
}
[UnifiedProgressCalc] Calculating progress for task 948 (ky3p)
[KY3P Progress] Calculated progress for task 948: {
  taskId: 948,
  taskType: 'ky3p',
  normalizedTaskType: 'ky3p',
  totalFields: 120,
  completedFields: 0,
  progress: 0,
  timeStamp: '2025-05-17T17:03:52.267Z'
}
[UnifiedProgressCalc] Task 948 (ky3p) progress: 0/120 = 0%
[2025-05-17T17:03:52.295Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:03:52.295Z] [INFO] [WebSocket] Broadcast message of type 'task_update' sent to 6 clients {"module":"WebSocket","messageType":"task_update","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:03:52.295Z] [DEBUG] [App] [UnifiedProgressCalc] Successfully broadcast task update using unified implementation {"taskId":948,"messageId":"msg_1747501432294_2c5jn08v"}
[2025-05-17T17:03:52.295Z] [INFO] [App] [UnifiedProgressCalc] Successfully broadcast task update for task 948 {"progress":0,"status":"not_started","messageId":"msg_1747501432294_2c5jn08v"}
[2025-05-17T17:03:52.295Z] [INFO] [App] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":314,"taskId":948,"taskType":"ky3p","isKy3pTask":true,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[UnifiedProgress] Starting progress update for task 949 (open_banking) {
  taskId: 949,
  taskType: 'open_banking',
  diagnosticId: 'prog-1747501432296-492',
  metadata: [
    'locked',
    'prerequisite_completed',
    'prerequisite_completed_at',
    'dependencyUnlockOperation',
    'previousProgress',
    'previousStatus',
    'isKy3pTask',
    'isUserOnboardingTask'
  ]
}
[UnifiedProgressCalc] Calculating progress for task 949 (open_banking)
[UnifiedProgressCalc] Task 949 (open_banking) progress: 0/44 = 0%
[2025-05-17T17:03:52.435Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:03:52.436Z] [INFO] [WebSocket] Broadcast message of type 'task_update' sent to 6 clients {"module":"WebSocket","messageType":"task_update","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:03:52.436Z] [DEBUG] [App] [UnifiedProgressCalc] Successfully broadcast task update using unified implementation {"taskId":949,"messageId":"msg_1747501432435_e3etwn7z"}
[2025-05-17T17:03:52.436Z] [INFO] [App] [UnifiedProgressCalc] Successfully broadcast task update for task 949 {"progress":0,"status":"not_started","messageId":"msg_1747501432435_e3etwn7z"}
[2025-05-17T17:03:52.436Z] [INFO] [App] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":314,"taskId":949,"taskType":"open_banking","isKy3pTask":false,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[2025-05-17T17:03:52.436Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":946,"userEmail":"56@e.com","timestamp":"2025-05-17T17:03:52.436Z"}
[2025-05-17T17:03:52.470Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":946,"status":"completed"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501432470_hqzgatb6b' }
[2025-05-17T17:03:52.470Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:03:52.470Z] [INFO] [App] [TaskDependencies] Successfully unlocked all tasks {"companyId":314,"count":3}
[Tasks] Successfully unlocked all tasks for company: 314
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 378',
    condition2: 'tasks.created_by = 378',
    condition3: "tasks.company_id = 314 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('56@e.com')"
  }
}
[2025-05-17T17:03:52.557Z] [INFO] [WebSocket] Received message from client client-1747501342430-crhkwsb {"module":"WebSocket","type":"ping"}
[Tasks] Tasks found: { count: 4 }
[2025-05-17T17:03:52.588Z] [INFO] [App] GET /api/tasks 200 in 493ms :: [{"id":948,"title":"2. S&P KY3P Security Assessment: DevTest56","description"... 
[2025-05-17T17:03:53.628Z] [INFO] [WebSocket] Received message from client client-1747501343482-976h5xj {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:03:53.465Z","connectionId":"ws_1747501343463_g8eznl1w4"}
[2025-05-17T17:03:54.186Z] [INFO] [WebSocket] Received message from client client-1747501344065-4fr9567 {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:03:54.024Z","connectionId":"ws_1747501342882_t63apcmq6"}
[Current Company] Using cached company data: 314
[2025-05-17T17:03:54.229Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:03:57.229Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[Current Company] Fetching company for user: { userId: 378, companyId: 314 }
[Current Company] Found company: {
  id: 314,
  name: 'DevTest56',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
[Current Company] User onboarding status discrepancy detected: {
  userId: 378,
  sessionValue: false,
  databaseValue: true,
  timestamp: '2025-05-17T17:04:00.283Z'
}
[Current Company] Onboarding status check: {
  userId: 378,
  companyId: 314,
  userOnboardingStatus: true,
  freshFromDatabase: true,
  companyOnboardingStatus: false,
  timestamp: '2025-05-17T17:04:00.283Z'
}
[2025-05-17T17:04:00.314Z] [INFO] [App] GET /api/companies/current 200 in 90ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:04:00.511Z] [INFO] [App] GET /api/companies/current 304 in 35ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:04:03.240Z] [INFO] [App] GET /api/companies/current 304 in 36ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:04:04.732Z] [INFO] [WebSocket] Received message from client client-1747501344600-ot7dt59 {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:04:04.565Z","connectionId":"ws_1747501342922_91rdewjgu"}
[2025-05-17T17:04:06.237Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:04:07.783Z] [INFO] [App] GET /api/tasks 304 in 30ms :: [{"id":948,"title":"2. S&P KY3P Security Assessment: DevTest56","description"... 
[2025-05-17T17:04:09.232Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:04:12.259Z] [INFO] [App] GET /api/companies/current 304 in 35ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:04:15.232Z] [INFO] [App] GET /api/companies/current 304 in 33ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:04:18.245Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:04:21.229Z] [INFO] [App] GET /api/companies/current 304 in 29ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:04:22.551Z] [INFO] [WebSocket] Received message from client client-1747501342430-crhkwsb {"module":"WebSocket","type":"ping"}
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 378, company_id: 314, email: '56@e.com' }
[2025-05-17T17:04:22.941Z] [INFO] [App] Performing dynamic task unlocking check for company {"companyId":314,"userId":378}
[2025-05-17T17:04:22.971Z] [INFO] [App] No completed KYB tasks found, skipping security task unlock check {"companyId":314}
[Tasks] Automatically unlocking all tasks for company { userId: 378, companyId: 314, requestedBy: 'automatic_task_unlock' }
[2025-05-17T17:04:22.972Z] [INFO] [App] [TaskDependencies] Unlocking ALL tasks for company {"companyId":314}
[2025-05-17T17:04:23.000Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":946,"userEmail":"56@e.com","currentStatus":"completed","currentProgress":100}
[TaskDependencies] Skipping task 947 with submission indicators {
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasFileId: false,
  status: 'ready_for_submission',
  progress: 100,
  isReadyForSubmission: true
}
[2025-05-17T17:04:23.000Z] [INFO] [App] [TaskDependencies] Found tasks to unlock {"companyId":314,"count":3,"taskIds":[948,949,946],"taskTypes":["ky3p","open_banking","user_onboarding"],"ky3pTaskCount":1,"ky3pTaskIds":[948]}
[2025-05-17T17:04:23.000Z] [INFO] [App] [TaskDependencies] Processing KY3P task {"taskId":948,"taskType":"ky3p","currentProgress":0,"currentStatus":"not_started","timestamp":"2025-05-17T17:04:23.000Z"}
[UnifiedProgress] Starting progress update for task 948 (ky3p) {
  taskId: 948,
  taskType: 'ky3p',
  diagnosticId: 'prog-1747501463001-112',
  metadata: [
    'locked',
    'prerequisite_completed',
    'prerequisite_completed_at',
    'dependencyUnlockOperation',
    'previousProgress',
    'previousStatus',
    'isKy3pTask',
    'isUserOnboardingTask'
  ]
}
[UnifiedProgressCalc] Calculating progress for task 948 (ky3p)
[KY3P Progress] Calculated progress for task 948: {
  taskId: 948,
  taskType: 'ky3p',
  normalizedTaskType: 'ky3p',
  totalFields: 120,
  completedFields: 0,
  progress: 0,
  timeStamp: '2025-05-17T17:04:23.174Z'
}
[UnifiedProgressCalc] Task 948 (ky3p) progress: 0/120 = 0%
[2025-05-17T17:04:23.205Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:04:23.205Z] [INFO] [WebSocket] Broadcast message of type 'task_update' sent to 6 clients {"module":"WebSocket","messageType":"task_update","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:04:23.205Z] [DEBUG] [App] [UnifiedProgressCalc] Successfully broadcast task update using unified implementation {"taskId":948,"messageId":"msg_1747501463205_5p40fn7l"}
[2025-05-17T17:04:23.205Z] [INFO] [App] [UnifiedProgressCalc] Successfully broadcast task update for task 948 {"progress":0,"status":"not_started","messageId":"msg_1747501463205_5p40fn7l"}
[2025-05-17T17:04:23.205Z] [INFO] [App] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":314,"taskId":948,"taskType":"ky3p","isKy3pTask":true,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[UnifiedProgress] Starting progress update for task 949 (open_banking) {
  taskId: 949,
  taskType: 'open_banking',
  diagnosticId: 'prog-1747501463206-11',
  metadata: [
    'locked',
    'prerequisite_completed',
    'prerequisite_completed_at',
    'dependencyUnlockOperation',
    'previousProgress',
    'previousStatus',
    'isKy3pTask',
    'isUserOnboardingTask'
  ]
}
[UnifiedProgressCalc] Calculating progress for task 949 (open_banking)
[UnifiedProgressCalc] Task 949 (open_banking) progress: 0/44 = 0%
[2025-05-17T17:04:23.378Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:04:23.378Z] [INFO] [WebSocket] Broadcast message of type 'task_update' sent to 6 clients {"module":"WebSocket","messageType":"task_update","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:04:23.378Z] [DEBUG] [App] [UnifiedProgressCalc] Successfully broadcast task update using unified implementation {"taskId":949,"messageId":"msg_1747501463378_7qmg3e3b"}
[2025-05-17T17:04:23.378Z] [INFO] [App] [UnifiedProgressCalc] Successfully broadcast task update for task 949 {"progress":0,"status":"not_started","messageId":"msg_1747501463378_7qmg3e3b"}
[2025-05-17T17:04:23.378Z] [INFO] [App] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":314,"taskId":949,"taskType":"open_banking","isKy3pTask":false,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[2025-05-17T17:04:23.378Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":946,"userEmail":"56@e.com","timestamp":"2025-05-17T17:04:23.378Z"}
[2025-05-17T17:04:23.418Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":946,"status":"completed"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501463418_8t0v0ehb6' }
[2025-05-17T17:04:23.418Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:04:23.418Z] [INFO] [App] [TaskDependencies] Successfully unlocked all tasks {"companyId":314,"count":3}
[Tasks] Successfully unlocked all tasks for company: 314
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 378',
    condition2: 'tasks.created_by = 378',
    condition3: "tasks.company_id = 314 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('56@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
[2025-05-17T17:04:23.521Z] [INFO] [App] GET /api/tasks 200 in 580ms :: [{"id":948,"title":"2. S&P KY3P Security Assessment: DevTest56","description"... 
[2025-05-17T17:04:23.628Z] [INFO] [WebSocket] Received message from client client-1747501343482-976h5xj {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:04:23.465Z","connectionId":"ws_1747501343463_g8eznl1w4"}
[2025-05-17T17:04:24.186Z] [INFO] [WebSocket] Received message from client client-1747501344065-4fr9567 {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:04:24.024Z","connectionId":"ws_1747501342882_t63apcmq6"}
[2025-05-17T17:04:24.240Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:04:24.728Z] [INFO] [WebSocket] Received message from client client-1747501344600-ot7dt59 {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:04:24.565Z","connectionId":"ws_1747501342922_91rdewjgu"}
[2025-05-17T17:04:27.238Z] [INFO] [App] GET /api/companies/current 304 in 35ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:04:30.228Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:04:33.251Z] [INFO] [App] GET /api/companies/current 304 in 38ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:04:36.228Z] [INFO] [App] GET /api/companies/current 304 in 29ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:04:38.713Z] [INFO] [App] GET /api/tasks 304 in 30ms :: [{"id":948,"title":"2. S&P KY3P Security Assessment: DevTest56","description"... 
[2025-05-17T17:04:39.233Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:04:42.237Z] [INFO] [App] GET /api/companies/current 304 in 37ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:04:44.727Z] [INFO] [WebSocket] Received message from client client-1747501344600-ot7dt59 {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:04:44.564Z","connectionId":"ws_1747501342922_91rdewjgu"}
[2025-05-17T17:04:45.268Z] [INFO] [App] GET /api/companies/current 304 in 38ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:04:45.631Z] [INFO] [WebSocket] Received message from client client-1747501365513-nn19qo7 {"module":"WebSocket","type":"ping"}
[2025-05-17T17:04:48.270Z] [INFO] [App] GET /api/companies/current 304 in 32ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:04:51.236Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:04:52.550Z] [INFO] [WebSocket] Received message from client client-1747501342430-crhkwsb {"module":"WebSocket","type":"ping"}
[2025-05-17T17:04:53.627Z] [INFO] [WebSocket] Received message from client client-1747501343482-976h5xj {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:04:53.464Z","connectionId":"ws_1747501343463_g8eznl1w4"}
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 378, company_id: 314, email: '56@e.com' }
[2025-05-17T17:04:53.869Z] [INFO] [App] Performing dynamic task unlocking check for company {"companyId":314,"userId":378}
[2025-05-17T17:04:53.898Z] [INFO] [App] No completed KYB tasks found, skipping security task unlock check {"companyId":314}
[Tasks] Automatically unlocking all tasks for company { userId: 378, companyId: 314, requestedBy: 'automatic_task_unlock' }
[2025-05-17T17:04:53.899Z] [INFO] [App] [TaskDependencies] Unlocking ALL tasks for company {"companyId":314}
[2025-05-17T17:04:53.928Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":946,"userEmail":"56@e.com","currentStatus":"completed","currentProgress":100}
[TaskDependencies] Skipping task 947 with submission indicators {
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasFileId: false,
  status: 'ready_for_submission',
  progress: 100,
  isReadyForSubmission: true
}
[2025-05-17T17:04:53.928Z] [INFO] [App] [TaskDependencies] Found tasks to unlock {"companyId":314,"count":3,"taskIds":[948,949,946],"taskTypes":["ky3p","open_banking","user_onboarding"],"ky3pTaskCount":1,"ky3pTaskIds":[948]}
[2025-05-17T17:04:53.928Z] [INFO] [App] [TaskDependencies] Processing KY3P task {"taskId":948,"taskType":"ky3p","currentProgress":0,"currentStatus":"not_started","timestamp":"2025-05-17T17:04:53.928Z"}
[UnifiedProgress] Starting progress update for task 948 (ky3p) {
  taskId: 948,
  taskType: 'ky3p',
  diagnosticId: 'prog-1747501493928-870',
  metadata: [
    'locked',
    'prerequisite_completed',
    'prerequisite_completed_at',
    'dependencyUnlockOperation',
    'previousProgress',
    'previousStatus',
    'isKy3pTask',
    'isUserOnboardingTask'
  ]
}
[UnifiedProgressCalc] Calculating progress for task 948 (ky3p)
[KY3P Progress] Calculated progress for task 948: {
  taskId: 948,
  taskType: 'ky3p',
  normalizedTaskType: 'ky3p',
  totalFields: 120,
  completedFields: 0,
  progress: 0,
  timeStamp: '2025-05-17T17:04:54.043Z'
}
[UnifiedProgressCalc] Task 948 (ky3p) progress: 0/120 = 0%
[2025-05-17T17:04:54.073Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:04:54.074Z] [INFO] [WebSocket] Broadcast message of type 'task_update' sent to 6 clients {"module":"WebSocket","messageType":"task_update","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:04:54.074Z] [DEBUG] [App] [UnifiedProgressCalc] Successfully broadcast task update using unified implementation {"taskId":948,"messageId":"msg_1747501494073_77y089oc"}
[2025-05-17T17:04:54.074Z] [INFO] [App] [UnifiedProgressCalc] Successfully broadcast task update for task 948 {"progress":0,"status":"not_started","messageId":"msg_1747501494073_77y089oc"}
[2025-05-17T17:04:54.074Z] [INFO] [App] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":314,"taskId":948,"taskType":"ky3p","isKy3pTask":true,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[UnifiedProgress] Starting progress update for task 949 (open_banking) {
  taskId: 949,
  taskType: 'open_banking',
  diagnosticId: 'prog-1747501494075-779',
  metadata: [
    'locked',
    'prerequisite_completed',
    'prerequisite_completed_at',
    'dependencyUnlockOperation',
    'previousProgress',
    'previousStatus',
    'isKy3pTask',
    'isUserOnboardingTask'
  ]
}
[UnifiedProgressCalc] Calculating progress for task 949 (open_banking)
[2025-05-17T17:04:54.187Z] [INFO] [WebSocket] Received message from client client-1747501344065-4fr9567 {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:04:54.024Z","connectionId":"ws_1747501342882_t63apcmq6"}
[UnifiedProgressCalc] Task 949 (open_banking) progress: 0/44 = 0%
[2025-05-17T17:04:54.221Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:04:54.221Z] [INFO] [WebSocket] Broadcast message of type 'task_update' sent to 6 clients {"module":"WebSocket","messageType":"task_update","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:04:54.221Z] [DEBUG] [App] [UnifiedProgressCalc] Successfully broadcast task update using unified implementation {"taskId":949,"messageId":"msg_1747501494220_1xim243p"}
[2025-05-17T17:04:54.221Z] [INFO] [App] [UnifiedProgressCalc] Successfully broadcast task update for task 949 {"progress":0,"status":"not_started","messageId":"msg_1747501494220_1xim243p"}
[2025-05-17T17:04:54.221Z] [INFO] [App] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":314,"taskId":949,"taskType":"open_banking","isKy3pTask":false,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[2025-05-17T17:04:54.221Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":946,"userEmail":"56@e.com","timestamp":"2025-05-17T17:04:54.221Z"}
[2025-05-17T17:04:54.253Z] [INFO] [App] GET /api/companies/current 304 in 39ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:04:54.256Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":946,"status":"completed"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501494256_bjpekq4wu' }
[2025-05-17T17:04:54.256Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:04:54.256Z] [INFO] [App] [TaskDependencies] Successfully unlocked all tasks {"companyId":314,"count":3}
[Tasks] Successfully unlocked all tasks for company: 314
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 378',
    condition2: 'tasks.created_by = 378',
    condition3: "tasks.company_id = 314 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('56@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
[2025-05-17T17:04:54.349Z] [INFO] [App] GET /api/tasks 200 in 479ms :: [{"id":948,"title":"2. S&P KY3P Security Assessment: DevTest56","description"... 
[2025-05-17T17:04:57.249Z] [INFO] [App] GET /api/companies/current 304 in 35ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:05:00.248Z] [INFO] [App] GET /api/companies/current 304 in 36ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[Current Company] Fetching company for user: { userId: 378, companyId: 314 }
[Current Company] Found company: {
  id: 314,
  name: 'DevTest56',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
[Current Company] User onboarding status discrepancy detected: {
  userId: 378,
  sessionValue: false,
  databaseValue: true,
  timestamp: '2025-05-17T17:05:03.263Z'
}
[Current Company] Onboarding status check: {
  userId: 378,
  companyId: 314,
  userOnboardingStatus: true,
  freshFromDatabase: true,
  companyOnboardingStatus: false,
  timestamp: '2025-05-17T17:05:03.264Z'
}
[2025-05-17T17:05:03.297Z] [INFO] [App] GET /api/companies/current 304 in 96ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:05:04.730Z] [INFO] [WebSocket] Received message from client client-1747501344600-ot7dt59 {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:05:04.564Z","connectionId":"ws_1747501342922_91rdewjgu"}
[2025-05-17T17:05:06.229Z] [INFO] [App] GET /api/companies/current 304 in 29ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:05:09.253Z] [INFO] [App] GET /api/companies/current 304 in 40ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:05:09.547Z] [INFO] [App] GET /api/tasks 304 in 37ms :: [{"id":948,"title":"2. S&P KY3P Security Assessment: DevTest56","description"... 
[2025-05-17T17:05:12.240Z] [INFO] [App] GET /api/companies/current 304 in 34ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:05:15.231Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:05:18.231Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:05:21.247Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-17T17:05:22.549Z] [INFO] [WebSocket] Received message from client client-1747501342430-crhkwsb {"module":"WebSocket","type":"ping"}
[2025-05-17T17:05:23.629Z] [INFO] [WebSocket] Received message from client client-1747501343482-976h5xj {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:05:23.465Z","connectionId":"ws_1747501343463_g8eznl1w4"}
[2025-05-17T17:05:24.188Z] [INFO] [WebSocket] Received message from client client-1747501344065-4fr9567 {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:05:24.024Z","connectionId":"ws_1747501342882_t63apcmq6"}
[2025-05-17T17:05:24.228Z] [INFO] [App] GET /api/companies/current 304 in 29ms :: {"id":314,"name":"DevTest56","category":"FinTech","is_demo":true,"revenue_tie... 
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 378, company_id: 314, email: '56@e.com' }
[2025-05-17T17:05:24.708Z] [INFO] [App] Performing dynamic task unlocking check for company {"companyId":314,"userId":378}
[2025-05-17T17:05:24.735Z] [INFO] [WebSocket] Received message from client client-1747501344600-ot7dt59 {"module":"WebSocket","type":"ping","timestamp":"2025-05-17T17:05:24.564Z","connectionId":"ws_1747501342922_91rdewjgu"}
[2025-05-17T17:05:24.736Z] [INFO] [App] No completed KYB tasks found, skipping security task unlock check {"companyId":314}
[Tasks] Automatically unlocking all tasks for company { userId: 378, companyId: 314, requestedBy: 'automatic_task_unlock' }
[2025-05-17T17:05:24.737Z] [INFO] [App] [TaskDependencies] Unlocking ALL tasks for company {"companyId":314}
[2025-05-17T17:05:24.765Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":946,"userEmail":"56@e.com","currentStatus":"completed","currentProgress":100}
[TaskDependencies] Skipping task 947 with submission indicators {
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasFileId: false,
  status: 'ready_for_submission',
  progress: 100,
  isReadyForSubmission: true
}
[2025-05-17T17:05:24.766Z] [INFO] [App] [TaskDependencies] Found tasks to unlock {"companyId":314,"count":3,"taskIds":[948,949,946],"taskTypes":["ky3p","open_banking","user_onboarding"],"ky3pTaskCount":1,"ky3pTaskIds":[948]}
[2025-05-17T17:05:24.766Z] [INFO] [App] [TaskDependencies] Processing KY3P task {"taskId":948,"taskType":"ky3p","currentProgress":0,"currentStatus":"not_started","timestamp":"2025-05-17T17:05:24.766Z"}
[UnifiedProgress] Starting progress update for task 948 (ky3p) {
  taskId: 948,
  taskType: 'ky3p',
  diagnosticId: 'prog-1747501524766-841',
  metadata: [
    'locked',
    'prerequisite_completed',
    'prerequisite_completed_at',
    'dependencyUnlockOperation',
    'previousProgress',
    'previousStatus',
    'isKy3pTask',
    'isUserOnboardingTask'
  ]
}
[UnifiedProgressCalc] Calculating progress for task 948 (ky3p)
[KY3P Progress] Calculated progress for task 948: {
  taskId: 948,
  taskType: 'ky3p',
  normalizedTaskType: 'ky3p',
  totalFields: 120,
  completedFields: 0,
  progress: 0,
  timeStamp: '2025-05-17T17:05:24.881Z'
}
[UnifiedProgressCalc] Task 948 (ky3p) progress: 0/120 = 0%
[2025-05-17T17:05:24.910Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:05:24.910Z] [INFO] [WebSocket] Broadcast message of type 'task_update' sent to 6 clients {"module":"WebSocket","messageType":"task_update","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:05:24.911Z] [DEBUG] [App] [UnifiedProgressCalc] Successfully broadcast task update using unified implementation {"taskId":948,"messageId":"msg_1747501524910_viao29h5"}
[2025-05-17T17:05:24.911Z] [INFO] [App] [UnifiedProgressCalc] Successfully broadcast task update for task 948 {"progress":0,"status":"not_started","messageId":"msg_1747501524910_viao29h5"}
[2025-05-17T17:05:24.911Z] [INFO] [App] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":314,"taskId":948,"taskType":"ky3p","isKy3pTask":true,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[UnifiedProgress] Starting progress update for task 949 (open_banking) {
  taskId: 949,
  taskType: 'open_banking',
  diagnosticId: 'prog-1747501524911-381',
  metadata: [
    'locked',
    'prerequisite_completed',
    'prerequisite_completed_at',
    'dependencyUnlockOperation',
    'previousProgress',
    'previousStatus',
    'isKy3pTask',
    'isUserOnboardingTask'
  ]
}
[UnifiedProgressCalc] Calculating progress for task 949 (open_banking)
[UnifiedProgressCalc] Task 949 (open_banking) progress: 0/44 = 0%
[2025-05-17T17:05:25.055Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:05:25.055Z] [INFO] [WebSocket] Broadcast message of type 'task_update' sent to 6 clients {"module":"WebSocket","messageType":"task_update","recipients":6,"totalClients":6,"filtered":false}
[2025-05-17T17:05:25.055Z] [DEBUG] [App] [UnifiedProgressCalc] Successfully broadcast task update using unified implementation {"taskId":949,"messageId":"msg_1747501525054_2wnk3ckg"}
[2025-05-17T17:05:25.055Z] [INFO] [App] [UnifiedProgressCalc] Successfully broadcast task update for task 949 {"progress":0,"status":"not_started","messageId":"msg_1747501525054_2wnk3ckg"}
[2025-05-17T17:05:25.055Z] [INFO] [App] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":314,"taskId":949,"taskType":"open_banking","isKy3pTask":false,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[2025-05-17T17:05:25.055Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":946,"userEmail":"56@e.com","timestamp":"2025-05-17T17:05:25.055Z"}
[2025-05-17T17:05:25.090Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":946,"status":"completed"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1747501525090_voviysb2x' }
[2025-05-17T17:05:25.090Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-17T17:05:25.090Z] [INFO] [App] [TaskDependencies] Successfully unlocked all tasks {"companyId":314,"count":3}
[Tasks] Successfully unlocked all tasks for company: 314
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 378',
    condition2: 'tasks.created_by = 378',
    condition3: "tasks.company_id = 314 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('56@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
[2025-05-17T17:05:25.202Z] [INFO] [App] GET /api/tasks 200 in 494ms :: [{"id":948,"title":"2. S&P KY3P Security Assessment: DevTest56","description"... 
[2025-05-17T17:05:27.290Z] [INFO] [App] GET /api/companies/current 304 in