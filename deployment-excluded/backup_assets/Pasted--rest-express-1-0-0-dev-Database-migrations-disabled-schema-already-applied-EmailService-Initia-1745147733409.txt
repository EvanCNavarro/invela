> rest-express@1.0.0 dev
Database migrations disabled - schema already applied
[EmailService] Initializing email service
[EmailService] Email service initialized successfully
[Auth] Setting up authentication...
[Auth] Authentication setup completed
[Routes] Routes setup completed
[WebSocket] Server initialized on path: /ws
[WebSocket] WebSocketServer instance exported for test endpoints
10:46:21 AM [info] Setting up Vite development server
10:46:21 AM [express] Server running on port 5000
[2025-04-20T10:46:28.407Z] New client connected to the pool (1/3)
[Auth] Deserializing user: 218
[2025-04-20T10:46:34.565Z] New client connected to the pool (2/3)
[Auth] Unauthenticated user session
New WebSocket client connected
[2025-04-20T10:46:34.972Z] New client connected to the pool (3/3)
[Auth] Using cached user data: 218
[Auth] Using cached user data: 218
WebSocket client disconnected with code 1001 and reason: 
[Auth] Using cached user data: 218
[Auth] Using cached user data: 218
[Auth] Using cached user data: 218
[Auth] Using cached user data: 218
[Auth] Using cached user data: 218
[Auth] Using cached user data: 218
[Auth] Using cached user data: 218
[Auth] Returning user session data
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 218, company_id: 177, email: 'email@e6.com' }
[Tasks Routes] Fetching task by ID: { taskId: 380, timestamp: '2025-04-20T10:46:41.527Z' }
[Current Company] Fetching company for user: { userId: 218, companyId: 177 }
[Tasks Routes] Fetching latest KYB form data for task: 380
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 218',
    condition2: 'tasks.created_by = 218',
    condition3: "tasks.company_id = 177 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('email@e6.com')"
  }
}
[Current Company] Found company: {
  id: 177,
  name: 'DevelopmentTesting6',
  onboardingCompleted: false,
  riskScore: null,
  isDemo: false
}
[Tasks] Tasks found: { count: 4 }
10:46:41 AM [info] GET /api/companies/current 304 in 116ms :: {"id":177,"name":"DevelopmentTesting6","description":"FinTech partner company...
[Tasks Routes] No KYB responses found for task 380
[Tasks Routes] Task found by ID: {
  taskId: 380,
  title: '1. KYB Form: DevelopmentTesting6',
  type: 'company_kyb',
  formDataFields: 0,
  timestamp: '2025-04-20T10:46:41.646Z'
}
New WebSocket client connected
10:46:41 AM [info] GET /api/tasks 304 in 147ms :: [{"id":380,"title":"1. KYB Form: DevelopmentTesting6","description":"Complete...
10:46:41 AM [info] GET /api/tasks/380 304 in 149ms :: {"id":380,"title":"1. KYB Form: DevelopmentTesting6","description":"Complete ...
[Task Templates API] Fetching template for task type: company_kyb, user: 218
[Auth] Using cached user data: 218
10:46:41 AM [info] GET /api/tasks 304 in 32ms :: [{"id":380,"title":"1. KYB Form: DevelopmentTesting6","description":"Complete...
10:46:41 AM [warn] GET /api/companies/is-demo 400 in 29ms :: {"message":"Invalid company ID","code":"INVALID_ID"}
[Task Templates API] Found template: 1 (KYB Form) for task type: company_kyb
[Task Templates API] Retrieved 9 configuration items for template ID: 1
10:46:41 AM [info] GET /api/task-templates/by-type/company_kyb 304 in 101ms :: {"id":1,"name":"KYB Form","description":"Know Your Business form for company ...
10:46:42 AM [info] GET /api/companies/177 304 in 63ms :: {"id":177,"name":"DevelopmentTesting6","description":"FinTech partner company...
[2025-04-20T10:46:42.093Z] [INFO] [KYBRoutes] Fetching KYB fields
[2025-04-20T10:46:42.124Z] [INFO] [KYBRoutes] KYB fields retrieved successfully {"fieldCount":30,"groups":["companyProfile","financialProfile","governanceLeadership","operationsCompliance"]}
New WebSocket client connected
10:46:42 AM [info] GET /api/kyb/fields 304 in 63ms :: [{"id":1,"field_key":"legalEntityName","display_name":"Legal Entity Name","fi...
[KYB API Debug] Loading progress for task: 380
[Task Reconciliation] Found 0 responses for task 380
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-04-20T10:46:42.375Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 380,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 380
[KYB API Debug] Retrieved task: {
  taskId: 380,
  status: 'not_started',
  progress: 0,
  metadata: [
    'company_id',
    'created_at',
    'created_via',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for'
  ],
  timestamp: '2025-04-20T10:46:42.405Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-04-20T10:46:42.435Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 380,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T10:46:42.435Z
[SERVER DEBUG] Task ID: 380, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
10:46:42 AM [info] GET /api/kyb/progress/380 304 in 156ms :: {"formData":{},"progress":0,"status":"not_started"}
[KYB API Debug] Loading progress for task: 380
[Task Reconciliation] Found 0 responses for task 380
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-04-20T10:46:42.677Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 380,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 380
[KYB API Debug] Retrieved task: {
  taskId: 380,
  status: 'not_started',
  progress: 0,
  metadata: [
    'company_id',
    'created_at',
    'created_via',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for'
  ],
  timestamp: '2025-04-20T10:46:42.706Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-04-20T10:46:42.736Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 380,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T10:46:42.736Z
[SERVER DEBUG] Task ID: 380, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
10:46:42 AM [info] GET /api/kyb/progress/380 304 in 149ms :: {"formData":{},"progress":0,"status":"not_started"}
[KYB API Debug] Loading progress for task: 380
[Task Reconciliation] Found 0 responses for task 380
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-04-20T10:46:42.972Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 380,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 380
[KYB API Debug] Retrieved task: {
  taskId: 380,
  status: 'not_started',
  progress: 0,
  metadata: [
    'company_id',
    'created_at',
    'created_via',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for'
  ],
  timestamp: '2025-04-20T10:46:43.002Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-04-20T10:46:43.032Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 380,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T10:46:43.032Z
[SERVER DEBUG] Task ID: 380, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
10:46:43 AM [info] GET /api/kyb/progress/380 304 in 149ms :: {"formData":{},"progress":0,"status":"not_started"}
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
Suppressing further connection logs. Pool size: 3
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[Auth] Deserializing user: 218
[Tasks Routes] Fetching task by ID: { taskId: 380, timestamp: '2025-04-20T11:00:04.651Z' }
[Tasks Routes] Fetching latest KYB form data for task: 380
[Tasks Routes] No KYB responses found for task 380
[Tasks Routes] Task found by ID: {
  taskId: 380,
  title: '1. KYB Form: DevelopmentTesting6',
  type: 'company_kyb',
  formDataFields: 0,
  timestamp: '2025-04-20T11:00:04.785Z'
}
11:00:04 AM [info] GET /api/tasks/380 304 in 174ms :: {"id":380,"title":"1. KYB Form: DevelopmentTesting6","description":"Complete ...
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[Current Company] Fetching company for user: { userId: 218, companyId: 177 }
[Current Company] Found company: {
  id: 177,
  name: 'DevelopmentTesting6',
  onboardingCompleted: false,
  riskScore: null,
  isDemo: false
}
11:01:43 AM [info] GET /api/companies/current 304 in 103ms :: {"id":177,"name":"DevelopmentTesting6","description":"FinTech partner company...
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[Auth] Processing logout request
[Auth] Logout successful for user: 218
[Auth] Unauthenticated user session
[WebSocket] Received pong
[WebSocket] Received pong
[Auth] Processing login request
[Auth] Login request body: { email: 'admin@bofa.com', hasPassword: true, passwordLength: 8 }
[Auth] Login attempt for: admin@bofa.com
[Auth] Password received (first 4 chars): pass
[Auth] Looking up user by email: admin@bofa.com
[Auth] User lookup result: {
  found: true,
  userId: 183,
  hasPassword: true,
  passwordLength: 60,
  passwordStart: '$2b$'
}
[Auth] Found user, checking password
[Auth] Comparing passwords:
[Auth] - Stored hash length: 60
[Auth] - Stored hash format check: true
[Auth] - Supplied password length: 8
[Auth] - Stored hash: $2b$10$j8BCE/TB9HFFoazCrhVCGeiCjaA2/gIlpUyelb29FLJbcbgJMmxQq
[Auth] - Supplied password (first 4 chars): pass
[Auth] Starting to hash password
[Auth] Password hashed successfully: { hashLength: 60, startsWithBcrypt: true, rounds: 10 }
[Auth] - Test hash generated: $2b$10$PjyUWNyENFtZF7JdWKRvuOiQculzxzvZ.PIJPhOAhrG4i069xFU4y
[Auth] Password comparison result: true
[Auth] Password validation result: true
[Auth] Login successful for user: 183
[Auth] Serializing user: 183
[Auth] Login successful for user: 183
[Auth] Deserializing user: 183
[Current Company] Fetching company for user: { userId: 183, companyId: 5 }
[Current Company] Found company: {
  id: 5,
  name: 'Bank of America',
  onboardingCompleted: true,
  riskScore: 89,
  isDemo: null
}
11:04:04 AM [info] GET /api/companies/current 200 in 90ms :: {"id":5,"name":"Bank of America","description":"Bank of America is a leading ...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 183, company_id: 5, email: 'admin@bofa.com' }
[Tasks] KYB tasks found: { count: 0 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 183',
    condition2: 'tasks.created_by = 183',
    condition3: "tasks.company_id = 5 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('admin@bofa.com')"
  }
}
[Auth] Using cached user data: 183
[Network Visualization] Fetching network data for company: 5
[Tasks] Tasks found: { count: 53 }
11:04:04 AM [info] GET /api/tasks 200 in 141ms :: [{"id":381,"title":"2. Security Assessment: DevelopmentTesting6","description...
[Network Visualization] Found network relationships: { count: 20 }
[Network Visualization] Returning visualization data: { centerNode: 'Bank of America', nodeCount: 20 }
11:04:04 AM [info] GET /api/network/visualization 200 in 106ms :: {"center":{"id":5,"name":"Bank of America","riskScore":89,"riskBucket":"low",...
11:04:04 AM [info] GET /api/companies/current 304 in 30ms :: {"id":5,"name":"Bank of America","description":"Bank of America is a leading ...
11:04:04 AM [info] GET /api/tasks 304 in 31ms :: [{"id":381,"title":"2. Security Assessment: DevelopmentTesting6","description...
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[Auth] Using cached user data: 183
11:06:03 AM [info] POST /api/fintech/check-company 200 in 120ms :: {"exists":false}
[FinTech Invite] Starting invitation process with payload: {
  email: '***@***.***',
  full_name: 'John Doe',
  company_name: 'DevelopmentTesting7',
  sender_name: 'Bob Smith',
  sender_company: 'Invela'
}
[FinTech Invite] Found sender company: { name: 'Bank of America', duration: 35 }
[FinTech Invite] Created company: { id: 178, duration: 82 }
[FinTech Invite] Created user: { id: 219, duration: 177 }
[FinTech Invite] Creating user onboarding task
[FinTech Invite] Created onboarding task: { taskId: 383, status: 'email_sent', assignedTo: 219, duration: 217 }
[FinTech Invite] Created invitation: { id: 227, code: '1EDAAC', duration: 261 }
[FinTech Invite] Creating company tasks with existing transaction
[Company Service] Creating new company: DevelopmentTesting7 { hasExistingTransaction: true, timestamp: '2025-04-20T11:06:08.418Z' }
[Company Service] Using existing transaction for company creation
[Company Service] Using existing company record: { id: 178, name: 'DevelopmentTesting7' }
[Company Service] Creating tasks with creator ID: 183
[Company Service] Creating KYB task for company: 178
[Company Service] Created KYB task: { taskId: 384, companyId: 178, duration: 30 }
[Company Service] Creating Security Assessment task for company: 178
[Company Service] Created Security Assessment task: { taskId: 385, companyId: 178, duration: 62 }
[Company Service] Creating CARD task for company: 178
[Company Service] Created CARD task: { taskId: 386, companyId: 178, duration: 92 }
[Company Service] Creating relationship with Invela for company: 178
[Company Service] Creating relationship with creator company: 5
[Company Service] Created relationships: {
  invelaRelationshipId: 146,
  creatorRelationshipId: 147,
  newCompanyId: 178,
  duration: 158
}
[WebSocket] Broadcasting task update: {
  taskId: 384,
  status: 'not_started',
  progress: 0,
  metadata: {
    company_id: 178,
    created_at: '2025-04-20T11:06:08.419Z',
    created_via: 'fintech_invite',
    status_flow: [ 'not_started' ],
    company_name: 'DevelopmentTesting7',
    created_by_id: 183,
    prerequisite_for: [ 'security_assessment' ]
  }
}
[WebSocket] Broadcasting task update: {
  taskId: 385,
  status: 'not_started',
  progress: 0,
  metadata: {
    locked: true,
    company_id: 178,
    created_at: '2025-04-20T11:06:08.449Z',
    created_via: 'fintech_invite',
    status_flow: [ 'not_started' ],
    company_name: 'DevelopmentTesting7',
    last_updated: '2025-04-20T11:06:08.449Z',
    created_by_id: 183,
    progressHistory: [ [Object] ],
    prerequisite_for: [ 'company_card' ],
    prerequisite_task_id: 384,
    prerequisite_task_type: 'company_kyb'
  }
}
[WebSocket] Broadcasting task update: {
  taskId: 386,
  status: 'not_started',
  progress: 0,
  metadata: {
    locked: true,
    company_id: 178,
    created_at: '2025-04-20T11:06:08.480Z',
    statusFlow: [ 'not_started' ],
    created_via: 'fintech_invite',
    company_name: 'DevelopmentTesting7',
    last_updated: '2025-04-20T11:06:08.480Z',
    created_by_id: 183,
    progressHistory: [ [Object] ],
    prerequisite_task_id: 385,
    prerequisite_task_type: 'security_assessment'
  }
}
[FinTech Invite] Tasks created successfully: {
  companyId: 178,
  tasks: { kyb: 384, security: 385, card: 386, onboarding: 383 },
  duration: 420
}
[WebSocket] Broadcasting task update: {
  taskId: 383,
  status: 'email_sent',
  progress: 25,
  metadata: {
    user_id: 219,
    userEmail: 'email@e7.com',
    company_id: 178,
    created_at: '2025-04-20T11:06:08.334Z',
    statusFlow: [ 'email_sent' ],
    companyName: 'DevelopmentTesting7',
    created_via: 'fintech_invite',
    created_by_id: 183,
    email_sent_at: '2025-04-20T11:06:08.334Z'
  }
}
[FinTech Invite] Sending invitation email
[EmailService] Starting to send template email
[EmailService] Template type: fintech_invite
[EmailService] Recipient: email@e7.com
[EmailService] Template data (raw): {
  "recipientName": "John Doe",
  "recipientEmail": "email@e7.com",
  "senderName": "Bob Smith",
  "senderCompany": "Bank of America",
  "targetCompany": "DevelopmentTesting7",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=1EDAAC&email=email%40e7.com",
  "code": "1EDAAC"
}
[EmailService] Starting email validation for: email@e7.com
[EmailService] Checking MX records for domain: e7.com
[EmailService] MX records found for domain: e7.com
[EmailService] Email validation successful for: email@e7.com
[EmailService] Transforming template data
[EmailService] Starting template data transformation
[EmailService] Input template data: {
  "recipientName": "John Doe",
  "recipientEmail": "email@e7.com",
  "senderName": "Bob Smith",
  "senderCompany": "Bank of America",
  "targetCompany": "DevelopmentTesting7",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=1EDAAC&email=email%40e7.com",
  "code": "1EDAAC"
}
[EmailService] Built invite URL: https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=1EDAAC&email=email%40e7.com
[EmailService] Transformed template data: {
  "recipientName": "John Doe",
  "recipientEmail": "email@e7.com",
  "senderName": "Bob Smith",
  "senderCompany": "Bank of America",
  "targetCompany": "DevelopmentTesting7",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=1EDAAC&email=email%40e7.com",
  "code": "1EDAAC"
}
[EmailService] Getting email template: fintech_invite
[EmailTemplate] Getting template: fintech_invite
[EmailTemplate] Template data: {
  "recipientName": "John Doe",
  "recipientEmail": "email@e7.com",
  "senderName": "Bob Smith",
  "senderCompany": "Bank of America",
  "targetCompany": "DevelopmentTesting7",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=1EDAAC&email=email%40e7.com",
  "code": "1EDAAC"
}
[Template:invitation] Received template data: {
  "recipientName": "John Doe",
  "recipientEmail": "email@e7.com",
  "senderName": "Bob Smith",
  "senderCompany": "Bank of America",
  "targetCompany": "DevelopmentTesting7",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=1EDAAC&email=email%40e7.com",
  "code": "1EDAAC",
  "inviteType": "fintech"
}
[EmailService] Template generated successfully
[EmailService] Preparing to send email with configuration: {
  from: 'EvanCNavarro@gmail.com',
  to: 'email@e7.com',
  subject: 'Invitation to join Invela',
  textLength: 621,
  htmlLength: 1693
}
[EmailService] Email sent successfully to: email@e7.com
[FinTech Invite] Invitation email sent successfully
[FinTech Invite] Process completed: {
  companyId: 178,
  userId: 219,
  invitationId: 227,
  onboardingTaskId: 383,
  duration: 1646
}
11:06:09 AM [info] POST /api/fintech/invite 201 in 1677ms :: {"message":"FinTech company invited successfully","company":{"id":178,"name":...
[WebSocket] Received pong
[WebSocket] Received pong
[Auth] Processing logout request
[Auth] Logout successful for user: 183
[Auth] Unauthenticated user session
[Invite Debug] Starting validation for code: 1EDAAC
[Invite Debug] Found valid invitation: {
  id: 227,
  email: 'email@e7.com',
  status: 'pending',
  expires_at: 2025-04-27T11:06:08.374Z
}
11:06:20 AM [info] GET /api/invitations/1EDAAC/validate 200 in 61ms :: {"valid":true,"invitation":{"email":"email@e7.com","invitee_name":"John Doe",...
[Account Setup] Processing setup request for: email@e7.com
[Account Setup] Updated user: { id: 219, email: 'email@e7.com', onboarding_completed: false }
[Account Setup] Updated task status: { taskId: 383, status: 'completed', progress: 100 }
[WebSocket] Broadcasting task update: {
  taskId: 383,
  status: 'completed',
  progress: 100,
  metadata: {
    user_id: 219,
    userEmail: 'email@e7.com',
    company_id: 178,
    created_at: '2025-04-20T11:06:08.334Z',
    statusFlow: [ 'email_sent', 'completed' ],
    companyName: 'DevelopmentTesting7',
    created_via: 'fintech_invite',
    registeredAt: '2025-04-20T11:06:25.535Z',
    created_by_id: 183,
    email_sent_at: '2025-04-20T11:06:08.334Z'
  }
}
[Auth] Serializing user: 219
11:06:25 AM [info] POST /api/account/setup 200 in 340ms :: {"id":219,"email":"email@e7.com","full_name":"John Doe","first_name":"John","...
[Auth] Deserializing user: 219
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 219, company_id: 178, email: 'email@e7.com' }
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 219',
    condition2: 'tasks.created_by = 219',
    condition3: "tasks.company_id = 178 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('email@e7.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
[Current Company] Fetching company for user: { userId: 219, companyId: 178 }
11:06:25 AM [info] GET /api/tasks 200 in 90ms :: [{"id":384,"title":"1. KYB Form: DevelopmentTesting7","description":"Complete...
[Network Visualization] Fetching network data for company: 178
[Current Company] Found company: {
  id: 178,
  name: 'DevelopmentTesting7',
  onboardingCompleted: false,
  riskScore: null,
  isDemo: false
}
11:06:26 AM [info] GET /api/companies/current 200 in 64ms :: {"id":178,"name":"DevelopmentTesting7","description":"FinTech partner company...
[Network Visualization] Found network relationships: { count: 2 }
[Network Visualization] Returning visualization data: { centerNode: 'DevelopmentTesting7', nodeCount: 2 }
11:06:26 AM [info] GET /api/network/visualization 200 in 111ms :: {"center":{"id":178,"name":"DevelopmentTesting7","riskScore":0,"riskBucket":"...
11:06:26 AM [info] GET /api/tasks 304 in 31ms :: [{"id":384,"title":"1. KYB Form: DevelopmentTesting7","description":"Complete...
[User Onboarding] Completing onboarding for user: 219
[User Onboarding] Updated user onboarding status: { id: 219, onboarding_completed: true }
11:06:30 AM [info] POST /api/user/complete-onboarding 200 in 62ms :: {"id":219,"email":"email@e7.com","full_name":"John Doe","first_name":"John","...
[Auth] Returning user session data
11:06:30 AM [info] GET /api/tasks 304 in 33ms :: [{"id":384,"title":"1. KYB Form: DevelopmentTesting7","description":"Complete...
11:06:31 AM [info] GET /api/tasks 304 in 32ms :: [{"id":384,"title":"1. KYB Form: DevelopmentTesting7","description":"Complete...
11:06:46 AM [info] GET /api/tasks 304 in 31ms :: [{"id":384,"title":"1. KYB Form: DevelopmentTesting7","description":"Complete...
[WebSocket] Received pong
[WebSocket] Received pong
[Auth] Processing logout request
[Auth] Logout successful for user: 219
11:07:01 AM [warn] GET /api/tasks 401 in 1ms :: {"message":"Unauthorized"}
[Auth] Unauthenticated user session
[Auth] Processing login request
[Auth] Login request body: { email: 'admin@bofa.com', hasPassword: true, passwordLength: 8 }
[Auth] Login attempt for: admin@bofa.com
[Auth] Password received (first 4 chars): pass
[Auth] Looking up user by email: admin@bofa.com
[Auth] User lookup result: {
  found: true,
  userId: 183,
  hasPassword: true,
  passwordLength: 60,
  passwordStart: '$2b$'
}
[Auth] Found user, checking password
[Auth] Comparing passwords:
[Auth] - Stored hash length: 60
[Auth] - Stored hash format check: true
[Auth] - Supplied password length: 8
[Auth] - Stored hash: $2b$10$j8BCE/TB9HFFoazCrhVCGeiCjaA2/gIlpUyelb29FLJbcbgJMmxQq
[Auth] - Supplied password (first 4 chars): pass
[Auth] Starting to hash password
[Auth] Password hashed successfully: { hashLength: 60, startsWithBcrypt: true, rounds: 10 }
[Auth] - Test hash generated: $2b$10$LpEx25NrKa7vkAjISpLMYO06Y.E5byxZ7cr4Ld1wfC9TR1lXimD0y
[Auth] Password comparison result: true
[Auth] Password validation result: true
[Auth] Login successful for user: 183
[Auth] Serializing user: 183
[Auth] Login successful for user: 183
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 183, company_id: 5, email: 'admin@bofa.com' }
[Network Visualization] Fetching network data for company: 5
11:07:09 AM [info] GET /api/companies/current 200 in 29ms :: {"id":5,"name":"Bank of America","description":"Bank of America is a leading ...
[Tasks] KYB tasks found: { count: 0 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 183',
    condition2: 'tasks.created_by = 183',
    condition3: "tasks.company_id = 5 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('admin@bofa.com')"
  }
}
[Network Visualization] Found network relationships: { count: 21 }
[Network Visualization] Returning visualization data: { centerNode: 'Bank of America', nodeCount: 21 }
[Tasks] Tasks found: { count: 57 }
11:07:09 AM [info] GET /api/network/visualization 200 in 89ms :: {"center":{"id":5,"name":"Bank of America","riskScore":89,"riskBucket":"low",...
11:07:09 AM [info] GET /api/tasks 200 in 119ms :: [{"id":384,"title":"1. KYB Form: DevelopmentTesting7","description":"Complete...
11:07:09 AM [info] GET /api/companies/current 304 in 32ms :: {"id":5,"name":"Bank of America","description":"Bank of America is a leading ...
11:07:09 AM [info] GET /api/tasks 304 in 36ms :: [{"id":384,"title":"1. KYB Form: DevelopmentTesting7","description":"Complete...
[WebSocket] Received pong
[WebSocket] Received pong
11:08:21 AM [info] POST /api/fintech/check-company 200 in 57ms :: {"exists":false}
[2025-04-20T11:08:23.475Z] Database pool error: {
  message: 'terminating connection due to administrator command',
  stack: 'error: terminating connection due to administrator command\n' +
    '    at cn.parseErrorMessage (file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1182:6)\n' +
    '    at cn.handlePacket (file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1143:13)\n' +
    '    at cn.parse (file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1127:36)\n' +
    '    at v.<anonymous> (file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1190:16)\n' +
    '    at v.emit (file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:397:12)\n' +
    '    at WebSocket.<anonymous> (file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:987:80)\n' +
    '    at callListener (/home/runner/workspace/node_modules/ws/lib/event-target.js:290:14)\n' +
    '    at WebSocket.onMessage (/home/runner/workspace/node_modules/ws/lib/event-target.js:209:9)\n' +
    '    at WebSocket.emit (node:events:518:28)\n' +
    '    at Receiver.receiverOnMessage (/home/runner/workspace/node_modules/ws/lib/websocket.js:1220:20)\n' +
    '    at Receiver.emit (node:events:518:28)\n' +
    '    at Receiver.dataMessage (/home/runner/workspace/node_modules/ws/lib/receiver.js:569:14)\n' +
    '    at Receiver.getData (/home/runner/workspace/node_modules/ws/lib/receiver.js:496:10)\n' +
    '    at Receiver.startLoop (/home/runner/workspace/node_modules/ws/lib/receiver.js:167:16)\n' +
    '    at Receiver._write (/home/runner/workspace/node_modules/ws/lib/receiver.js:94:10)\n' +
    '    at writeOrBuffer (node:internal/streams/writable:572:12)\n' +
    '    at _write (node:internal/streams/writable:501:10)\n' +
    '    at Writable.write (node:internal/streams/writable:510:10)\n' +
    '    at TLSSocket.socketOnData (/home/runner/workspace/node_modules/ws/lib/websocket.js:1355:35)\n' +
    '    at TLSSocket.emit (node:events:518:28)\n' +
    '    at addChunk (node:internal/streams/readable:561:12)\n' +
    '    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n' +
    '    at Readable.push (node:internal/streams/readable:392:5)\n' +
    '    at TLSWrap.onStreamRead (node:internal/stream_base_commons:191:23)'
}
Attempting to reconnect in 1000ms (attempt 1/3)
Failed to reconnect: Client has already been connected. You cannot reuse a client.
[WebSocket] Received pong
[WebSocket] Received pong
[FinTech Invite] Starting invitation process with payload: {
  email: '***@***.***',
  full_name: 'John Doe',
  company_name: 'DevelopmentTesting8',
  sender_name: 'Bob Smith',
  sender_company: 'Invela'
}
[FinTech Invite] Found sender company: { name: 'Bank of America', duration: 36 }
[FinTech Invite] Created company: { id: 179, duration: 93 }
[FinTech Invite] Created user: { id: 220, duration: 187 }
[FinTech Invite] Creating user onboarding task
[FinTech Invite] Created onboarding task: { taskId: 387, status: 'email_sent', assignedTo: 220, duration: 223 }
[FinTech Invite] Created invitation: { id: 228, code: 'CF8C5B', duration: 260 }
[FinTech Invite] Creating company tasks with existing transaction
[Company Service] Creating new company: DevelopmentTesting8 { hasExistingTransaction: true, timestamp: '2025-04-20T11:08:28.563Z' }
[Company Service] Using existing transaction for company creation
[Company Service] Using existing company record: { id: 179, name: 'DevelopmentTesting8' }
[Company Service] Creating tasks with creator ID: 183
[Company Service] Creating KYB task for company: 179
[Company Service] Created KYB task: { taskId: 388, companyId: 179, duration: 29 }
[Company Service] Creating Security Assessment task for company: 179
[Company Service] Created Security Assessment task: { taskId: 389, companyId: 179, duration: 58 }
[Company Service] Creating CARD task for company: 179
[Company Service] Created CARD task: { taskId: 390, companyId: 179, duration: 88 }
[Company Service] Creating relationship with Invela for company: 179
[Company Service] Creating relationship with creator company: 5
[Company Service] Created relationships: {
  invelaRelationshipId: 148,
  creatorRelationshipId: 149,
  newCompanyId: 179,
  duration: 153
}
[WebSocket] Broadcasting task update: {
  taskId: 388,
  status: 'not_started',
  progress: 0,
  metadata: {
    company_id: 179,
    created_at: '2025-04-20T11:08:28.563Z',
    created_via: 'fintech_invite',
    status_flow: [ 'not_started' ],
    company_name: 'DevelopmentTesting8',
    created_by_id: 183,
    prerequisite_for: [ 'security_assessment' ]
  }
}
[WebSocket] Broadcasting task update: {
  taskId: 389,
  status: 'not_started',
  progress: 0,
  metadata: {
    locked: true,
    company_id: 179,
    created_at: '2025-04-20T11:08:28.593Z',
    created_via: 'fintech_invite',
    status_flow: [ 'not_started' ],
    company_name: 'DevelopmentTesting8',
    last_updated: '2025-04-20T11:08:28.593Z',
    created_by_id: 183,
    progressHistory: [ [Object] ],
    prerequisite_for: [ 'company_card' ],
    prerequisite_task_id: 388,
    prerequisite_task_type: 'company_kyb'
  }
}
[WebSocket] Broadcasting task update: {
  taskId: 390,
  status: 'not_started',
  progress: 0,
  metadata: {
    locked: true,
    company_id: 179,
    created_at: '2025-04-20T11:08:28.621Z',
    statusFlow: [ 'not_started' ],
    created_via: 'fintech_invite',
    company_name: 'DevelopmentTesting8',
    last_updated: '2025-04-20T11:08:28.621Z',
    created_by_id: 183,
    progressHistory: [ [Object] ],
    prerequisite_task_id: 389,
    prerequisite_task_type: 'security_assessment'
  }
}
[FinTech Invite] Tasks created successfully: {
  companyId: 179,
  tasks: { kyb: 388, security: 389, card: 390, onboarding: 387 },
  duration: 414
}
[WebSocket] Broadcasting task update: {
  taskId: 387,
  status: 'email_sent',
  progress: 25,
  metadata: {
    user_id: 220,
    userEmail: 'email@e8.com',
    company_id: 179,
    created_at: '2025-04-20T11:08:28.490Z',
    statusFlow: [ 'email_sent' ],
    companyName: 'DevelopmentTesting8',
    created_via: 'fintech_invite',
    created_by_id: 183,
    email_sent_at: '2025-04-20T11:08:28.490Z'
  }
}
[FinTech Invite] Sending invitation email
[EmailService] Starting to send template email
[EmailService] Template type: fintech_invite
[EmailService] Recipient: email@e8.com
[EmailService] Template data (raw): {
  "recipientName": "John Doe",
  "recipientEmail": "email@e8.com",
  "senderName": "Bob Smith",
  "senderCompany": "Bank of America",
  "targetCompany": "DevelopmentTesting8",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=CF8C5B&email=email%40e8.com",
  "code": "CF8C5B"
}
[EmailService] Starting email validation for: email@e8.com
[EmailService] Checking MX records for domain: e8.com
[EmailService] MX record check failed: Error: queryMx ENOTFOUND e8.com
    at QueryReqWrap.onresolve [as oncomplete] (node:internal/dns/callback_resolver:45:19) {
  errno: undefined,
  code: 'ENOTFOUND',
  syscall: 'queryMx',
  hostname: 'e8.com'
}
[EmailService] Continuing despite MX check failure
[EmailService] Email validation successful for: email@e8.com
[EmailService] Transforming template data
[EmailService] Starting template data transformation
[EmailService] Input template data: {
  "recipientName": "John Doe",
  "recipientEmail": "email@e8.com",
  "senderName": "Bob Smith",
  "senderCompany": "Bank of America",
  "targetCompany": "DevelopmentTesting8",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=CF8C5B&email=email%40e8.com",
  "code": "CF8C5B"
}
[EmailService] Built invite URL: https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=CF8C5B&email=email%40e8.com
[EmailService] Transformed template data: {
  "recipientName": "John Doe",
  "recipientEmail": "email@e8.com",
  "senderName": "Bob Smith",
  "senderCompany": "Bank of America",
  "targetCompany": "DevelopmentTesting8",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=CF8C5B&email=email%40e8.com",
  "code": "CF8C5B"
}
[EmailService] Getting email template: fintech_invite
[EmailTemplate] Getting template: fintech_invite
[EmailTemplate] Template data: {
  "recipientName": "John Doe",
  "recipientEmail": "email@e8.com",
  "senderName": "Bob Smith",
  "senderCompany": "Bank of America",
  "targetCompany": "DevelopmentTesting8",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=CF8C5B&email=email%40e8.com",
  "code": "CF8C5B"
}
[Template:invitation] Received template data: {
  "recipientName": "John Doe",
  "recipientEmail": "email@e8.com",
  "senderName": "Bob Smith",
  "senderCompany": "Bank of America",
  "targetCompany": "DevelopmentTesting8",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/register?code=CF8C5B&email=email%40e8.com",
  "code": "CF8C5B",
  "inviteType": "fintech"
}
[EmailService] Template generated successfully
[EmailService] Preparing to send email with configuration: {
  from: 'EvanCNavarro@gmail.com',
  to: 'email@e8.com',
  subject: 'Invitation to join Invela',
  textLength: 621,
  htmlLength: 1693
}
[EmailService] Email sent successfully to: email@e8.com
[FinTech Invite] Invitation email sent successfully
[FinTech Invite] Process completed: {
  companyId: 179,
  userId: 220,
  invitationId: 228,
  onboardingTaskId: 387,
  duration: 1580
}
11:08:29 AM [info] POST /api/fintech/invite 201 in 1618ms :: {"message":"FinTech company invited successfully","company":{"id":179,"name":...
[Auth] Processing logout request
[Auth] Logout successful for user: 183
[Auth] Unauthenticated user session
[Invite Debug] Starting validation for code: CF8C5B
[Invite Debug] Found valid invitation: {
  id: 228,
  email: 'email@e8.com',
  status: 'pending',
  expires_at: 2025-04-27T11:08:28.526Z
}
11:09:03 AM [info] GET /api/invitations/CF8C5B/validate 200 in 62ms :: {"valid":true,"invitation":{"email":"email@e8.com","invitee_name":"John Doe",...
[Account Setup] Processing setup request for: email@e8.com
[Account Setup] Updated user: { id: 220, email: 'email@e8.com', onboarding_completed: false }
[Account Setup] Updated task status: { taskId: 387, status: 'completed', progress: 100 }
[WebSocket] Broadcasting task update: {
  taskId: 387,
  status: 'completed',
  progress: 100,
  metadata: {
    user_id: 220,
    userEmail: 'email@e8.com',
    company_id: 179,
    created_at: '2025-04-20T11:08:28.490Z',
    statusFlow: [ 'email_sent', 'completed' ],
    companyName: 'DevelopmentTesting8',
    created_via: 'fintech_invite',
    registeredAt: '2025-04-20T11:09:08.869Z',
    created_by_id: 183,
    email_sent_at: '2025-04-20T11:08:28.490Z'
  }
}
[Auth] Serializing user: 220
11:09:09 AM [info] POST /api/account/setup 200 in 377ms :: {"id":220,"email":"email@e8.com","full_name":"John Doe","first_name":"John","...
[Auth] Deserializing user: 220
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 220, company_id: 179, email: 'email@e8.com' }
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 220',
    condition2: 'tasks.created_by = 220',
    condition3: "tasks.company_id = 179 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('email@e8.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
[Current Company] Fetching company for user: { userId: 220, companyId: 179 }
11:09:09 AM [info] GET /api/tasks 200 in 92ms :: [{"id":388,"title":"1. KYB Form: DevelopmentTesting8","description":"Complete...
[Current Company] Found company: {
  id: 179,
  name: 'DevelopmentTesting8',
  onboardingCompleted: false,
  riskScore: null,
  isDemo: false
}
11:09:09 AM [info] GET /api/companies/current 200 in 61ms :: {"id":179,"name":"DevelopmentTesting8","description":"FinTech partner company...
11:09:09 AM [info] GET /api/tasks 304 in 30ms :: [{"id":388,"title":"1. KYB Form: DevelopmentTesting8","description":"Complete...
[Network Visualization] Fetching network data for company: 179
[Network Visualization] Found network relationships: { count: 2 }
[Network Visualization] Returning visualization data: { centerNode: 'DevelopmentTesting8', nodeCount: 2 }
11:09:11 AM [info] GET /api/network/visualization 200 in 112ms :: {"center":{"id":179,"name":"DevelopmentTesting8","riskScore":0,"riskBucket":"...
[User Onboarding] Completing onboarding for user: 220
[User Onboarding] Updated user onboarding status: { id: 220, onboarding_completed: true }
[WebSocket] Received pong
11:09:11 AM [info] POST /api/user/complete-onboarding 200 in 61ms :: {"id":220,"email":"email@e8.com","full_name":"John Doe","first_name":"John","...
[Auth] Returning user session data
11:09:11 AM [info] GET /api/tasks 304 in 30ms :: [{"id":388,"title":"1. KYB Form: DevelopmentTesting8","description":"Complete...
11:09:12 AM [info] GET /api/tasks 304 in 31ms :: [{"id":388,"title":"1. KYB Form: DevelopmentTesting8","description":"Complete...
[WebSocket] Received pong
WebSocket client disconnected with code 1001 and reason: 
WebSocket client disconnected with code 1001 and reason: 
[Auth] Using cached user data: 220
[Auth] Using cached user data: 220
[Auth] Using cached user data: 220
[Auth] Using cached user data: 220
[Auth] Using cached user data: 220
[Auth] Using cached user data: 220
[Auth] Using cached user data: 220
[Auth] Using cached user data: 220
[Auth] Returning user session data
[Tasks Routes] Fetching task by ID: { taskId: 384, timestamp: '2025-04-20T11:09:26.422Z' }
11:09:26 AM [info] GET /api/tasks 304 in 30ms :: [{"id":388,"title":"1. KYB Form: DevelopmentTesting8","description":"Complete...
11:09:26 AM [info] GET /api/companies/current 304 in 32ms :: {"id":179,"name":"DevelopmentTesting8","description":"FinTech partner company...
[Tasks Routes] Fetching latest KYB form data for task: 384
[Tasks Routes] No KYB responses found for task 384
[Tasks Routes] Task found by ID: {
  taskId: 384,
  title: '1. KYB Form: DevelopmentTesting7',
  type: 'company_kyb',
  formDataFields: 0,
  timestamp: '2025-04-20T11:09:26.554Z'
}
New WebSocket client connected
11:09:26 AM [info] GET /api/tasks/384 200 in 162ms :: {"id":384,"title":"1. KYB Form: DevelopmentTesting7","description":"Complete ...
11:09:26 AM [info] GET /api/tasks 304 in 34ms :: [{"id":388,"title":"1. KYB Form: DevelopmentTesting8","description":"Complete...
[Task Templates API] Fetching template for task type: company_kyb, user: 220
11:09:26 AM [warn] GET /api/companies/is-demo 400 in 30ms :: {"message":"Invalid company ID","code":"INVALID_ID"}
[Task Templates API] Found template: 1 (KYB Form) for task type: company_kyb
[Task Templates API] Retrieved 9 configuration items for template ID: 1
11:09:26 AM [info] GET /api/task-templates/by-type/company_kyb 304 in 104ms :: {"id":1,"name":"KYB Form","description":"Know Your Business form for company ...
11:09:26 AM [warn] GET /api/companies/178 404 in 59ms :: {"message":"Company not found","code":"COMPANY_NOT_FOUND"}
[Auth] Using cached user data: 220
[2025-04-20T11:09:26.993Z] [INFO] [KYBRoutes] Fetching KYB fields
[2025-04-20T11:09:27.024Z] [INFO] [KYBRoutes] KYB fields retrieved successfully {"fieldCount":30,"groups":["companyProfile","financialProfile","governanceLeadership","operationsCompliance"]}
New WebSocket client connected
11:09:27 AM [info] GET /api/kyb/fields 304 in 62ms :: [{"id":1,"field_key":"legalEntityName","display_name":"Legal Entity Name","fi...
[KYB API Debug] Loading progress for task: 384
[Task Reconciliation] Found 0 responses for task 384
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-04-20T11:09:27.269Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 384,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 384
[KYB API Debug] Retrieved task: {
  taskId: undefined,
  status: undefined,
  progress: undefined,
  metadata: null,
  timestamp: '2025-04-20T11:09:27.299Z'
}
[KYB API Debug] Task not found or access denied: {
  taskId: '384',
  userCompanyId: 179,
  timestamp: '2025-04-20T11:09:27.299Z'
}
11:09:27 AM [warn] GET /api/kyb/progress/384 404 in 120ms :: {"error":"Task not found or access denied"}
[KYB API Debug] Loading progress for task: 384
[Task Reconciliation] Found 0 responses for task 384
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-04-20T11:09:27.533Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 384,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 384
[KYB API Debug] Retrieved task: {
  taskId: undefined,
  status: undefined,
  progress: undefined,
  metadata: null,
  timestamp: '2025-04-20T11:09:27.562Z'
}
[KYB API Debug] Task not found or access denied: {
  taskId: '384',
  userCompanyId: 179,
  timestamp: '2025-04-20T11:09:27.562Z'
}
11:09:27 AM [warn] GET /api/kyb/progress/384 404 in 117ms :: {"error":"Task not found or access denied"}
[KYB API Debug] Loading progress for task: 384
[Task Reconciliation] Found 0 responses for task 384
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-04-20T11:09:27.799Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 384,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 384
[KYB API Debug] Retrieved task: {
  taskId: undefined,
  status: undefined,
  progress: undefined,
  metadata: null,
  timestamp: '2025-04-20T11:09:27.827Z'
}
[KYB API Debug] Task not found or access denied: {
  taskId: '384',
  userCompanyId: 179,
  timestamp: '2025-04-20T11:09:27.828Z'
}
11:09:27 AM [warn] GET /api/kyb/progress/384 404 in 117ms :: {"error":"Task not found or access denied"}
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[WebSocket] Received pong
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 220, company_id: 179, email: 'email@e8.com' }
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 220',
    condition2: 'tasks.created_by = 220',
    condition3: "tasks.company_id = 179 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('email@e8.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
11:11:17 AM [info] GET /api/tasks 304 in 129ms :: [{"id":388,"title":"1. KYB Form: DevelopmentTesting8","description":"Complete...
11:11:17 AM [info] GET /api/tasks 304 in 30ms :: [{"id":388,"title":"1. KYB Form: DevelopmentTesting8","description":"Complete...
[Tasks Routes] Fetching task by ID: { taskId: 388, timestamp: '2025-04-20T11:11:18.434Z' }
[Tasks Routes] Fetching latest KYB form data for task: 388
[Tasks Routes] No KYB responses found for task 388
[Tasks Routes] Task found by ID: {
  taskId: 388,
  title: '1. KYB Form: DevelopmentTesting8',
  type: 'company_kyb',
  formDataFields: 0,
  timestamp: '2025-04-20T11:11:18.542Z'
}
11:11:18 AM [info] GET /api/tasks/388 200 in 139ms :: {"id":388,"title":"1. KYB Form: DevelopmentTesting8","description":"Complete ...
[Auth] Returning user session data
[Task Templates API] Fetching template for task type: company_kyb, user: 220
[Task Templates API] Found template: 1 (KYB Form) for task type: company_kyb
11:11:18 AM [info] GET /api/companies/current 304 in 31ms :: {"id":179,"name":"DevelopmentTesting8","description":"FinTech partner company...
[Task Templates API] Retrieved 9 configuration items for template ID: 1
11:11:18 AM [info] GET /api/task-templates/by-type/company_kyb 304 in 137ms :: {"id":1,"name":"KYB Form","description":"Know Your Business form for company ...
[KYB API Debug] Loading progress for task: 388
[Task Reconciliation] Found 0 responses for task 388
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-04-20T11:11:19.116Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 388,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 388
[KYB API Debug] Retrieved task: {
  taskId: 388,
  status: 'not_started',
  progress: 0,
  metadata: [
    'company_id',
    'created_at',
    'created_via',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for'
  ],
  timestamp: '2025-04-20T11:11:19.147Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-04-20T11:11:19.178Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 388,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T11:11:19.178Z
[SERVER DEBUG] Task ID: 388, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
11:11:19 AM [info] GET /api/kyb/progress/388 200 in 157ms :: {"formData":{},"progress":0,"status":"not_started"}
[KYB API Debug] Loading progress for task: 388
[Task Reconciliation] Found 0 responses for task 388
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-04-20T11:11:19.418Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 388,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 388
[KYB API Debug] Retrieved task: {
  taskId: 388,
  status: 'not_started',
  progress: 0,
  metadata: [
    'company_id',
    'created_at',
    'created_via',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for'
  ],
  timestamp: '2025-04-20T11:11:19.448Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-04-20T11:11:19.477Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 388,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T11:11:19.477Z
[SERVER DEBUG] Task ID: 388, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
11:11:19 AM [info] GET /api/kyb/progress/388 304 in 148ms :: {"formData":{},"progress":0,"status":"not_started"}
[KYB API Debug] Loading progress for task: 388
[Task Reconciliation] Found 0 responses for task 388
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-04-20T11:11:19.723Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 388,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 388
[KYB API Debug] Retrieved task: {
  taskId: 388,
  status: 'not_started',
  progress: 0,
  metadata: [
    'company_id',
    'created_at',
    'created_via',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for'
  ],
  timestamp: '2025-04-20T11:11:19.752Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-04-20T11:11:19.785Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 388,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T11:11:19.785Z
[SERVER DEBUG] Task ID: 388, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
11:11:19 AM [info] GET /api/kyb/progress/388 304 in 159ms :: {"formData":{},"progress":0,"status":"not_started"}
11:11:20 AM [warn] GET /api/companies/is-demo 400 in 31ms :: {"message":"Invalid company ID","code":"INVALID_ID"}
11:11:21 AM [info] GET /api/companies/179 200 in 90ms :: {"id":179,"name":"DevelopmentTesting8","description":"FinTech partner company...
11:11:22 AM [info] GET /api/tasks 304 in 32ms :: [{"id":388,"title":"1. KYB Form: DevelopmentTesting8","description":"Complete...
[Task Templates API] Fetching template for task type: company_kyb, user: 220
[Task Templates API] Found template: 1 (KYB Form) for task type: company_kyb
11:11:23 AM [warn] GET /api/companies/is-demo 400 in 31ms :: {"message":"Invalid company ID","code":"INVALID_ID"}
[Task Templates API] Retrieved 9 configuration items for template ID: 1
11:11:23 AM [info] GET /api/task-templates/by-type/company_kyb 304 in 90ms :: {"id":1,"name":"KYB Form","description":"Know Your Business form for company ...
[Tasks Routes] Fetching task by ID: { taskId: 388, timestamp: '2025-04-20T11:11:23.850Z' }
[Tasks Routes] Fetching latest KYB form data for task: 388
[Tasks Routes] No KYB responses found for task 388
[Tasks Routes] Task found by ID: {
  taskId: 388,
  title: '1. KYB Form: DevelopmentTesting8',
  type: 'company_kyb',
  formDataFields: 0,
  timestamp: '2025-04-20T11:11:23.938Z'
}
11:11:23 AM [info] GET /api/tasks/388 304 in 118ms :: {"id":388,"title":"1. KYB Form: DevelopmentTesting8","description":"Complete ...
11:11:23 AM [info] GET /api/companies/179 304 in 60ms :: {"id":179,"name":"DevelopmentTesting8","description":"FinTech partner company...
[KYB API Debug] Loading progress for task: 388
[Task Reconciliation] Found 0 responses for task 388
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-04-20T11:11:24.038Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 388,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 388
[KYB API Debug] Retrieved task: {
  taskId: 388,
  status: 'not_started',
  progress: 0,
  metadata: [
    'company_id',
    'created_at',
    'created_via',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for'
  ],
  timestamp: '2025-04-20T11:11:24.068Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-04-20T11:11:24.097Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 388,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T11:11:24.097Z
[SERVER DEBUG] Task ID: 388, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
11:11:24 AM [info] GET /api/kyb/progress/388 304 in 150ms :: {"formData":{},"progress":0,"status":"not_started"}
[KYB API Debug] Loading progress for task: 388
[Task Reconciliation] Found 0 responses for task 388
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-04-20T11:11:24.335Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 388,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 388
[KYB API Debug] Retrieved task: {
  taskId: 388,
  status: 'not_started',
  progress: 0,
  metadata: [
    'company_id',
    'created_at',
    'created_via',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for'
  ],
  timestamp: '2025-04-20T11:11:24.364Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-04-20T11:11:24.394Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 388,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T11:11:24.394Z
[SERVER DEBUG] Task ID: 388, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
11:11:24 AM [info] GET /api/kyb/progress/388 304 in 150ms :: {"formData":{},"progress":0,"status":"not_started"}
[KYB API Debug] Loading progress for task: 388
[Task Reconciliation] Found 0 responses for task 388
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-04-20T11:11:24.632Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 388,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 388
[KYB API Debug] Retrieved task: {
  taskId: 388,
  status: 'not_started',
  progress: 0,
  metadata: [
    'company_id',
    'created_at',
    'created_via',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for'
  ],
  timestamp: '2025-04-20T11:11:24.661Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-04-20T11:11:24.691Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 388,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T11:11:24.691Z
[SERVER DEBUG] Task ID: 388, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
11:11:24 AM [info] GET /api/kyb/progress/388 304 in 150ms :: {"formData":{},"progress":0,"status":"not_started"}
[KYB API Debug] Loading progress for task: 388
[Task Reconciliation] Found 0 responses for task 388
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-04-20T11:11:24.932Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 388,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 388
[KYB API Debug] Retrieved task: {
  taskId: 388,
  status: 'not_started',
  progress: 0,
  metadata: [
    'company_id',
    'created_at',
    'created_via',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for'
  ],
  timestamp: '2025-04-20T11:11:24.962Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-04-20T11:11:24.992Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 388,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T11:11:24.992Z
[SERVER DEBUG] Task ID: 388, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
11:11:25 AM [info] GET /api/kyb/progress/388 304 in 150ms :: {"formData":{},"progress":0,"status":"not_started"}
[KYB API Debug] Loading progress for task: 388
[Task Reconciliation] Found 0 responses for task 388
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-04-20T11:11:25.231Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 388,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 388
[KYB API Debug] Retrieved task: {
  taskId: 388,
  status: 'not_started',
  progress: 0,
  metadata: [
    'company_id',
    'created_at',
    'created_via',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for'
  ],
  timestamp: '2025-04-20T11:11:25.261Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-04-20T11:11:25.290Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 388,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T11:11:25.291Z
[SERVER DEBUG] Task ID: 388, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
11:11:25 AM [info] GET /api/kyb/progress/388 304 in 151ms :: {"formData":{},"progress":0,"status":"not_started"}
[KYB API Debug] Loading progress for task: 388
[Task Reconciliation] Found 0 responses for task 388
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-04-20T11:11:25.529Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 388,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 388
[KYB API Debug] Retrieved task: {
  taskId: 388,
  status: 'not_started',
  progress: 0,
  metadata: [
    'company_id',
    'created_at',
    'created_via',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for'
  ],
  timestamp: '2025-04-20T11:11:25.560Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-04-20T11:11:25.590Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 388,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T11:11:25.590Z
[SERVER DEBUG] Task ID: 388, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
11:11:25 AM [info] GET /api/kyb/progress/388 304 in 152ms :: {"formData":{},"progress":0,"status":"not_started"}
[KYB API Debug] Loading progress for task: 388
[Task Reconciliation] Found 0 responses for task 388
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-04-20T11:11:25.829Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 388,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 388
[KYB API Debug] Retrieved task: {
  taskId: 388,
  status: 'not_started',
  progress: 0,
  metadata: [
    'company_id',
    'created_at',
    'created_via',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for'
  ],
  timestamp: '2025-04-20T11:11:25.859Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-04-20T11:11:25.890Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 388,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T11:11:25.890Z
[SERVER DEBUG] Task ID: 388, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
11:11:25 AM [info] GET /api/kyb/progress/388 304 in 150ms :: {"formData":{},"progress":0,"status":"not_started"}
[KYB API Debug] Loading progress for task: 388
[Task Reconciliation] Found 0 responses for task 388
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-04-20T11:11:26.129Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 388,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 388
[KYB API Debug] Retrieved task: {
  taskId: 388,
  status: 'not_started',
  progress: 0,
  metadata: [
    'company_id',
    'created_at',
    'created_via',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for'
  ],
  timestamp: '2025-04-20T11:11:26.159Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-04-20T11:11:26.188Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 388,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T11:11:26.189Z
[SERVER DEBUG] Task ID: 388, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
11:11:26 AM [info] GET /api/kyb/progress/388 304 in 152ms :: {"formData":{},"progress":0,"status":"not_started"}
11:11:29 AM [info] GET /api/tasks 304 in 30ms :: [{"id":388,"title":"1. KYB Form: DevelopmentTesting8","description":"Complete...
[WebSocket] Received pong
[WebSocket] Received pong
11:11:44 AM [info] GET /api/tasks 304 in 29ms :: [{"id":388,"title":"1. KYB Form: DevelopmentTesting8","description":"Complete...
[Tasks Routes] Fetching task by ID: { taskId: 388, timestamp: '2025-04-20T11:11:57.877Z' }
[Auth] Using cached user data: 220
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 220, company_id: 179, email: 'email@e8.com' }
[Tasks Routes] Fetching latest KYB form data for task: 388
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 220',
    condition2: 'tasks.created_by = 220',
    condition3: "tasks.company_id = 179 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('email@e8.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
[Tasks Routes] No KYB responses found for task 388
[Tasks Routes] Task found by ID: {
  taskId: 388,
  title: '1. KYB Form: DevelopmentTesting8',
  type: 'company_kyb',
  formDataFields: 0,
  timestamp: '2025-04-20T11:11:57.967Z'
}
11:11:57 AM [info] GET /api/tasks 304 in 91ms :: [{"id":388,"title":"1. KYB Form: DevelopmentTesting8","description":"Complete...
11:11:57 AM [info] GET /api/tasks/388 304 in 121ms :: {"id":388,"title":"1. KYB Form: DevelopmentTesting8","description":"Complete ...
[Auth] Returning user session data
[Task Templates API] Fetching template for task type: company_kyb, user: 220
[Task Templates API] Found template: 1 (KYB Form) for task type: company_kyb
11:11:58 AM [warn] GET /api/companies/is-demo 400 in 57ms :: {"message":"Invalid company ID","code":"INVALID_ID"}
11:11:58 AM [info] GET /api/companies/current 304 in 33ms :: {"id":179,"name":"DevelopmentTesting8","description":"FinTech partner company...
[Task Templates API] Retrieved 9 configuration items for template ID: 1
11:11:58 AM [info] GET /api/task-templates/by-type/company_kyb 304 in 91ms :: {"id":1,"name":"KYB Form","description":"Know Your Business form for company ...
11:11:58 AM [info] GET /api/companies/179 200 in 61ms :: {"id":179,"name":"DevelopmentTesting8","description":"FinTech partner company...
[KYB API Debug] Loading progress for task: 388
[Task Reconciliation] Found 0 responses for task 388
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-04-20T11:11:58.330Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 388,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 388
[KYB API Debug] Retrieved task: {
  taskId: 388,
  status: 'not_started',
  progress: 0,
  metadata: [
    'company_id',
    'created_at',
    'created_via',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for'
  ],
  timestamp: '2025-04-20T11:11:58.360Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-04-20T11:11:58.389Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 388,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T11:11:58.390Z
[SERVER DEBUG] Task ID: 388, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
11:11:58 AM [info] GET /api/kyb/progress/388 304 in 151ms :: {"formData":{},"progress":0,"status":"not_started"}
[KYB API Debug] Loading progress for task: 388
[Task Reconciliation] Found 0 responses for task 388
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-04-20T11:11:58.626Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 388,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 388
[KYB API Debug] Retrieved task: {
  taskId: 388,
  status: 'not_started',
  progress: 0,
  metadata: [
    'company_id',
    'created_at',
    'created_via',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for'
  ],
  timestamp: '2025-04-20T11:11:58.656Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-04-20T11:11:58.686Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 388,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T11:11:58.686Z
[SERVER DEBUG] Task ID: 388, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
11:11:58 AM [info] GET /api/kyb/progress/388 304 in 149ms :: {"formData":{},"progress":0,"status":"not_started"}
[KYB API Debug] Loading progress for task: 388
[Task Reconciliation] Found 0 responses for task 388
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-04-20T11:11:58.922Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 388,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 388
[KYB API Debug] Retrieved task: {
  taskId: 388,
  status: 'not_started',
  progress: 0,
  metadata: [
    'company_id',
    'created_at',
    'created_via',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for'
  ],
  timestamp: '2025-04-20T11:11:58.952Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-04-20T11:11:58.982Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 388,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T11:11:58.982Z
[SERVER DEBUG] Task ID: 388, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
11:11:59 AM [info] GET /api/kyb/progress/388 304 in 150ms :: {"formData":{},"progress":0,"status":"not_started"}
[KYB API Debug] Loading progress for task: 388
[Task Reconciliation] Found 0 responses for task 388
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-04-20T11:11:59.224Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 388,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 388
[KYB API Debug] Retrieved task: {
  taskId: 388,
  status: 'not_started',
  progress: 0,
  metadata: [
    'company_id',
    'created_at',
    'created_via',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for'
  ],
  timestamp: '2025-04-20T11:11:59.253Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-04-20T11:11:59.283Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 388,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T11:11:59.283Z
[SERVER DEBUG] Task ID: 388, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
11:11:59 AM [info] GET /api/kyb/progress/388 304 in 149ms :: {"formData":{},"progress":0,"status":"not_started"}
[2025-04-20T11:12:01.749Z] [INFO] [KYBRoutes] Demo auto-fill requested for task {"taskId":"388"}
[2025-04-20T11:12:01.848Z] [INFO] [KYBRoutes] Fetched fields for demo auto-fill {"fieldCount":30,"taskId":"388"}
[KYB Demo Auto-Fill] First 5 fields from database:
[KYB Demo Auto-Fill] Raw field objects: [
  {
    id: 1,
    field_key: 'legalEntityName',
    display_name: 'Legal Entity Name',
    field_type: 'TEXT',
    question: 'What is the registered business name?',
    group: 'companyProfile',
    required: true,
    order: 1,
    step_index: 0,
    validation_rules: null,
    help_text: 'The official name under which your business is registered with government authorities.',
    demo_autofill: null,
    created_at: 2025-03-05T07:32:29.195Z,
    updated_at: 2025-03-05T07:32:29.195Z
  },
  {
    id: 2,
    field_key: 'registrationNumber',
    display_name: 'Registration Number',
    field_type: 'TEXT',
    question: "What is your company's entity registration number (e.g., EIN or State Entity ID)?",
    group: 'companyProfile',
    required: true,
    order: 2,
    step_index: 0,
    validation_rules: null,
    help_text: 'In the US, this is typically your EIN (Employer Identification Number) or state entity registration number.',
    demo_autofill: '12-3456789',
    created_at: 2025-03-05T07:32:29.195Z,
    updated_at: 2025-03-05T07:32:29.195Z
  },
  {
    id: 3,
    field_key: 'incorporationDate',
    display_name: 'Incorporation Date',
    field_type: 'DATE',
    question: 'When was the company incorporated?',
    group: 'companyProfile',
    required: true,
    order: 3,
    step_index: 0,
    validation_rules: null,
    help_text: 'The date when your company was legally established as per your registration documents.',
    demo_autofill: '5/12/2010',
    created_at: 2025-03-05T07:32:29.195Z,
    updated_at: 2025-03-05T07:32:29.195Z
  },
  {
    id: 4,
    field_key: 'businessType',
    display_name: 'Business Type',
    field_type: 'TEXT',
    question: 'What type of business entity is this?',
    group: 'companyProfile',
    required: true,
    order: 4,
    step_index: 0,
    validation_rules: null,
    help_text: 'Examples include LLC, Corporation, Partnership, Sole Proprietorship, etc.',
    demo_autofill: 'Limited Liability Company (LLC)',
    created_at: 2025-03-05T07:32:29.195Z,
    updated_at: 2025-03-05T07:32:29.195Z
  },
  {
    id: 5,
    field_key: 'jurisdiction',
    display_name: 'Jurisdiction',
    field_type: 'TEXT',
    question: 'In which jurisdiction is the company registered?',
    group: 'companyProfile',
    required: true,
    order: 5,
    step_index: 0,
    validation_rules: null,
    help_text: 'The country, state, or region where your company is officially registered.',
    demo_autofill: 'Delaware, United States',
    created_at: 2025-03-05T07:32:29.195Z,
    updated_at: 2025-03-05T07:32:29.195Z
  }
]
[KYB Demo Auto-Fill] Field legalEntityName has these properties: [
  'id',           'field_key',
  'display_name', 'field_type',
  'question',     'group',
  'required',     'order',
  'step_index',   'validation_rules',
  'help_text',    'demo_autofill',
  'created_at',   'updated_at'
]
[KYB Demo Auto-Fill] Field legalEntityName demo_autofill = "null"
[KYB Demo Auto-Fill] Field registrationNumber has these properties: [
  'id',           'field_key',
  'display_name', 'field_type',
  'question',     'group',
  'required',     'order',
  'step_index',   'validation_rules',
  'help_text',    'demo_autofill',
  'created_at',   'updated_at'
]
[KYB Demo Auto-Fill] Field registrationNumber demo_autofill = "12-3456789"
[KYB Demo Auto-Fill] Field incorporationDate has these properties: [
  'id',           'field_key',
  'display_name', 'field_type',
  'question',     'group',
  'required',     'order',
  'step_index',   'validation_rules',
  'help_text',    'demo_autofill',
  'created_at',   'updated_at'
]
[KYB Demo Auto-Fill] Field incorporationDate demo_autofill = "5/12/2010"
[KYB Demo Auto-Fill] Field businessType has these properties: [
  'id',           'field_key',
  'display_name', 'field_type',
  'question',     'group',
  'required',     'order',
  'step_index',   'validation_rules',
  'help_text',    'demo_autofill',
  'created_at',   'updated_at'
]
[KYB Demo Auto-Fill] Field businessType demo_autofill = "Limited Liability Company (LLC)"
[KYB Demo Auto-Fill] Field jurisdiction has these properties: [
  'id',           'field_key',
  'display_name', 'field_type',
  'question',     'group',
  'required',     'order',
  'step_index',   'validation_rules',
  'help_text',    'demo_autofill',
  'created_at',   'updated_at'
]
[KYB Demo Auto-Fill] Field jurisdiction demo_autofill = "Delaware, United States"
[KYB Demo Auto-Fill] Using company name for legalEntityName: DevelopmentTesting8
[KYB Demo Auto-Fill] Used database value for registrationNumber: 12-3456789
[KYB Demo Auto-Fill] Used database value for incorporationDate: 5/12/2010
[KYB Demo Auto-Fill] Used database value for businessType: Limited Liability Company (LLC)
[KYB Demo Auto-Fill] Used database value for jurisdiction: Delaware, United States
[KYB Demo Auto-Fill] Used database value for registeredAddress: 123 Market Street, Wilmington, DE 19801
[KYB Demo Auto-Fill] Used database value for companyPhone: (302) 555-1234
[KYB Demo Auto-Fill] Used database value for priorNames: None
[KYB Demo Auto-Fill] Used database value for marketCapitalization: $75 million (privately held)
[KYB Demo Auto-Fill] Used database value for lifetimeCustomerValue: $1,250
[KYB Demo Auto-Fill] Used database value for annualRecurringRevenue: 5,000,000
[KYB Demo Auto-Fill] Used database value for monthlyRecurringRevenue: 12,500,000
[KYB Demo Auto-Fill] Used database value for licenses: Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765
[KYB Demo Auto-Fill] Used database value for goodStanding: Yes
[KYB Demo Auto-Fill] Used database value for corporateRegistration: No
[KYB Demo Auto-Fill] Used database value for externalAudit: No
[KYB Demo Auto-Fill] Used database value for controlEnvironment: Yes
[KYB Demo Auto-Fill] Used database value for authorizedSigners: John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)
[KYB Demo Auto-Fill] Used database value for governmentOwnership: No
[KYB Demo Auto-Fill] Used database value for ultimateBeneficialOwners: None
[KYB Demo Auto-Fill] Used database value for directorsAndOfficers: John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)
[KYB Demo Auto-Fill] Using current user email for contactEmail: email@e8.com
[KYB Demo Auto-Fill] Used database value for investigationsIncidents: No significant incidents in the past 3 years
[KYB Demo Auto-Fill] Used database value for financialStatements: Yes
[KYB Demo Auto-Fill] Used database value for operationalPolicies: ISO 27001 certified, SOC 2 Type II compliant
[KYB Demo Auto-Fill] Used database value for dataVolume: Approximately 2 million records per month
[KYB Demo Auto-Fill] Used database value for dataTypes: Financial transaction data, Account balances, Customer KYC information
[KYB Demo Auto-Fill] Used database value for sanctionsCheck: Approximately 2 million records per month
[KYB Demo Auto-Fill] Used database value for dueDiligence: Yes
[KYB Demo Auto-Fill] Used database value for regulatoryActions: Yes
[2025-04-20T11:12:01.850Z] [INFO] [KYBRoutes] Generated demo data for auto-fill {"fieldCount":30,"taskId":"388"}
11:12:01 AM [info] GET /api/kyb/demo-autofill/388 200 in 134ms :: {"legalEntityName":"DevelopmentTesting8","registrationNumber":"12-3456789","i...
[TimestampHandler] Saving 30 timestamps for task 388
[TimestampHandler] Successfully saved timestamps for task 388
[TimestampAPI] Saved 30 timestamps for task 388
11:12:02 AM [info] POST /api/kyb/timestamps/388 200 in 81ms :: {"message":"Timestamps saved successfully","count":30}
===============================================
[SERVER DEBUG] KYB PROGRESS SAVE REQUEST RECEIVED at 2025-04-20T11:12:02.827Z
===============================================
Task ID: 388
Progress: 100
Status: ready_for_submission
Field count: 30
Sample form data values:
- legalEntityName: "DevelopmentTesting8" (string)
- registrationNumber: "12-3456789" (string)
- incorporationDate: "5/12/2010" (string)
- businessType: "Limited Liability Company (LLC)" (string)
- jurisdiction: "Delaware, United States" (string)
Request details:
- Method: POST
- Content-Type: application/json
- Content-Length: 2433
===============================================
===============================================
[SERVER DEBUG] PROCESSING FORM DATA FIELDS AT 2025-04-20T11:12:02.887Z
[SERVER DEBUG] Task ID: 388, Field count: 30
===============================================
[SERVER DEBUG] COMPLETE FORM DATA DUMP:
[SERVER DEBUG] legalEntityName: "DevelopmentTesting8" (string)
[SERVER DEBUG] registrationNumber: "12-3456789" (string)
[SERVER DEBUG] incorporationDate: "5/12/2010" (string)
[SERVER DEBUG] businessType: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] jurisdiction: "Delaware, United States" (string)
[SERVER DEBUG] registeredAddress: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] companyPhone: "(302) 555-1234" (string)
[SERVER DEBUG] priorNames: "None" (string)
[SERVER DEBUG] licenses: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] goodStanding: "Yes" (string)
[SERVER DEBUG] corporateRegistration: "No" (string)
[SERVER DEBUG] externalAudit: "No" (string)
[SERVER DEBUG] controlEnvironment: "Yes" (string)
[SERVER DEBUG] authorizedSigners: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] governmentOwnership: "No" (string)
[SERVER DEBUG] ultimateBeneficialOwners: "None" (string)
[SERVER DEBUG] directorsAndOfficers: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] contactEmail: "email@e8.com" (string)
[SERVER DEBUG] marketCapitalization: "$75 million (privately held)" (string)
[SERVER DEBUG] lifetimeCustomerValue: "$1,250" (string)
[SERVER DEBUG] annualRecurringRevenue: "5,000,000" (string)
[SERVER DEBUG] monthlyRecurringRevenue: "12,500,000" (string)
[SERVER DEBUG] investigationsIncidents: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] financialStatements: "Yes" (string)
[SERVER DEBUG] operationalPolicies: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] dataVolume: "Approximately 2 million records per month" (string)
[SERVER DEBUG] dataTypes: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] sanctionsCheck: "Approximately 2 million records per month" (string)
[SERVER DEBUG] dueDiligence: "Yes" (string)
[SERVER DEBUG] regulatoryActions: "Yes" (string)
[SERVER DEBUG] END OF FORM DATA DUMP
[SERVER DEBUG] No fields with value "asdf" found in incoming data
[SERVER DEBUG] Processing field: "legalEntityName" (ID: 1)
[SERVER DEBUG] Original value: DevelopmentTesting8
[SERVER DEBUG] Normalized value: "DevelopmentTesting8" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "legalEntityName"
[SERVER DEBUG] - Value: "DevelopmentTesting8" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "legalEntityName":
[SERVER DEBUG] - Expected: "DevelopmentTesting8"
[SERVER DEBUG] - Actual: "DevelopmentTesting8"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "legalEntityName"
[SERVER DEBUG] Broadcasting legalEntityName insert via WebSocket: "DevelopmentTesting8"
[WebSocket] Broadcasting field update for task 388, field "legalEntityName": { value: 'DevelopmentTesting8', timestamp: '2025-04-20T11:12:02.984Z' }
[SERVER DEBUG] --- Finished processing field "legalEntityName" ---

[SERVER DEBUG] Processing field: "registrationNumber" (ID: 2)
[SERVER DEBUG] Original value: 12-3456789
[SERVER DEBUG] Normalized value: "12-3456789" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "registrationNumber"
[SERVER DEBUG] - Value: "12-3456789" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "registrationNumber":
[SERVER DEBUG] - Expected: "12-3456789"
[SERVER DEBUG] - Actual: "12-3456789"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "registrationNumber"
[SERVER DEBUG] --- Finished processing field "registrationNumber" ---

[SERVER DEBUG] Processing field: "incorporationDate" (ID: 3)
[SERVER DEBUG] Original value: 5/12/2010
[SERVER DEBUG] Normalized value: "5/12/2010" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "incorporationDate"
[SERVER DEBUG] - Value: "5/12/2010" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "incorporationDate":
[SERVER DEBUG] - Expected: "5/12/2010"
[SERVER DEBUG] - Actual: "5/12/2010"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "incorporationDate"
[SERVER DEBUG] --- Finished processing field "incorporationDate" ---

[SERVER DEBUG] Processing field: "businessType" (ID: 4)
[SERVER DEBUG] Original value: Limited Liability Company (LLC)
[SERVER DEBUG] Normalized value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "businessType"
[SERVER DEBUG] - Value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "businessType":
[SERVER DEBUG] - Expected: "Limited Liability Company (LLC)"
[SERVER DEBUG] - Actual: "Limited Liability Company (LLC)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "businessType"
[SERVER DEBUG] --- Finished processing field "businessType" ---

[SERVER DEBUG] Processing field: "jurisdiction" (ID: 5)
[SERVER DEBUG] Original value: Delaware, United States
[SERVER DEBUG] Normalized value: "Delaware, United States" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "jurisdiction"
[SERVER DEBUG] - Value: "Delaware, United States" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "jurisdiction":
[SERVER DEBUG] - Expected: "Delaware, United States"
[SERVER DEBUG] - Actual: "Delaware, United States"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "jurisdiction"
[SERVER DEBUG] --- Finished processing field "jurisdiction" ---

[SERVER DEBUG] Processing field: "registeredAddress" (ID: 6)
[SERVER DEBUG] Original value: 123 Market Street, Wilmington, DE 19801
[SERVER DEBUG] Normalized value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "registeredAddress"
[SERVER DEBUG] - Value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "registeredAddress":
[SERVER DEBUG] - Expected: "123 Market Street, Wilmington, DE 19801"
[SERVER DEBUG] - Actual: "123 Market Street, Wilmington, DE 19801"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "registeredAddress"
[SERVER DEBUG] --- Finished processing field "registeredAddress" ---

[SERVER DEBUG] Processing field: "companyPhone" (ID: 7)
[SERVER DEBUG] Original value: (302) 555-1234
[SERVER DEBUG] Normalized value: "(302) 555-1234" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "companyPhone"
[SERVER DEBUG] - Value: "(302) 555-1234" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "companyPhone":
[SERVER DEBUG] - Expected: "(302) 555-1234"
[SERVER DEBUG] - Actual: "(302) 555-1234"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "companyPhone"
[SERVER DEBUG] --- Finished processing field "companyPhone" ---

[SERVER DEBUG] Processing field: "priorNames" (ID: 8)
[SERVER DEBUG] Original value: None
[SERVER DEBUG] Normalized value: "None" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "priorNames"
[SERVER DEBUG] - Value: "None" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "priorNames":
[SERVER DEBUG] - Expected: "None"
[SERVER DEBUG] - Actual: "None"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "priorNames"
[SERVER DEBUG] --- Finished processing field "priorNames" ---

[SERVER DEBUG] Processing field: "licenses" (ID: 9)
[SERVER DEBUG] Original value: Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765
[SERVER DEBUG] Normalized value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "licenses"
[SERVER DEBUG] - Value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "licenses":
[SERVER DEBUG] - Expected: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] - Actual: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "licenses"
[SERVER DEBUG] --- Finished processing field "licenses" ---

[SERVER DEBUG] Processing field: "goodStanding" (ID: 10)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "goodStanding"
[SERVER DEBUG] - Value: "Yes" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "goodStanding":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "goodStanding"
[SERVER DEBUG] --- Finished processing field "goodStanding" ---

[SERVER DEBUG] Processing field: "corporateRegistration" (ID: 11)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "corporateRegistration"
[SERVER DEBUG] - Value: "No" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "corporateRegistration":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "corporateRegistration"
[SERVER DEBUG] --- Finished processing field "corporateRegistration" ---

[SERVER DEBUG] Processing field: "externalAudit" (ID: 12)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "externalAudit"
[SERVER DEBUG] - Value: "No" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "externalAudit":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "externalAudit"
[SERVER DEBUG] --- Finished processing field "externalAudit" ---

[SERVER DEBUG] Processing field: "controlEnvironment" (ID: 13)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "controlEnvironment"
[SERVER DEBUG] - Value: "Yes" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "controlEnvironment":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "controlEnvironment"
[SERVER DEBUG] --- Finished processing field "controlEnvironment" ---

[SERVER DEBUG] Processing field: "authorizedSigners" (ID: 14)
[SERVER DEBUG] Original value: John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)
[SERVER DEBUG] Normalized value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "authorizedSigners"
[SERVER DEBUG] - Value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "authorizedSigners":
[SERVER DEBUG] - Expected: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] - Actual: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "authorizedSigners"
[SERVER DEBUG] --- Finished processing field "authorizedSigners" ---

[SERVER DEBUG] Processing field: "governmentOwnership" (ID: 15)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "governmentOwnership"
[SERVER DEBUG] - Value: "No" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "governmentOwnership":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "governmentOwnership"
[SERVER DEBUG] --- Finished processing field "governmentOwnership" ---

[SERVER DEBUG] Processing field: "ultimateBeneficialOwners" (ID: 16)
[SERVER DEBUG] Original value: None
[SERVER DEBUG] Normalized value: "None" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "ultimateBeneficialOwners"
[SERVER DEBUG] - Value: "None" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "ultimateBeneficialOwners":
[SERVER DEBUG] - Expected: "None"
[SERVER DEBUG] - Actual: "None"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "ultimateBeneficialOwners"
[SERVER DEBUG] --- Finished processing field "ultimateBeneficialOwners" ---

[SERVER DEBUG] Processing field: "directorsAndOfficers" (ID: 17)
[SERVER DEBUG] Original value: John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)
[SERVER DEBUG] Normalized value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "directorsAndOfficers"
[SERVER DEBUG] - Value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "directorsAndOfficers":
[SERVER DEBUG] - Expected: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] - Actual: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "directorsAndOfficers"
[SERVER DEBUG] --- Finished processing field "directorsAndOfficers" ---

[SERVER DEBUG] Processing field: "contactEmail" (ID: 18)
[SERVER DEBUG] Original value: email@e8.com
[SERVER DEBUG] Normalized value: "email@e8.com" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "contactEmail"
[SERVER DEBUG] - Value: "email@e8.com" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "contactEmail":
[SERVER DEBUG] - Expected: "email@e8.com"
[SERVER DEBUG] - Actual: "email@e8.com"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "contactEmail"
[SERVER DEBUG] --- Finished processing field "contactEmail" ---

[SERVER DEBUG] Processing field: "marketCapitalization" (ID: 19)
[SERVER DEBUG] Original value: $75 million (privately held)
[SERVER DEBUG] Normalized value: "$75 million (privately held)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "marketCapitalization"
[SERVER DEBUG] - Value: "$75 million (privately held)" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "marketCapitalization":
[SERVER DEBUG] - Expected: "$75 million (privately held)"
[SERVER DEBUG] - Actual: "$75 million (privately held)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "marketCapitalization"
[SERVER DEBUG] --- Finished processing field "marketCapitalization" ---

[SERVER DEBUG] Processing field: "lifetimeCustomerValue" (ID: 20)
[SERVER DEBUG] Original value: $1,250
[SERVER DEBUG] Normalized value: "$1,250" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "lifetimeCustomerValue"
[SERVER DEBUG] - Value: "$1,250" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "lifetimeCustomerValue":
[SERVER DEBUG] - Expected: "$1,250"
[SERVER DEBUG] - Actual: "$1,250"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "lifetimeCustomerValue"
[SERVER DEBUG] --- Finished processing field "lifetimeCustomerValue" ---

[SERVER DEBUG] Processing field: "annualRecurringRevenue" (ID: 21)
[SERVER DEBUG] Original value: 5,000,000
[SERVER DEBUG] Normalized value: "5,000,000" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "annualRecurringRevenue"
[SERVER DEBUG] - Value: "5,000,000" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "annualRecurringRevenue":
[SERVER DEBUG] - Expected: "5,000,000"
[SERVER DEBUG] - Actual: "5,000,000"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "annualRecurringRevenue"
[SERVER DEBUG] --- Finished processing field "annualRecurringRevenue" ---

[SERVER DEBUG] Processing field: "monthlyRecurringRevenue" (ID: 22)
[SERVER DEBUG] Original value: 12,500,000
[SERVER DEBUG] Normalized value: "12,500,000" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "monthlyRecurringRevenue"
[SERVER DEBUG] - Value: "12,500,000" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "monthlyRecurringRevenue":
[SERVER DEBUG] - Expected: "12,500,000"
[SERVER DEBUG] - Actual: "12,500,000"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "monthlyRecurringRevenue"
[SERVER DEBUG] --- Finished processing field "monthlyRecurringRevenue" ---

[SERVER DEBUG] Processing field: "investigationsIncidents" (ID: 23)
[SERVER DEBUG] Original value: No significant incidents in the past 3 years
[SERVER DEBUG] Normalized value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "investigationsIncidents"
[SERVER DEBUG] - Value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "investigationsIncidents":
[SERVER DEBUG] - Expected: "No significant incidents in the past 3 years"
[SERVER DEBUG] - Actual: "No significant incidents in the past 3 years"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "investigationsIncidents"
[SERVER DEBUG] --- Finished processing field "investigationsIncidents" ---

[SERVER DEBUG] Processing field: "financialStatements" (ID: 24)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "financialStatements"
[SERVER DEBUG] - Value: "Yes" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "financialStatements":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "financialStatements"
[SERVER DEBUG] --- Finished processing field "financialStatements" ---

[SERVER DEBUG] Processing field: "operationalPolicies" (ID: 25)
[SERVER DEBUG] Original value: ISO 27001 certified, SOC 2 Type II compliant
[SERVER DEBUG] Normalized value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "operationalPolicies"
[SERVER DEBUG] - Value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "operationalPolicies":
[SERVER DEBUG] - Expected: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] - Actual: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "operationalPolicies"
[SERVER DEBUG] --- Finished processing field "operationalPolicies" ---

[SERVER DEBUG] Processing field: "dataVolume" (ID: 26)
[SERVER DEBUG] Original value: Approximately 2 million records per month
[SERVER DEBUG] Normalized value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "dataVolume"
[SERVER DEBUG] - Value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "dataVolume":
[SERVER DEBUG] - Expected: "Approximately 2 million records per month"
[SERVER DEBUG] - Actual: "Approximately 2 million records per month"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "dataVolume"
[SERVER DEBUG] --- Finished processing field "dataVolume" ---

[SERVER DEBUG] Processing field: "dataTypes" (ID: 27)
[SERVER DEBUG] Original value: Financial transaction data, Account balances, Customer KYC information
[SERVER DEBUG] Normalized value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "dataTypes"
[SERVER DEBUG] - Value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "dataTypes":
[SERVER DEBUG] - Expected: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] - Actual: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "dataTypes"
[SERVER DEBUG] --- Finished processing field "dataTypes" ---

[SERVER DEBUG] Processing field: "sanctionsCheck" (ID: 28)
[SERVER DEBUG] Original value: Approximately 2 million records per month
[SERVER DEBUG] Normalized value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "sanctionsCheck"
[SERVER DEBUG] - Value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "sanctionsCheck":
[SERVER DEBUG] - Expected: "Approximately 2 million records per month"
[SERVER DEBUG] - Actual: "Approximately 2 million records per month"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "sanctionsCheck"
[SERVER DEBUG] --- Finished processing field "sanctionsCheck" ---

[SERVER DEBUG] Processing field: "dueDiligence" (ID: 29)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "dueDiligence"
[SERVER DEBUG] - Value: "Yes" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "dueDiligence":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "dueDiligence"
[SERVER DEBUG] --- Finished processing field "dueDiligence" ---

[SERVER DEBUG] Processing field: "regulatoryActions" (ID: 30)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "regulatoryActions"
[SERVER DEBUG] - Value: "Yes" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "regulatoryActions":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "regulatoryActions"
[SERVER DEBUG] --- Finished processing field "regulatoryActions" ---

[KYB API Debug] Using client-provided status: ready_for_submission
[WebSocket] Broadcasting task update for task 388: progress=100, status=ready_for_submission
[WebSocket] Broadcasting task update: {
  taskId: 388,
  status: 'ready_for_submission',
  progress: 100,
  metadata: { lastUpdated: '2025-04-20T11:12:02.887Z' }
}
===============================================
[SERVER DEBUG] PREPARING RESPONSE at 2025-04-20T11:12:05.701Z
[SERVER DEBUG] Found 30 fields in database after update
===============================================
[SERVER DEBUG] Checking field corporateRegistration in updated data: "No"
[SERVER DEBUG] Checking field goodStanding in updated data: "Yes"
[SERVER DEBUG] Checking field regulatoryActions in updated data: "Yes"
[SERVER DEBUG] Checking field investigationsIncidents in updated data: "No significant incidents in the past 3 years"
[SERVER DEBUG] No fields with value "asdf" found in response data
[SERVER DEBUG] Sending response with 30 fields, status: ready_for_submission, progress: 100%
[SERVER DEBUG] Updating task.savedFormData to ensure persistence across navigation
[SERVER DEBUG] ✅ Successfully updated task.savedFormData with latest form data
===============================================
11:12:05 AM [info] POST /api/kyb/progress 200 in 2936ms :: {"success":true,"savedData":{"progress":100,"status":"ready_for_submission","...
[Tasks Routes] Updating task progress: { taskId: 388, timestamp: '2025-04-20T11:12:08.573Z' }
11:12:08 AM [info] GET /api/tasks 304 in 30ms :: [{"id":388,"title":"1. KYB Form: DevelopmentTesting8","description":"Complete...
[Task Reconciliation] Found 30 responses for task 388
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: true,
  timestamp: '2025-04-20T11:12:08.632Z'
}
[STATUS DETERMINATION] Task has 100% progress, setting to READY_FOR_SUBMISSION
[Task Reconciliation] Progress calculation: {
  taskId: 388,
  currentProgress: 100,
  calculatedProgress: 100,
  currentStatus: 'ready_for_submission',
  calculatedStatus: 'ready_for_submission',
  responseCount: 30,
  completeCount: 30
}
[Task Reconciliation] Correcting task 388: {
  progressFrom: 100,
  progressTo: 100,
  statusFrom: 'ready_for_submission',
  statusTo: 'ready_for_submission',
  forceUpdate: true
}
[Progress Utils] Broadcasting task progress update: {
  taskId: 388,
  progress: 100,
  requestedStatus: 'ready_for_submission',
  finalStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  timestamp: '2025-04-20T11:12:08.664Z'
}
[WebSocket] Broadcasting task update: {
  taskId: 388,
  status: 'ready_for_submission',
  progress: 100,
  metadata: {
    company_id: 179,
    created_at: '2025-04-20T11:08:28.563Z',
    statusFlow: [ 'ready_for_submission' ],
    created_via: 'fintech_invite',
    lastUpdated: '2025-04-20T11:12:02.887Z',
    status_flow: [ 'not_started' ],
    company_name: 'DevelopmentTesting8',
    created_by_id: 183,
    prerequisite_for: [ 'security_assessment' ],
    lastProgressReconciliation: '2025-04-20T11:12:08.633Z'
  }
}
[Tasks Routes] Task progress reconciled: {
  taskId: 388,
  progress: 100,
  status: 'ready_for_submission',
  timestamp: '2025-04-20T11:12:08.694Z'
}
11:12:08 AM [info] POST /api/tasks/388/update-progress 200 in 152ms :: {"success":true,"progress":100,"status":"ready_for_submission","taskId":388}
[TimestampHandler] Saving 31 timestamps for task 388
[TimestampHandler] Successfully saved timestamps for task 388
[TimestampAPI] Saved 31 timestamps for task 388
11:12:09 AM [info] POST /api/kyb/timestamps/388 200 in 63ms :: {"message":"Timestamps saved successfully","count":31}
===============================================
[SERVER DEBUG] KYB PROGRESS SAVE REQUEST RECEIVED at 2025-04-20T11:12:09.280Z
===============================================
Task ID: 388
Progress: 100
Status: ready_for_submission
Field count: 31
Sample form data values:
- legalEntityName: "DevelopmentTesting8" (string)
- registrationNumber: "12-3456789" (string)
- incorporationDate: "5/12/2010" (string)
- businessType: "Limited Liability Company (LLC)" (string)
- jurisdiction: "Delaware, United States" (string)
Request details:
- Method: POST
- Content-Type: application/json
- Content-Length: 2469
===============================================
===============================================
[SERVER DEBUG] PROCESSING FORM DATA FIELDS AT 2025-04-20T11:12:09.340Z
[SERVER DEBUG] Task ID: 388, Field count: 31
===============================================
[SERVER DEBUG] COMPLETE FORM DATA DUMP:
[SERVER DEBUG] legalEntityName: "DevelopmentTesting8" (string)
[SERVER DEBUG] registrationNumber: "12-3456789" (string)
[SERVER DEBUG] incorporationDate: "5/12/2010" (string)
[SERVER DEBUG] businessType: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] jurisdiction: "Delaware, United States" (string)
[SERVER DEBUG] registeredAddress: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] companyPhone: "(302) 555-1234" (string)
[SERVER DEBUG] priorNames: "None" (string)
[SERVER DEBUG] licenses: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] goodStanding: "Yes" (string)
[SERVER DEBUG] corporateRegistration: "No" (string)
[SERVER DEBUG] externalAudit: "No" (string)
[SERVER DEBUG] controlEnvironment: "Yes" (string)
[SERVER DEBUG] authorizedSigners: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] governmentOwnership: "No" (string)
[SERVER DEBUG] ultimateBeneficialOwners: "None" (string)
[SERVER DEBUG] directorsAndOfficers: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] contactEmail: "email@e8.com" (string)
[SERVER DEBUG] marketCapitalization: "$75 million (privately held)" (string)
[SERVER DEBUG] lifetimeCustomerValue: "$1,250" (string)
[SERVER DEBUG] annualRecurringRevenue: "5,000,000" (string)
[SERVER DEBUG] monthlyRecurringRevenue: "12,500,000" (string)
[SERVER DEBUG] investigationsIncidents: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] financialStatements: "Yes" (string)
[SERVER DEBUG] operationalPolicies: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] dataVolume: "Approximately 2 million records per month" (string)
[SERVER DEBUG] dataTypes: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] sanctionsCheck: "Approximately 2 million records per month" (string)
[SERVER DEBUG] dueDiligence: "Yes" (string)
[SERVER DEBUG] regulatoryActions: "Yes" (string)
[SERVER DEBUG] taskId: "388" (number)
[SERVER DEBUG] END OF FORM DATA DUMP
[SERVER DEBUG] No fields with value "asdf" found in incoming data
[SERVER DEBUG] Processing field: "legalEntityName" (ID: 1)
[SERVER DEBUG] Original value: DevelopmentTesting8
[SERVER DEBUG] Normalized value: "DevelopmentTesting8" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "legalEntityName" in database
[SERVER DEBUG] - Old value: "DevelopmentTesting8" (string)
[SERVER DEBUG] - New value: "DevelopmentTesting8" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: legalEntityName
[SERVER DEBUG] - field_id: 1
[SERVER DEBUG] - response_value: "DevelopmentTesting8"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "legalEntityName":
[SERVER DEBUG] - Expected: "DevelopmentTesting8"
[SERVER DEBUG] - Actual: "DevelopmentTesting8"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "legalEntityName" (ID: 399)
[SERVER DEBUG] Broadcasting legalEntityName update via WebSocket: "DevelopmentTesting8"
[WebSocket] Broadcasting field update for task 388, field "legalEntityName": { value: 'DevelopmentTesting8', timestamp: '2025-04-20T11:12:09.431Z' }
[SERVER DEBUG] --- Finished processing field "legalEntityName" ---

[SERVER DEBUG] Processing field: "registrationNumber" (ID: 2)
[SERVER DEBUG] Original value: 12-3456789
[SERVER DEBUG] Normalized value: "12-3456789" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "registrationNumber" in database
[SERVER DEBUG] - Old value: "12-3456789" (string)
[SERVER DEBUG] - New value: "12-3456789" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: registrationNumber
[SERVER DEBUG] - field_id: 2
[SERVER DEBUG] - response_value: "12-3456789"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "registrationNumber":
[SERVER DEBUG] - Expected: "12-3456789"
[SERVER DEBUG] - Actual: "12-3456789"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "registrationNumber" (ID: 400)
[SERVER DEBUG] --- Finished processing field "registrationNumber" ---

[SERVER DEBUG] Processing field: "incorporationDate" (ID: 3)
[SERVER DEBUG] Original value: 5/12/2010
[SERVER DEBUG] Normalized value: "5/12/2010" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "incorporationDate" in database
[SERVER DEBUG] - Old value: "5/12/2010" (string)
[SERVER DEBUG] - New value: "5/12/2010" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: incorporationDate
[SERVER DEBUG] - field_id: 3
[SERVER DEBUG] - response_value: "5/12/2010"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "incorporationDate":
[SERVER DEBUG] - Expected: "5/12/2010"
[SERVER DEBUG] - Actual: "5/12/2010"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "incorporationDate" (ID: 401)
[SERVER DEBUG] --- Finished processing field "incorporationDate" ---

[SERVER DEBUG] Processing field: "businessType" (ID: 4)
[SERVER DEBUG] Original value: Limited Liability Company (LLC)
[SERVER DEBUG] Normalized value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "businessType" in database
[SERVER DEBUG] - Old value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] - New value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: businessType
[SERVER DEBUG] - field_id: 4
[SERVER DEBUG] - response_value: "Limited Liability Company (LLC)"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "businessType":
[SERVER DEBUG] - Expected: "Limited Liability Company (LLC)"
[SERVER DEBUG] - Actual: "Limited Liability Company (LLC)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "businessType" (ID: 402)
[SERVER DEBUG] --- Finished processing field "businessType" ---

[SERVER DEBUG] Processing field: "jurisdiction" (ID: 5)
[SERVER DEBUG] Original value: Delaware, United States
[SERVER DEBUG] Normalized value: "Delaware, United States" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "jurisdiction" in database
[SERVER DEBUG] - Old value: "Delaware, United States" (string)
[SERVER DEBUG] - New value: "Delaware, United States" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: jurisdiction
[SERVER DEBUG] - field_id: 5
[SERVER DEBUG] - response_value: "Delaware, United States"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "jurisdiction":
[SERVER DEBUG] - Expected: "Delaware, United States"
[SERVER DEBUG] - Actual: "Delaware, United States"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "jurisdiction" (ID: 403)
[SERVER DEBUG] --- Finished processing field "jurisdiction" ---

[SERVER DEBUG] Processing field: "registeredAddress" (ID: 6)
[SERVER DEBUG] Original value: 123 Market Street, Wilmington, DE 19801
[SERVER DEBUG] Normalized value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "registeredAddress" in database
[SERVER DEBUG] - Old value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] - New value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: registeredAddress
[SERVER DEBUG] - field_id: 6
[SERVER DEBUG] - response_value: "123 Market Street, Wilmington, DE 19801"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "registeredAddress":
[SERVER DEBUG] - Expected: "123 Market Street, Wilmington, DE 19801"
[SERVER DEBUG] - Actual: "123 Market Street, Wilmington, DE 19801"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "registeredAddress" (ID: 404)
[SERVER DEBUG] --- Finished processing field "registeredAddress" ---

[SERVER DEBUG] Processing field: "companyPhone" (ID: 7)
[SERVER DEBUG] Original value: (302) 555-1234
[SERVER DEBUG] Normalized value: "(302) 555-1234" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "companyPhone" in database
[SERVER DEBUG] - Old value: "(302) 555-1234" (string)
[SERVER DEBUG] - New value: "(302) 555-1234" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: companyPhone
[SERVER DEBUG] - field_id: 7
[SERVER DEBUG] - response_value: "(302) 555-1234"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "companyPhone":
[SERVER DEBUG] - Expected: "(302) 555-1234"
[SERVER DEBUG] - Actual: "(302) 555-1234"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "companyPhone" (ID: 405)
[SERVER DEBUG] --- Finished processing field "companyPhone" ---

[SERVER DEBUG] Processing field: "priorNames" (ID: 8)
[SERVER DEBUG] Original value: None
[SERVER DEBUG] Normalized value: "None" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "priorNames" in database
[SERVER DEBUG] - Old value: "None" (string)
[SERVER DEBUG] - New value: "None" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: priorNames
[SERVER DEBUG] - field_id: 8
[SERVER DEBUG] - response_value: "None"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "priorNames":
[SERVER DEBUG] - Expected: "None"
[SERVER DEBUG] - Actual: "None"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "priorNames" (ID: 406)
[SERVER DEBUG] --- Finished processing field "priorNames" ---

[SERVER DEBUG] Processing field: "licenses" (ID: 9)
[SERVER DEBUG] Original value: Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765
[SERVER DEBUG] Normalized value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "licenses" in database
[SERVER DEBUG] - Old value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] - New value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: licenses
[SERVER DEBUG] - field_id: 9
[SERVER DEBUG] - response_value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "licenses":
[SERVER DEBUG] - Expected: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] - Actual: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "licenses" (ID: 407)
[SERVER DEBUG] --- Finished processing field "licenses" ---

[SERVER DEBUG] Processing field: "goodStanding" (ID: 10)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "goodStanding" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: goodStanding
[SERVER DEBUG] - field_id: 10
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "goodStanding":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "goodStanding" (ID: 408)
[SERVER DEBUG] --- Finished processing field "goodStanding" ---

[SERVER DEBUG] Processing field: "corporateRegistration" (ID: 11)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "corporateRegistration" in database
[SERVER DEBUG] - Old value: "No" (string)
[SERVER DEBUG] - New value: "No" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: corporateRegistration
[SERVER DEBUG] - field_id: 11
[SERVER DEBUG] - response_value: "No"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "corporateRegistration":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "corporateRegistration" (ID: 409)
[SERVER DEBUG] --- Finished processing field "corporateRegistration" ---

[SERVER DEBUG] Processing field: "externalAudit" (ID: 12)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "externalAudit" in database
[SERVER DEBUG] - Old value: "No" (string)
[SERVER DEBUG] - New value: "No" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: externalAudit
[SERVER DEBUG] - field_id: 12
[SERVER DEBUG] - response_value: "No"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "externalAudit":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "externalAudit" (ID: 410)
[SERVER DEBUG] --- Finished processing field "externalAudit" ---

[SERVER DEBUG] Processing field: "controlEnvironment" (ID: 13)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "controlEnvironment" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: controlEnvironment
[SERVER DEBUG] - field_id: 13
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "controlEnvironment":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "controlEnvironment" (ID: 411)
[SERVER DEBUG] --- Finished processing field "controlEnvironment" ---

[SERVER DEBUG] Processing field: "authorizedSigners" (ID: 14)
[SERVER DEBUG] Original value: John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)
[SERVER DEBUG] Normalized value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "authorizedSigners" in database
[SERVER DEBUG] - Old value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] - New value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: authorizedSigners
[SERVER DEBUG] - field_id: 14
[SERVER DEBUG] - response_value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "authorizedSigners":
[SERVER DEBUG] - Expected: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] - Actual: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "authorizedSigners" (ID: 412)
[SERVER DEBUG] --- Finished processing field "authorizedSigners" ---

[SERVER DEBUG] Processing field: "governmentOwnership" (ID: 15)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "governmentOwnership" in database
[SERVER DEBUG] - Old value: "No" (string)
[SERVER DEBUG] - New value: "No" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: governmentOwnership
[SERVER DEBUG] - field_id: 15
[SERVER DEBUG] - response_value: "No"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "governmentOwnership":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "governmentOwnership" (ID: 413)
[SERVER DEBUG] --- Finished processing field "governmentOwnership" ---

[SERVER DEBUG] Processing field: "ultimateBeneficialOwners" (ID: 16)
[SERVER DEBUG] Original value: None
[SERVER DEBUG] Normalized value: "None" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "ultimateBeneficialOwners" in database
[SERVER DEBUG] - Old value: "None" (string)
[SERVER DEBUG] - New value: "None" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: ultimateBeneficialOwners
[SERVER DEBUG] - field_id: 16
[SERVER DEBUG] - response_value: "None"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "ultimateBeneficialOwners":
[SERVER DEBUG] - Expected: "None"
[SERVER DEBUG] - Actual: "None"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "ultimateBeneficialOwners" (ID: 414)
[SERVER DEBUG] --- Finished processing field "ultimateBeneficialOwners" ---

[SERVER DEBUG] Processing field: "directorsAndOfficers" (ID: 17)
[SERVER DEBUG] Original value: John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)
[SERVER DEBUG] Normalized value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "directorsAndOfficers" in database
[SERVER DEBUG] - Old value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] - New value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: directorsAndOfficers
[SERVER DEBUG] - field_id: 17
[SERVER DEBUG] - response_value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "directorsAndOfficers":
[SERVER DEBUG] - Expected: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] - Actual: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "directorsAndOfficers" (ID: 415)
[SERVER DEBUG] --- Finished processing field "directorsAndOfficers" ---

[SERVER DEBUG] Processing field: "contactEmail" (ID: 18)
[SERVER DEBUG] Original value: email@e8.com
[SERVER DEBUG] Normalized value: "email@e8.com" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "contactEmail" in database
[SERVER DEBUG] - Old value: "email@e8.com" (string)
[SERVER DEBUG] - New value: "email@e8.com" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: contactEmail
[SERVER DEBUG] - field_id: 18
[SERVER DEBUG] - response_value: "email@e8.com"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "contactEmail":
[SERVER DEBUG] - Expected: "email@e8.com"
[SERVER DEBUG] - Actual: "email@e8.com"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "contactEmail" (ID: 416)
[SERVER DEBUG] --- Finished processing field "contactEmail" ---

[SERVER DEBUG] Processing field: "marketCapitalization" (ID: 19)
[SERVER DEBUG] Original value: $75 million (privately held)
[SERVER DEBUG] Normalized value: "$75 million (privately held)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "marketCapitalization" in database
[SERVER DEBUG] - Old value: "$75 million (privately held)" (string)
[SERVER DEBUG] - New value: "$75 million (privately held)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: marketCapitalization
[SERVER DEBUG] - field_id: 19
[SERVER DEBUG] - response_value: "$75 million (privately held)"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "marketCapitalization":
[SERVER DEBUG] - Expected: "$75 million (privately held)"
[SERVER DEBUG] - Actual: "$75 million (privately held)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "marketCapitalization" (ID: 417)
[SERVER DEBUG] --- Finished processing field "marketCapitalization" ---

[SERVER DEBUG] Processing field: "lifetimeCustomerValue" (ID: 20)
[SERVER DEBUG] Original value: $1,250
[SERVER DEBUG] Normalized value: "$1,250" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "lifetimeCustomerValue" in database
[SERVER DEBUG] - Old value: "$1,250" (string)
[SERVER DEBUG] - New value: "$1,250" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: lifetimeCustomerValue
[SERVER DEBUG] - field_id: 20
[SERVER DEBUG] - response_value: "$1,250"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "lifetimeCustomerValue":
[SERVER DEBUG] - Expected: "$1,250"
[SERVER DEBUG] - Actual: "$1,250"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "lifetimeCustomerValue" (ID: 418)
[SERVER DEBUG] --- Finished processing field "lifetimeCustomerValue" ---

[SERVER DEBUG] Processing field: "annualRecurringRevenue" (ID: 21)
[SERVER DEBUG] Original value: 5,000,000
[SERVER DEBUG] Normalized value: "5,000,000" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "annualRecurringRevenue" in database
[SERVER DEBUG] - Old value: "5,000,000" (string)
[SERVER DEBUG] - New value: "5,000,000" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: annualRecurringRevenue
[SERVER DEBUG] - field_id: 21
[SERVER DEBUG] - response_value: "5,000,000"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "annualRecurringRevenue":
[SERVER DEBUG] - Expected: "5,000,000"
[SERVER DEBUG] - Actual: "5,000,000"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "annualRecurringRevenue" (ID: 419)
[SERVER DEBUG] --- Finished processing field "annualRecurringRevenue" ---

[SERVER DEBUG] Processing field: "monthlyRecurringRevenue" (ID: 22)
[SERVER DEBUG] Original value: 12,500,000
[SERVER DEBUG] Normalized value: "12,500,000" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "monthlyRecurringRevenue" in database
[SERVER DEBUG] - Old value: "12,500,000" (string)
[SERVER DEBUG] - New value: "12,500,000" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: monthlyRecurringRevenue
[SERVER DEBUG] - field_id: 22
[SERVER DEBUG] - response_value: "12,500,000"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "monthlyRecurringRevenue":
[SERVER DEBUG] - Expected: "12,500,000"
[SERVER DEBUG] - Actual: "12,500,000"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "monthlyRecurringRevenue" (ID: 420)
[SERVER DEBUG] --- Finished processing field "monthlyRecurringRevenue" ---

[SERVER DEBUG] Processing field: "investigationsIncidents" (ID: 23)
[SERVER DEBUG] Original value: No significant incidents in the past 3 years
[SERVER DEBUG] Normalized value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "investigationsIncidents" in database
[SERVER DEBUG] - Old value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] - New value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: investigationsIncidents
[SERVER DEBUG] - field_id: 23
[SERVER DEBUG] - response_value: "No significant incidents in the past 3 years"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "investigationsIncidents":
[SERVER DEBUG] - Expected: "No significant incidents in the past 3 years"
[SERVER DEBUG] - Actual: "No significant incidents in the past 3 years"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "investigationsIncidents" (ID: 421)
[SERVER DEBUG] --- Finished processing field "investigationsIncidents" ---

[SERVER DEBUG] Processing field: "financialStatements" (ID: 24)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "financialStatements" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: financialStatements
[SERVER DEBUG] - field_id: 24
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "financialStatements":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "financialStatements" (ID: 422)
[SERVER DEBUG] --- Finished processing field "financialStatements" ---

[SERVER DEBUG] Processing field: "operationalPolicies" (ID: 25)
[SERVER DEBUG] Original value: ISO 27001 certified, SOC 2 Type II compliant
[SERVER DEBUG] Normalized value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "operationalPolicies" in database
[SERVER DEBUG] - Old value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] - New value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: operationalPolicies
[SERVER DEBUG] - field_id: 25
[SERVER DEBUG] - response_value: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "operationalPolicies":
[SERVER DEBUG] - Expected: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] - Actual: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "operationalPolicies" (ID: 423)
[SERVER DEBUG] --- Finished processing field "operationalPolicies" ---

[SERVER DEBUG] Processing field: "dataVolume" (ID: 26)
[SERVER DEBUG] Original value: Approximately 2 million records per month
[SERVER DEBUG] Normalized value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "dataVolume" in database
[SERVER DEBUG] - Old value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - New value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: dataVolume
[SERVER DEBUG] - field_id: 26
[SERVER DEBUG] - response_value: "Approximately 2 million records per month"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "dataVolume":
[SERVER DEBUG] - Expected: "Approximately 2 million records per month"
[SERVER DEBUG] - Actual: "Approximately 2 million records per month"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "dataVolume" (ID: 424)
[SERVER DEBUG] --- Finished processing field "dataVolume" ---

[SERVER DEBUG] Processing field: "dataTypes" (ID: 27)
[SERVER DEBUG] Original value: Financial transaction data, Account balances, Customer KYC information
[SERVER DEBUG] Normalized value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "dataTypes" in database
[SERVER DEBUG] - Old value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] - New value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: dataTypes
[SERVER DEBUG] - field_id: 27
[SERVER DEBUG] - response_value: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "dataTypes":
[SERVER DEBUG] - Expected: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] - Actual: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "dataTypes" (ID: 425)
[SERVER DEBUG] --- Finished processing field "dataTypes" ---

[SERVER DEBUG] Processing field: "sanctionsCheck" (ID: 28)
[SERVER DEBUG] Original value: Approximately 2 million records per month
[SERVER DEBUG] Normalized value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "sanctionsCheck" in database
[SERVER DEBUG] - Old value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - New value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: sanctionsCheck
[SERVER DEBUG] - field_id: 28
[SERVER DEBUG] - response_value: "Approximately 2 million records per month"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "sanctionsCheck":
[SERVER DEBUG] - Expected: "Approximately 2 million records per month"
[SERVER DEBUG] - Actual: "Approximately 2 million records per month"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "sanctionsCheck" (ID: 426)
[SERVER DEBUG] --- Finished processing field "sanctionsCheck" ---

[SERVER DEBUG] Processing field: "dueDiligence" (ID: 29)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "dueDiligence" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: dueDiligence
[SERVER DEBUG] - field_id: 29
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "dueDiligence":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "dueDiligence" (ID: 427)
[SERVER DEBUG] --- Finished processing field "dueDiligence" ---

[SERVER DEBUG] Processing field: "regulatoryActions" (ID: 30)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "regulatoryActions" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: regulatoryActions
[SERVER DEBUG] - field_id: 30
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "regulatoryActions":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "regulatoryActions" (ID: 428)
[SERVER DEBUG] --- Finished processing field "regulatoryActions" ---

[SERVER DEBUG] ERROR: Field not found in database schema: "taskId"
[KYB API Debug] Using client-provided status: ready_for_submission
[WebSocket] Broadcasting task update for task 388: progress=100, status=ready_for_submission
[WebSocket] Broadcasting task update: {
  taskId: 388,
  status: 'ready_for_submission',
  progress: 100,
  metadata: { lastUpdated: '2025-04-20T11:12:09.340Z' }
}
===============================================
[SERVER DEBUG] PREPARING RESPONSE at 2025-04-20T11:12:12.111Z
[SERVER DEBUG] Found 30 fields in database after update
===============================================
[SERVER DEBUG] Checking field corporateRegistration in updated data: "No"
[SERVER DEBUG] Checking field goodStanding in updated data: "Yes"
[SERVER DEBUG] Checking field regulatoryActions in updated data: "Yes"
[SERVER DEBUG] Checking field investigationsIncidents in updated data: "No significant incidents in the past 3 years"
[SERVER DEBUG] No fields with value "asdf" found in response data
[SERVER DEBUG] Sending response with 30 fields, status: ready_for_submission, progress: 100%
[SERVER DEBUG] Updating task.savedFormData to ensure persistence across navigation
[SERVER DEBUG] ✅ Successfully updated task.savedFormData with latest form data
===============================================
11:12:12 AM [info] POST /api/kyb/progress 200 in 2893ms :: {"success":true,"savedData":{"progress":100,"status":"ready_for_submission","...
[Tasks Routes] Fetching task by ID: { taskId: 388, timestamp: '2025-04-20T11:12:23.582Z' }
[Task Templates API] Fetching template for task type: company_kyb, user: 220
[Tasks Routes] Fetching latest KYB form data for task: 388
[Task Templates API] Found template: 1 (KYB Form) for task type: company_kyb
[Task Templates API] Retrieved 9 configuration items for template ID: 1
[Tasks Routes] Found 30 KYB responses for task 388
[Tasks Routes] Constructed form data with 30 fields
[Tasks Routes] Task found by ID: {
  taskId: 388,
  title: '1. KYB Form: DevelopmentTesting8',
  type: 'company_kyb',
  formDataFields: 30,
  timestamp: '2025-04-20T11:12:23.670Z'
}
11:12:23 AM [info] GET /api/task-templates/by-type/company_kyb 304 in 89ms :: {"id":1,"name":"KYB Form","description":"Know Your Business form for company ...
11:12:23 AM [info] GET /api/tasks/388 200 in 118ms :: {"id":388,"title":"1. KYB Form: DevelopmentTesting8","description":"Complete ...
11:12:23 AM [warn] GET /api/companies/is-demo 400 in 32ms :: {"message":"Invalid company ID","code":"INVALID_ID"}
[KYB API Debug] Loading progress for task: 388
11:12:23 AM [warn] GET /api/companies/is-demo 400 in 30ms :: {"message":"Invalid company ID","code":"INVALID_ID"}
[Task Reconciliation] Found 30 responses for task 388
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: true,
  timestamp: '2025-04-20T11:12:23.917Z'
}
[STATUS DETERMINATION] Task has 100% progress, setting to READY_FOR_SUBMISSION
[Task Reconciliation] Progress calculation: {
  taskId: 388,
  currentProgress: 100,
  calculatedProgress: 100,
  currentStatus: 'ready_for_submission',
  calculatedStatus: 'ready_for_submission',
  responseCount: 30,
  completeCount: 30
}
[Task Reconciliation] No updates needed for task 388
11:12:23 AM [info] GET /api/companies/179 304 in 59ms :: {"id":179,"name":"DevelopmentTesting8","description":"FinTech partner company...
[KYB API Debug] Retrieved task: {
  taskId: 388,
  status: 'ready_for_submission',
  progress: 100,
  metadata: [
    'company_id',
    'created_at',
    'statusFlow',
    'created_via',
    'lastUpdated',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for',
    'lastProgressReconciliation'
  ],
  timestamp: '2025-04-20T11:12:23.946Z'
}
[KYB API Debug] Retrieved responses: {
  responseCount: 30,
  fields: [
    { field: 'registrationNumber', status: 'COMPLETE', hasValue: true },
    { field: 'incorporationDate', status: 'COMPLETE', hasValue: true },
    { field: 'businessType', status: 'COMPLETE', hasValue: true },
    { field: 'jurisdiction', status: 'COMPLETE', hasValue: true },
    { field: 'registeredAddress', status: 'COMPLETE', hasValue: true },
    { field: 'companyPhone', status: 'COMPLETE', hasValue: true },
    { field: 'priorNames', status: 'COMPLETE', hasValue: true },
    { field: 'legalEntityName', status: 'COMPLETE', hasValue: true },
    { field: 'licenses', status: 'COMPLETE', hasValue: true },
    { field: 'goodStanding', status: 'COMPLETE', hasValue: true },
    {
      field: 'corporateRegistration',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'externalAudit', status: 'COMPLETE', hasValue: true },
    { field: 'controlEnvironment', status: 'COMPLETE', hasValue: true },
    { field: 'authorizedSigners', status: 'COMPLETE', hasValue: true },
    {
      field: 'governmentOwnership',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'ultimateBeneficialOwners',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'directorsAndOfficers',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'contactEmail', status: 'COMPLETE', hasValue: true },
    {
      field: 'marketCapitalization',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'lifetimeCustomerValue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'annualRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'monthlyRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'investigationsIncidents',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'financialStatements',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'operationalPolicies',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'dataVolume', status: 'COMPLETE', hasValue: true },
    { field: 'dataTypes', status: 'COMPLETE', hasValue: true },
    { field: 'sanctionsCheck', status: 'COMPLETE', hasValue: true },
    { field: 'dueDiligence', status: 'COMPLETE', hasValue: true },
    { field: 'regulatoryActions', status: 'COMPLETE', hasValue: true }
  ],
  timestamp: '2025-04-20T11:12:23.976Z'
}
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 388,
  responseCount: 30,
  progress: 100,
  status: 'ready_for_submission',
  formDataKeys: [
    'registrationNumber',
    'incorporationDate',
    'businessType',
    'jurisdiction',
    'registeredAddress',
    'companyPhone',
    'priorNames',
    'legalEntityName',
    'licenses',
    'goodStanding',
    'corporateRegistration',
    'externalAudit',
    'controlEnvironment',
    'authorizedSigners',
    'governmentOwnership',
    'ultimateBeneficialOwners',
    'directorsAndOfficers',
    'contactEmail',
    'marketCapitalization',
    'lifetimeCustomerValue',
    'annualRecurringRevenue',
    'monthlyRecurringRevenue',
    'investigationsIncidents',
    'financialStatements',
    'operationalPolicies',
    'dataVolume',
    'dataTypes',
    'sanctionsCheck',
    'dueDiligence',
    'regulatoryActions'
  ]
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T11:12:23.977Z
[SERVER DEBUG] Task ID: 388, Found 30 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: "No"
[SERVER DEBUG] Checking field goodStanding in retrieved data: "Yes"
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: "Yes"
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: "No significant incidents in the past 3 years"
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 30 fields, status: ready_for_submission, progress: 100%
===============================================
11:12:24 AM [info] GET /api/kyb/progress/388 200 in 151ms :: {"formData":{"registrationNumber":"12-3456789","incorporationDate":"5/12/2010...
11:12:24 AM [info] GET /api/companies/179 304 in 60ms :: {"id":179,"name":"DevelopmentTesting8","description":"FinTech partner company...
[KYB API Debug] Loading progress for task: 388
[TimestampHandler] Retrieved 31 timestamps for task 388
[TimestampAPI] Returning 31 timestamps for task 388
[Task Reconciliation] Found 30 responses for task 388
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: true,
  timestamp: '2025-04-20T11:12:24.214Z'
}
[STATUS DETERMINATION] Task has 100% progress, setting to READY_FOR_SUBMISSION
[Task Reconciliation] Progress calculation: {
  taskId: 388,
  currentProgress: 100,
  calculatedProgress: 100,
  currentStatus: 'ready_for_submission',
  calculatedStatus: 'ready_for_submission',
  responseCount: 30,
  completeCount: 30
}
[Task Reconciliation] No updates needed for task 388
11:12:24 AM [info] GET /api/kyb/timestamps/388 200 in 60ms :: {"legalEntityName":1745147524763,"registrationNumber":1745147524763,"incorpor...
[KYB API Debug] Retrieved task: {
  taskId: 388,
  status: 'ready_for_submission',
  progress: 100,
  metadata: [
    'company_id',
    'created_at',
    'statusFlow',
    'created_via',
    'lastUpdated',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for',
    'lastProgressReconciliation'
  ],
  timestamp: '2025-04-20T11:12:24.244Z'
}
[KYB API Debug] Retrieved responses: {
  responseCount: 30,
  fields: [
    { field: 'registrationNumber', status: 'COMPLETE', hasValue: true },
    { field: 'incorporationDate', status: 'COMPLETE', hasValue: true },
    { field: 'businessType', status: 'COMPLETE', hasValue: true },
    { field: 'jurisdiction', status: 'COMPLETE', hasValue: true },
    { field: 'registeredAddress', status: 'COMPLETE', hasValue: true },
    { field: 'companyPhone', status: 'COMPLETE', hasValue: true },
    { field: 'priorNames', status: 'COMPLETE', hasValue: true },
    { field: 'legalEntityName', status: 'COMPLETE', hasValue: true },
    { field: 'licenses', status: 'COMPLETE', hasValue: true },
    { field: 'goodStanding', status: 'COMPLETE', hasValue: true },
    {
      field: 'corporateRegistration',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'externalAudit', status: 'COMPLETE', hasValue: true },
    { field: 'controlEnvironment', status: 'COMPLETE', hasValue: true },
    { field: 'authorizedSigners', status: 'COMPLETE', hasValue: true },
    {
      field: 'governmentOwnership',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'ultimateBeneficialOwners',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'directorsAndOfficers',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'contactEmail', status: 'COMPLETE', hasValue: true },
    {
      field: 'marketCapitalization',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'lifetimeCustomerValue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'annualRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'monthlyRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'investigationsIncidents',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'financialStatements',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'operationalPolicies',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'dataVolume', status: 'COMPLETE', hasValue: true },
    { field: 'dataTypes', status: 'COMPLETE', hasValue: true },
    { field: 'sanctionsCheck', status: 'COMPLETE', hasValue: true },
    { field: 'dueDiligence', status: 'COMPLETE', hasValue: true },
    { field: 'regulatoryActions', status: 'COMPLETE', hasValue: true }
  ],
  timestamp: '2025-04-20T11:12:24.274Z'
}
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 388,
  responseCount: 30,
  progress: 100,
  status: 'ready_for_submission',
  formDataKeys: [
    'registrationNumber',
    'incorporationDate',
    'businessType',
    'jurisdiction',
    'registeredAddress',
    'companyPhone',
    'priorNames',
    'legalEntityName',
    'licenses',
    'goodStanding',
    'corporateRegistration',
    'externalAudit',
    'controlEnvironment',
    'authorizedSigners',
    'governmentOwnership',
    'ultimateBeneficialOwners',
    'directorsAndOfficers',
    'contactEmail',
    'marketCapitalization',
    'lifetimeCustomerValue',
    'annualRecurringRevenue',
    'monthlyRecurringRevenue',
    'investigationsIncidents',
    'financialStatements',
    'operationalPolicies',
    'dataVolume',
    'dataTypes',
    'sanctionsCheck',
    'dueDiligence',
    'regulatoryActions'
  ]
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T11:12:24.275Z
[SERVER DEBUG] Task ID: 388, Found 30 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: "No"
[SERVER DEBUG] Checking field goodStanding in retrieved data: "Yes"
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: "Yes"
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: "No significant incidents in the past 3 years"
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 30 fields, status: ready_for_submission, progress: 100%
===============================================
11:12:24 AM [info] GET /api/kyb/progress/388 304 in 151ms :: {"formData":{"registrationNumber":"12-3456789","incorporationDate":"5/12/2010...
[KYB API Debug] Loading progress for task: 388
[TimestampHandler] Retrieved 31 timestamps for task 388
[TimestampAPI] Returning 31 timestamps for task 388
[Task Reconciliation] Found 30 responses for task 388
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: true,
  timestamp: '2025-04-20T11:12:24.514Z'
}
[STATUS DETERMINATION] Task has 100% progress, setting to READY_FOR_SUBMISSION
[Task Reconciliation] Progress calculation: {
  taskId: 388,
  currentProgress: 100,
  calculatedProgress: 100,
  currentStatus: 'ready_for_submission',
  calculatedStatus: 'ready_for_submission',
  responseCount: 30,
  completeCount: 30
}
[Task Reconciliation] No updates needed for task 388
11:12:24 AM [info] GET /api/kyb/timestamps/388 304 in 60ms :: {"legalEntityName":1745147524763,"registrationNumber":1745147524763,"incorpor...
[KYB API Debug] Retrieved task: {
  taskId: 388,
  status: 'ready_for_submission',
  progress: 100,
  metadata: [
    'company_id',
    'created_at',
    'statusFlow',
    'created_via',
    'lastUpdated',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for',
    'lastProgressReconciliation'
  ],
  timestamp: '2025-04-20T11:12:24.543Z'
}
[KYB API Debug] Retrieved responses: {
  responseCount: 30,
  fields: [
    { field: 'registrationNumber', status: 'COMPLETE', hasValue: true },
    { field: 'incorporationDate', status: 'COMPLETE', hasValue: true },
    { field: 'businessType', status: 'COMPLETE', hasValue: true },
    { field: 'jurisdiction', status: 'COMPLETE', hasValue: true },
    { field: 'registeredAddress', status: 'COMPLETE', hasValue: true },
    { field: 'companyPhone', status: 'COMPLETE', hasValue: true },
    { field: 'priorNames', status: 'COMPLETE', hasValue: true },
    { field: 'legalEntityName', status: 'COMPLETE', hasValue: true },
    { field: 'licenses', status: 'COMPLETE', hasValue: true },
    { field: 'goodStanding', status: 'COMPLETE', hasValue: true },
    {
      field: 'corporateRegistration',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'externalAudit', status: 'COMPLETE', hasValue: true },
    { field: 'controlEnvironment', status: 'COMPLETE', hasValue: true },
    { field: 'authorizedSigners', status: 'COMPLETE', hasValue: true },
    {
      field: 'governmentOwnership',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'ultimateBeneficialOwners',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'directorsAndOfficers',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'contactEmail', status: 'COMPLETE', hasValue: true },
    {
      field: 'marketCapitalization',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'lifetimeCustomerValue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'annualRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'monthlyRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'investigationsIncidents',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'financialStatements',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'operationalPolicies',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'dataVolume', status: 'COMPLETE', hasValue: true },
    { field: 'dataTypes', status: 'COMPLETE', hasValue: true },
    { field: 'sanctionsCheck', status: 'COMPLETE', hasValue: true },
    { field: 'dueDiligence', status: 'COMPLETE', hasValue: true },
    { field: 'regulatoryActions', status: 'COMPLETE', hasValue: true }
  ],
  timestamp: '2025-04-20T11:12:24.572Z'
}
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 388,
  responseCount: 30,
  progress: 100,
  status: 'ready_for_submission',
  formDataKeys: [
    'registrationNumber',
    'incorporationDate',
    'businessType',
    'jurisdiction',
    'registeredAddress',
    'companyPhone',
    'priorNames',
    'legalEntityName',
    'licenses',
    'goodStanding',
    'corporateRegistration',
    'externalAudit',
    'controlEnvironment',
    'authorizedSigners',
    'governmentOwnership',
    'ultimateBeneficialOwners',
    'directorsAndOfficers',
    'contactEmail',
    'marketCapitalization',
    'lifetimeCustomerValue',
    'annualRecurringRevenue',
    'monthlyRecurringRevenue',
    'investigationsIncidents',
    'financialStatements',
    'operationalPolicies',
    'dataVolume',
    'dataTypes',
    'sanctionsCheck',
    'dueDiligence',
    'regulatoryActions'
  ]
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T11:12:24.573Z
[SERVER DEBUG] Task ID: 388, Found 30 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: "No"
[SERVER DEBUG] Checking field goodStanding in retrieved data: "Yes"
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: "Yes"
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: "No significant incidents in the past 3 years"
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 30 fields, status: ready_for_submission, progress: 100%
===============================================
11:12:24 AM [info] GET /api/kyb/progress/388 304 in 148ms :: {"formData":{"registrationNumber":"12-3456789","incorporationDate":"5/12/2010...
[KYB API Debug] Loading progress for task: 388
[TimestampHandler] Retrieved 31 timestamps for task 388
[TimestampAPI] Returning 31 timestamps for task 388
[Task Reconciliation] Found 30 responses for task 388
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: true,
  timestamp: '2025-04-20T11:12:24.811Z'
}
[STATUS DETERMINATION] Task has 100% progress, setting to READY_FOR_SUBMISSION
[Task Reconciliation] Progress calculation: {
  taskId: 388,
  currentProgress: 100,
  calculatedProgress: 100,
  currentStatus: 'ready_for_submission',
  calculatedStatus: 'ready_for_submission',
  responseCount: 30,
  completeCount: 30
}
[Task Reconciliation] No updates needed for task 388
11:12:24 AM [info] GET /api/kyb/timestamps/388 304 in 75ms :: {"legalEntityName":1745147524763,"registrationNumber":1745147524763,"incorpor...
[KYB API Debug] Retrieved task: {
  taskId: 388,
  status: 'ready_for_submission',
  progress: 100,
  metadata: [
    'company_id',
    'created_at',
    'statusFlow',
    'created_via',
    'lastUpdated',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for',
    'lastProgressReconciliation'
  ],
  timestamp: '2025-04-20T11:12:24.840Z'
}
[KYB API Debug] Retrieved responses: {
  responseCount: 30,
  fields: [
    { field: 'registrationNumber', status: 'COMPLETE', hasValue: true },
    { field: 'incorporationDate', status: 'COMPLETE', hasValue: true },
    { field: 'businessType', status: 'COMPLETE', hasValue: true },
    { field: 'jurisdiction', status: 'COMPLETE', hasValue: true },
    { field: 'registeredAddress', status: 'COMPLETE', hasValue: true },
    { field: 'companyPhone', status: 'COMPLETE', hasValue: true },
    { field: 'priorNames', status: 'COMPLETE', hasValue: true },
    { field: 'legalEntityName', status: 'COMPLETE', hasValue: true },
    { field: 'licenses', status: 'COMPLETE', hasValue: true },
    { field: 'goodStanding', status: 'COMPLETE', hasValue: true },
    {
      field: 'corporateRegistration',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'externalAudit', status: 'COMPLETE', hasValue: true },
    { field: 'controlEnvironment', status: 'COMPLETE', hasValue: true },
    { field: 'authorizedSigners', status: 'COMPLETE', hasValue: true },
    {
      field: 'governmentOwnership',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'ultimateBeneficialOwners',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'directorsAndOfficers',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'contactEmail', status: 'COMPLETE', hasValue: true },
    {
      field: 'marketCapitalization',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'lifetimeCustomerValue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'annualRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'monthlyRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'investigationsIncidents',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'financialStatements',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'operationalPolicies',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'dataVolume', status: 'COMPLETE', hasValue: true },
    { field: 'dataTypes', status: 'COMPLETE', hasValue: true },
    { field: 'sanctionsCheck', status: 'COMPLETE', hasValue: true },
    { field: 'dueDiligence', status: 'COMPLETE', hasValue: true },
    { field: 'regulatoryActions', status: 'COMPLETE', hasValue: true }
  ],
  timestamp: '2025-04-20T11:12:24.869Z'
}
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 388,
  responseCount: 30,
  progress: 100,
  status: 'ready_for_submission',
  formDataKeys: [
    'registrationNumber',
    'incorporationDate',
    'businessType',
    'jurisdiction',
    'registeredAddress',
    'companyPhone',
    'priorNames',
    'legalEntityName',
    'licenses',
    'goodStanding',
    'corporateRegistration',
    'externalAudit',
    'controlEnvironment',
    'authorizedSigners',
    'governmentOwnership',
    'ultimateBeneficialOwners',
    'directorsAndOfficers',
    'contactEmail',
    'marketCapitalization',
    'lifetimeCustomerValue',
    'annualRecurringRevenue',
    'monthlyRecurringRevenue',
    'investigationsIncidents',
    'financialStatements',
    'operationalPolicies',
    'dataVolume',
    'dataTypes',
    'sanctionsCheck',
    'dueDiligence',
    'regulatoryActions'
  ]
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T11:12:24.870Z
[SERVER DEBUG] Task ID: 388, Found 30 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: "No"
[SERVER DEBUG] Checking field goodStanding in retrieved data: "Yes"
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: "Yes"
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: "No significant incidents in the past 3 years"
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 30 fields, status: ready_for_submission, progress: 100%
===============================================
11:12:24 AM [info] GET /api/kyb/progress/388 304 in 151ms :: {"formData":{"registrationNumber":"12-3456789","incorporationDate":"5/12/2010...
[KYB API Debug] Loading progress for task: 388
[TimestampHandler] Retrieved 31 timestamps for task 388
[TimestampAPI] Returning 31 timestamps for task 388
[Task Reconciliation] Found 30 responses for task 388
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: true,
  timestamp: '2025-04-20T11:12:25.108Z'
}
[STATUS DETERMINATION] Task has 100% progress, setting to READY_FOR_SUBMISSION
[Task Reconciliation] Progress calculation: {
  taskId: 388,
  currentProgress: 100,
  calculatedProgress: 100,
  currentStatus: 'ready_for_submission',
  calculatedStatus: 'ready_for_submission',
  responseCount: 30,
  completeCount: 30
}
[Task Reconciliation] No updates needed for task 388
11:12:25 AM [info] GET /api/kyb/timestamps/388 304 in 61ms :: {"legalEntityName":1745147524763,"registrationNumber":1745147524763,"incorpor...
[KYB API Debug] Retrieved task: {
  taskId: 388,
  status: 'ready_for_submission',
  progress: 100,
  metadata: [
    'company_id',
    'created_at',
    'statusFlow',
    'created_via',
    'lastUpdated',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for',
    'lastProgressReconciliation'
  ],
  timestamp: '2025-04-20T11:12:25.140Z'
}
[KYB API Debug] Retrieved responses: {
  responseCount: 30,
  fields: [
    { field: 'registrationNumber', status: 'COMPLETE', hasValue: true },
    { field: 'incorporationDate', status: 'COMPLETE', hasValue: true },
    { field: 'businessType', status: 'COMPLETE', hasValue: true },
    { field: 'jurisdiction', status: 'COMPLETE', hasValue: true },
    { field: 'registeredAddress', status: 'COMPLETE', hasValue: true },
    { field: 'companyPhone', status: 'COMPLETE', hasValue: true },
    { field: 'priorNames', status: 'COMPLETE', hasValue: true },
    { field: 'legalEntityName', status: 'COMPLETE', hasValue: true },
    { field: 'licenses', status: 'COMPLETE', hasValue: true },
    { field: 'goodStanding', status: 'COMPLETE', hasValue: true },
    {
      field: 'corporateRegistration',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'externalAudit', status: 'COMPLETE', hasValue: true },
    { field: 'controlEnvironment', status: 'COMPLETE', hasValue: true },
    { field: 'authorizedSigners', status: 'COMPLETE', hasValue: true },
    {
      field: 'governmentOwnership',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'ultimateBeneficialOwners',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'directorsAndOfficers',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'contactEmail', status: 'COMPLETE', hasValue: true },
    {
      field: 'marketCapitalization',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'lifetimeCustomerValue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'annualRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'monthlyRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'investigationsIncidents',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'financialStatements',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'operationalPolicies',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'dataVolume', status: 'COMPLETE', hasValue: true },
    { field: 'dataTypes', status: 'COMPLETE', hasValue: true },
    { field: 'sanctionsCheck', status: 'COMPLETE', hasValue: true },
    { field: 'dueDiligence', status: 'COMPLETE', hasValue: true },
    { field: 'regulatoryActions', status: 'COMPLETE', hasValue: true }
  ],
  timestamp: '2025-04-20T11:12:25.176Z'
}
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 388,
  responseCount: 30,
  progress: 100,
  status: 'ready_for_submission',
  formDataKeys: [
    'registrationNumber',
    'incorporationDate',
    'businessType',
    'jurisdiction',
    'registeredAddress',
    'companyPhone',
    'priorNames',
    'legalEntityName',
    'licenses',
    'goodStanding',
    'corporateRegistration',
    'externalAudit',
    'controlEnvironment',
    'authorizedSigners',
    'governmentOwnership',
    'ultimateBeneficialOwners',
    'directorsAndOfficers',
    'contactEmail',
    'marketCapitalization',
    'lifetimeCustomerValue',
    'annualRecurringRevenue',
    'monthlyRecurringRevenue',
    'investigationsIncidents',
    'financialStatements',
    'operationalPolicies',
    'dataVolume',
    'dataTypes',
    'sanctionsCheck',
    'dueDiligence',
    'regulatoryActions'
  ]
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T11:12:25.176Z
[SERVER DEBUG] Task ID: 388, Found 30 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: "No"
[SERVER DEBUG] Checking field goodStanding in retrieved data: "Yes"
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: "Yes"
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: "No significant incidents in the past 3 years"
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 30 fields, status: ready_for_submission, progress: 100%
===============================================
11:12:25 AM [info] GET /api/kyb/progress/388 304 in 160ms :: {"formData":{"registrationNumber":"12-3456789","incorporationDate":"5/12/2010...
[TimestampHandler] Retrieved 31 timestamps for task 388
[TimestampAPI] Returning 31 timestamps for task 388
11:12:25 AM [info] GET /api/kyb/timestamps/388 304 in 61ms :: {"legalEntityName":1745147524763,"registrationNumber":1745147524763,"incorpor...
[WebSocket] Received pong
[WebSocket] Received pong
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 220, company_id: 179, email: 'email@e8.com' }
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 220',
    condition2: 'tasks.created_by = 220',
    condition3: "tasks.company_id = 179 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('email@e8.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
11:12:29 AM [info] GET /api/tasks 200 in 92ms :: [{"id":389,"title":"2. Security Assessment: DevelopmentTesting8","description...
11:12:29 AM [info] GET /api/tasks 304 in 31ms :: [{"id":389,"title":"2. Security Assessment: DevelopmentTesting8","description...
[Tasks] Using cached task data for user: 220
11:12:44 AM [info] GET /api/tasks 304 in 31ms :: [{"id":389,"title":"2. Security Assessment: DevelopmentTesting8","description...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 220, company_id: 179, email: 'email@e8.com' }
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 220',
    condition2: 'tasks.created_by = 220',
    condition3: "tasks.company_id = 179 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('email@e8.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
11:12:59 AM [info] GET /api/tasks 304 in 90ms :: [{"id":389,"title":"2. Security Assessment: DevelopmentTesting8","description...
[WebSocket] Received pong
[WebSocket] Received pong
11:13:14 AM [info] GET /api/tasks 304 in 31ms :: [{"id":389,"title":"2. Security Assessment: DevelopmentTesting8","description...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 220, company_id: 179, email: 'email@e8.com' }
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 220',
    condition2: 'tasks.created_by = 220',
    condition3: "tasks.company_id = 179 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('email@e8.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
11:13:30 AM [info] GET /api/tasks 304 in 90ms :: [{"id":389,"title":"2. Security Assessment: DevelopmentTesting8","description...
11:13:45 AM [info] GET /api/tasks 304 in 30ms :: [{"id":389,"title":"2. Security Assessment: DevelopmentTesting8","description...
[WebSocket] Received pong
[WebSocket] Received pong
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 220, company_id: 179, email: 'email@e8.com' }
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 220',
    condition2: 'tasks.created_by = 220',
    condition3: "tasks.company_id = 179 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('email@e8.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
11:14:00 AM [info] GET /api/tasks 304 in 93ms :: [{"id":389,"title":"2. Security Assessment: DevelopmentTesting8","description...
[Auth] Deserializing user: 220
11:14:15 AM [info] GET /api/tasks 304 in 31ms :: [{"id":389,"title":"2. Security Assessment: DevelopmentTesting8","description...
11:14:22 AM [info] GET /api/tasks 304 in 31ms :: [{"id":389,"title":"2. Security Assessment: DevelopmentTesting8","description...
[Current Company] Fetching company for user: { userId: 220, companyId: 179 }
[Current Company] Found company: {
  id: 179,
  name: 'DevelopmentTesting8',
  onboardingCompleted: false,
  riskScore: null,
  isDemo: true
}
[Task Templates API] Fetching template for task type: company_kyb, user: 220
[Tasks Routes] Fetching task by ID: { taskId: 388, timestamp: '2025-04-20T11:14:22.508Z' }
[Auth] Using cached user data: 220
[Auth] Returning user session data
11:14:22 AM [info] GET /api/companies/current 200 in 118ms :: {"id":179,"name":"DevelopmentTesting8","description":"FinTech partner company...
[Task Templates API] Found template: 1 (KYB Form) for task type: company_kyb
11:14:22 AM [warn] GET /api/companies/is-demo 400 in 53ms :: {"message":"Invalid company ID","code":"INVALID_ID"}
[Tasks Routes] Fetching latest KYB form data for task: 388
[Task Templates API] Retrieved 9 configuration items for template ID: 1
11:14:22 AM [info] GET /api/task-templates/by-type/company_kyb 304 in 143ms :: {"id":1,"name":"KYB Form","description":"Know Your Business form for company ...
[Tasks Routes] Found 30 KYB responses for task 388
[Tasks Routes] Constructed form data with 30 fields
[Tasks Routes] Task found by ID: {
  taskId: 388,
  title: '1. KYB Form: DevelopmentTesting8',
  type: 'company_kyb',
  formDataFields: 30,
  timestamp: '2025-04-20T11:14:22.621Z'
}
11:14:22 AM [info] GET /api/tasks/388 304 in 143ms :: {"id":388,"title":"1. KYB Form: DevelopmentTesting8","description":"Complete ...
11:14:22 AM [info] GET /api/companies/179 304 in 59ms :: {"id":179,"name":"DevelopmentTesting8","description":"FinTech partner company...
[KYB API Debug] Loading progress for task: 388
[Task Reconciliation] Found 30 responses for task 388
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: true,
  timestamp: '2025-04-20T11:14:22.864Z'
}
[STATUS DETERMINATION] Task has 100% progress, setting to READY_FOR_SUBMISSION
[Task Reconciliation] Progress calculation: {
  taskId: 388,
  currentProgress: 100,
  calculatedProgress: 100,
  currentStatus: 'ready_for_submission',
  calculatedStatus: 'ready_for_submission',
  responseCount: 30,
  completeCount: 30
}
[Task Reconciliation] No updates needed for task 388
[KYB API Debug] Retrieved task: {
  taskId: 388,
  status: 'ready_for_submission',
  progress: 100,
  metadata: [
    'company_id',
    'created_at',
    'statusFlow',
    'created_via',
    'lastUpdated',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for',
    'lastProgressReconciliation'
  ],
  timestamp: '2025-04-20T11:14:22.895Z'
}
[KYB API Debug] Retrieved responses: {
  responseCount: 30,
  fields: [
    { field: 'registrationNumber', status: 'COMPLETE', hasValue: true },
    { field: 'incorporationDate', status: 'COMPLETE', hasValue: true },
    { field: 'businessType', status: 'COMPLETE', hasValue: true },
    { field: 'jurisdiction', status: 'COMPLETE', hasValue: true },
    { field: 'registeredAddress', status: 'COMPLETE', hasValue: true },
    { field: 'companyPhone', status: 'COMPLETE', hasValue: true },
    { field: 'priorNames', status: 'COMPLETE', hasValue: true },
    { field: 'legalEntityName', status: 'COMPLETE', hasValue: true },
    { field: 'licenses', status: 'COMPLETE', hasValue: true },
    { field: 'goodStanding', status: 'COMPLETE', hasValue: true },
    {
      field: 'corporateRegistration',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'externalAudit', status: 'COMPLETE', hasValue: true },
    { field: 'controlEnvironment', status: 'COMPLETE', hasValue: true },
    { field: 'authorizedSigners', status: 'COMPLETE', hasValue: true },
    {
      field: 'governmentOwnership',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'ultimateBeneficialOwners',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'directorsAndOfficers',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'contactEmail', status: 'COMPLETE', hasValue: true },
    {
      field: 'marketCapitalization',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'lifetimeCustomerValue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'annualRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'monthlyRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'investigationsIncidents',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'financialStatements',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'operationalPolicies',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'dataVolume', status: 'COMPLETE', hasValue: true },
    { field: 'dataTypes', status: 'COMPLETE', hasValue: true },
    { field: 'sanctionsCheck', status: 'COMPLETE', hasValue: true },
    { field: 'dueDiligence', status: 'COMPLETE', hasValue: true },
    { field: 'regulatoryActions', status: 'COMPLETE', hasValue: true }
  ],
  timestamp: '2025-04-20T11:14:22.925Z'
}
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 388,
  responseCount: 30,
  progress: 100,
  status: 'ready_for_submission',
  formDataKeys: [
    'registrationNumber',
    'incorporationDate',
    'businessType',
    'jurisdiction',
    'registeredAddress',
    'companyPhone',
    'priorNames',
    'legalEntityName',
    'licenses',
    'goodStanding',
    'corporateRegistration',
    'externalAudit',
    'controlEnvironment',
    'authorizedSigners',
    'governmentOwnership',
    'ultimateBeneficialOwners',
    'directorsAndOfficers',
    'contactEmail',
    'marketCapitalization',
    'lifetimeCustomerValue',
    'annualRecurringRevenue',
    'monthlyRecurringRevenue',
    'investigationsIncidents',
    'financialStatements',
    'operationalPolicies',
    'dataVolume',
    'dataTypes',
    'sanctionsCheck',
    'dueDiligence',
    'regulatoryActions'
  ]
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T11:14:22.927Z
[SERVER DEBUG] Task ID: 388, Found 30 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: "No"
[SERVER DEBUG] Checking field goodStanding in retrieved data: "Yes"
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: "Yes"
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: "No significant incidents in the past 3 years"
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 30 fields, status: ready_for_submission, progress: 100%
===============================================
11:14:22 AM [info] GET /api/kyb/progress/388 304 in 155ms :: {"formData":{"registrationNumber":"12-3456789","incorporationDate":"5/12/2010...
[KYB API Debug] Loading progress for task: 388
[TimestampHandler] Retrieved 31 timestamps for task 388
[TimestampAPI] Returning 31 timestamps for task 388
[Task Reconciliation] Found 30 responses for task 388
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: true,
  timestamp: '2025-04-20T11:14:23.168Z'
}
[STATUS DETERMINATION] Task has 100% progress, setting to READY_FOR_SUBMISSION
[Task Reconciliation] Progress calculation: {
  taskId: 388,
  currentProgress: 100,
  calculatedProgress: 100,
  currentStatus: 'ready_for_submission',
  calculatedStatus: 'ready_for_submission',
  responseCount: 30,
  completeCount: 30
}
[Task Reconciliation] No updates needed for task 388
11:14:23 AM [info] GET /api/kyb/timestamps/388 304 in 60ms :: {"legalEntityName":1745147524763,"registrationNumber":1745147524763,"incorpor...
[KYB API Debug] Retrieved task: {
  taskId: 388,
  status: 'ready_for_submission',
  progress: 100,
  metadata: [
    'company_id',
    'created_at',
    'statusFlow',
    'created_via',
    'lastUpdated',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for',
    'lastProgressReconciliation'
  ],
  timestamp: '2025-04-20T11:14:23.198Z'
}
[KYB API Debug] Retrieved responses: {
  responseCount: 30,
  fields: [
    { field: 'registrationNumber', status: 'COMPLETE', hasValue: true },
    { field: 'incorporationDate', status: 'COMPLETE', hasValue: true },
    { field: 'businessType', status: 'COMPLETE', hasValue: true },
    { field: 'jurisdiction', status: 'COMPLETE', hasValue: true },
    { field: 'registeredAddress', status: 'COMPLETE', hasValue: true },
    { field: 'companyPhone', status: 'COMPLETE', hasValue: true },
    { field: 'priorNames', status: 'COMPLETE', hasValue: true },
    { field: 'legalEntityName', status: 'COMPLETE', hasValue: true },
    { field: 'licenses', status: 'COMPLETE', hasValue: true },
    { field: 'goodStanding', status: 'COMPLETE', hasValue: true },
    {
      field: 'corporateRegistration',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'externalAudit', status: 'COMPLETE', hasValue: true },
    { field: 'controlEnvironment', status: 'COMPLETE', hasValue: true },
    { field: 'authorizedSigners', status: 'COMPLETE', hasValue: true },
    {
      field: 'governmentOwnership',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'ultimateBeneficialOwners',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'directorsAndOfficers',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'contactEmail', status: 'COMPLETE', hasValue: true },
    {
      field: 'marketCapitalization',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'lifetimeCustomerValue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'annualRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'monthlyRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'investigationsIncidents',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'financialStatements',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'operationalPolicies',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'dataVolume', status: 'COMPLETE', hasValue: true },
    { field: 'dataTypes', status: 'COMPLETE', hasValue: true },
    { field: 'sanctionsCheck', status: 'COMPLETE', hasValue: true },
    { field: 'dueDiligence', status: 'COMPLETE', hasValue: true },
    { field: 'regulatoryActions', status: 'COMPLETE', hasValue: true }
  ],
  timestamp: '2025-04-20T11:14:23.228Z'
}
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 388,
  responseCount: 30,
  progress: 100,
  status: 'ready_for_submission',
  formDataKeys: [
    'registrationNumber',
    'incorporationDate',
    'businessType',
    'jurisdiction',
    'registeredAddress',
    'companyPhone',
    'priorNames',
    'legalEntityName',
    'licenses',
    'goodStanding',
    'corporateRegistration',
    'externalAudit',
    'controlEnvironment',
    'authorizedSigners',
    'governmentOwnership',
    'ultimateBeneficialOwners',
    'directorsAndOfficers',
    'contactEmail',
    'marketCapitalization',
    'lifetimeCustomerValue',
    'annualRecurringRevenue',
    'monthlyRecurringRevenue',
    'investigationsIncidents',
    'financialStatements',
    'operationalPolicies',
    'dataVolume',
    'dataTypes',
    'sanctionsCheck',
    'dueDiligence',
    'regulatoryActions'
  ]
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T11:14:23.229Z
[SERVER DEBUG] Task ID: 388, Found 30 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: "No"
[SERVER DEBUG] Checking field goodStanding in retrieved data: "Yes"
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: "Yes"
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: "No significant incidents in the past 3 years"
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 30 fields, status: ready_for_submission, progress: 100%
===============================================
11:14:23 AM [info] GET /api/kyb/progress/388 304 in 151ms :: {"formData":{"registrationNumber":"12-3456789","incorporationDate":"5/12/2010...
[KYB API Debug] Loading progress for task: 388
[TimestampHandler] Retrieved 31 timestamps for task 388
[TimestampAPI] Returning 31 timestamps for task 388
11:14:23 AM [info] GET /api/kyb/timestamps/388 304 in 64ms :: {"legalEntityName":1745147524763,"registrationNumber":1745147524763,"incorpor...
[Task Reconciliation] Found 30 responses for task 388
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: true,
  timestamp: '2025-04-20T11:14:23.483Z'
}
[STATUS DETERMINATION] Task has 100% progress, setting to READY_FOR_SUBMISSION
[Task Reconciliation] Progress calculation: {
  taskId: 388,
  currentProgress: 100,
  calculatedProgress: 100,
  currentStatus: 'ready_for_submission',
  calculatedStatus: 'ready_for_submission',
  responseCount: 30,
  completeCount: 30
}
[Task Reconciliation] No updates needed for task 388
[KYB API Debug] Retrieved task: {
  taskId: 388,
  status: 'ready_for_submission',
  progress: 100,
  metadata: [
    'company_id',
    'created_at',
    'statusFlow',
    'created_via',
    'lastUpdated',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for',
    'lastProgressReconciliation'
  ],
  timestamp: '2025-04-20T11:14:23.513Z'
}
[KYB API Debug] Retrieved responses: {
  responseCount: 30,
  fields: [
    { field: 'registrationNumber', status: 'COMPLETE', hasValue: true },
    { field: 'incorporationDate', status: 'COMPLETE', hasValue: true },
    { field: 'businessType', status: 'COMPLETE', hasValue: true },
    { field: 'jurisdiction', status: 'COMPLETE', hasValue: true },
    { field: 'registeredAddress', status: 'COMPLETE', hasValue: true },
    { field: 'companyPhone', status: 'COMPLETE', hasValue: true },
    { field: 'priorNames', status: 'COMPLETE', hasValue: true },
    { field: 'legalEntityName', status: 'COMPLETE', hasValue: true },
    { field: 'licenses', status: 'COMPLETE', hasValue: true },
    { field: 'goodStanding', status: 'COMPLETE', hasValue: true },
    {
      field: 'corporateRegistration',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'externalAudit', status: 'COMPLETE', hasValue: true },
    { field: 'controlEnvironment', status: 'COMPLETE', hasValue: true },
    { field: 'authorizedSigners', status: 'COMPLETE', hasValue: true },
    {
      field: 'governmentOwnership',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'ultimateBeneficialOwners',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'directorsAndOfficers',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'contactEmail', status: 'COMPLETE', hasValue: true },
    {
      field: 'marketCapitalization',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'lifetimeCustomerValue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'annualRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'monthlyRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'investigationsIncidents',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'financialStatements',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'operationalPolicies',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'dataVolume', status: 'COMPLETE', hasValue: true },
    { field: 'dataTypes', status: 'COMPLETE', hasValue: true },
    { field: 'sanctionsCheck', status: 'COMPLETE', hasValue: true },
    { field: 'dueDiligence', status: 'COMPLETE', hasValue: true },
    { field: 'regulatoryActions', status: 'COMPLETE', hasValue: true }
  ],
  timestamp: '2025-04-20T11:14:23.541Z'
}
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 388,
  responseCount: 30,
  progress: 100,
  status: 'ready_for_submission',
  formDataKeys: [
    'registrationNumber',
    'incorporationDate',
    'businessType',
    'jurisdiction',
    'registeredAddress',
    'companyPhone',
    'priorNames',
    'legalEntityName',
    'licenses',
    'goodStanding',
    'corporateRegistration',
    'externalAudit',
    'controlEnvironment',
    'authorizedSigners',
    'governmentOwnership',
    'ultimateBeneficialOwners',
    'directorsAndOfficers',
    'contactEmail',
    'marketCapitalization',
    'lifetimeCustomerValue',
    'annualRecurringRevenue',
    'monthlyRecurringRevenue',
    'investigationsIncidents',
    'financialStatements',
    'operationalPolicies',
    'dataVolume',
    'dataTypes',
    'sanctionsCheck',
    'dueDiligence',
    'regulatoryActions'
  ]
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T11:14:23.542Z
[SERVER DEBUG] Task ID: 388, Found 30 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: "No"
[SERVER DEBUG] Checking field goodStanding in retrieved data: "Yes"
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: "Yes"
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: "No significant incidents in the past 3 years"
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 30 fields, status: ready_for_submission, progress: 100%
===============================================
11:14:23 AM [info] GET /api/kyb/progress/388 304 in 149ms :: {"formData":{"registrationNumber":"12-3456789","incorporationDate":"5/12/2010...
[KYB API Debug] Loading progress for task: 388
[TimestampHandler] Retrieved 31 timestamps for task 388
[TimestampAPI] Returning 31 timestamps for task 388
11:14:23 AM [info] GET /api/kyb/timestamps/388 304 in 59ms :: {"legalEntityName":1745147524763,"registrationNumber":1745147524763,"incorpor...
[Task Reconciliation] Found 30 responses for task 388
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: true,
  timestamp: '2025-04-20T11:14:23.780Z'
}
[STATUS DETERMINATION] Task has 100% progress, setting to READY_FOR_SUBMISSION
[Task Reconciliation] Progress calculation: {
  taskId: 388,
  currentProgress: 100,
  calculatedProgress: 100,
  currentStatus: 'ready_for_submission',
  calculatedStatus: 'ready_for_submission',
  responseCount: 30,
  completeCount: 30
}
[Task Reconciliation] No updates needed for task 388
[KYB API Debug] Retrieved task: {
  taskId: 388,
  status: 'ready_for_submission',
  progress: 100,
  metadata: [
    'company_id',
    'created_at',
    'statusFlow',
    'created_via',
    'lastUpdated',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for',
    'lastProgressReconciliation'
  ],
  timestamp: '2025-04-20T11:14:23.810Z'
}
[KYB API Debug] Retrieved responses: {
  responseCount: 30,
  fields: [
    { field: 'registrationNumber', status: 'COMPLETE', hasValue: true },
    { field: 'incorporationDate', status: 'COMPLETE', hasValue: true },
    { field: 'businessType', status: 'COMPLETE', hasValue: true },
    { field: 'jurisdiction', status: 'COMPLETE', hasValue: true },
    { field: 'registeredAddress', status: 'COMPLETE', hasValue: true },
    { field: 'companyPhone', status: 'COMPLETE', hasValue: true },
    { field: 'priorNames', status: 'COMPLETE', hasValue: true },
    { field: 'legalEntityName', status: 'COMPLETE', hasValue: true },
    { field: 'licenses', status: 'COMPLETE', hasValue: true },
    { field: 'goodStanding', status: 'COMPLETE', hasValue: true },
    {
      field: 'corporateRegistration',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'externalAudit', status: 'COMPLETE', hasValue: true },
    { field: 'controlEnvironment', status: 'COMPLETE', hasValue: true },
    { field: 'authorizedSigners', status: 'COMPLETE', hasValue: true },
    {
      field: 'governmentOwnership',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'ultimateBeneficialOwners',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'directorsAndOfficers',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'contactEmail', status: 'COMPLETE', hasValue: true },
    {
      field: 'marketCapitalization',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'lifetimeCustomerValue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'annualRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'monthlyRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'investigationsIncidents',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'financialStatements',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'operationalPolicies',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'dataVolume', status: 'COMPLETE', hasValue: true },
    { field: 'dataTypes', status: 'COMPLETE', hasValue: true },
    { field: 'sanctionsCheck', status: 'COMPLETE', hasValue: true },
    { field: 'dueDiligence', status: 'COMPLETE', hasValue: true },
    { field: 'regulatoryActions', status: 'COMPLETE', hasValue: true }
  ],
  timestamp: '2025-04-20T11:14:23.840Z'
}
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 388,
  responseCount: 30,
  progress: 100,
  status: 'ready_for_submission',
  formDataKeys: [
    'registrationNumber',
    'incorporationDate',
    'businessType',
    'jurisdiction',
    'registeredAddress',
    'companyPhone',
    'priorNames',
    'legalEntityName',
    'licenses',
    'goodStanding',
    'corporateRegistration',
    'externalAudit',
    'controlEnvironment',
    'authorizedSigners',
    'governmentOwnership',
    'ultimateBeneficialOwners',
    'directorsAndOfficers',
    'contactEmail',
    'marketCapitalization',
    'lifetimeCustomerValue',
    'annualRecurringRevenue',
    'monthlyRecurringRevenue',
    'investigationsIncidents',
    'financialStatements',
    'operationalPolicies',
    'dataVolume',
    'dataTypes',
    'sanctionsCheck',
    'dueDiligence',
    'regulatoryActions'
  ]
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T11:14:23.841Z
[SERVER DEBUG] Task ID: 388, Found 30 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: "No"
[SERVER DEBUG] Checking field goodStanding in retrieved data: "Yes"
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: "Yes"
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: "No significant incidents in the past 3 years"
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 30 fields, status: ready_for_submission, progress: 100%
===============================================
11:14:23 AM [info] GET /api/kyb/progress/388 304 in 152ms :: {"formData":{"registrationNumber":"12-3456789","incorporationDate":"5/12/2010...
[TimestampHandler] Retrieved 31 timestamps for task 388
[TimestampAPI] Returning 31 timestamps for task 388
11:14:24 AM [info] GET /api/kyb/timestamps/388 304 in 60ms :: {"legalEntityName":1745147524763,"registrationNumber":1745147524763,"incorpor...
[WebSocket] Received pong
[WebSocket] Received pong
[KYB API Debug] KYB save endpoint triggered: {
  endpoint: '/api/kyb/save',
  method: 'POST',
  url: '/api/kyb/save',
  headers: {
    contentType: 'application/json',
    accept: 'application/json',
    cookie: true
  },
  timestamp: '2025-04-20T11:14:47.151Z'
}
[KYB API Debug] User authenticated: {
  userId: 220,
  userEmail: 'email@e8.com',
  companyId: 179,
  timestamp: '2025-04-20T11:14:47.151Z'
}
[2025-04-20T11:14:47.151Z] [DEBUG] [KYBRoutes] Save request received {"taskId":388,"formDataKeys":["legalEntityName","registrationNumber","incorporationDate","businessType","jurisdiction","registeredAddress","companyPhone","priorNames","licenses","goodStanding","corporateRegistration","externalAudit","controlEnvironment","authorizedSigners","governmentOwnership","ultimateBeneficialOwners","directorsAndOfficers","contactEmail","marketCapitalization","lifetimeCustomerValue","annualRecurringRevenue","monthlyRecurringRevenue","investigationsIncidents","financialStatements","operationalPolicies","dataVolume","dataTypes","sanctionsCheck","dueDiligence","regulatoryActions","completion_date"],"fileName":"kyb_form_388_2025-04-20T111446.csv","userId":220,"isSubmission":false}
[2025-04-20T11:14:47.211Z] [DEBUG] [FileCreationService] Starting file creation {"fileName":"kyb_form_388_2025-04-20T111446.csv","fileType":"text/csv","userId":183,"companyId":179}
[2025-04-20T11:14:47.211Z] [DEBUG] [FileCreationService] Storing KYB CSV content directly in database
[2025-04-20T11:14:47.256Z] [INFO] [FileCreationService] File created successfully {"fileId":717,"fileName":"kyb_form_388_2025-04-20T111446.csv","size":2162}
[2025-04-20T11:14:48.280Z] [INFO] [KYBRoutes] Save completed successfully {"taskId":388,"fileId":717,"responseCount":30,"warningCount":0}
11:14:48 AM [info] POST /api/kyb/save 200 in 1160ms :: {"success":true,"fileId":717}
[WebSocket] Received message: {
  type: 'submission_status',
  payload: {
    taskId: 388,
    status: 'warning',
    error: 'Status verification failed, but form data was saved',
    source: 'client-emit',
    timestamp: 1745147701988
  }
}
[WebSocket] Received pong
[WebSocket] Received pong