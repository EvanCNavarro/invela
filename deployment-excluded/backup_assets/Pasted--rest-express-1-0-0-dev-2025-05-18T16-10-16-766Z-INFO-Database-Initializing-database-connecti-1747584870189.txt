> rest-express@1.0.0 dev
[2025-05-18T16:10:16.766Z] [INFO] [Database] Initializing database connection with optimized settings for Neon PostgreSQL {"module":"Database"}
Database migrations disabled - schema already applied
[EmailService] Initializing email service
[EmailService] Email service initialized successfully
[OpenAI] Service initialized with API key: API key is set
[2025-05-18T16:10:16.900Z] [INFO] [NeonConnectionService] Initializing Neon Connection Service {"module":"NeonConnectionService"}
[WebSocketService] Initialized in fallback mode (WebSocket server not available)
[Auth] Setting up authentication...
[Auth] Setting up PostgreSQL session store
[Auth] PostgreSQL session store initialized successfully
[Auth] Authentication setup completed
[Routes] Registered KY3P form submission fix routes
[2025-05-18T16:10:17.054Z] [INFO] [App] [KY3P-BATCH-UPDATE] Registering KY3P batch update routes 
[2025-05-18T16:10:17.054Z] [INFO] [App] Registering KY3P batch update routes 
[2025-05-18T16:10:17.055Z] [INFO] [App] [UnifiedKY3P] Registering unified KY3P update routes 
[Routes] Registered KY3P field key router
[Routes] Registered KY3P field key router
[2025-05-18T16:10:17.055Z] [INFO] [App] Registering KY3P field update routes 
[Routes] Setting up unified clear fields router
[Routes] Successfully registered unified clear fields router
[Routes] Setting up task broadcast router
[Routes] Successfully registered task broadcast router
[2025-05-18T16:10:17.058Z] [INFO] [App] [OpenBankingRoutes] Setting up routes... 
[Routes] Setting up transaction-based unified form submission router
[Routes] Successfully registered transaction-based unified form submission router
[Routes] Setting up unified form submission router
[Routes] Successfully registered unified form submission router
[Routes] Setting up transactional form submission router
[Routes] Successfully registered transactional form submission router
[Routes] Routes setup completed
[2025-05-18T16:10:17.060Z] [INFO] [App] [WebSocket] Setting up unified WebSocket server on path /ws 
[2025-05-18T16:10:17.060Z] [INFO] [WebSocket] Unified WebSocket server initialized successfully {"module":"WebSocket","clients":0,"path":"/ws","id":"xflry7","timestamp":"2025-05-18T16:10:17.060Z"}
[2025-05-18T16:10:17.060Z] [INFO] [App] [WebSocket] Unified WebSocket server initialized successfully 
[2025-05-18T16:10:17.060Z] [WARN] [App] [WebSocket] Form submission WebSocket initialization function not found 
[2025-05-18T16:10:17.061Z] [INFO] [App] [ServerStartup] WebSocket server initialized with unified implementation 
[2025-05-18T16:10:17.061Z] [INFO] [App] [TaskWebSocket] WebSocket server registered with unified implementation 
[2025-05-18T16:10:17.061Z] [INFO] [App] [ServerStartup] WebSocket server registered with task-update utility 
[TaskBroadcast] WebSocket server reference set up
[TaskBroadcast] WebSocket server active with 0 connected clients
[2025-05-18T16:10:17.061Z] [INFO] [App] [ServerStartup] WebSocket server registered with task-broadcast utility 
[2025-05-18T16:10:17.061Z] [INFO] [App] Setting up Vite development server 
[2025-05-18T16:10:17.062Z] [INFO] [App] [ENV] Server will listen on PORT=5000 (deployment mode: no) 
[2025-05-18T16:10:17.062Z] [INFO] [App] [ENV] Environment=development (NODE_ENV explicitly set) 
[2025-05-18T16:10:17.078Z] [INFO] [App] Server running on 0.0.0.0:5000 
[2025-05-18T16:10:17.078Z] [INFO] [App] Environment: development 
[Deployment] Server running on 0.0.0.0:5000
[Deployment] Environment: development
[Deployment] Port forwarding: Custom port: 5000
[Deployment] Development mode: Hot reloading enabled
[2025-05-18T16:10:17.078Z] [INFO] [App] Starting periodic task reconciliation system... 
[PeriodicTaskReconciliation] Stopped periodic reconciliation system
[PeriodicTaskReconciliation] Starting periodic reconciliation system (interval: 300000ms)
[2025-05-18T16:10:17.079Z] [INFO] [App] Task reconciliation system initialized successfully 
[2025-05-18T16:10:17.695Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747584617695-998ogrz","clients":1}
[2025-05-18T16:10:18.061Z] [INFO] [App] [ServerStartup] WebSocket server active with 1 connected clients 
[2025-05-18T16:10:18.187Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747584618187-geepsbo","clients":2}
[2025-05-18T16:10:18.314Z] [INFO] [WebSocket] Received message from client client-1747584618187-geepsbo {"module":"WebSocket","type":"authenticate","data":{"timestamp":"2025-05-18T16:10:18.177Z"}}
[2025-05-18T16:10:18.314Z] [INFO] [WebSocket] Authentication from client client-1747584618187-geepsbo {"module":"WebSocket","hasToken":true}
[2025-05-18T16:10:18.698Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747584618698-4vybm4d","clients":3}
[2025-05-18T16:10:19.195Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747584619195-guaxzbf","clients":4}
[2025-05-18T16:10:19.453Z] [INFO] [Database] New database connection established {"module":"Database"}
[Current Company] Fetching company for user: { userId: 8, companyId: 1 }
[Current Company] Found company: {
  id: 1,
  name: 'Invela',
  onboardingCompleted: true,
  riskScore: 0,
  chosenScore: 86,
  isDemo: null
}
[Current Company] Onboarding status check: {
  userId: 8,
  companyId: 1,
  userOnboardingStatus: true,
  freshFromDatabase: true,
  companyOnboardingStatus: true,
  timestamp: '2025-05-18T16:10:19.553Z'
}
[2025-05-18T16:10:19.589Z] [INFO] [App] GET /api/companies/current 200 in 104ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:10:19.690Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747584619690-qxfmak7","clients":5}
[Auth] Returning user session data
[2025-05-18T16:10:20.078Z] [INFO] [App] GET /api/companies/current 304 in 43ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:10:20.202Z] [INFO] [WebSocket] Received message from client client-1747584619690-qxfmak7 {"module":"WebSocket","type":"authenticate","userId":8,"companyId":1,"clientId":"ws_1747584618794_5ucua33jl","timestamp":"2025-05-18T16:10:20.072Z"}
[2025-05-18T16:10:20.202Z] [INFO] [WebSocket] Authentication from client client-1747584619690-qxfmak7 {"module":"WebSocket","userId":8,"companyId":1,"hasToken":true}
[2025-05-18T16:10:20.345Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747584620345-ovq00nj","clients":6}
[2025-05-18T16:10:20.476Z] [INFO] [WebSocket] Received message from client client-1747584620345-ovq00nj {"module":"WebSocket","type":"authenticate","userId":null,"companyId":null,"clientId":"ws_1747583778907_ntidnn01r","timestamp":"2025-05-18T16:10:20.334Z"}
[2025-05-18T16:10:20.476Z] [INFO] [WebSocket] Authentication from client client-1747584620345-ovq00nj {"module":"WebSocket","userId":null,"companyId":null,"hasToken":true}
[2025-05-18T16:10:21.990Z] [INFO] [App] GET /api/companies/current 304 in 32ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:10:23.625Z] [INFO] [WebSocket] Client disconnected {"module":"WebSocket","clientId":"client-1747584619690-qxfmak7","code":1001,"reason":"","remainingClients":5}
[2025-05-18T16:10:23.626Z] [INFO] [WebSocket] Client disconnected {"module":"WebSocket","clientId":"client-1747584619195-guaxzbf","code":1001,"reason":"","remainingClients":4}
[2025-05-18T16:10:23.626Z] [INFO] [WebSocket] Client disconnected {"module":"WebSocket","clientId":"client-1747584618698-4vybm4d","code":1001,"reason":"","remainingClients":3}
[2025-05-18T16:10:23.626Z] [INFO] [WebSocket] Client disconnected {"module":"WebSocket","clientId":"client-1747584617695-998ogrz","code":1001,"reason":"","remainingClients":2}
[2025-05-18T16:10:23.626Z] [INFO] [WebSocket] Client disconnected {"module":"WebSocket","clientId":"client-1747584618187-geepsbo","code":1001,"reason":"","remainingClients":1}
[2025-05-18T16:10:23.626Z] [INFO] [WebSocket] Client disconnected {"module":"WebSocket","clientId":"client-1747584620345-ovq00nj","code":1001,"reason":"","remainingClients":0}
[2025-05-18T16:10:29.362Z] [INFO] [App] Running background health checks... 
[2025-05-18T16:10:29.362Z] [StartupChecks] Running application startup health checks... 
[2025-05-18T16:10:29.362Z] [StartupChecks] Database health check attempt 1/3 
[2025-05-18T16:10:29.363Z] [INFO] [NeonConnectionService] Creating minimal connection pool for Neon PostgreSQL {"module":"NeonConnectionService"}
[2025-05-18T16:10:31.465Z] [INFO] [NeonConnectionService] New client connected to the pool {"module":"NeonConnectionService"}
[2025-05-18T16:10:31.497Z] [INFO] [NeonConnectionService] Connection pool initialized successfully {"module":"NeonConnectionService"}
[2025-05-18T16:10:31.529Z] [DBConnectionService] Database connection check successful 
[2025-05-18T16:10:31.529Z] [StartupChecks] Database health check passed 
[2025-05-18T16:10:31.529Z] [StartupChecks] All startup health checks passed! 
[2025-05-18T16:10:31.529Z] [INFO] [App] All background health checks passed successfully. 
[2025-05-18T16:10:32.665Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747584632665-gah1f90","clients":1}
[2025-05-18T16:10:32.677Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747584632677-xc597b5","clients":2}
[2025-05-18T16:10:32.748Z] [WARN] [App] GET /api/companies/current 401 in 2ms :: {"error":"Unauthorized","message":"Authentication required","details":{"authe... 
[2025-05-18T16:10:32.754Z] [WARN] [App] GET /api/tasks 401 in 3ms :: {"error":"Unauthorized","message":"Authentication required","details":{"authe... 
[2025-05-18T16:10:32.756Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747584632756-8akhjzj","clients":3}
[2025-05-18T16:10:32.759Z] [WARN] [App] GET /api/companies/1 401 in 1ms :: {"error":"Unauthorized","message":"Authentication required","details":{"authe... 
[Auth] Unauthenticated user session
[2025-05-18T16:10:32.864Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747584632864-uagdckf","clients":4}
[2025-05-18T16:10:32.878Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747584632878-vaq103q","clients":5}
[2025-05-18T16:10:32.880Z] [INFO] [WebSocket] Received message from client client-1747584632665-gah1f90 {"module":"WebSocket","type":"authenticate","data":{"timestamp":"2025-05-18T16:10:32.878Z"}}
[2025-05-18T16:10:32.880Z] [INFO] [WebSocket] Authentication from client client-1747584632665-gah1f90 {"module":"WebSocket","hasToken":true}
[2025-05-18T16:10:32.900Z] [INFO] [WebSocket] Received message from client client-1747584632756-8akhjzj {"module":"WebSocket","type":"authenticate","userId":null,"companyId":null,"clientId":"ws_1747584631953_kiqodhzle","timestamp":"2025-05-18T16:10:32.900Z"}
[2025-05-18T16:10:32.900Z] [INFO] [WebSocket] Authentication from client client-1747584632756-8akhjzj {"module":"WebSocket","userId":null,"companyId":null,"hasToken":true}
[2025-05-18T16:10:33.227Z] [INFO] [WebSocket] Client disconnected {"module":"WebSocket","clientId":"client-1747584632864-uagdckf","code":1001,"reason":"","remainingClients":4}
[2025-05-18T16:10:33.229Z] [INFO] [WebSocket] Client disconnected {"module":"WebSocket","clientId":"client-1747584632665-gah1f90","code":1001,"reason":"","remainingClients":3}
[2025-05-18T16:10:33.230Z] [INFO] [WebSocket] Client disconnected {"module":"WebSocket","clientId":"client-1747584632878-vaq103q","code":1001,"reason":"","remainingClients":2}
[2025-05-18T16:10:33.232Z] [INFO] [WebSocket] Client disconnected {"module":"WebSocket","clientId":"client-1747584632756-8akhjzj","code":1001,"reason":"","remainingClients":1}
[2025-05-18T16:10:33.233Z] [INFO] [WebSocket] Client disconnected {"module":"WebSocket","clientId":"client-1747584632677-xc597b5","code":1001,"reason":"","remainingClients":0}
[PeriodicTaskReconciliation] Reconciling batch of 10 tasks: [
  965, 963, 964, 973,
  967, 969, 968, 972,
  971, 981
]
[Task Progress] Calculated progress for task 965 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 963 (company_kyb): 0/30 = 0%
[Task Progress] Calculated progress for task 964 (ky3p): 0/0 = 0%
[Task Progress] Calculated progress for task 973 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 967 (company_kyb): 0/30 = 0%
[Task Progress] Calculated progress for task 969 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 968 (ky3p): 0/0 = 0%
[Task Progress] Calculated progress for task 972 (ky3p): 0/0 = 0%
[Task Progress] Calculated progress for task 971 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 981 (ky3p): 0/0 = 0%
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 8, company_id: 1, email: 'evan.navarro@invela.com' }
[2025-05-18T16:10:53.042Z] [INFO] [App] Performing dynamic task unlocking check for company {"companyId":1,"userId":8}
[2025-05-18T16:10:53.070Z] [INFO] [App] GET /api/companies/current 304 in 33ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:10:53.073Z] [INFO] [App] No completed KYB tasks found, skipping security task unlock check {"companyId":1}
[Tasks] Automatically unlocking all tasks for company { userId: 8, companyId: 1, requestedBy: 'automatic_task_unlock' }
[2025-05-18T16:10:53.074Z] [INFO] [App] [TaskDependencies] Unlocking ALL tasks for company {"companyId":1}
[2025-05-18T16:10:53.118Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":121,"userEmail":"darek.nehrebecki@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:10:53.118Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":858,"userEmail":"marcin.figiel@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:10:53.118Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":123,"userEmail":"dev.kurbur@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:10:53.118Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":168,"userEmail":"preston.mcfarland@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:10:53.118Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":338,"userEmail":"nathanael.coffing@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:10:53.118Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":251,"userEmail":"krzysztof.pniak@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:10:53.118Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":122,"userEmail":"gaby.sulbaran@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:10:53.118Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":188,"userEmail":"amin.swessi@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:10:53.118Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":720,"userEmail":"jim.wadsworth@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:10:53.118Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":124,"userEmail":"amar.karvir@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:10:53.118Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":172,"userEmail":"krzysztof.pniak@proopro.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:10:53.118Z] [INFO] [App] [TaskDependencies] Found tasks to unlock {"companyId":1,"count":11,"taskIds":[121,858,123,168,338,251,122,188,720,124,172],"taskTypes":["user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding"],"ky3pTaskCount":0,"ky3pTaskIds":[]}
[2025-05-18T16:10:53.119Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":121,"userEmail":"darek.nehrebecki@invela.com","timestamp":"2025-05-18T16:10:53.119Z"}
[2025-05-18T16:10:53.156Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:10:53.157Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 0 clients {"module":"WebSocket","messageType":"task_updated","recipients":0,"totalClients":0,"filtered":false}
[2025-05-18T16:10:53.157Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":121,"status":"completed"}
[2025-05-18T16:10:53.157Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":858,"userEmail":"marcin.figiel@invela.com","timestamp":"2025-05-18T16:10:53.157Z"}
[2025-05-18T16:10:53.193Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:10:53.194Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 0 clients {"module":"WebSocket","messageType":"task_updated","recipients":0,"totalClients":0,"filtered":false}
[2025-05-18T16:10:53.194Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":858,"status":"completed"}
[2025-05-18T16:10:53.194Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":123,"userEmail":"dev.kurbur@invela.com","timestamp":"2025-05-18T16:10:53.194Z"}
[Auth] Returning user session data
[2025-05-18T16:10:53.259Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:10:53.259Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 0 clients {"module":"WebSocket","messageType":"task_updated","recipients":0,"totalClients":0,"filtered":false}
[2025-05-18T16:10:53.259Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":123,"status":"completed"}
[2025-05-18T16:10:53.268Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":168,"userEmail":"preston.mcfarland@invela.com","timestamp":"2025-05-18T16:10:53.268Z"}
[2025-05-18T16:10:53.350Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:10:53.353Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 0 clients {"module":"WebSocket","messageType":"task_updated","recipients":0,"totalClients":0,"filtered":false}
[2025-05-18T16:10:53.353Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":168,"status":"completed"}
[2025-05-18T16:10:53.354Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":338,"userEmail":"nathanael.coffing@invela.com","timestamp":"2025-05-18T16:10:53.354Z"}
[2025-05-18T16:10:53.358Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747584653358-pyf6pa6","clients":1}
[2025-05-18T16:10:53.396Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:10:53.397Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 1 clients {"module":"WebSocket","messageType":"task_updated","recipients":1,"totalClients":1,"filtered":false}
[2025-05-18T16:10:53.397Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":338,"status":"completed"}
[2025-05-18T16:10:53.397Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":251,"userEmail":"krzysztof.pniak@invela.com","timestamp":"2025-05-18T16:10:53.397Z"}
[2025-05-18T16:10:53.427Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:10:53.428Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 1 clients {"module":"WebSocket","messageType":"task_updated","recipients":1,"totalClients":1,"filtered":false}
[2025-05-18T16:10:53.428Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":251,"status":"completed"}
[2025-05-18T16:10:53.428Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":122,"userEmail":"gaby.sulbaran@invela.com","timestamp":"2025-05-18T16:10:53.428Z"}
[2025-05-18T16:10:53.462Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:10:53.462Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 1 clients {"module":"WebSocket","messageType":"task_updated","recipients":1,"totalClients":1,"filtered":false}
[2025-05-18T16:10:53.462Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":122,"status":"completed"}
[2025-05-18T16:10:53.462Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":188,"userEmail":"amin.swessi@invela.com","timestamp":"2025-05-18T16:10:53.462Z"}
[2025-05-18T16:10:53.476Z] [INFO] [WebSocket] Received message from client client-1747584653358-pyf6pa6 {"module":"WebSocket","type":"authenticate","data":{"timestamp":"2025-05-18T16:10:53.347Z"}}
[2025-05-18T16:10:53.476Z] [INFO] [WebSocket] Authentication from client client-1747584653358-pyf6pa6 {"module":"WebSocket","hasToken":true}
[2025-05-18T16:10:53.492Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:10:53.493Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 1 clients {"module":"WebSocket","messageType":"task_updated","recipients":1,"totalClients":1,"filtered":false}
[2025-05-18T16:10:53.493Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":188,"status":"completed"}
[2025-05-18T16:10:53.493Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":720,"userEmail":"jim.wadsworth@invela.com","timestamp":"2025-05-18T16:10:53.493Z"}
[2025-05-18T16:10:53.530Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:10:53.530Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 1 clients {"module":"WebSocket","messageType":"task_updated","recipients":1,"totalClients":1,"filtered":false}
[2025-05-18T16:10:53.530Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":720,"status":"completed"}
[2025-05-18T16:10:53.530Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":124,"userEmail":"amar.karvir@invela.com","timestamp":"2025-05-18T16:10:53.530Z"}
[2025-05-18T16:10:53.531Z] [INFO] [Database] New database connection established {"module":"Database"}
[2025-05-18T16:10:53.562Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:10:53.563Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 1 clients {"module":"WebSocket","messageType":"task_updated","recipients":1,"totalClients":1,"filtered":false}
[2025-05-18T16:10:53.563Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":124,"status":"completed"}
[2025-05-18T16:10:53.563Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":172,"userEmail":"krzysztof.pniak@proopro.com","timestamp":"2025-05-18T16:10:53.563Z"}
[2025-05-18T16:10:53.591Z] [INFO] [App] GET /api/companies/1 304 in 312ms :: {"id":1,"name":"Invela","description":"A stealth startup revolutionizing open... 
[2025-05-18T16:10:53.602Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:10:53.602Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 1 clients {"module":"WebSocket","messageType":"task_updated","recipients":1,"totalClients":1,"filtered":false}
[2025-05-18T16:10:53.602Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":172,"status":"completed"}
[2025-05-18T16:10:53.602Z] [INFO] [App] [TaskDependencies] Successfully unlocked all tasks {"companyId":1,"count":11}
[Tasks] Successfully unlocked all tasks for company: 1
[Tasks] KYB tasks found: { count: 0 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 8',
    condition2: 'tasks.created_by = 8',
    condition3: "tasks.company_id = 1 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('evan.navarro@invela.com')"
  }
}
[Tasks] Tasks found: { count: 39 }
[2025-05-18T16:10:53.724Z] [INFO] [App] GET /api/tasks 200 in 682ms :: [{"id":989,"title":"2. S&P KY3P Security Assessment: DemoTest9","description"... 
[2025-05-18T16:10:53.754Z] [INFO] [App] [TabTutorials] Status request for tab "company-profile" from authenticated user ID: 8 
[2025-05-18T16:10:53.754Z] [INFO] [App] [TabTutorials] Normalizing tab name from 'company-profile' to canonical form 
[2025-05-18T16:10:53.754Z] [INFO] [App] [TabTutorials] Tab name already in canonical form: 'company-profile' 
[2025-05-18T16:10:53.754Z] [INFO] [App] [TabTutorials] Checking tutorial status for tab: company-profile (raw: company-profile), user: 8 
[Company Logo] Fetching logo for company ID: 1
[Company Logo] Found logo record: {
  id: '60b86cd5-0176-43f9-a8fa-eeb2307039f8',
  company_id: 1,
  file_name: 'logo_invela-blue.svg',
  file_path: 'logo_invela-blue.svg',
  file_type: 'image/svg+xml',
  uploaded_at: 2025-02-09T01:46:59.248Z
}
[Company Logo] Attempting to serve logo from: /home/runner/workspace/uploads/logos/logo_invela-blue.svg
[Company Logo] Successfully served logo for company Invela (1)
[2025-05-18T16:10:53.815Z] [INFO] [App] [TabTutorials] Retrieved tutorial status for company-profile for user 8: completed=false, step=0 
[2025-05-18T16:10:53.845Z] [INFO] [App] GET /api/user-tab-tutorials/company-profile/status 200 in 92ms :: {"exists":true,"completed":false,"currentStep":0,"lastSeenAt":"2025-05-18T16:... 
[2025-05-18T16:10:53.852Z] [INFO] [App] GET /api/companies/1/logo 200 in 96ms 
[2025-05-18T16:10:53.854Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747584653854-9kmqhwh","clients":2}
[2025-05-18T16:10:54.343Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747584654343-eoyfpgk","clients":3}
[2025-05-18T16:10:54.460Z] [INFO] [WebSocket] Received message from client client-1747584654343-eoyfpgk {"module":"WebSocket","type":"authenticate","userId":null,"companyId":null,"clientId":"ws_1747584652481_u5vti2s70","timestamp":"2025-05-18T16:10:54.331Z"}
[2025-05-18T16:10:54.460Z] [INFO] [WebSocket] Authentication from client client-1747584654343-eoyfpgk {"module":"WebSocket","userId":null,"companyId":null,"hasToken":true}
[2025-05-18T16:10:54.898Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747584654898-gq27hul","clients":4}
[2025-05-18T16:10:55.380Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747584655380-v4ig966","clients":5}
[2025-05-18T16:10:55.861Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747584655861-raiouwx","clients":6}
[Auth] Returning user session data
[2025-05-18T16:10:56.247Z] [INFO] [App] GET /api/companies/current 304 in 42ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:10:56.370Z] [INFO] [WebSocket] Received message from client client-1747584655861-raiouwx {"module":"WebSocket","type":"authenticate","userId":8,"companyId":1,"clientId":"ws_1747584654796_wubthngwm","timestamp":"2025-05-18T16:10:56.237Z"}
[2025-05-18T16:10:56.370Z] [INFO] [WebSocket] Authentication from client client-1747584655861-raiouwx {"module":"WebSocket","userId":8,"companyId":1,"hasToken":true}
[2025-05-18T16:10:56.991Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:10:59.996Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:11:02.984Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:11:05.987Z] [INFO] [App] GET /api/companies/current 304 in 33ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:11:08.992Z] [INFO] [App] GET /api/companies/current 304 in 34ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:11:16.922Z] [INFO] [WebSocket] Received message from client client-1747584655861-raiouwx {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T16:11:16.794Z","connectionId":"ws_1747584654796_wubthngwm"}
[2025-05-18T16:11:23.924Z] [INFO] [WebSocket] Received message from client client-1747584653358-pyf6pa6 {"module":"WebSocket","type":"ping"}
[Current Company] Fetching company for user: { userId: 8, companyId: 1 }
[Current Company] Found company: {
  id: 1,
  name: 'Invela',
  onboardingCompleted: true,
  riskScore: 0,
  chosenScore: 86,
  isDemo: null
}
[Current Company] Onboarding status check: {
  userId: 8,
  companyId: 1,
  userOnboardingStatus: true,
  freshFromDatabase: true,
  companyOnboardingStatus: true,
  timestamp: '2025-05-18T16:11:24.416Z'
}
[2025-05-18T16:11:24.446Z] [INFO] [App] GET /api/companies/current 304 in 93ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:11:24.630Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:11:25.023Z] [INFO] [WebSocket] Received message from client client-1747584654898-gq27hul {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T16:11:24.887Z","connectionId":"ws_1747584654886_c5d3ygpfl"}
[2025-05-18T16:11:25.503Z] [INFO] [WebSocket] Received message from client client-1747584655380-v4ig966 {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T16:11:25.375Z","connectionId":"ws_1747584653842_i1iawhz5o"}
[2025-05-18T16:11:26.264Z] [INFO] [App] GET /api/companies/current 304 in 37ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:11:29.259Z] [INFO] [App] GET /api/companies/current 304 in 33ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:11:32.267Z] [INFO] [App] GET /api/companies/current 304 in 29ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[Cache] Invalidating company cache for company 1
[Company Score] Updated chosen_score for company 1 to 10
[2025-05-18T16:11:33.639Z] [INFO] [App] PATCH /api/companies/1/score 200 in 67ms :: {"message":"Score updated successfully","companyId":1,"chosen_score":10} 
[Current Company] Fetching company for user: { userId: 8, companyId: 1 }
[Current Company] Found company: {
  id: 1,
  name: 'Invela',
  onboardingCompleted: true,
  riskScore: 0,
  chosenScore: 10,
  isDemo: null
}
[Current Company] Onboarding status check: {
  userId: 8,
  companyId: 1,
  userOnboardingStatus: true,
  freshFromDatabase: true,
  companyOnboardingStatus: true,
  timestamp: '2025-05-18T16:11:33.849Z'
}
[2025-05-18T16:11:33.878Z] [INFO] [App] GET /api/companies/current 200 in 92ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:11:35.271Z] [INFO] [App] GET /api/companies/current 304 in 32ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:11:35.980Z] [INFO] [WebSocket] Received message from client client-1747584655861-raiouwx {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T16:11:35.851Z","connectionId":"ws_1747584654796_wubthngwm"}
[Cache] Invalidating company cache for company 1
[Company Score] Updated chosen_score for company 1 to 0
[Current Company] Fetching company for user: { userId: 8, companyId: 1 }
[Current Company] Found company: {
  id: 1,
  name: 'Invela',
  onboardingCompleted: true,
  riskScore: 0,
  chosenScore: 0,
  isDemo: null
}
[Current Company] Onboarding status check: {
  userId: 8,
  companyId: 1,
  userOnboardingStatus: true,
  freshFromDatabase: true,
  companyOnboardingStatus: true,
  timestamp: '2025-05-18T16:11:38.306Z'
}
[2025-05-18T16:11:38.338Z] [INFO] [App] GET /api/companies/current 200 in 91ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:11:38.461Z] [INFO] [App] PATCH /api/companies/1/score 200 in 265ms :: {"message":"Score updated successfully","companyId":1,"chosen_score":0} 
[2025-05-18T16:11:38.659Z] [INFO] [App] GET /api/companies/current 304 in 34ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:11:41.258Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:11:44.220Z] [INFO] [App] [TabTutorials] Status request for tab "risk-score-configuration" from authenticated user ID: 8 
[2025-05-18T16:11:44.220Z] [INFO] [App] [TabTutorials] Normalizing tab name from 'risk-score-configuration' to canonical form 
[2025-05-18T16:11:44.220Z] [INFO] [App] [TabTutorials] Tab name already in canonical form: 'risk-score-configuration' 
[2025-05-18T16:11:44.220Z] [INFO] [App] [TabTutorials] Checking tutorial status for tab: risk-score-configuration (raw: risk-score-configuration), user: 8 
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 8, company_id: 1, email: 'evan.navarro@invela.com' }
[2025-05-18T16:11:44.226Z] [INFO] [App] Performing dynamic task unlocking check for company {"companyId":1,"userId":8}
[2025-05-18T16:11:44.255Z] [INFO] [App] No completed KYB tasks found, skipping security task unlock check {"companyId":1}
[Tasks] Automatically unlocking all tasks for company { userId: 8, companyId: 1, requestedBy: 'automatic_task_unlock' }
[2025-05-18T16:11:44.256Z] [INFO] [App] [TaskDependencies] Unlocking ALL tasks for company {"companyId":1}
[2025-05-18T16:11:44.285Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":121,"userEmail":"darek.nehrebecki@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:11:44.286Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":858,"userEmail":"marcin.figiel@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:11:44.286Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":123,"userEmail":"dev.kurbur@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:11:44.286Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":168,"userEmail":"preston.mcfarland@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:11:44.286Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":338,"userEmail":"nathanael.coffing@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:11:44.286Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":188,"userEmail":"amin.swessi@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:11:44.286Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":720,"userEmail":"jim.wadsworth@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:11:44.286Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":124,"userEmail":"amar.karvir@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:11:44.286Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":251,"userEmail":"krzysztof.pniak@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:11:44.286Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":122,"userEmail":"gaby.sulbaran@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:11:44.286Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":172,"userEmail":"krzysztof.pniak@proopro.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:11:44.286Z] [INFO] [App] [TaskDependencies] Found tasks to unlock {"companyId":1,"count":11,"taskIds":[121,858,123,168,338,188,720,124,251,122,172],"taskTypes":["user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding"],"ky3pTaskCount":0,"ky3pTaskIds":[]}
[2025-05-18T16:11:44.286Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":121,"userEmail":"darek.nehrebecki@invela.com","timestamp":"2025-05-18T16:11:44.286Z"}
[2025-05-18T16:11:44.287Z] [INFO] [App] [TabTutorials] Retrieved tutorial status for risk-score-configuration for user 8: completed=true, step=2 
[2025-05-18T16:11:44.316Z] [INFO] [App] GET /api/user-tab-tutorials/risk-score-configuration/status 200 in 96ms :: {"exists":true,"completed":true,"currentStep":2,"lastSeenAt":"2025-05-18T15:5... 
[2025-05-18T16:11:44.317Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:11:44.318Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T16:11:44.318Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":121,"status":"completed"}
[2025-05-18T16:11:44.318Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":858,"userEmail":"marcin.figiel@invela.com","timestamp":"2025-05-18T16:11:44.318Z"}
[2025-05-18T16:11:44.353Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:11:44.353Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T16:11:44.353Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":858,"status":"completed"}
[2025-05-18T16:11:44.353Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":123,"userEmail":"dev.kurbur@invela.com","timestamp":"2025-05-18T16:11:44.353Z"}
[2025-05-18T16:11:44.387Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:11:44.388Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T16:11:44.388Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":123,"status":"completed"}
[2025-05-18T16:11:44.388Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":168,"userEmail":"preston.mcfarland@invela.com","timestamp":"2025-05-18T16:11:44.388Z"}
[2025-05-18T16:11:44.421Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:11:44.421Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T16:11:44.422Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":168,"status":"completed"}
[2025-05-18T16:11:44.422Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":338,"userEmail":"nathanael.coffing@invela.com","timestamp":"2025-05-18T16:11:44.422Z"}
[OptionalAuth] Request to /priorities: authenticated=true, hasUser=true
[OptionalAuth] Request to /priorities: authenticated=true, hasUser=true
[RiskPriorities] GET request received
[RiskPriorities] Using company ID: 1 (authenticated)
[OptionalAuth] Request to /configuration: authenticated=true, hasUser=true
[OptionalAuth] Request to /configuration: authenticated=true, hasUser=true
[RiskConfiguration] Using company ID: 1 (authenticated)
[RiskPriorities] Retrieved company from DB: found
[RiskPriorities] risk_priorities in DB: present (object)
[RiskPriorities] Retrieved dimensions from DB type: Array
[RiskPriorities] First dimension in DB: {"id":"cyber_security","name":"Cyber Security","color":"#2196f3","value":50,"weight":30,"description":"Protection against digital threats and vulnerabilities"}
[RiskPriorities] Returning priorities from DB
[2025-05-18T16:11:44.485Z] [INFO] [App] GET /api/risk-score/priorities 304 in 62ms :: {"dimensions":[{"id":"cyber_security","name":"Cyber Security","color":"#2196f... 
[2025-05-18T16:11:44.626Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:11:44.627Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T16:11:44.627Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":338,"status":"completed"}
[2025-05-18T16:11:44.627Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":188,"userEmail":"amin.swessi@invela.com","timestamp":"2025-05-18T16:11:44.627Z"}
[OptionalAuth] Request to /priorities: authenticated=true, hasUser=true
[OptionalAuth] Request to /priorities: authenticated=true, hasUser=true
[RiskPriorities] GET request received
[RiskPriorities] Using company ID: 1 (authenticated)
[2025-05-18T16:11:44.652Z] [INFO] [Database] New database connection established {"module":"Database"}
[2025-05-18T16:11:44.655Z] [INFO] [App] GET /api/companies/current 304 in 34ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:11:44.658Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:11:44.658Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T16:11:44.658Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":188,"status":"completed"}
[2025-05-18T16:11:44.658Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":720,"userEmail":"jim.wadsworth@invela.com","timestamp":"2025-05-18T16:11:44.658Z"}
[RiskPriorities] Retrieved company from DB: found
[RiskPriorities] risk_priorities in DB: present (object)
[RiskPriorities] Retrieved dimensions from DB type: Array
[RiskPriorities] First dimension in DB: {"id":"cyber_security","name":"Cyber Security","color":"#2196f3","value":50,"weight":30,"description":"Protection against digital threats and vulnerabilities"}
[RiskPriorities] Returning priorities from DB
[2025-05-18T16:11:44.697Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:11:44.698Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T16:11:44.698Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":720,"status":"completed"}
[2025-05-18T16:11:44.698Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":124,"userEmail":"amar.karvir@invela.com","timestamp":"2025-05-18T16:11:44.698Z"}
[2025-05-18T16:11:44.702Z] [INFO] [App] GET /api/risk-score/priorities 304 in 67ms :: {"dimensions":[{"id":"cyber_security","name":"Cyber Security","color":"#2196f... 
[2025-05-18T16:11:44.716Z] [INFO] [App] GET /api/risk-score/configuration 304 in 290ms :: {"score":86,"riskLevel":"critical","dimensions":[{"id":"cyber_security","name... 
[2025-05-18T16:11:44.736Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:11:44.736Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T16:11:44.736Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":124,"status":"completed"}
[2025-05-18T16:11:44.737Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":251,"userEmail":"krzysztof.pniak@invela.com","timestamp":"2025-05-18T16:11:44.737Z"}
[2025-05-18T16:11:44.776Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:11:44.778Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T16:11:44.778Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":251,"status":"completed"}
[2025-05-18T16:11:44.778Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":122,"userEmail":"gaby.sulbaran@invela.com","timestamp":"2025-05-18T16:11:44.778Z"}
[2025-05-18T16:11:44.813Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:11:44.814Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T16:11:44.814Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":122,"status":"completed"}
[2025-05-18T16:11:44.814Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":172,"userEmail":"krzysztof.pniak@proopro.com","timestamp":"2025-05-18T16:11:44.814Z"}
[2025-05-18T16:11:44.846Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:11:44.847Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T16:11:44.847Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":172,"status":"completed"}
[2025-05-18T16:11:44.847Z] [INFO] [App] [TaskDependencies] Successfully unlocked all tasks {"companyId":1,"count":11}
[Tasks] Successfully unlocked all tasks for company: 1
[Tasks] KYB tasks found: { count: 0 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 8',
    condition2: 'tasks.created_by = 8',
    condition3: "tasks.company_id = 1 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('evan.navarro@invela.com')"
  }
}
[Tasks] Tasks found: { count: 39 }
[2025-05-18T16:11:44.971Z] [INFO] [App] GET /api/tasks 200 in 746ms :: [{"id":989,"title":"2. S&P KY3P Security Assessment: DemoTest9","description"... 
[Current Company] Using cached company data: 1
[2025-05-18T16:11:47.259Z] [INFO] [App] GET /api/companies/current 304 in 32ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:11:49.339Z] [INFO] [App] [TabTutorials] Status request for tab "claims" from authenticated user ID: 8 
[2025-05-18T16:11:49.339Z] [INFO] [App] [TabTutorials] Normalizing tab name from 'claims' to canonical form 
[2025-05-18T16:11:49.339Z] [INFO] [App] [TabTutorials] Tab name already in canonical form: 'claims' 
[2025-05-18T16:11:49.339Z] [INFO] [App] [TabTutorials] Checking tutorial status for tab: claims (raw: claims), user: 8 
[2025-05-18T16:11:49.367Z] [INFO] [App] GET /api/claims/active 304 in 31ms :: [{"id":1,"claim_id":"CLM-2025-001","bank_id":"BNK-12009","bank_name":"First N... 
[2025-05-18T16:11:49.368Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:11:49.397Z] [INFO] [App] [TabTutorials] Retrieved tutorial status for claims for user 8: completed=true, step=1 
[2025-05-18T16:11:49.430Z] [INFO] [App] GET /api/user-tab-tutorials/claims/status 200 in 92ms :: {"exists":true,"completed":true,"currentStep":1,"lastSeenAt":"2025-05-18T15:5... 
[2025-05-18T16:11:49.924Z] [INFO] [App] [TabTutorials] Status request for tab "dashboard" from authenticated user ID: 8 
[2025-05-18T16:11:49.924Z] [INFO] [App] [TabTutorials] Normalizing tab name from 'dashboard' to canonical form 
[2025-05-18T16:11:49.924Z] [INFO] [App] [TabTutorials] Tab name already in canonical form: 'dashboard' 
[2025-05-18T16:11:49.924Z] [INFO] [App] [TabTutorials] Checking tutorial status for tab: dashboard (raw: dashboard), user: 8 
[Relationships] Fetching network for company: 1
[Network Visualization] Fetching network data for company: 1
[Companies] Fetching companies for user: { userId: 8, company_id: 1 }
[2025-05-18T16:11:49.957Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[Relationships] Found network members: { count: 65 }
[2025-05-18T16:11:50.006Z] [INFO] [App] [TabTutorials] Retrieved tutorial status for dashboard for user 8: completed=true, step=2 
[Network Visualization] Found network relationships: { count: 65 }
[Network Visualization] Returning visualization data: { centerNode: 'Invela', nodeCount: 65 }
[2025-05-18T16:11:50.020Z] [INFO] [App] GET /api/relationships 304 in 89ms :: [{"id":12,"companyId":1,"relatedCompanyId":33,"relationshipType":"network_mem... 
[Companies] Query successful, found companies: {
  count: 59,
  companies: [
    { id: 33, name: 'Affinityx', hasLogo: true, hasRelationship: true },
    {
      id: 55,
      name: 'Alphapoint',
      hasLogo: true,
      hasRelationship: true
    },
    { id: 35, name: 'AscendIQ', hasLogo: true, hasRelationship: true },
    { id: 18, name: 'Axono', hasLogo: true, hasRelationship: true },
    { id: 30, name: 'Bankure', hasLogo: true, hasRelationship: true },
    { id: 39, name: 'Cachepath', hasLogo: true, hasRelationship: true },
    { id: 21, name: 'Clario', hasLogo: true, hasRelationship: true },
    {
      id: 154,
      name: 'ClarityBank',
      hasLogo: false,
      hasRelationship: true
    },
    { id: 49, name: 'Cleara', hasLogo: true, hasRelationship: true },
    { id: 32, name: 'Clyra', hasLogo: true, hasRelationship: true },
    { id: 7, name: 'Credora', hasLogo: true, hasRelationship: true },
    {
      id: 15,
      name: 'CryptoNest',
      hasLogo: true,
      hasRelationship: true
    },
    {
      id: 318,
      name: 'DemoTest1',
      hasLogo: false,
      hasRelationship: true
    },
    {
      id: 319,
      name: 'DemoTest2',
      hasLogo: false,
      hasRelationship: true
    },
    {
      id: 325,
      name: 'DemoTest3',
      hasLogo: false,
      hasRelationship: true
    },
    {
      id: 326,
      name: 'DemoTest4',
      hasLogo: false,
      hasRelationship: true
    },
    {
      id: 329,
      name: 'DemoTest7',
      hasLogo: false,
      hasRelationship: true
    },
    {
      id: 330,
      name: 'DemoTest8',
      hasLogo: false,
      hasRelationship: true
    },
    {
      id: 331,
      name: 'DemoTest9',
      hasLogo: false,
      hasRelationship: true
    },
    { id: 11, name: 'DriftPay', hasLogo: true, hasRelationship: true },
    { id: 17, name: 'Earnin', hasLogo: true, hasRelationship: true },
    { id: 14, name: 'EchoPay', hasLogo: true, hasRelationship: true },
    {
      id: 40,
      name: 'Equibridge',
      hasLogo: true,
      hasRelationship: true
    },
    { id: 9, name: 'Finloft', hasLogo: true, hasRelationship: true },
    { id: 38, name: 'Finsera', hasLogo: true, hasRelationship: true },
    { id: 51, name: 'Fundory', hasLogo: true, hasRelationship: true },
    { id: 47, name: 'Gravix', hasLogo: true, hasRelationship: true },
    { id: 1, name: 'Invela', hasLogo: true, hasRelationship: true },
    {
      id: 167,
      name: 'JimsAutoshop',
      hasLogo: false,
      hasRelationship: true
    },
    { id: 27, name: 'Lumora', hasLogo: true, hasRelationship: true },
    { id: 28, name: 'Modenex', hasLogo: true, hasRelationship: true },
    { id: 43, name: 'Nesture', hasLogo: true, hasRelationship: true },
    { id: 56, name: 'Nimblefi', hasLogo: true, hasRelationship: true },
    { id: 34, name: 'Nodura', hasLogo: true, hasRelationship: true },
    { id: 8, name: 'Novably', hasLogo: true, hasRelationship: true },
    { id: 37, name: 'Omnipay', hasLogo: true, hasRelationship: true },
    { id: 20, name: 'Orbipay', hasLogo: true, hasRelationship: true },
    { id: 41, name: 'Orosync', hasLogo: true, hasRelationship: true },
    { id: 5, name: 'PanAmerica', hasLogo: true, hasRelationship: true },
    { id: 45, name: 'Paydrift', hasLogo: true, hasRelationship: true },
    { id: 25, name: 'Paynest', hasLogo: true, hasRelationship: true },
    { id: 26, name: 'PetalSure', hasLogo: true, hasRelationship: true },
    { id: 13, name: 'Quantia', hasLogo: true, hasRelationship: true },
    { id: 48, name: 'Securent', hasLogo: true, hasRelationship: true },
    {
      id: 166,
      name: 'SkyToken',
      hasLogo: false,
      hasRelationship: true
    },
    {
      id: 165,
      name: 'StevesAuto',
      hasLogo: false,
      hasRelationship: true
    },
    { id: 31, name: 'Syntra', hasLogo: true, hasRelationship: true },
    {
      id: 168,
      name: 'TannersFeedback',
      hasLogo: false,
      hasRelationship: true
    },
    { id: 36, name: 'Tilvio', hasLogo: true, hasRelationship: true },
    { id: 46, name: 'Trustmint', hasLogo: true, hasRelationship: true },
    { id: 16, name: 'Trustwell', hasLogo: true, hasRelationship: true },
    { id: 44, name: 'ValoraPay', hasLogo: true, hasRelationship: true },
    { id: 6, name: 'Vaultara', hasLogo: true, hasRelationship: true },
    { id: 19, name: 'Veriark', hasLogo: true, hasRelationship: true },
    {
      id: 164,
      name: 'Wealthfront',
      hasLogo: false,
      hasRelationship: true
    },
    { id: 29, name: 'Zenflow', hasLogo: true, hasRelationship: true },
    { id: 24, name: 'Zentra', hasLogo: true, hasRelationship: true },
    { id: 50, name: 'Zentry', hasLogo: true, hasRelationship: true },
    { id: 12, name: 'Zyra', hasLogo: true, hasRelationship: true }
  ]
}
[2025-05-18T16:11:50.036Z] [INFO] [App] GET /api/user-tab-tutorials/dashboard/status 200 in 112ms :: {"exists":true,"completed":true,"currentStep":2,"lastSeenAt":"2025-05-18T16:0... 
[2025-05-18T16:11:50.047Z] [INFO] [App] GET /api/network/visualization 304 in 107ms :: {"center":{"id":1,"name":"Invela","riskScore":0,"riskBucket":"none","accredit... 
[2025-05-18T16:11:50.065Z] [INFO] [App] GET /api/companies 200 in 115ms :: [{"id":33,"name":"Affinityx","category":"FinTech","description":"Affinityx is... 
[2025-05-18T16:11:51.045Z] [INFO] [App] [TabTutorials] Status request for tab "insights" from authenticated user ID: 8 
[2025-05-18T16:11:51.045Z] [INFO] [App] [TabTutorials] Normalizing tab name from 'insights' to canonical form 
[2025-05-18T16:11:51.045Z] [INFO] [App] [TabTutorials] Tab name already in canonical form: 'insights' 
[2025-05-18T16:11:51.045Z] [INFO] [App] [TabTutorials] Checking tutorial status for tab: insights (raw: insights), user: 8 
[2025-05-18T16:11:51.081Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:11:51.102Z] [INFO] [App] [TabTutorials] Retrieved tutorial status for insights for user 8: completed=true, step=2 
[2025-05-18T16:11:51.141Z] [INFO] [App] GET /api/user-tab-tutorials/insights/status 200 in 96ms :: {"exists":true,"completed":true,"currentStep":2,"lastSeenAt":"2025-05-18T15:5... 
[2025-05-18T16:11:52.528Z] [INFO] [App] GET /api/companies/current 304 in 29ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:11:53.179Z] [INFO] [App] [TabTutorials] Status request for tab "company-profile" from authenticated user ID: 8 
[2025-05-18T16:11:53.179Z] [INFO] [App] [TabTutorials] Normalizing tab name from 'company-profile' to canonical form 
[2025-05-18T16:11:53.179Z] [INFO] [App] [TabTutorials] Tab name already in canonical form: 'company-profile' 
[2025-05-18T16:11:53.179Z] [INFO] [App] [TabTutorials] Checking tutorial status for tab: company-profile (raw: company-profile), user: 8 
[Company Logo] Fetching logo for company ID: 1
[2025-05-18T16:11:53.216Z] [INFO] [App] GET /api/companies/current 304 in 29ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:11:53.239Z] [INFO] [App] [TabTutorials] Retrieved tutorial status for company-profile for user 8: completed=false, step=0 
[Company Logo] Found logo record: {
  id: '60b86cd5-0176-43f9-a8fa-eeb2307039f8',
  company_id: 1,
  file_name: 'logo_invela-blue.svg',
  file_path: 'logo_invela-blue.svg',
  file_type: 'image/svg+xml',
  uploaded_at: 2025-02-09T01:46:59.248Z
}
[Company Logo] Attempting to serve logo from: /home/runner/workspace/uploads/logos/logo_invela-blue.svg
[Company Logo] Successfully served logo for company Invela (1)
[2025-05-18T16:11:53.252Z] [INFO] [App] GET /api/companies/1 200 in 63ms :: {"id":1,"name":"Invela","description":"A stealth startup revolutionizing open... 
[2025-05-18T16:11:53.271Z] [INFO] [App] GET /api/user-tab-tutorials/company-profile/status 200 in 92ms :: {"exists":true,"completed":false,"currentStep":0,"lastSeenAt":"2025-05-18T16:... 
[2025-05-18T16:11:53.274Z] [INFO] [App] GET /api/companies/1/logo 200 in 89ms 
[2025-05-18T16:11:53.477Z] [INFO] [WebSocket] Received message from client client-1747584653358-pyf6pa6 {"module":"WebSocket","type":"ping"}
[2025-05-18T16:11:55.015Z] [INFO] [WebSocket] Received message from client client-1747584654898-gq27hul {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T16:11:54.887Z","connectionId":"ws_1747584654886_c5d3ygpfl"}
[2025-05-18T16:11:55.503Z] [INFO] [WebSocket] Received message from client client-1747584655380-v4ig966 {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T16:11:55.375Z","connectionId":"ws_1747584653842_i1iawhz5o"}
[2025-05-18T16:11:55.979Z] [INFO] [WebSocket] Received message from client client-1747584655861-raiouwx {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T16:11:55.852Z","connectionId":"ws_1747584654796_wubthngwm"}
[2025-05-18T16:11:56.218Z] [INFO] [App] GET /api/companies/current 304 in 35ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[Companies] Error fetching company users: TypeError: Cannot convert undefined or null to object
    at Function.entries (<anonymous>)
    at orderSelectedFields (/home/runner/workspace/node_modules/src/utils.ts:77:16)
    at <anonymous> (/home/runner/workspace/node_modules/src/utils.ts:88:19)
    at Array.reduce (<anonymous>)
    at orderSelectedFields (/home/runner/workspace/node_modules/src/utils.ts:77:32)
    at <anonymous> (/home/runner/workspace/node_modules/src/pg-core/query-builders/select.ts:973:23)
    at Object.startActiveSpan (/home/runner/workspace/node_modules/src/tracing.ts:27:11)
    at PgSelectBase._prepare (/home/runner/workspace/node_modules/src/pg-core/query-builders/select.ts:972:17)
    at <anonymous> (/home/runner/workspace/node_modules/src/pg-core/query-builders/select.ts:1003:16)
    at Object.startActiveSpan (/home/runner/workspace/node_modules/src/tracing.ts:27:11)
    at PgSelectBase.execute (/home/runner/workspace/node_modules/src/pg-core/query-builders/select.ts:1002:17)
    at PgSelectBase.then (/home/runner/workspace/node_modules/src/query-promise.ts:31:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
[2025-05-18T16:11:57.209Z] [ERROR] [App] GET /api/companies/1/users 500 in 64ms :: {"error":"Failed to fetch company users"} 
[2025-05-18T16:11:59.223Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:12:02.331Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:12:05.212Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:12:08.215Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:12:11.221Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:12:14.214Z] [INFO] [App] GET /api/companies/current 304 in 32ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:12:15.980Z] [INFO] [WebSocket] Received message from client client-1747584655861-raiouwx {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T16:12:15.851Z","connectionId":"ws_1747584654796_wubthngwm"}
[2025-05-18T16:12:17.214Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:12:20.213Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:12:23.221Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:12:23.479Z] [INFO] [WebSocket] Received message from client client-1747584653358-pyf6pa6 {"module":"WebSocket","type":"ping"}
[2025-05-18T16:12:25.016Z] [INFO] [WebSocket] Received message from client client-1747584654898-gq27hul {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T16:12:24.888Z","connectionId":"ws_1747584654886_c5d3ygpfl"}
[2025-05-18T16:12:25.505Z] [INFO] [WebSocket] Received message from client client-1747584655380-v4ig966 {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T16:12:25.376Z","connectionId":"ws_1747584653842_i1iawhz5o"}
[2025-05-18T16:12:26.210Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:12:29.214Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:12:32.222Z] [INFO] [App] GET /api/companies/current 304 in 34ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:12:35.232Z] [INFO] [App] GET /api/companies/current 304 in 40ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:12:35.978Z] [INFO] [WebSocket] Received message from client client-1747584655861-raiouwx {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T16:12:35.851Z","connectionId":"ws_1747584654796_wubthngwm"}
[2025-05-18T16:12:38.214Z] [INFO] [App] GET /api/companies/current 304 in 33ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[Current Company] Fetching company for user: { userId: 8, companyId: 1 }
[Current Company] Found company: {
  id: 1,
  name: 'Invela',
  onboardingCompleted: true,
  riskScore: 0,
  chosenScore: 0,
  isDemo: null
}
[Current Company] Onboarding status check: {
  userId: 8,
  companyId: 1,
  userOnboardingStatus: true,
  freshFromDatabase: true,
  companyOnboardingStatus: true,
  timestamp: '2025-05-18T16:12:41.247Z'
}
[2025-05-18T16:12:41.278Z] [INFO] [App] GET /api/companies/current 304 in 94ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:12:44.212Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:12:47.229Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:12:50.226Z] [INFO] [App] GET /api/companies/current 304 in 32ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:12:53.923Z] [INFO] [WebSocket] Received message from client client-1747584653358-pyf6pa6 {"module":"WebSocket","type":"ping"}
[2025-05-18T16:12:53.995Z] [INFO] [App] GET /api/companies/current 304 in 37ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:12:54.925Z] [INFO] [WebSocket] Received message from client client-1747584654343-eoyfpgk {"module":"WebSocket","type":"ping"}
[2025-05-18T16:12:55.925Z] [INFO] [WebSocket] Received message from client client-1747584654898-gq27hul {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T16:12:55.794Z","connectionId":"ws_1747584654886_c5d3ygpfl"}
[2025-05-18T16:12:55.926Z] [INFO] [WebSocket] Received message from client client-1747584655380-v4ig966 {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T16:12:55.795Z","connectionId":"ws_1747584653842_i1iawhz5o"}
[2025-05-18T16:12:56.925Z] [INFO] [WebSocket] Received message from client client-1747584655861-raiouwx {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T16:12:56.794Z","connectionId":"ws_1747584654796_wubthngwm"}
[2025-05-18T16:12:56.987Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:12:59.999Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:13:03.002Z] [INFO] [App] GET /api/companies/current 304 in 44ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:13:05.984Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:13:08.490Z] [WARN] [App] GET /api/companies/1/users 401 in 2ms :: {"error":"Unauthorized","message":"Authentication required","details":{"authe... 
[2025-05-18T16:13:08.999Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:13:12.004Z] [INFO] [App] GET /api/companies/current 304 in 34ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:13:14.992Z] [INFO] [App] GET /api/companies/current 304 in 33ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:13:16.922Z] [INFO] [WebSocket] Received message from client client-1747584655861-raiouwx {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T16:13:16.794Z","connectionId":"ws_1747584654796_wubthngwm"}
[2025-05-18T16:13:17.640Z] [INFO] [WebSocket] Client disconnected {"module":"WebSocket","clientId":"client-1747584653358-pyf6pa6","code":1001,"reason":"","remainingClients":5}
[2025-05-18T16:13:17.640Z] [INFO] [WebSocket] Client disconnected {"module":"WebSocket","clientId":"client-1747584653854-9kmqhwh","code":1001,"reason":"","remainingClients":4}
[2025-05-18T16:13:17.641Z] [INFO] [WebSocket] Client disconnected {"module":"WebSocket","clientId":"client-1747584655861-raiouwx","code":1001,"reason":"","remainingClients":3}
[2025-05-18T16:13:17.641Z] [INFO] [WebSocket] Client disconnected {"module":"WebSocket","clientId":"client-1747584654898-gq27hul","code":1001,"reason":"","remainingClients":2}
[2025-05-18T16:13:17.641Z] [INFO] [WebSocket] Client disconnected {"module":"WebSocket","clientId":"client-1747584655380-v4ig966","code":1001,"reason":"","remainingClients":1}
[2025-05-18T16:13:17.641Z] [INFO] [WebSocket] Client disconnected {"module":"WebSocket","clientId":"client-1747584654343-eoyfpgk","code":1001,"reason":"","remainingClients":0}
[2025-05-18T16:13:19.497Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747584799497-xmkmee3","clients":1}
[2025-05-18T16:13:19.514Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747584799513-cb3824r","clients":2}
[2025-05-18T16:13:19.578Z] [WARN] [App] GET /api/companies/current 401 in 1ms :: {"error":"Unauthorized","message":"Authentication required","details":{"authe... 
[2025-05-18T16:13:19.587Z] [WARN] [App] GET /api/tasks 401 in 2ms :: {"error":"Unauthorized","message":"Authentication required","details":{"authe... 
[2025-05-18T16:13:19.591Z] [WARN] [App] GET /api/companies/1 401 in 1ms :: {"error":"Unauthorized","message":"Authentication required","details":{"authe... 
[Auth] Unauthenticated user session
[2025-05-18T16:13:19.597Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747584799597-dytecpq","clients":3}
[2025-05-18T16:13:19.641Z] [INFO] [WebSocket] Received message from client client-1747584799497-xmkmee3 {"module":"WebSocket","type":"authenticate","data":{"timestamp":"2025-05-18T16:13:19.641Z"}}
[2025-05-18T16:13:19.641Z] [INFO] [WebSocket] Authentication from client client-1747584799497-xmkmee3 {"module":"WebSocket","hasToken":true}
[2025-05-18T16:13:19.670Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747584799670-fxuq9t3","clients":4}
[2025-05-18T16:13:19.682Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747584799682-pnvm6r1","clients":5}
[2025-05-18T16:13:19.750Z] [INFO] [WebSocket] Received message from client client-1747584799597-dytecpq {"module":"WebSocket","type":"authenticate","userId":null,"companyId":null,"clientId":"ws_1747584798755_wpygya1u7","timestamp":"2025-05-18T16:13:19.749Z"}
[2025-05-18T16:13:19.750Z] [INFO] [WebSocket] Authentication from client client-1747584799597-dytecpq {"module":"WebSocket","userId":null,"companyId":null,"hasToken":true}
[2025-05-18T16:13:20.099Z] [INFO] [WebSocket] Client disconnected {"module":"WebSocket","clientId":"client-1747584799682-pnvm6r1","code":1001,"reason":"","remainingClients":4}
[2025-05-18T16:13:20.099Z] [INFO] [WebSocket] Client disconnected {"module":"WebSocket","clientId":"client-1747584799670-fxuq9t3","code":1001,"reason":"","remainingClients":3}
[2025-05-18T16:13:20.100Z] [INFO] [WebSocket] Client disconnected {"module":"WebSocket","clientId":"client-1747584799513-cb3824r","code":1001,"reason":"","remainingClients":2}
[2025-05-18T16:13:20.100Z] [INFO] [WebSocket] Client disconnected {"module":"WebSocket","clientId":"client-1747584799597-dytecpq","code":1001,"reason":"","remainingClients":1}
[2025-05-18T16:13:20.100Z] [INFO] [WebSocket] Client disconnected {"module":"WebSocket","clientId":"client-1747584799497-xmkmee3","code":1001,"reason":"","remainingClients":0}
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 8, company_id: 1, email: 'evan.navarro@invela.com' }
[2025-05-18T16:13:39.308Z] [INFO] [App] Performing dynamic task unlocking check for company {"companyId":1,"userId":8}
[2025-05-18T16:13:39.323Z] [INFO] [App] GET /api/companies/current 304 in 29ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:13:39.338Z] [INFO] [App] No completed KYB tasks found, skipping security task unlock check {"companyId":1}
[Tasks] Automatically unlocking all tasks for company { userId: 8, companyId: 1, requestedBy: 'automatic_task_unlock' }
[2025-05-18T16:13:39.339Z] [INFO] [App] [TaskDependencies] Unlocking ALL tasks for company {"companyId":1}
[2025-05-18T16:13:39.367Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":121,"userEmail":"darek.nehrebecki@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:13:39.367Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":123,"userEmail":"dev.kurbur@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:13:39.368Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":168,"userEmail":"preston.mcfarland@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:13:39.368Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":338,"userEmail":"nathanael.coffing@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:13:39.368Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":858,"userEmail":"marcin.figiel@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:13:39.368Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":720,"userEmail":"jim.wadsworth@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:13:39.368Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":251,"userEmail":"krzysztof.pniak@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:13:39.368Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":122,"userEmail":"gaby.sulbaran@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:13:39.368Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":188,"userEmail":"amin.swessi@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:13:39.368Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":124,"userEmail":"amar.karvir@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:13:39.368Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":172,"userEmail":"krzysztof.pniak@proopro.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:13:39.368Z] [INFO] [App] [TaskDependencies] Found tasks to unlock {"companyId":1,"count":11,"taskIds":[121,123,168,338,858,720,251,122,188,124,172],"taskTypes":["user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding"],"ky3pTaskCount":0,"ky3pTaskIds":[]}
[2025-05-18T16:13:39.368Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":121,"userEmail":"darek.nehrebecki@invela.com","timestamp":"2025-05-18T16:13:39.368Z"}
[2025-05-18T16:13:39.397Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:13:39.397Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 0 clients {"module":"WebSocket","messageType":"task_updated","recipients":0,"totalClients":0,"filtered":false}
[2025-05-18T16:13:39.397Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":121,"status":"completed"}
[2025-05-18T16:13:39.398Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":123,"userEmail":"dev.kurbur@invela.com","timestamp":"2025-05-18T16:13:39.398Z"}
[2025-05-18T16:13:39.427Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:13:39.427Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 0 clients {"module":"WebSocket","messageType":"task_updated","recipients":0,"totalClients":0,"filtered":false}
[2025-05-18T16:13:39.427Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":123,"status":"completed"}
[2025-05-18T16:13:39.427Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":168,"userEmail":"preston.mcfarland@invela.com","timestamp":"2025-05-18T16:13:39.427Z"}
[2025-05-18T16:13:39.457Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:13:39.457Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 0 clients {"module":"WebSocket","messageType":"task_updated","recipients":0,"totalClients":0,"filtered":false}
[2025-05-18T16:13:39.457Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":168,"status":"completed"}
[2025-05-18T16:13:39.457Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":338,"userEmail":"nathanael.coffing@invela.com","timestamp":"2025-05-18T16:13:39.457Z"}
[2025-05-18T16:13:39.489Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:13:39.489Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 0 clients {"module":"WebSocket","messageType":"task_updated","recipients":0,"totalClients":0,"filtered":false}
[2025-05-18T16:13:39.489Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":338,"status":"completed"}
[2025-05-18T16:13:39.489Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":858,"userEmail":"marcin.figiel@invela.com","timestamp":"2025-05-18T16:13:39.489Z"}
[Auth] Returning user session data
[2025-05-18T16:13:39.518Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:13:39.518Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 0 clients {"module":"WebSocket","messageType":"task_updated","recipients":0,"totalClients":0,"filtered":false}
[2025-05-18T16:13:39.518Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":858,"status":"completed"}
[2025-05-18T16:13:39.518Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":720,"userEmail":"jim.wadsworth@invela.com","timestamp":"2025-05-18T16:13:39.518Z"}
[2025-05-18T16:13:39.547Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:13:39.547Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 0 clients {"module":"WebSocket","messageType":"task_updated","recipients":0,"totalClients":0,"filtered":false}
[2025-05-18T16:13:39.547Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":720,"status":"completed"}
[2025-05-18T16:13:39.547Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":251,"userEmail":"krzysztof.pniak@invela.com","timestamp":"2025-05-18T16:13:39.547Z"}
[2025-05-18T16:13:39.576Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:13:39.577Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 0 clients {"module":"WebSocket","messageType":"task_updated","recipients":0,"totalClients":0,"filtered":false}
[2025-05-18T16:13:39.577Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":251,"status":"completed"}
[2025-05-18T16:13:39.577Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":122,"userEmail":"gaby.sulbaran@invela.com","timestamp":"2025-05-18T16:13:39.577Z"}
[2025-05-18T16:13:39.580Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747584819580-w3h3i0d","clients":1}
[2025-05-18T16:13:39.581Z] [INFO] [App] GET /api/companies/1 304 in 86ms :: {"id":1,"name":"Invela","description":"A stealth startup revolutionizing open... 
[2025-05-18T16:13:39.606Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:13:39.606Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 1 clients {"module":"WebSocket","messageType":"task_updated","recipients":1,"totalClients":1,"filtered":false}
[2025-05-18T16:13:39.606Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":122,"status":"completed"}
[2025-05-18T16:13:39.606Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":188,"userEmail":"amin.swessi@invela.com","timestamp":"2025-05-18T16:13:39.606Z"}
[2025-05-18T16:13:39.635Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:13:39.636Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 1 clients {"module":"WebSocket","messageType":"task_updated","recipients":1,"totalClients":1,"filtered":false}
[2025-05-18T16:13:39.636Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":188,"status":"completed"}
[2025-05-18T16:13:39.636Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":124,"userEmail":"amar.karvir@invela.com","timestamp":"2025-05-18T16:13:39.636Z"}
[2025-05-18T16:13:39.665Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:13:39.665Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 1 clients {"module":"WebSocket","messageType":"task_updated","recipients":1,"totalClients":1,"filtered":false}
[2025-05-18T16:13:39.665Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":124,"status":"completed"}
[2025-05-18T16:13:39.665Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":172,"userEmail":"krzysztof.pniak@proopro.com","timestamp":"2025-05-18T16:13:39.665Z"}
[2025-05-18T16:13:39.695Z] [INFO] [WebSocket] Received message from client client-1747584819580-w3h3i0d {"module":"WebSocket","type":"authenticate","data":{"timestamp":"2025-05-18T16:13:39.568Z"}}
[2025-05-18T16:13:39.696Z] [INFO] [WebSocket] Authentication from client client-1747584819580-w3h3i0d {"module":"WebSocket","hasToken":true}
[2025-05-18T16:13:39.696Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:13:39.697Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 1 clients {"module":"WebSocket","messageType":"task_updated","recipients":1,"totalClients":1,"filtered":false}
[2025-05-18T16:13:39.697Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":172,"status":"completed"}
[2025-05-18T16:13:39.697Z] [INFO] [App] [TaskDependencies] Successfully unlocked all tasks {"companyId":1,"count":11}
[Tasks] Successfully unlocked all tasks for company: 1
[Tasks] KYB tasks found: { count: 0 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 8',
    condition2: 'tasks.created_by = 8',
    condition3: "tasks.company_id = 1 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('evan.navarro@invela.com')"
  }
}
[Company Logo] Fetching logo for company ID: 1
[2025-05-18T16:13:39.745Z] [INFO] [App] [TabTutorials] Status request for tab "company-profile" from authenticated user ID: 8 
[2025-05-18T16:13:39.745Z] [INFO] [App] [TabTutorials] Normalizing tab name from 'company-profile' to canonical form 
[2025-05-18T16:13:39.745Z] [INFO] [App] [TabTutorials] Tab name already in canonical form: 'company-profile' 
[2025-05-18T16:13:39.745Z] [INFO] [App] [TabTutorials] Checking tutorial status for tab: company-profile (raw: company-profile), user: 8 
[Tasks] Tasks found: { count: 39 }
[Company Logo] Found logo record: {
  id: '60b86cd5-0176-43f9-a8fa-eeb2307039f8',
  company_id: 1,
  file_name: 'logo_invela-blue.svg',
  file_path: 'logo_invela-blue.svg',
  file_type: 'image/svg+xml',
  uploaded_at: 2025-02-09T01:46:59.248Z
}
[Company Logo] Attempting to serve logo from: /home/runner/workspace/uploads/logos/logo_invela-blue.svg
[Company Logo] Successfully served logo for company Invela (1)
[2025-05-18T16:13:39.801Z] [INFO] [App] [TabTutorials] Retrieved tutorial status for company-profile for user 8: completed=false, step=0 
[2025-05-18T16:13:39.814Z] [INFO] [App] GET /api/tasks 200 in 507ms :: [{"id":989,"title":"2. S&P KY3P Security Assessment: DemoTest9","description"... 
[2025-05-18T16:13:39.831Z] [INFO] [App] GET /api/user-tab-tutorials/company-profile/status 200 in 86ms :: {"exists":true,"completed":false,"currentStep":0,"lastSeenAt":"2025-05-18T16:... 
[2025-05-18T16:13:39.831Z] [INFO] [App] GET /api/companies/1/logo 200 in 88ms 
[2025-05-18T16:13:40.059Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747584820059-7qaseor","clients":2}
[2025-05-18T16:13:40.556Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747584820555-iozl6z7","clients":3}
[2025-05-18T16:13:40.674Z] [INFO] [WebSocket] Received message from client client-1747584820555-iozl6z7 {"module":"WebSocket","type":"authenticate","userId":null,"companyId":null,"clientId":"ws_1747584818755_4rqg0zvux","timestamp":"2025-05-18T16:13:40.546Z"}
[2025-05-18T16:13:40.674Z] [INFO] [WebSocket] Authentication from client client-1747584820555-iozl6z7 {"module":"WebSocket","userId":null,"companyId":null,"hasToken":true}
[2025-05-18T16:13:41.044Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747584821044-1qqx2hc","clients":4}
[2025-05-18T16:13:41.536Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747584821536-v2c8z4f","clients":5}
[2025-05-18T16:13:42.030Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747584822030-p3z2fvv","clients":6}
[Auth] Returning user session data
[Current Company] Fetching company for user: { userId: 8, companyId: 1 }
[Current Company] Found company: {
  id: 1,
  name: 'Invela',
  onboardingCompleted: true,
  riskScore: 0,
  chosenScore: 0,
  isDemo: null
}
[Current Company] Onboarding status check: {
  userId: 8,
  companyId: 1,
  userOnboardingStatus: true,
  freshFromDatabase: true,
  companyOnboardingStatus: true,
  timestamp: '2025-05-18T16:13:42.425Z'
}
[2025-05-18T16:13:42.455Z] [INFO] [App] GET /api/companies/current 304 in 92ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:13:42.573Z] [INFO] [WebSocket] Received message from client client-1747584822030-p3z2fvv {"module":"WebSocket","type":"authenticate","userId":8,"companyId":1,"clientId":"ws_1747584820796_04ggy7ikg","timestamp":"2025-05-18T16:13:42.446Z"}
[2025-05-18T16:13:42.573Z] [INFO] [WebSocket] Authentication from client client-1747584822030-p3z2fvv {"module":"WebSocket","userId":8,"companyId":1,"hasToken":true}
[2025-05-18T16:13:42.985Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:13:45.990Z] [INFO] [App] GET /api/companies/current 304 in 32ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:13:48.987Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:13:51.985Z] [INFO] [App] GET /api/companies/current 304 in 29ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:13:54.992Z] [INFO] [App] GET /api/companies/current 304 in 29ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:14:02.786Z] [INFO] [WebSocket] Received message from client client-1747584822030-p3z2fvv {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T16:14:02.658Z","connectionId":"ws_1747584820796_04ggy7ikg"}
[2025-05-18T16:14:02.949Z] [INFO] [App] GET /api/companies/current 304 in 33ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:14:03.142Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:14:03.516Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:14:06.522Z] [INFO] [App] GET /api/companies/current 304 in 29ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:14:09.521Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:14:09.697Z] [INFO] [WebSocket] Received message from client client-1747584819580-w3h3i0d {"module":"WebSocket","type":"ping"}
[Companies] Error fetching company users: TypeError: Cannot convert undefined or null to object
    at Function.entries (<anonymous>)
    at orderSelectedFields (/home/runner/workspace/node_modules/src/utils.ts:77:16)
    at <anonymous> (/home/runner/workspace/node_modules/src/utils.ts:88:19)
    at Array.reduce (<anonymous>)
    at orderSelectedFields (/home/runner/workspace/node_modules/src/utils.ts:77:32)
    at <anonymous> (/home/runner/workspace/node_modules/src/pg-core/query-builders/select.ts:973:23)
    at Object.startActiveSpan (/home/runner/workspace/node_modules/src/tracing.ts:27:11)
    at PgSelectBase._prepare (/home/runner/workspace/node_modules/src/pg-core/query-builders/select.ts:972:17)
    at <anonymous> (/home/runner/workspace/node_modules/src/pg-core/query-builders/select.ts:1003:16)
    at Object.startActiveSpan (/home/runner/workspace/node_modules/src/tracing.ts:27:11)
    at PgSelectBase.execute (/home/runner/workspace/node_modules/src/pg-core/query-builders/select.ts:1002:17)
    at PgSelectBase.then (/home/runner/workspace/node_modules/src/query-promise.ts:31:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
[2025-05-18T16:14:10.457Z] [ERROR] [App] GET /api/companies/1/users 500 in 59ms :: {"error":"Failed to fetch company users"} 
[2025-05-18T16:14:11.162Z] [INFO] [WebSocket] Received message from client client-1747584821044-1qqx2hc {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T16:14:11.034Z","connectionId":"ws_1747584821033_7len2zxil"}
[2025-05-18T16:14:11.657Z] [INFO] [WebSocket] Received message from client client-1747584821536-v2c8z4f {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T16:14:11.530Z","connectionId":"ws_1747584820057_3lwvjp46c"}
[2025-05-18T16:14:12.519Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:14:15.520Z] [INFO] [App] GET /api/companies/current 304 in 29ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 8, company_id: 1, email: 'evan.navarro@invela.com' }
[2025-05-18T16:14:17.855Z] [INFO] [App] Performing dynamic task unlocking check for company {"companyId":1,"userId":8}
[2025-05-18T16:14:17.884Z] [INFO] [App] No completed KYB tasks found, skipping security task unlock check {"companyId":1}
[Tasks] Automatically unlocking all tasks for company { userId: 8, companyId: 1, requestedBy: 'automatic_task_unlock' }
[2025-05-18T16:14:17.885Z] [INFO] [App] [TaskDependencies] Unlocking ALL tasks for company {"companyId":1}
[2025-05-18T16:14:17.915Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":121,"userEmail":"darek.nehrebecki@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:14:17.915Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":123,"userEmail":"dev.kurbur@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:14:17.915Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":168,"userEmail":"preston.mcfarland@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:14:17.915Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":338,"userEmail":"nathanael.coffing@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:14:17.915Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":858,"userEmail":"marcin.figiel@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:14:17.915Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":122,"userEmail":"gaby.sulbaran@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:14:17.915Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":188,"userEmail":"amin.swessi@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:14:17.915Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":124,"userEmail":"amar.karvir@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:14:17.915Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":720,"userEmail":"jim.wadsworth@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:14:17.915Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":251,"userEmail":"krzysztof.pniak@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:14:17.915Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":172,"userEmail":"krzysztof.pniak@proopro.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T16:14:17.915Z] [INFO] [App] [TaskDependencies] Found tasks to unlock {"companyId":1,"count":11,"taskIds":[121,123,168,338,858,122,188,124,720,251,172],"taskTypes":["user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding"],"ky3pTaskCount":0,"ky3pTaskIds":[]}
[2025-05-18T16:14:17.915Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":121,"userEmail":"darek.nehrebecki@invela.com","timestamp":"2025-05-18T16:14:17.915Z"}
[2025-05-18T16:14:17.944Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:14:17.945Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T16:14:17.945Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":121,"status":"completed"}
[2025-05-18T16:14:17.945Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":123,"userEmail":"dev.kurbur@invela.com","timestamp":"2025-05-18T16:14:17.945Z"}
[2025-05-18T16:14:17.980Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:14:17.980Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T16:14:17.980Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":123,"status":"completed"}
[2025-05-18T16:14:17.980Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":168,"userEmail":"preston.mcfarland@invela.com","timestamp":"2025-05-18T16:14:17.980Z"}
[2025-05-18T16:14:18.019Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:14:18.020Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T16:14:18.020Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":168,"status":"completed"}
[2025-05-18T16:14:18.020Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":338,"userEmail":"nathanael.coffing@invela.com","timestamp":"2025-05-18T16:14:18.020Z"}
[2025-05-18T16:14:18.042Z] [INFO] [App] [TabTutorials] Status request for tab "network" from authenticated user ID: 8 
[2025-05-18T16:14:18.042Z] [INFO] [App] [TabTutorials] Normalizing tab name from 'network' to canonical form 
[2025-05-18T16:14:18.042Z] [INFO] [App] [TabTutorials] Tab name already in canonical form: 'network' 
[2025-05-18T16:14:18.042Z] [INFO] [App] [TabTutorials] Checking tutorial status for tab: network (raw: network), user: 8 
[Relationships] Fetching network for company: 1
[2025-05-18T16:14:18.062Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:14:18.062Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T16:14:18.063Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":338,"status":"completed"}
[2025-05-18T16:14:18.063Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":858,"userEmail":"marcin.figiel@invela.com","timestamp":"2025-05-18T16:14:18.063Z"}
[2025-05-18T16:14:18.093Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:14:18.093Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T16:14:18.093Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":858,"status":"completed"}
[2025-05-18T16:14:18.093Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":122,"userEmail":"gaby.sulbaran@invela.com","timestamp":"2025-05-18T16:14:18.093Z"}
[2025-05-18T16:14:18.099Z] [INFO] [App] [TabTutorials] Retrieved tutorial status for network for user 8: completed=true, step=2 
[2025-05-18T16:14:18.100Z] [INFO] [App] GET /api/companies/current 304 in 33ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[Relationships] Found network members: { count: 65 }
[2025-05-18T16:14:18.126Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:14:18.126Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T16:14:18.126Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":122,"status":"completed"}
[2025-05-18T16:14:18.126Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":188,"userEmail":"amin.swessi@invela.com","timestamp":"2025-05-18T16:14:18.126Z"}
[2025-05-18T16:14:18.128Z] [INFO] [App] GET /api/user-tab-tutorials/network/status 200 in 86ms :: {"exists":true,"completed":true,"currentStep":2,"lastSeenAt":"2025-05-18T16:0... 
[2025-05-18T16:14:18.149Z] [INFO] [App] GET /api/relationships 304 in 92ms :: [{"id":12,"companyId":1,"relatedCompanyId":33,"relationshipType":"network_mem... 
[2025-05-18T16:14:18.157Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:14:18.157Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T16:14:18.157Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":188,"status":"completed"}
[2025-05-18T16:14:18.158Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":124,"userEmail":"amar.karvir@invela.com","timestamp":"2025-05-18T16:14:18.158Z"}
[2025-05-18T16:14:18.192Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:14:18.192Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T16:14:18.192Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":124,"status":"completed"}
[2025-05-18T16:14:18.193Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":720,"userEmail":"jim.wadsworth@invela.com","timestamp":"2025-05-18T16:14:18.193Z"}
[2025-05-18T16:14:18.227Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:14:18.227Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T16:14:18.228Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":720,"status":"completed"}
[2025-05-18T16:14:18.228Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":251,"userEmail":"krzysztof.pniak@invela.com","timestamp":"2025-05-18T16:14:18.228Z"}
[2025-05-18T16:14:18.268Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:14:18.268Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T16:14:18.268Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":251,"status":"completed"}
[2025-05-18T16:14:18.268Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":172,"userEmail":"krzysztof.pniak@proopro.com","timestamp":"2025-05-18T16:14:18.268Z"}
[2025-05-18T16:14:18.300Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T16:14:18.300Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T16:14:18.300Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":172,"status":"completed"}
[2025-05-18T16:14:18.300Z] [INFO] [App] [TaskDependencies] Successfully unlocked all tasks {"companyId":1,"count":11}
[Tasks] Successfully unlocked all tasks for company: 1
[Company Logo] Fetching logo for company ID: 35
[Company Logo] Fetching logo for company ID: 55
[Company Logo] Fetching logo for company ID: 18
[Company Logo] Fetching logo for company ID: 33
[Tasks] KYB tasks found: { count: 0 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 8',
    condition2: 'tasks.created_by = 8',
    condition3: "tasks.company_id = 1 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('evan.navarro@invela.com')"
  }
}
[Tasks] Tasks found: { count: 39 }
[Company Logo] Found logo record: {
  id: '677b4096-5974-4d03-835c-701eb2f2940c',
  company_id: 55,
  file_name: 'logo_afterpay-afterpay.svg',
  file_path: 'logo_afterpay-afterpay.svg',
  file_type: 'svg',
  uploaded_at: 2025-02-09T01:28:54.847Z
}
[Company Logo] Attempting to serve logo from: /home/runner/workspace/uploads/logos/logo_afterpay-afterpay.svg
[Company Logo] Successfully served logo for company Alphapoint (55)
[Company Logo] Found logo record: {
  id: '0b1c7be9-8b7a-4d9b-89fa-36522bd4394f',
  company_id: 33,
  file_name: 'logo_paypal-paypal.svg',
  file_path: 'logo_paypal-paypal.svg',
  file_type: 'image/svg+xml',
  uploaded_at: 2025-02-09T04:46:37.203Z
}
[Company Logo] Attempting to serve logo from: /home/runner/workspace/uploads/logos/logo_paypal-paypal.svg
[Company Logo] Successfully served logo for company Affinityx (33)
[Company Logo] Found logo record: {
  id: '0e261bf2-8b92-419d-bb9c-9a384a6069ea',
  company_id: 35,
  file_name: 'logo_revolut-revolut.svg',
  file_path: 'logo_revolut-revolut.svg',
  file_type: 'image/svg+xml',
  uploaded_at: 2025-02-09T04:51:26.099Z
}
[Company Logo] Attempting to serve logo from: /home/runner/workspace/uploads/logos/logo_revolut-revolut.svg
[Company Logo] Successfully served logo for company AscendIQ (35)
[2025-05-18T16:14:18.411Z] [INFO] [App] GET /api/tasks 200 in 556ms :: [{"id":989,"title":"2. S&P KY3P Security Assessment: DemoTest9","description"... 
[Company Logo] Found logo record: {
  id: '55920c02-8404-4dff-9c1f-792ea7bf395d',
  company_id: 18,
  file_name: 'logo_foundry-group-foundry.svg',
  file_path: 'logo_foundry-group-foundry.svg',
  file_type: 'image/svg+xml',
  uploaded_at: 2025-02-09T03:33:03.261Z
}
[Company Logo] Attempting to serve logo from: /home/runner/workspace/uploads/logos/logo_foundry-group-foundry.svg
[Company Logo] Successfully served logo for company Axono (18)
[2025-05-18T16:14:18.423Z] [INFO] [App] GET /api/companies/55/logo 200 in 112ms 
[2025-05-18T16:14:18.434Z] [INFO] [App] GET /api/companies/35/logo 200 in 123ms 
[2025-05-18T16:14:18.446Z] [INFO] [App] GET /api/companies/33/logo 200 in 133ms 
[2025-05-18T16:14:18.451Z] [INFO] [App] GET /api/companies/18/logo 200 in 139ms 
[Company Logo] Fetching logo for company ID: 30
[Company Logo] Found logo record: {
  id: 'c6e565fa-6526-4dac-a511-ddaa0cc8da20',
  company_id: 30,
  file_name: 'logo_nubank-nubank.svg',
  file_path: 'logo_nubank-nubank.svg',
  file_type: 'image/svg+xml',
  uploaded_at: 2025-02-09T04:42:29.824Z
}
[Company Logo] Attempting to serve logo from: /home/runner/workspace/uploads/logos/logo_nubank-nubank.svg
[Company Logo] Successfully served logo for company Bankure (30)
[2025-05-18T16:14:18.586Z] [INFO] [App] GET /api/companies/30/logo 200 in 87ms 
[2025-05-18T16:14:19.341Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:14:19.373Z] [INFO] [App] GET /api/companies/35 304 in 61ms :: {"id":35,"name":"AscendIQ","description":"AscendIQ is a digital bank offering... 
[2025-05-18T16:14:19.526Z] [INFO] [App] [TabTutorials] Status request for tab "company-profile" from authenticated user ID: 8 
[2025-05-18T16:14:19.526Z] [INFO] [App] [TabTutorials] Normalizing tab name from 'company-profile' to canonical form 
[2025-05-18T16:14:19.526Z] [INFO] [App] [TabTutorials] Tab name already in canonical form: 'company-profile' 
[2025-05-18T16:14:19.526Z] [INFO] [App] [TabTutorials] Checking tutorial status for tab: company-profile (raw: company-profile), user: 8 
[2025-05-18T16:14:19.582Z] [INFO] [App] [TabTutorials] Retrieved tutorial status for company-profile for user 8: completed=false, step=0 
[2025-05-18T16:14:19.612Z] [INFO] [App] GET /api/user-tab-tutorials/company-profile/status 200 in 86ms :: {"exists":true,"completed":false,"currentStep":0,"lastSeenAt":"2025-05-18T16:... 
[Companies] Error fetching company users: TypeError: Cannot convert undefined or null to object
    at Function.entries (<anonymous>)
    at orderSelectedFields (/home/runner/workspace/node_modules/src/utils.ts:77:16)
    at <anonymous> (/home/runner/workspace/node_modules/src/utils.ts:88:19)
    at Array.reduce (<anonymous>)
    at orderSelectedFields (/home/runner/workspace/node_modules/src/utils.ts:77:32)
    at <anonymous> (/home/runner/workspace/node_modules/src/pg-core/query-builders/select.ts:973:23)
    at Object.startActiveSpan (/home/runner/workspace/node_modules/src/tracing.ts:27:11)
    at PgSelectBase._prepare (/home/runner/workspace/node_modules/src/pg-core/query-builders/select.ts:972:17)
    at <anonymous> (/home/runner/workspace/node_modules/src/pg-core/query-builders/select.ts:1003:16)
    at Object.startActiveSpan (/home/runner/workspace/node_modules/src/tracing.ts:27:11)
    at PgSelectBase.execute (/home/runner/workspace/node_modules/src/pg-core/query-builders/select.ts:1002:17)
    at PgSelectBase.then (/home/runner/workspace/node_modules/src/query-promise.ts:31:15)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
[2025-05-18T16:14:20.307Z] [ERROR] [App] GET /api/companies/35/users 500 in 62ms :: {"error":"Failed to fetch company users"} 
[2025-05-18T16:14:22.151Z] [INFO] [WebSocket] Received message from client client-1747584822030-p3z2fvv {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T16:14:22.022Z","connectionId":"ws_1747584820796_04ggy7ikg"}
[2025-05-18T16:14:22.341Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:14:25.368Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T16:14:28.351Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 