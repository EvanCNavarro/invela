> rest-express@1.0.0 dev
> tsx server/index.ts

Database migrations disabled - schema already applied
[EmailService] Initializing email service
[EmailService] Email service initialized successfully
[Auth] Setting up authentication...
[Auth] Authentication setup completed
[Routes] Routes setup completed
[WebSocket] Server initialized on path: /ws
9:37:40 PM [info] Setting up Vite development server
9:37:40 PM [express] Server running on port 5000
New WebSocket client connected
[2025-04-20T21:37:42.781Z] New client connected to the pool (1/3)
New WebSocket client connected
[Auth] Deserializing user: 256
[Current Company] Fetching company for user: { userId: 256, companyId: 215 }
[Current Company] Found company: {
  id: 215,
  name: 'DevTest9',
  onboardingCompleted: false,
  riskScore: null,
  isDemo: true
}
9:37:45 PM [info] GET /api/companies/current 304 in 291ms :: {"id":215,"name":"DevTest9","description":"FinTech partner company DevTest9",...
9:37:45 PM [info] GET /api/companies/current 304 in 31ms :: {"id":215,"name":"DevTest9","description":"FinTech partner company DevTest9",...
9:37:45 PM [info] GET /api/companies/current 304 in 29ms :: {"id":215,"name":"DevTest9","description":"FinTech partner company DevTest9",...
9:37:45 PM [info] GET /api/companies/current 304 in 31ms :: {"id":215,"name":"DevTest9","description":"FinTech partner company DevTest9",...
[Auth] Unauthenticated user session
New WebSocket client connected
WebSocket client disconnected with code 1001 and reason: 
9:37:55 PM [info] GET /api/companies/current 304 in 31ms :: {"id":215,"name":"DevTest9","description":"FinTech partner company DevTest9",...
WebSocket client disconnected with code 1001 and reason: 
WebSocket client disconnected with code 1001 and reason: 
[2025-04-20T21:38:04.031Z] New client connected to the pool (2/3)
[Auth] Unauthenticated user session
New WebSocket client connected
[2025-04-20T21:38:04.460Z] New client connected to the pool (3/3)
WebSocket client disconnected with code 1001 and reason: 
[Auth] Using cached user data: 256
[Auth] Using cached user data: 256
[Auth] Using cached user data: 256
[Auth] Using cached user data: 256
[Auth] Using cached user data: 256
[Auth] Using cached user data: 256
[Auth] Returning user session data
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 256, company_id: 215, email: '9@e.com' }
[Tasks Routes] Fetching task by ID: {
  taskId: 532,
  userCompanyId: 215,
  timestamp: '2025-04-20T21:38:10.916Z'
}
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 256',
    condition2: 'tasks.created_by = 256',
    condition3: "tasks.company_id = 215 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('9@e.com')"
  }
}
[Tasks Routes] Fetching latest KYB form data for task: 532
9:38:10 PM [info] GET /api/companies/current 304 in 34ms :: {"id":215,"name":"DevTest9","description":"FinTech partner company DevTest9",...
[Tasks] Tasks found: { count: 4 }
9:38:11 PM [info] GET /api/tasks 200 in 98ms :: [{"id":532,"title":"1. KYB Form: DevTest9","description":"Complete KYB verifi...
[Tasks Routes] Found 60 KYB responses for task 532
[Tasks Routes] Constructed form data with 30 fields
[Tasks Routes] Task found by ID: {
  taskId: 532,
  title: '1. KYB Form: DevTest9',
  type: 'company_kyb',
  formDataFields: 30,
  timestamp: '2025-04-20T21:38:11.035Z'
}
New WebSocket client connected
9:38:11 PM [info] GET /api/tasks/532 304 in 152ms :: {"id":532,"title":"1. KYB Form: DevTest9","description":"Complete KYB verific...
9:38:11 PM [info] GET /api/tasks 304 in 31ms :: [{"id":532,"title":"1. KYB Form: DevTest9","description":"Complete KYB verifi...
[Task Templates API] Fetching template for task type: company_kyb, user: 256
[Task Templates API] Found template: 1 (KYB Form) for task type: company_kyb
9:38:11 PM [warn] GET /api/companies/is-demo 400 in 30ms :: {"message":"Invalid company ID","code":"INVALID_ID"}
[Task Templates API] Retrieved 9 configuration items for template ID: 1
9:38:11 PM [info] GET /api/task-templates/by-type/company_kyb 304 in 90ms :: {"id":1,"name":"KYB Form","description":"Know Your Business form for company ...
[Auth] Using cached user data: 256
[Tasks Routes] Fetching task by ID: {
  taskId: 532,
  userCompanyId: 215,
  timestamp: '2025-04-20T21:38:11.465Z'
}
[Tasks Routes] Fetching latest KYB form data for task: 532
New WebSocket client connected
[Tasks Routes] Found 60 KYB responses for task 532
[Tasks Routes] Constructed form data with 30 fields
[Tasks Routes] Task found by ID: {
  taskId: 532,
  title: '1. KYB Form: DevTest9',
  type: 'company_kyb',
  formDataFields: 30,
  timestamp: '2025-04-20T21:38:11.557Z'
}
9:38:11 PM [info] GET /api/companies/215 304 in 152ms :: {"id":215,"name":"DevTest9","description":"FinTech partner company DevTest9",...
9:38:11 PM [info] GET /api/tasks/532 304 in 121ms :: {"id":532,"title":"1. KYB Form: DevTest9","description":"Complete KYB verific...
[2025-04-20T21:38:11.740Z] [INFO] [KYBRoutes] Fetching KYB fields
[2025-04-20T21:38:11.771Z] [INFO] [KYBRoutes] KYB fields retrieved successfully {"fieldCount":30,"groups":["companyProfile","financialProfile","governanceLeadership","operationsCompliance"]}
9:38:11 PM [info] GET /api/kyb/fields 304 in 63ms :: [{"id":1,"field_key":"legalEntityName","display_name":"Legal Entity Name","fi...
[Auth] Using cached user data: 256
[KYB API Debug] Loading progress for task: 532
[Task Reconciliation] Skipping task in terminal/submitted state: {
  taskId: 532,
  status: 'submitted',
  hasSubmissionDate: true,
  submissionDate: '2025-04-20T21:32:40.382Z',
  terminalState: true
}
[KYB API Debug] Retrieved task: {
  taskId: 532,
  status: 'submitted',
  progress: 100,
  metadata: [
    'company_id',
    'created_at',
    'statusFlow',
    'created_via',
    'formVersion',
    'kybFormFile',
    'lastUpdated',
    'status_flow',
    'company_name',
    'created_by_id',
    'submissionDate',
    'prerequisite_for'
  ],
  timestamp: '2025-04-20T21:38:12.032Z'
}
[KYB API Debug] Retrieved responses: {
  responseCount: 60,
  fields: [
    { field: 'incorporationDate', status: 'COMPLETE', hasValue: true },
    { field: 'legalEntityName', status: 'COMPLETE', hasValue: true },
    { field: 'registrationNumber', status: 'COMPLETE', hasValue: true },
    { field: 'businessType', status: 'COMPLETE', hasValue: true },
    { field: 'jurisdiction', status: 'COMPLETE', hasValue: true },
    { field: 'registeredAddress', status: 'COMPLETE', hasValue: true },
    { field: 'companyPhone', status: 'COMPLETE', hasValue: true },
    { field: 'priorNames', status: 'COMPLETE', hasValue: true },
    { field: 'licenses', status: 'COMPLETE', hasValue: true },
    { field: 'goodStanding', status: 'COMPLETE', hasValue: true },
    {
      field: 'corporateRegistration',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'externalAudit', status: 'COMPLETE', hasValue: true },
    { field: 'controlEnvironment', status: 'COMPLETE', hasValue: true },
    { field: 'authorizedSigners', status: 'COMPLETE', hasValue: true },
    {
      field: 'governmentOwnership',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'ultimateBeneficialOwners',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'directorsAndOfficers',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'contactEmail', status: 'COMPLETE', hasValue: true },
    {
      field: 'marketCapitalization',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'lifetimeCustomerValue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'annualRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'monthlyRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'investigationsIncidents',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'financialStatements',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'operationalPolicies',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'dataVolume', status: 'COMPLETE', hasValue: true },
    { field: 'dataTypes', status: 'COMPLETE', hasValue: true },
    { field: 'sanctionsCheck', status: 'COMPLETE', hasValue: true },
    { field: 'dueDiligence', status: 'COMPLETE', hasValue: true },
    { field: 'regulatoryActions', status: 'COMPLETE', hasValue: true },
    { field: 'legalEntityName', status: 'COMPLETE', hasValue: true },
    { field: 'registrationNumber', status: 'COMPLETE', hasValue: true },
    { field: 'incorporationDate', status: 'COMPLETE', hasValue: true },
    { field: 'businessType', status: 'COMPLETE', hasValue: true },
    { field: 'jurisdiction', status: 'COMPLETE', hasValue: true },
    { field: 'registeredAddress', status: 'COMPLETE', hasValue: true },
    { field: 'companyPhone', status: 'COMPLETE', hasValue: true },
    { field: 'priorNames', status: 'COMPLETE', hasValue: true },
    { field: 'licenses', status: 'COMPLETE', hasValue: true },
    { field: 'goodStanding', status: 'COMPLETE', hasValue: true },
    {
      field: 'corporateRegistration',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'externalAudit', status: 'COMPLETE', hasValue: true },
    { field: 'controlEnvironment', status: 'COMPLETE', hasValue: true },
    { field: 'authorizedSigners', status: 'COMPLETE', hasValue: true },
    {
      field: 'governmentOwnership',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'ultimateBeneficialOwners',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'directorsAndOfficers',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'contactEmail', status: 'COMPLETE', hasValue: true },
    {
      field: 'marketCapitalization',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'lifetimeCustomerValue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'annualRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'monthlyRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'investigationsIncidents',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'financialStatements',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'operationalPolicies',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'dataVolume', status: 'COMPLETE', hasValue: true },
    { field: 'dataTypes', status: 'COMPLETE', hasValue: true },
    { field: 'sanctionsCheck', status: 'COMPLETE', hasValue: true },
    { field: 'dueDiligence', status: 'COMPLETE', hasValue: true },
    { field: 'regulatoryActions', status: 'COMPLETE', hasValue: true }
  ],
  timestamp: '2025-04-20T21:38:12.063Z'
}
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] Found KYB form file ID 752 in task metadata
[SERVER DEBUG] Only 0 fields found in database, attempting to load from CSV file
[SERVER DEBUG] Attempting to load form data from CSV file ID: 752
[SERVER DEBUG] File has path: Question Number,Group,Question,Answer,Type
1,companyProfile,Legal Entity Name,DevTest9,TEXT
2,companyProfile,Registration Number,12-3456789,TEXT
3,companyProfile,Incorporation Date,5/12/2010,DATE
4,companyProfile,Business Type,Limited Liability Company (LLC),TEXT
5,companyProfile,Jurisdiction,"Delaware, United States",TEXT
6,companyProfile,Registered Address,"123 Market Street, Wilmington, DE 19801",TEXT
7,companyProfile,Company Phone Number,(302) 555-1234,TEXT
8,companyProfile,Previous Name,None,TEXT
9,governanceLeadership,Licenses,"Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765",TEXT
10,governanceLeadership,Good Standing,Yes,BOOLEAN
11,governanceLeadership,Corporate Registration,No,TEXT
12,governanceLeadership,External Audit,No,BOOLEAN
13,governanceLeadership,Control Environment,Yes,BOOLEAN
14,governanceLeadership,Authorized Signers,"John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)",TEXT
15,governanceLeadership,Government Ownership,No,BOOLEAN
16,governanceLeadership,Ultimate Beneficial Owners,None,TEXT
17,governanceLeadership,Directors and Officers,"John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)",TEXT
18,governanceLeadership,Representative Email,9@e.com,EMAIL
19,financialProfile,Market Capitalization,$75 million (privately held),TEXT
20,financialProfile,Lifetime Customer Value,"$1,250",TEXT
21,financialProfile,Annual Recurring Revenue,"5,000,000",MULTIPLE_CHOICE
22,financialProfile,Monthly Recurring Revenue,"12,500,000",TEXT
23,operationsCompliance,Legal Investigations,No significant incidents in the past 3 years,BOOLEAN
24,operationsCompliance,Financial Statements,Yes,TEXT
25,operationsCompliance,Operational Policies,"ISO 27001 certified, SOC 2 Type II compliant",TEXT
26,operationsCompliance,Data Volume,Approximately 2 million records per month,TEXT
27,operationsCompliance,Data Types,"Financial transaction data, Account balances, Customer KYC information",TEXT
28,operationsCompliance,Sanctions Check,Approximately 2 million records per month,TEXT
29,operationsCompliance,Due Diligence,Yes,TEXT
30,operationsCompliance,Regulatory Orders,Yes,BOOLEAN
[SERVER DEBUG] CSV parsed: 30 rows, headers: Question Number, Group, Question, Answer, Type
[SERVER DEBUG] Extracted 30 field values from CSV
[SERVER DEBUG] Successfully loaded 30 fields from CSV file
[SERVER DEBUG] Updating database with recovered form data from CSV file
[SERVER DEBUG] Successfully updated task.savedFormData with recovered CSV data
[KYB API Debug] Task is submitted, enforcing 100% progress (original was 100%)
[KYB API Debug] Retrieved task data: {
  id: 532,
  responseCount: 60,
  progress: 100,
  status: 'submitted',
  formDataKeys: [
    'legalEntityName',
    'registrationNumber',
    'incorporationDate',
    'businessType',
    'jurisdiction',
    'registeredAddress',
    'companyPhone',
    'priorNames',
    'licenses',
    'goodStanding',
    'corporateRegistration',
    'externalAudit',
    'controlEnvironment',
    'authorizedSigners',
    'governmentOwnership',
    'ultimateBeneficialOwners',
    'directorsAndOfficers',
    'contactEmail',
    'marketCapitalization',
    'lifetimeCustomerValue',
    'annualRecurringRevenue',
    'monthlyRecurringRevenue',
    'investigationsIncidents',
    'financialStatements',
    'operationalPolicies',
    'dataVolume',
    'dataTypes',
    'sanctionsCheck',
    'dueDiligence',
    'regulatoryActions'
  ]
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T21:38:12.187Z
[SERVER DEBUG] Task ID: 532, Found 60 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: "No"
[SERVER DEBUG] Checking field goodStanding in retrieved data: "Yes"
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: "Yes"
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: "No significant incidents in the past 3 years"
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 30 fields, status: submitted, progress: 100%
===============================================
9:38:12 PM [info] GET /api/kyb/progress/532 200 in 246ms :: {"formData":{"legalEntityName":"DevTest9","registrationNumber":"12-3456789","...
[KYB API Debug] Loading progress for task: 532
[Task Reconciliation] Skipping task in terminal/submitted state: {
  taskId: 532,
  status: 'submitted',
  hasSubmissionDate: true,
  submissionDate: '2025-04-20T21:32:40.382Z',
  terminalState: true
}
[TimestampHandler] Retrieved 30 timestamps for task 532
[TimestampAPI] Returning 30 timestamps for task 532
[KYB API Debug] Retrieved task: {
  taskId: 532,
  status: 'submitted',
  progress: 100,
  metadata: [
    'company_id',
    'created_at',
    'statusFlow',
    'created_via',
    'formVersion',
    'kybFormFile',
    'lastUpdated',
    'status_flow',
    'company_name',
    'created_by_id',
    'submissionDate',
    'prerequisite_for'
  ],
  timestamp: '2025-04-20T21:38:12.426Z'
}
9:38:12 PM [info] GET /api/kyb/timestamps/532 200 in 67ms :: {"legalEntityName":1745184751943,"registrationNumber":1745184751943,"incorpor...
[KYB API Debug] Retrieved responses: {
  responseCount: 60,
  fields: [
    { field: 'incorporationDate', status: 'COMPLETE', hasValue: true },
    { field: 'legalEntityName', status: 'COMPLETE', hasValue: true },
    { field: 'registrationNumber', status: 'COMPLETE', hasValue: true },
    { field: 'businessType', status: 'COMPLETE', hasValue: true },
    { field: 'jurisdiction', status: 'COMPLETE', hasValue: true },
    { field: 'registeredAddress', status: 'COMPLETE', hasValue: true },
    { field: 'companyPhone', status: 'COMPLETE', hasValue: true },
    { field: 'priorNames', status: 'COMPLETE', hasValue: true },
    { field: 'licenses', status: 'COMPLETE', hasValue: true },
    { field: 'goodStanding', status: 'COMPLETE', hasValue: true },
    {
      field: 'corporateRegistration',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'externalAudit', status: 'COMPLETE', hasValue: true },
    { field: 'controlEnvironment', status: 'COMPLETE', hasValue: true },
    { field: 'authorizedSigners', status: 'COMPLETE', hasValue: true },
    {
      field: 'governmentOwnership',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'ultimateBeneficialOwners',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'directorsAndOfficers',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'contactEmail', status: 'COMPLETE', hasValue: true },
    {
      field: 'marketCapitalization',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'lifetimeCustomerValue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'annualRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'monthlyRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'investigationsIncidents',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'financialStatements',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'operationalPolicies',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'dataVolume', status: 'COMPLETE', hasValue: true },
    { field: 'dataTypes', status: 'COMPLETE', hasValue: true },
    { field: 'sanctionsCheck', status: 'COMPLETE', hasValue: true },
    { field: 'dueDiligence', status: 'COMPLETE', hasValue: true },
    { field: 'regulatoryActions', status: 'COMPLETE', hasValue: true },
    { field: 'legalEntityName', status: 'COMPLETE', hasValue: true },
    { field: 'registrationNumber', status: 'COMPLETE', hasValue: true },
    { field: 'incorporationDate', status: 'COMPLETE', hasValue: true },
    { field: 'businessType', status: 'COMPLETE', hasValue: true },
    { field: 'jurisdiction', status: 'COMPLETE', hasValue: true },
    { field: 'registeredAddress', status: 'COMPLETE', hasValue: true },
    { field: 'companyPhone', status: 'COMPLETE', hasValue: true },
    { field: 'priorNames', status: 'COMPLETE', hasValue: true },
    { field: 'licenses', status: 'COMPLETE', hasValue: true },
    { field: 'goodStanding', status: 'COMPLETE', hasValue: true },
    {
      field: 'corporateRegistration',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'externalAudit', status: 'COMPLETE', hasValue: true },
    { field: 'controlEnvironment', status: 'COMPLETE', hasValue: true },
    { field: 'authorizedSigners', status: 'COMPLETE', hasValue: true },
    {
      field: 'governmentOwnership',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'ultimateBeneficialOwners',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'directorsAndOfficers',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'contactEmail', status: 'COMPLETE', hasValue: true },
    {
      field: 'marketCapitalization',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'lifetimeCustomerValue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'annualRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'monthlyRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'investigationsIncidents',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'financialStatements',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'operationalPolicies',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'dataVolume', status: 'COMPLETE', hasValue: true },
    { field: 'dataTypes', status: 'COMPLETE', hasValue: true },
    { field: 'sanctionsCheck', status: 'COMPLETE', hasValue: true },
    { field: 'dueDiligence', status: 'COMPLETE', hasValue: true },
    { field: 'regulatoryActions', status: 'COMPLETE', hasValue: true }
  ],
  timestamp: '2025-04-20T21:38:12.454Z'
}
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] Found KYB form file ID 752 in task metadata
[SERVER DEBUG] Only 0 fields found in database, attempting to load from CSV file
[SERVER DEBUG] Attempting to load form data from CSV file ID: 752
[SERVER DEBUG] File has path: Question Number,Group,Question,Answer,Type
1,companyProfile,Legal Entity Name,DevTest9,TEXT
2,companyProfile,Registration Number,12-3456789,TEXT
3,companyProfile,Incorporation Date,5/12/2010,DATE
4,companyProfile,Business Type,Limited Liability Company (LLC),TEXT
5,companyProfile,Jurisdiction,"Delaware, United States",TEXT
6,companyProfile,Registered Address,"123 Market Street, Wilmington, DE 19801",TEXT
7,companyProfile,Company Phone Number,(302) 555-1234,TEXT
8,companyProfile,Previous Name,None,TEXT
9,governanceLeadership,Licenses,"Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765",TEXT
10,governanceLeadership,Good Standing,Yes,BOOLEAN
11,governanceLeadership,Corporate Registration,No,TEXT
12,governanceLeadership,External Audit,No,BOOLEAN
13,governanceLeadership,Control Environment,Yes,BOOLEAN
14,governanceLeadership,Authorized Signers,"John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)",TEXT
15,governanceLeadership,Government Ownership,No,BOOLEAN
16,governanceLeadership,Ultimate Beneficial Owners,None,TEXT
17,governanceLeadership,Directors and Officers,"John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)",TEXT
18,governanceLeadership,Representative Email,9@e.com,EMAIL
19,financialProfile,Market Capitalization,$75 million (privately held),TEXT
20,financialProfile,Lifetime Customer Value,"$1,250",TEXT
21,financialProfile,Annual Recurring Revenue,"5,000,000",MULTIPLE_CHOICE
22,financialProfile,Monthly Recurring Revenue,"12,500,000",TEXT
23,operationsCompliance,Legal Investigations,No significant incidents in the past 3 years,BOOLEAN
24,operationsCompliance,Financial Statements,Yes,TEXT
25,operationsCompliance,Operational Policies,"ISO 27001 certified, SOC 2 Type II compliant",TEXT
26,operationsCompliance,Data Volume,Approximately 2 million records per month,TEXT
27,operationsCompliance,Data Types,"Financial transaction data, Account balances, Customer KYC information",TEXT
28,operationsCompliance,Sanctions Check,Approximately 2 million records per month,TEXT
29,operationsCompliance,Due Diligence,Yes,TEXT
30,operationsCompliance,Regulatory Orders,Yes,BOOLEAN
[SERVER DEBUG] CSV parsed: 30 rows, headers: Question Number, Group, Question, Answer, Type
[SERVER DEBUG] Extracted 30 field values from CSV
[SERVER DEBUG] Successfully loaded 30 fields from CSV file
[SERVER DEBUG] Updating database with recovered form data from CSV file
[SERVER DEBUG] Successfully updated task.savedFormData with recovered CSV data
[KYB API Debug] Task is submitted, enforcing 100% progress (original was 100%)
[KYB API Debug] Retrieved task data: {
  id: 532,
  responseCount: 60,
  progress: 100,
  status: 'submitted',
  formDataKeys: [
    'legalEntityName',
    'registrationNumber',
    'incorporationDate',
    'businessType',
    'jurisdiction',
    'registeredAddress',
    'companyPhone',
    'priorNames',
    'licenses',
    'goodStanding',
    'corporateRegistration',
    'externalAudit',
    'controlEnvironment',
    'authorizedSigners',
    'governmentOwnership',
    'ultimateBeneficialOwners',
    'directorsAndOfficers',
    'contactEmail',
    'marketCapitalization',
    'lifetimeCustomerValue',
    'annualRecurringRevenue',
    'monthlyRecurringRevenue',
    'investigationsIncidents',
    'financialStatements',
    'operationalPolicies',
    'dataVolume',
    'dataTypes',
    'sanctionsCheck',
    'dueDiligence',
    'regulatoryActions'
  ]
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T21:38:12.574Z
[SERVER DEBUG] Task ID: 532, Found 60 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: "No"
[SERVER DEBUG] Checking field goodStanding in retrieved data: "Yes"
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: "Yes"
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: "No significant incidents in the past 3 years"
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 30 fields, status: submitted, progress: 100%
===============================================
9:38:12 PM [info] GET /api/kyb/progress/532 304 in 237ms :: {"formData":{"legalEntityName":"DevTest9","registrationNumber":"12-3456789","...
[KYB API Debug] Loading progress for task: 532
[Task Reconciliation] Skipping task in terminal/submitted state: {
  taskId: 532,
  status: 'submitted',
  hasSubmissionDate: true,
  submissionDate: '2025-04-20T21:32:40.382Z',
  terminalState: true
}
[TimestampHandler] Retrieved 30 timestamps for task 532
[TimestampAPI] Returning 30 timestamps for task 532
[KYB API Debug] Retrieved task: {
  taskId: 532,
  status: 'submitted',
  progress: 100,
  metadata: [
    'company_id',
    'created_at',
    'statusFlow',
    'created_via',
    'formVersion',
    'kybFormFile',
    'lastUpdated',
    'status_flow',
    'company_name',
    'created_by_id',
    'submissionDate',
    'prerequisite_for'
  ],
  timestamp: '2025-04-20T21:38:12.812Z'
}
9:38:12 PM [info] GET /api/kyb/timestamps/532 304 in 60ms :: {"legalEntityName":1745184751943,"registrationNumber":1745184751943,"incorpor...
[KYB API Debug] Retrieved responses: {
  responseCount: 60,
  fields: [
    { field: 'incorporationDate', status: 'COMPLETE', hasValue: true },
    { field: 'legalEntityName', status: 'COMPLETE', hasValue: true },
    { field: 'registrationNumber', status: 'COMPLETE', hasValue: true },
    { field: 'businessType', status: 'COMPLETE', hasValue: true },
    { field: 'jurisdiction', status: 'COMPLETE', hasValue: true },
    { field: 'registeredAddress', status: 'COMPLETE', hasValue: true },
    { field: 'companyPhone', status: 'COMPLETE', hasValue: true },
    { field: 'priorNames', status: 'COMPLETE', hasValue: true },
    { field: 'licenses', status: 'COMPLETE', hasValue: true },
    { field: 'goodStanding', status: 'COMPLETE', hasValue: true },
    {
      field: 'corporateRegistration',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'externalAudit', status: 'COMPLETE', hasValue: true },
    { field: 'controlEnvironment', status: 'COMPLETE', hasValue: true },
    { field: 'authorizedSigners', status: 'COMPLETE', hasValue: true },
    {
      field: 'governmentOwnership',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'ultimateBeneficialOwners',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'directorsAndOfficers',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'contactEmail', status: 'COMPLETE', hasValue: true },
    {
      field: 'marketCapitalization',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'lifetimeCustomerValue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'annualRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'monthlyRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'investigationsIncidents',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'financialStatements',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'operationalPolicies',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'dataVolume', status: 'COMPLETE', hasValue: true },
    { field: 'dataTypes', status: 'COMPLETE', hasValue: true },
    { field: 'sanctionsCheck', status: 'COMPLETE', hasValue: true },
    { field: 'dueDiligence', status: 'COMPLETE', hasValue: true },
    { field: 'regulatoryActions', status: 'COMPLETE', hasValue: true },
    { field: 'legalEntityName', status: 'COMPLETE', hasValue: true },
    { field: 'registrationNumber', status: 'COMPLETE', hasValue: true },
    { field: 'incorporationDate', status: 'COMPLETE', hasValue: true },
    { field: 'businessType', status: 'COMPLETE', hasValue: true },
    { field: 'jurisdiction', status: 'COMPLETE', hasValue: true },
    { field: 'registeredAddress', status: 'COMPLETE', hasValue: true },
    { field: 'companyPhone', status: 'COMPLETE', hasValue: true },
    { field: 'priorNames', status: 'COMPLETE', hasValue: true },
    { field: 'licenses', status: 'COMPLETE', hasValue: true },
    { field: 'goodStanding', status: 'COMPLETE', hasValue: true },
    {
      field: 'corporateRegistration',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'externalAudit', status: 'COMPLETE', hasValue: true },
    { field: 'controlEnvironment', status: 'COMPLETE', hasValue: true },
    { field: 'authorizedSigners', status: 'COMPLETE', hasValue: true },
    {
      field: 'governmentOwnership',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'ultimateBeneficialOwners',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'directorsAndOfficers',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'contactEmail', status: 'COMPLETE', hasValue: true },
    {
      field: 'marketCapitalization',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'lifetimeCustomerValue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'annualRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'monthlyRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'investigationsIncidents',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'financialStatements',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'operationalPolicies',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'dataVolume', status: 'COMPLETE', hasValue: true },
    { field: 'dataTypes', status: 'COMPLETE', hasValue: true },
    { field: 'sanctionsCheck', status: 'COMPLETE', hasValue: true },
    { field: 'dueDiligence', status: 'COMPLETE', hasValue: true },
    { field: 'regulatoryActions', status: 'COMPLETE', hasValue: true }
  ],
  timestamp: '2025-04-20T21:38:12.841Z'
}
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] Found KYB form file ID 752 in task metadata
[SERVER DEBUG] Only 0 fields found in database, attempting to load from CSV file
[SERVER DEBUG] Attempting to load form data from CSV file ID: 752
[SERVER DEBUG] File has path: Question Number,Group,Question,Answer,Type
1,companyProfile,Legal Entity Name,DevTest9,TEXT
2,companyProfile,Registration Number,12-3456789,TEXT
3,companyProfile,Incorporation Date,5/12/2010,DATE
4,companyProfile,Business Type,Limited Liability Company (LLC),TEXT
5,companyProfile,Jurisdiction,"Delaware, United States",TEXT
6,companyProfile,Registered Address,"123 Market Street, Wilmington, DE 19801",TEXT
7,companyProfile,Company Phone Number,(302) 555-1234,TEXT
8,companyProfile,Previous Name,None,TEXT
9,governanceLeadership,Licenses,"Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765",TEXT
10,governanceLeadership,Good Standing,Yes,BOOLEAN
11,governanceLeadership,Corporate Registration,No,TEXT
12,governanceLeadership,External Audit,No,BOOLEAN
13,governanceLeadership,Control Environment,Yes,BOOLEAN
14,governanceLeadership,Authorized Signers,"John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)",TEXT
15,governanceLeadership,Government Ownership,No,BOOLEAN
16,governanceLeadership,Ultimate Beneficial Owners,None,TEXT
17,governanceLeadership,Directors and Officers,"John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)",TEXT
18,governanceLeadership,Representative Email,9@e.com,EMAIL
19,financialProfile,Market Capitalization,$75 million (privately held),TEXT
20,financialProfile,Lifetime Customer Value,"$1,250",TEXT
21,financialProfile,Annual Recurring Revenue,"5,000,000",MULTIPLE_CHOICE
22,financialProfile,Monthly Recurring Revenue,"12,500,000",TEXT
23,operationsCompliance,Legal Investigations,No significant incidents in the past 3 years,BOOLEAN
24,operationsCompliance,Financial Statements,Yes,TEXT
25,operationsCompliance,Operational Policies,"ISO 27001 certified, SOC 2 Type II compliant",TEXT
26,operationsCompliance,Data Volume,Approximately 2 million records per month,TEXT
27,operationsCompliance,Data Types,"Financial transaction data, Account balances, Customer KYC information",TEXT
28,operationsCompliance,Sanctions Check,Approximately 2 million records per month,TEXT
29,operationsCompliance,Due Diligence,Yes,TEXT
30,operationsCompliance,Regulatory Orders,Yes,BOOLEAN
[SERVER DEBUG] CSV parsed: 30 rows, headers: Question Number, Group, Question, Answer, Type
[SERVER DEBUG] Extracted 30 field values from CSV
[SERVER DEBUG] Successfully loaded 30 fields from CSV file
[SERVER DEBUG] Updating database with recovered form data from CSV file
[SERVER DEBUG] Successfully updated task.savedFormData with recovered CSV data
[KYB API Debug] Task is submitted, enforcing 100% progress (original was 100%)
[KYB API Debug] Retrieved task data: {
  id: 532,
  responseCount: 60,
  progress: 100,
  status: 'submitted',
  formDataKeys: [
    'legalEntityName',
    'registrationNumber',
    'incorporationDate',
    'businessType',
    'jurisdiction',
    'registeredAddress',
    'companyPhone',
    'priorNames',
    'licenses',
    'goodStanding',
    'corporateRegistration',
    'externalAudit',
    'controlEnvironment',
    'authorizedSigners',
    'governmentOwnership',
    'ultimateBeneficialOwners',
    'directorsAndOfficers',
    'contactEmail',
    'marketCapitalization',
    'lifetimeCustomerValue',
    'annualRecurringRevenue',
    'monthlyRecurringRevenue',
    'investigationsIncidents',
    'financialStatements',
    'operationalPolicies',
    'dataVolume',
    'dataTypes',
    'sanctionsCheck',
    'dueDiligence',
    'regulatoryActions'
  ]
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T21:38:12.961Z
[SERVER DEBUG] Task ID: 532, Found 60 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: "No"
[SERVER DEBUG] Checking field goodStanding in retrieved data: "Yes"
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: "Yes"
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: "No significant incidents in the past 3 years"
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 30 fields, status: submitted, progress: 100%
===============================================
9:38:12 PM [info] GET /api/kyb/progress/532 304 in 239ms :: {"formData":{"legalEntityName":"DevTest9","registrationNumber":"12-3456789","...
[TimestampHandler] Retrieved 30 timestamps for task 532
[TimestampAPI] Returning 30 timestamps for task 532
9:38:13 PM [info] GET /api/kyb/timestamps/532 304 in 60ms :: {"legalEntityName":1745184751943,"registrationNumber":1745184751943,"incorpor...
9:38:21 PM [info] GET /api/companies/current 304 in 30ms :: {"id":215,"name":"DevTest9","description":"FinTech partner company DevTest9",...
9:38:31 PM [info] GET /api/companies/current 304 in 30ms :: {"id":215,"name":"DevTest9","description":"FinTech partner company DevTest9",...
[WebSocket] Received ping
9:38:41 PM [info] GET /api/companies/current 304 in 30ms :: {"id":215,"name":"DevTest9","description":"FinTech partner company DevTest9",...
[Current Company] Fetching company for user: { userId: 256, companyId: 215 }
[Current Company] Found company: {
  id: 215,
  name: 'DevTest9',
  onboardingCompleted: false,
  riskScore: null,
  isDemo: true
}
9:38:51 PM [info] GET /api/companies/current 304 in 59ms :: {"id":215,"name":"DevTest9","description":"FinTech partner company DevTest9",...
9:39:01 PM [info] GET /api/companies/current 304 in 30ms :: {"id":215,"name":"DevTest9","description":"FinTech partner company DevTest9",...
[WebSocket] Received ping
9:39:12 PM [info] GET /api/companies/current 304 in 30ms :: {"id":215,"name":"DevTest9","description":"FinTech partner company DevTest9",...
9:39:22 PM [info] GET /api/companies/current 304 in 29ms :: {"id":215,"name":"DevTest9","description":"FinTech partner company DevTest9",...
9:39:32 PM [info] GET /api/companies/current 304 in 30ms :: {"id":215,"name":"DevTest9","description":"FinTech partner company DevTest9",...
[WebSocket] Received ping
9:39:43 PM [info] GET /api/companies/current 304 in 32ms :: {"id":215,"name":"DevTest9","description":"FinTech partner company DevTest9",...
[Auth] Using cached user data: 256
[Current Company] Fetching company for user: { userId: 256, companyId: 215 }
[Current Company] Found company: {
  id: 215,
  name: 'DevTest9',
  onboardingCompleted: false,
  riskScore: null,
  isDemo: true
}
9:39:53 PM [info] GET /api/companies/current 304 in 61ms :: {"id":215,"name":"DevTest9","description":"FinTech partner company DevTest9",...
[Auth] Processing logout request
[Auth] Clearing user 256 from cache during logout
[Auth] Could not import routes module: ReferenceError: require is not defined
    at clearCompanyCache (/home/runner/workspace/server/auth.ts:261:32)
    at <anonymous> (/home/runner/workspace/server/auth.ts:297:23)
    at Layer.handle [as handle_request] (/home/runner/workspace/server/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/workspace/server/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/runner/workspace/server/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/runner/workspace/server/node_modules/express/lib/router/layer.js:95:5)
    at /home/runner/workspace/server/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/home/runner/workspace/server/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/workspace/server/node_modules/express/lib/router/index.js:280:10)
    at strategy.pass (/home/runner/workspace/node_modules/passport/lib/middleware/authenticate.js:355:9)
    at /home/runner/workspace/node_modules/passport/lib/strategies/session.js:120:12
    at pass (/home/runner/workspace/node_modules/passport/lib/authenticator.js:352:31)
    at deserialized (/home/runner/workspace/node_modules/passport/lib/authenticator.js:364:7)
    at <anonymous> (/home/runner/workspace/server/auth.ts:180:16)
    at pass (/home/runner/workspace/node_modules/passport/lib/authenticator.js:372:9)
    at Authenticator.deserializeUser (/home/runner/workspace/node_modules/passport/lib/authenticator.js:377:5)
    at SessionStrategy.authenticate (/home/runner/workspace/node_modules/passport/lib/strategies/session.js:112:10)
    at attempt (/home/runner/workspace/node_modules/passport/lib/middleware/authenticate.js:378:16)
    at authenticate (/home/runner/workspace/node_modules/passport/lib/middleware/authenticate.js:379:7)
    at Layer.handle [as handle_request] (/home/runner/workspace/server/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/workspace/server/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/workspace/server/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/workspace/server/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/workspace/server/node_modules/express/lib/router/index.js:280:10)
    at initialize (/home/runner/workspace/node_modules/passport/lib/middleware/initialize.js:98:5)
    at Layer.handle [as handle_request] (/home/runner/workspace/server/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/workspace/server/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/workspace/server/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/workspace/server/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/workspace/server/node_modules/express/lib/router/index.js:280:10)
    at /home/runner/workspace/node_modules/express-session/index.js:514:7
    at /home/runner/workspace/node_modules/connect-pg-simple/index.js:370:18
    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)
[Auth] No company cache found to clear during logout
[Auth] Error broadcasting cache invalidation: ReferenceError: require is not defined
    at <anonymous> (/home/runner/workspace/server/auth.ts:304:38)
    at Layer.handle [as handle_request] (/home/runner/workspace/server/node_modules/express/lib/router/layer.js:95:5)
    at next (/home/runner/workspace/server/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/home/runner/workspace/server/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/home/runner/workspace/server/node_modules/express/lib/router/layer.js:95:5)
    at /home/runner/workspace/server/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/home/runner/workspace/server/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/workspace/server/node_modules/express/lib/router/index.js:280:10)
    at strategy.pass (/home/runner/workspace/node_modules/passport/lib/middleware/authenticate.js:355:9)
    at /home/runner/workspace/node_modules/passport/lib/strategies/session.js:120:12
    at pass (/home/runner/workspace/node_modules/passport/lib/authenticator.js:352:31)
    at deserialized (/home/runner/workspace/node_modules/passport/lib/authenticator.js:364:7)
    at <anonymous> (/home/runner/workspace/server/auth.ts:180:16)
    at pass (/home/runner/workspace/node_modules/passport/lib/authenticator.js:372:9)
    at Authenticator.deserializeUser (/home/runner/workspace/node_modules/passport/lib/authenticator.js:377:5)
    at SessionStrategy.authenticate (/home/runner/workspace/node_modules/passport/lib/strategies/session.js:112:10)
    at attempt (/home/runner/workspace/node_modules/passport/lib/middleware/authenticate.js:378:16)
    at authenticate (/home/runner/workspace/node_modules/passport/lib/middleware/authenticate.js:379:7)
    at Layer.handle [as handle_request] (/home/runner/workspace/server/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/workspace/server/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/workspace/server/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/workspace/server/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/workspace/server/node_modules/express/lib/router/index.js:280:10)
    at initialize (/home/runner/workspace/node_modules/passport/lib/middleware/initialize.js:98:5)
    at Layer.handle [as handle_request] (/home/runner/workspace/server/node_modules/express/lib/router/layer.js:95:5)
    at trim_prefix (/home/runner/workspace/server/node_modules/express/lib/router/index.js:328:13)
    at /home/runner/workspace/server/node_modules/express/lib/router/index.js:286:9
    at Function.process_params (/home/runner/workspace/server/node_modules/express/lib/router/index.js:346:12)
    at next (/home/runner/workspace/server/node_modules/express/lib/router/index.js:280:10)
    at /home/runner/workspace/node_modules/express-session/index.js:514:7
    at /home/runner/workspace/node_modules/connect-pg-simple/index.js:370:18
    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)
[Auth] Logout successful for user: 256
[Auth] Session successfully destroyed
9:39:55 PM [warn] POST /api/tasks/532/update-progress 401 in 0ms :: {"error":"Unauthorized","message":"Authentication required","details":{"authe...
[Auth] Unauthenticated user session
9:39:55 PM [warn] POST /api/kyb/timestamps/532 401 in 1ms :: {"error":"Unauthorized","message":"Authentication required","details":{"authe...
===============================================
[SERVER DEBUG] KYB PROGRESS SAVE REQUEST RECEIVED at 2025-04-20T21:39:55.724Z
===============================================
Task ID: 532
Progress: 100
Status: ready_for_submission
Field count: 30
Sample form data values:
- legalEntityName: "DevTest9" (string)
- registrationNumber: "12-3456789" (string)
- incorporationDate: "5/12/2010" (string)
- businessType: "Limited Liability Company (LLC)" (string)
- jurisdiction: "Delaware, United States" (string)
Request details:
- Method: POST
- Content-Type: application/json
- Content-Length: 2417
===============================================
===============================================
[SERVER DEBUG] PROCESSING FORM DATA FIELDS AT 2025-04-20T21:39:55.788Z
[SERVER DEBUG] Task ID: 532, Field count: 30
===============================================
[SERVER DEBUG] COMPLETE FORM DATA DUMP:
[SERVER DEBUG] legalEntityName: "DevTest9" (string)
[SERVER DEBUG] registrationNumber: "12-3456789" (string)
[SERVER DEBUG] incorporationDate: "5/12/2010" (string)
[SERVER DEBUG] businessType: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] jurisdiction: "Delaware, United States" (string)
[SERVER DEBUG] registeredAddress: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] companyPhone: "(302) 555-1234" (string)
[SERVER DEBUG] priorNames: "None" (string)
[SERVER DEBUG] licenses: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] goodStanding: "Yes" (string)
[SERVER DEBUG] corporateRegistration: "No" (string)
[SERVER DEBUG] externalAudit: "No" (string)
[SERVER DEBUG] controlEnvironment: "Yes" (string)
[SERVER DEBUG] authorizedSigners: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] governmentOwnership: "No" (string)
[SERVER DEBUG] ultimateBeneficialOwners: "None" (string)
[SERVER DEBUG] directorsAndOfficers: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] contactEmail: "9@e.com" (string)
[SERVER DEBUG] marketCapitalization: "$75 million (privately held)" (string)
[SERVER DEBUG] lifetimeCustomerValue: "$1,250" (string)
[SERVER DEBUG] annualRecurringRevenue: "5,000,000" (string)
[SERVER DEBUG] monthlyRecurringRevenue: "12,500,000" (string)
[SERVER DEBUG] investigationsIncidents: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] financialStatements: "Yes" (string)
[SERVER DEBUG] operationalPolicies: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] dataVolume: "Approximately 2 million records per month" (string)
[SERVER DEBUG] dataTypes: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] sanctionsCheck: "Approximately 2 million records per month" (string)
[SERVER DEBUG] dueDiligence: "Yes" (string)
[SERVER DEBUG] regulatoryActions: "Yes" (string)
[SERVER DEBUG] END OF FORM DATA DUMP
[SERVER DEBUG] No fields with value "asdf" found in incoming data
[SERVER DEBUG] Processing field: "legalEntityName" (ID: 1)
[SERVER DEBUG] Original value: DevTest9
[SERVER DEBUG] Normalized value: "DevTest9" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "legalEntityName" in database
[SERVER DEBUG] - Old value: "DevTest9" (string)
[SERVER DEBUG] - New value: "DevTest9" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: legalEntityName
[SERVER DEBUG] - field_id: 1
[SERVER DEBUG] - response_value: "DevTest9"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "legalEntityName":
[SERVER DEBUG] - Expected: "DevTest9"
[SERVER DEBUG] - Actual: "DevTest9"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "legalEntityName" (ID: 2469)
[SERVER DEBUG] Broadcasting legalEntityName update via WebSocket: "DevTest9"
[WebSocket] Broadcast "field_update" sent to 2 clients
[SERVER DEBUG] --- Finished processing field "legalEntityName" ---

[SERVER DEBUG] Processing field: "registrationNumber" (ID: 2)
[SERVER DEBUG] Original value: 12-3456789
[SERVER DEBUG] Normalized value: "12-3456789" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "registrationNumber" in database
[SERVER DEBUG] - Old value: "12-3456789" (string)
[SERVER DEBUG] - New value: "12-3456789" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: registrationNumber
[SERVER DEBUG] - field_id: 2
[SERVER DEBUG] - response_value: "12-3456789"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "registrationNumber":
[SERVER DEBUG] - Expected: "12-3456789"
[SERVER DEBUG] - Actual: "12-3456789"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "registrationNumber" (ID: 2470)
[SERVER DEBUG] --- Finished processing field "registrationNumber" ---

[SERVER DEBUG] Processing field: "incorporationDate" (ID: 3)
[SERVER DEBUG] Original value: 5/12/2010
[SERVER DEBUG] Normalized value: "5/12/2010" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "incorporationDate" in database
[SERVER DEBUG] - Old value: "5/12/2010" (string)
[SERVER DEBUG] - New value: "5/12/2010" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: incorporationDate
[SERVER DEBUG] - field_id: 3
[SERVER DEBUG] - response_value: "5/12/2010"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "incorporationDate":
[SERVER DEBUG] - Expected: "5/12/2010"
[SERVER DEBUG] - Actual: "5/12/2010"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "incorporationDate" (ID: 2471)
[SERVER DEBUG] --- Finished processing field "incorporationDate" ---

[SERVER DEBUG] Processing field: "businessType" (ID: 4)
[SERVER DEBUG] Original value: Limited Liability Company (LLC)
[SERVER DEBUG] Normalized value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "businessType" in database
[SERVER DEBUG] - Old value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] - New value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: businessType
[SERVER DEBUG] - field_id: 4
[SERVER DEBUG] - response_value: "Limited Liability Company (LLC)"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "businessType":
[SERVER DEBUG] - Expected: "Limited Liability Company (LLC)"
[SERVER DEBUG] - Actual: "Limited Liability Company (LLC)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "businessType" (ID: 2472)
[SERVER DEBUG] --- Finished processing field "businessType" ---

[SERVER DEBUG] Processing field: "jurisdiction" (ID: 5)
[SERVER DEBUG] Original value: Delaware, United States
[SERVER DEBUG] Normalized value: "Delaware, United States" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "jurisdiction" in database
[SERVER DEBUG] - Old value: "Delaware, United States" (string)
[SERVER DEBUG] - New value: "Delaware, United States" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: jurisdiction
[SERVER DEBUG] - field_id: 5
[SERVER DEBUG] - response_value: "Delaware, United States"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "jurisdiction":
[SERVER DEBUG] - Expected: "Delaware, United States"
[SERVER DEBUG] - Actual: "Delaware, United States"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "jurisdiction" (ID: 2473)
[SERVER DEBUG] --- Finished processing field "jurisdiction" ---

[SERVER DEBUG] Processing field: "registeredAddress" (ID: 6)
[SERVER DEBUG] Original value: 123 Market Street, Wilmington, DE 19801
[SERVER DEBUG] Normalized value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "registeredAddress" in database
[SERVER DEBUG] - Old value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] - New value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: registeredAddress
[SERVER DEBUG] - field_id: 6
[SERVER DEBUG] - response_value: "123 Market Street, Wilmington, DE 19801"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "registeredAddress":
[SERVER DEBUG] - Expected: "123 Market Street, Wilmington, DE 19801"
[SERVER DEBUG] - Actual: "123 Market Street, Wilmington, DE 19801"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "registeredAddress" (ID: 2474)
[SERVER DEBUG] --- Finished processing field "registeredAddress" ---

[SERVER DEBUG] Processing field: "companyPhone" (ID: 7)
[SERVER DEBUG] Original value: (302) 555-1234
[SERVER DEBUG] Normalized value: "(302) 555-1234" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "companyPhone" in database
[SERVER DEBUG] - Old value: "(302) 555-1234" (string)
[SERVER DEBUG] - New value: "(302) 555-1234" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: companyPhone
[SERVER DEBUG] - field_id: 7
[SERVER DEBUG] - response_value: "(302) 555-1234"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "companyPhone":
[SERVER DEBUG] - Expected: "(302) 555-1234"
[SERVER DEBUG] - Actual: "(302) 555-1234"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "companyPhone" (ID: 2475)
[SERVER DEBUG] --- Finished processing field "companyPhone" ---

[SERVER DEBUG] Processing field: "priorNames" (ID: 8)
[SERVER DEBUG] Original value: None
[SERVER DEBUG] Normalized value: "None" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "priorNames" in database
[SERVER DEBUG] - Old value: "None" (string)
[SERVER DEBUG] - New value: "None" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: priorNames
[SERVER DEBUG] - field_id: 8
[SERVER DEBUG] - response_value: "None"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "priorNames":
[SERVER DEBUG] - Expected: "None"
[SERVER DEBUG] - Actual: "None"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "priorNames" (ID: 2476)
[SERVER DEBUG] --- Finished processing field "priorNames" ---

[SERVER DEBUG] Processing field: "licenses" (ID: 9)
[SERVER DEBUG] Original value: Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765
[SERVER DEBUG] Normalized value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "licenses" in database
[SERVER DEBUG] - Old value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] - New value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: licenses
[SERVER DEBUG] - field_id: 9
[SERVER DEBUG] - response_value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "licenses":
[SERVER DEBUG] - Expected: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] - Actual: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "licenses" (ID: 2477)
[SERVER DEBUG] --- Finished processing field "licenses" ---

[SERVER DEBUG] Processing field: "goodStanding" (ID: 10)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "goodStanding" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: goodStanding
[SERVER DEBUG] - field_id: 10
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "goodStanding":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "goodStanding" (ID: 2478)
[SERVER DEBUG] --- Finished processing field "goodStanding" ---

[SERVER DEBUG] Processing field: "corporateRegistration" (ID: 11)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "corporateRegistration" in database
[SERVER DEBUG] - Old value: "No" (string)
[SERVER DEBUG] - New value: "No" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: corporateRegistration
[SERVER DEBUG] - field_id: 11
[SERVER DEBUG] - response_value: "No"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "corporateRegistration":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "corporateRegistration" (ID: 2479)
[SERVER DEBUG] --- Finished processing field "corporateRegistration" ---

[SERVER DEBUG] Processing field: "externalAudit" (ID: 12)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "externalAudit" in database
[SERVER DEBUG] - Old value: "No" (string)
[SERVER DEBUG] - New value: "No" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: externalAudit
[SERVER DEBUG] - field_id: 12
[SERVER DEBUG] - response_value: "No"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "externalAudit":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "externalAudit" (ID: 2480)
[SERVER DEBUG] --- Finished processing field "externalAudit" ---

[SERVER DEBUG] Processing field: "controlEnvironment" (ID: 13)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "controlEnvironment" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: controlEnvironment
[SERVER DEBUG] - field_id: 13
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "controlEnvironment":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "controlEnvironment" (ID: 2481)
[SERVER DEBUG] --- Finished processing field "controlEnvironment" ---

[SERVER DEBUG] Processing field: "authorizedSigners" (ID: 14)
[SERVER DEBUG] Original value: John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)
[SERVER DEBUG] Normalized value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "authorizedSigners" in database
[SERVER DEBUG] - Old value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] - New value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: authorizedSigners
[SERVER DEBUG] - field_id: 14
[SERVER DEBUG] - response_value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "authorizedSigners":
[SERVER DEBUG] - Expected: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] - Actual: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "authorizedSigners" (ID: 2482)
[SERVER DEBUG] --- Finished processing field "authorizedSigners" ---

[SERVER DEBUG] Processing field: "governmentOwnership" (ID: 15)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "governmentOwnership" in database
[SERVER DEBUG] - Old value: "No" (string)
[SERVER DEBUG] - New value: "No" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: governmentOwnership
[SERVER DEBUG] - field_id: 15
[SERVER DEBUG] - response_value: "No"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "governmentOwnership":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "governmentOwnership" (ID: 2483)
[SERVER DEBUG] --- Finished processing field "governmentOwnership" ---

[SERVER DEBUG] Processing field: "ultimateBeneficialOwners" (ID: 16)
[SERVER DEBUG] Original value: None
[SERVER DEBUG] Normalized value: "None" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "ultimateBeneficialOwners" in database
[SERVER DEBUG] - Old value: "None" (string)
[SERVER DEBUG] - New value: "None" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: ultimateBeneficialOwners
[SERVER DEBUG] - field_id: 16
[SERVER DEBUG] - response_value: "None"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "ultimateBeneficialOwners":
[SERVER DEBUG] - Expected: "None"
[SERVER DEBUG] - Actual: "None"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "ultimateBeneficialOwners" (ID: 2484)
[SERVER DEBUG] --- Finished processing field "ultimateBeneficialOwners" ---

[SERVER DEBUG] Processing field: "directorsAndOfficers" (ID: 17)
[SERVER DEBUG] Original value: John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)
[SERVER DEBUG] Normalized value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "directorsAndOfficers" in database
[SERVER DEBUG] - Old value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] - New value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: directorsAndOfficers
[SERVER DEBUG] - field_id: 17
[SERVER DEBUG] - response_value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "directorsAndOfficers":
[SERVER DEBUG] - Expected: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] - Actual: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "directorsAndOfficers" (ID: 2485)
[SERVER DEBUG] --- Finished processing field "directorsAndOfficers" ---

[SERVER DEBUG] Processing field: "contactEmail" (ID: 18)
[SERVER DEBUG] Original value: 9@e.com
[SERVER DEBUG] Normalized value: "9@e.com" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "contactEmail" in database
[SERVER DEBUG] - Old value: "9@e.com" (string)
[SERVER DEBUG] - New value: "9@e.com" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: contactEmail
[SERVER DEBUG] - field_id: 18
[SERVER DEBUG] - response_value: "9@e.com"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "contactEmail":
[SERVER DEBUG] - Expected: "9@e.com"
[SERVER DEBUG] - Actual: "9@e.com"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "contactEmail" (ID: 2486)
[SERVER DEBUG] --- Finished processing field "contactEmail" ---

[SERVER DEBUG] Processing field: "marketCapitalization" (ID: 19)
[SERVER DEBUG] Original value: $75 million (privately held)
[SERVER DEBUG] Normalized value: "$75 million (privately held)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "marketCapitalization" in database
[SERVER DEBUG] - Old value: "$75 million (privately held)" (string)
[SERVER DEBUG] - New value: "$75 million (privately held)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: marketCapitalization
[SERVER DEBUG] - field_id: 19
[SERVER DEBUG] - response_value: "$75 million (privately held)"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "marketCapitalization":
[SERVER DEBUG] - Expected: "$75 million (privately held)"
[SERVER DEBUG] - Actual: "$75 million (privately held)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "marketCapitalization" (ID: 2487)
[SERVER DEBUG] --- Finished processing field "marketCapitalization" ---

[SERVER DEBUG] Processing field: "lifetimeCustomerValue" (ID: 20)
[SERVER DEBUG] Original value: $1,250
[SERVER DEBUG] Normalized value: "$1,250" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "lifetimeCustomerValue" in database
[SERVER DEBUG] - Old value: "$1,250" (string)
[SERVER DEBUG] - New value: "$1,250" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: lifetimeCustomerValue
[SERVER DEBUG] - field_id: 20
[SERVER DEBUG] - response_value: "$1,250"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "lifetimeCustomerValue":
[SERVER DEBUG] - Expected: "$1,250"
[SERVER DEBUG] - Actual: "$1,250"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "lifetimeCustomerValue" (ID: 2488)
[SERVER DEBUG] --- Finished processing field "lifetimeCustomerValue" ---

[SERVER DEBUG] Processing field: "annualRecurringRevenue" (ID: 21)
[SERVER DEBUG] Original value: 5,000,000
[SERVER DEBUG] Normalized value: "5,000,000" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "annualRecurringRevenue" in database
[SERVER DEBUG] - Old value: "5,000,000" (string)
[SERVER DEBUG] - New value: "5,000,000" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: annualRecurringRevenue
[SERVER DEBUG] - field_id: 21
[SERVER DEBUG] - response_value: "5,000,000"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "annualRecurringRevenue":
[SERVER DEBUG] - Expected: "5,000,000"
[SERVER DEBUG] - Actual: "5,000,000"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "annualRecurringRevenue" (ID: 2489)
[SERVER DEBUG] --- Finished processing field "annualRecurringRevenue" ---

[SERVER DEBUG] Processing field: "monthlyRecurringRevenue" (ID: 22)
[SERVER DEBUG] Original value: 12,500,000
[SERVER DEBUG] Normalized value: "12,500,000" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "monthlyRecurringRevenue" in database
[SERVER DEBUG] - Old value: "12,500,000" (string)
[SERVER DEBUG] - New value: "12,500,000" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: monthlyRecurringRevenue
[SERVER DEBUG] - field_id: 22
[SERVER DEBUG] - response_value: "12,500,000"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "monthlyRecurringRevenue":
[SERVER DEBUG] - Expected: "12,500,000"
[SERVER DEBUG] - Actual: "12,500,000"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "monthlyRecurringRevenue" (ID: 2490)
[SERVER DEBUG] --- Finished processing field "monthlyRecurringRevenue" ---

[SERVER DEBUG] Processing field: "investigationsIncidents" (ID: 23)
[SERVER DEBUG] Original value: No significant incidents in the past 3 years
[SERVER DEBUG] Normalized value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "investigationsIncidents" in database
[SERVER DEBUG] - Old value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] - New value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: investigationsIncidents
[SERVER DEBUG] - field_id: 23
[SERVER DEBUG] - response_value: "No significant incidents in the past 3 years"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "investigationsIncidents":
[SERVER DEBUG] - Expected: "No significant incidents in the past 3 years"
[SERVER DEBUG] - Actual: "No significant incidents in the past 3 years"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "investigationsIncidents" (ID: 2491)
[SERVER DEBUG] --- Finished processing field "investigationsIncidents" ---

[SERVER DEBUG] Processing field: "financialStatements" (ID: 24)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "financialStatements" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: financialStatements
[SERVER DEBUG] - field_id: 24
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "financialStatements":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "financialStatements" (ID: 2492)
[SERVER DEBUG] --- Finished processing field "financialStatements" ---

[SERVER DEBUG] Processing field: "operationalPolicies" (ID: 25)
[SERVER DEBUG] Original value: ISO 27001 certified, SOC 2 Type II compliant
[SERVER DEBUG] Normalized value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "operationalPolicies" in database
[SERVER DEBUG] - Old value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] - New value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: operationalPolicies
[SERVER DEBUG] - field_id: 25
[SERVER DEBUG] - response_value: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "operationalPolicies":
[SERVER DEBUG] - Expected: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] - Actual: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "operationalPolicies" (ID: 2493)
[SERVER DEBUG] --- Finished processing field "operationalPolicies" ---

[SERVER DEBUG] Processing field: "dataVolume" (ID: 26)
[SERVER DEBUG] Original value: Approximately 2 million records per month
[SERVER DEBUG] Normalized value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "dataVolume" in database
[SERVER DEBUG] - Old value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - New value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: dataVolume
[SERVER DEBUG] - field_id: 26
[SERVER DEBUG] - response_value: "Approximately 2 million records per month"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "dataVolume":
[SERVER DEBUG] - Expected: "Approximately 2 million records per month"
[SERVER DEBUG] - Actual: "Approximately 2 million records per month"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "dataVolume" (ID: 2494)
[SERVER DEBUG] --- Finished processing field "dataVolume" ---

[SERVER DEBUG] Processing field: "dataTypes" (ID: 27)
[SERVER DEBUG] Original value: Financial transaction data, Account balances, Customer KYC information
[SERVER DEBUG] Normalized value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "dataTypes" in database
[SERVER DEBUG] - Old value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] - New value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: dataTypes
[SERVER DEBUG] - field_id: 27
[SERVER DEBUG] - response_value: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "dataTypes":
[SERVER DEBUG] - Expected: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] - Actual: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "dataTypes" (ID: 2495)
[SERVER DEBUG] --- Finished processing field "dataTypes" ---

[SERVER DEBUG] Processing field: "sanctionsCheck" (ID: 28)
[SERVER DEBUG] Original value: Approximately 2 million records per month
[SERVER DEBUG] Normalized value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "sanctionsCheck" in database
[SERVER DEBUG] - Old value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - New value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: sanctionsCheck
[SERVER DEBUG] - field_id: 28
[SERVER DEBUG] - response_value: "Approximately 2 million records per month"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "sanctionsCheck":
[SERVER DEBUG] - Expected: "Approximately 2 million records per month"
[SERVER DEBUG] - Actual: "Approximately 2 million records per month"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "sanctionsCheck" (ID: 2496)
[SERVER DEBUG] --- Finished processing field "sanctionsCheck" ---

[SERVER DEBUG] Processing field: "dueDiligence" (ID: 29)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "dueDiligence" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: dueDiligence
[SERVER DEBUG] - field_id: 29
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "dueDiligence":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "dueDiligence" (ID: 2497)
[SERVER DEBUG] --- Finished processing field "dueDiligence" ---

[SERVER DEBUG] Processing field: "regulatoryActions" (ID: 30)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "regulatoryActions" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: regulatoryActions
[SERVER DEBUG] - field_id: 30
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "regulatoryActions":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "regulatoryActions" (ID: 2498)
[SERVER DEBUG] --- Finished processing field "regulatoryActions" ---

[KYB API Debug] Task has submission date, enforcing SUBMITTED status and 100% progress {
  submissionDate: '2025-04-20T21:32:40.382Z',
  clientProvidedStatus: 'ready_for_submission',
  originalProgress: 100
}
[WebSocket] Broadcasting task update for task 532: progress=100, status=submitted
[WebSocket] Broadcast "task_updated" sent to 2 clients
===============================================
[SERVER DEBUG] PREPARING RESPONSE at 2025-04-20T21:39:58.594Z
[SERVER DEBUG] Found 60 fields in database after update
===============================================
[SERVER DEBUG] Checking field corporateRegistration in updated data: "No"
[SERVER DEBUG] Checking field goodStanding in updated data: "Yes"
[SERVER DEBUG] Checking field regulatoryActions in updated data: "Yes"
[SERVER DEBUG] Checking field investigationsIncidents in updated data: "No significant incidents in the past 3 years"
[SERVER DEBUG] No fields with value "asdf" found in response data
[SERVER DEBUG] Sending response with 30 fields, status: submitted, progress: 100%
[SERVER DEBUG] Updating task.savedFormData to ensure persistence across navigation
[SERVER DEBUG] ✅ Successfully updated task.savedFormData with latest form data
===============================================
9:39:58 PM [info] POST /api/kyb/progress 200 in 2901ms :: {"success":true,"savedData":{"progress":100,"status":"submitted","formData":{...
[Invite Debug] Starting validation for code: A128D3
[Invite Debug] Found valid invitation: {
  id: 265,
  email: '10@e.com',
  status: 'pending',
  expires_at: 2025-04-27T20:15:14.211Z
}
9:40:01 PM [info] GET /api/invitations/A128D3/validate 200 in 30ms :: {"valid":true,"invitation":{"email":"10@e.com","invitee_name":"JD","company_n...
[Account Setup] Processing setup request for: 10@e.com
[Account Setup] Updated user: { id: 257, email: '10@e.com', onboarding_completed: false }
[Account Setup] Updated task status: { taskId: 535, status: 'completed', progress: 100 }
[WebSocket] Broadcast "task_updated" sent to 2 clients
[Auth] Serializing user: 257
9:40:08 PM [info] POST /api/account/setup 200 in 325ms :: {"id":257,"email":"10@e.com","full_name":"Joe Doe","first_name":"Joe","last_n...
[Auth] Deserializing user: 257
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 257, company_id: 216, email: '10@e.com' }
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 257',
    condition2: 'tasks.created_by = 257',
    condition3: "tasks.company_id = 216 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('10@e.com')"
  }
}
Suppressing further connection logs. Pool size: 3
[Tasks] Tasks found: { count: 4 }
[Current Company] Fetching company for user: { userId: 257, companyId: 216 }
[Network Visualization] Fetching network data for company: 216
9:40:09 PM [info] GET /api/tasks 200 in 89ms :: [{"id":536,"title":"1. KYB Form: DevTest10","description":"Complete KYB verif...
[Current Company] Found company: {
  id: 216,
  name: 'DevTest10',
  onboardingCompleted: false,
  riskScore: null,
  isDemo: true
}
9:40:09 PM [info] GET /api/companies/current 200 in 60ms :: {"id":216,"name":"DevTest10","description":"FinTech partner company DevTest10...
[Network Visualization] Found network relationships: { count: 2 }
[Network Visualization] Returning visualization data: { centerNode: 'DevTest10', nodeCount: 2 }
9:40:09 PM [info] GET /api/network/visualization 200 in 90ms :: {"center":{"id":216,"name":"DevTest10","riskScore":0,"riskBucket":"low","accr...
9:40:09 PM [info] GET /api/tasks 304 in 30ms :: [{"id":536,"title":"1. KYB Form: DevTest10","description":"Complete KYB verif...
9:40:09 PM [info] GET /api/companies/current 304 in 30ms :: {"id":216,"name":"DevTest10","description":"FinTech partner company DevTest10...
[WebSocket] Received ping
[User Onboarding] Completing onboarding for user: 257
[User Onboarding] Updated user onboarding status: { id: 257, onboarding_completed: true }
9:40:11 PM [info] POST /api/user/complete-onboarding 200 in 60ms :: {"id":257,"email":"10@e.com","full_name":"Joe Doe","first_name":"Joe","last_n...
[Auth] Returning user session data
[WebSocket] Received ping
9:40:11 PM [info] GET /api/tasks 304 in 29ms :: [{"id":536,"title":"1. KYB Form: DevTest10","description":"Complete KYB verif...
9:40:11 PM [info] GET /api/tasks 304 in 28ms :: [{"id":536,"title":"1. KYB Form: DevTest10","description":"Complete KYB verif...
[Tasks Routes] Fetching task by ID: {
  taskId: 536,
  userCompanyId: 216,
  timestamp: '2025-04-20T21:40:12.275Z'
}
[Tasks Routes] Fetching latest KYB form data for task: 536
9:40:12 PM [info] GET /api/companies/current 304 in 30ms :: {"id":216,"name":"DevTest10","description":"FinTech partner company DevTest10...
[Tasks Routes] No KYB responses found for task 536
[Tasks Routes] Task found by ID: {
  taskId: 536,
  title: '1. KYB Form: DevTest10',
  type: 'company_kyb',
  formDataFields: 0,
  timestamp: '2025-04-20T21:40:12.366Z'
}
9:40:12 PM [info] GET /api/tasks/536 200 in 121ms :: {"id":536,"title":"1. KYB Form: DevTest10","description":"Complete KYB verifi...
[Task Templates API] Fetching template for task type: company_kyb, user: 257
[Task Templates API] Found template: 1 (KYB Form) for task type: company_kyb
9:40:12 PM [warn] GET /api/companies/is-demo 400 in 32ms :: {"message":"Invalid company ID","code":"INVALID_ID"}
[Task Templates API] Retrieved 9 configuration items for template ID: 1
9:40:12 PM [info] GET /api/task-templates/by-type/company_kyb 304 in 93ms :: {"id":1,"name":"KYB Form","description":"Know Your Business form for company ...
[Tasks Routes] Fetching task by ID: {
  taskId: 536,
  userCompanyId: 216,
  timestamp: '2025-04-20T21:40:12.795Z'
}
9:40:12 PM [info] GET /api/companies/216 200 in 60ms :: {"id":216,"name":"DevTest10","description":"FinTech partner company DevTest10...
[Tasks Routes] Fetching latest KYB form data for task: 536
[Tasks Routes] No KYB responses found for task 536
[Tasks Routes] Task found by ID: {
  taskId: 536,
  title: '1. KYB Form: DevTest10',
  type: 'company_kyb',
  formDataFields: 0,
  timestamp: '2025-04-20T21:40:12.883Z'
}
9:40:12 PM [info] GET /api/tasks/536 304 in 119ms :: {"id":536,"title":"1. KYB Form: DevTest10","description":"Complete KYB verifi...
[KYB API Debug] Loading progress for task: 536
[Task Reconciliation] Found 0 responses for task 536
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-04-20T21:40:13.126Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 536,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 536
[KYB API Debug] Retrieved task: {
  taskId: 536,
  status: 'not_started',
  progress: 0,
  metadata: [
    'company_id',
    'created_at',
    'created_via',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for'
  ],
  timestamp: '2025-04-20T21:40:13.155Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-04-20T21:40:13.186Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 536,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T21:40:13.186Z
[SERVER DEBUG] Task ID: 536, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
9:40:13 PM [info] GET /api/kyb/progress/536 200 in 149ms :: {"formData":{},"progress":0,"status":"not_started"}
[KYB API Debug] Loading progress for task: 536
[Task Reconciliation] Found 0 responses for task 536
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-04-20T21:40:13.422Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 536,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 536
[KYB API Debug] Retrieved task: {
  taskId: 536,
  status: 'not_started',
  progress: 0,
  metadata: [
    'company_id',
    'created_at',
    'created_via',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for'
  ],
  timestamp: '2025-04-20T21:40:13.451Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-04-20T21:40:13.480Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 536,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T21:40:13.480Z
[SERVER DEBUG] Task ID: 536, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
9:40:13 PM [info] GET /api/kyb/progress/536 304 in 146ms :: {"formData":{},"progress":0,"status":"not_started"}
[KYB API Debug] Loading progress for task: 536
[Task Reconciliation] Found 0 responses for task 536
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-04-20T21:40:13.717Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 536,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 536
[KYB API Debug] Retrieved task: {
  taskId: 536,
  status: 'not_started',
  progress: 0,
  metadata: [
    'company_id',
    'created_at',
    'created_via',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for'
  ],
  timestamp: '2025-04-20T21:40:13.746Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-04-20T21:40:13.775Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 536,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T21:40:13.776Z
[SERVER DEBUG] Task ID: 536, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
9:40:13 PM [info] GET /api/kyb/progress/536 304 in 147ms :: {"formData":{},"progress":0,"status":"not_started"}
[2025-04-20T21:40:15.252Z] [INFO] [KYBRoutes] Demo auto-fill requested for task {"taskId":"536","userId":257}
[2025-04-20T21:40:15.338Z] [INFO] [KYBRoutes] Fetched fields for demo auto-fill {"fieldCount":30,"taskId":"536"}
[KYB Demo Auto-Fill] First 5 fields from database:
[KYB Demo Auto-Fill] Raw field objects: [
  {
    id: 1,
    field_key: 'legalEntityName',
    display_name: 'Legal Entity Name',
    field_type: 'TEXT',
    question: 'What is the registered business name?',
    group: 'companyProfile',
    required: true,
    order: 1,
    step_index: 0,
    validation_rules: null,
    help_text: 'The official name under which your business is registered with government authorities.',
    demo_autofill: null,
    created_at: 2025-03-05T07:32:29.195Z,
    updated_at: 2025-03-05T07:32:29.195Z
  },
  {
    id: 2,
    field_key: 'registrationNumber',
    display_name: 'Registration Number',
    field_type: 'TEXT',
    question: "What is your company's entity registration number (e.g., EIN or State Entity ID)?",
    group: 'companyProfile',
    required: true,
    order: 2,
    step_index: 0,
    validation_rules: null,
    help_text: 'In the US, this is typically your EIN (Employer Identification Number) or state entity registration number.',
    demo_autofill: '12-3456789',
    created_at: 2025-03-05T07:32:29.195Z,
    updated_at: 2025-03-05T07:32:29.195Z
  },
  {
    id: 3,
    field_key: 'incorporationDate',
    display_name: 'Incorporation Date',
    field_type: 'DATE',
    question: 'When was the company incorporated?',
    group: 'companyProfile',
    required: true,
    order: 3,
    step_index: 0,
    validation_rules: null,
    help_text: 'The date when your company was legally established as per your registration documents.',
    demo_autofill: '5/12/2010',
    created_at: 2025-03-05T07:32:29.195Z,
    updated_at: 2025-03-05T07:32:29.195Z
  },
  {
    id: 4,
    field_key: 'businessType',
    display_name: 'Business Type',
    field_type: 'TEXT',
    question: 'What type of business entity is this?',
    group: 'companyProfile',
    required: true,
    order: 4,
    step_index: 0,
    validation_rules: null,
    help_text: 'Examples include LLC, Corporation, Partnership, Sole Proprietorship, etc.',
    demo_autofill: 'Limited Liability Company (LLC)',
    created_at: 2025-03-05T07:32:29.195Z,
    updated_at: 2025-03-05T07:32:29.195Z
  },
  {
    id: 5,
    field_key: 'jurisdiction',
    display_name: 'Jurisdiction',
    field_type: 'TEXT',
    question: 'In which jurisdiction is the company registered?',
    group: 'companyProfile',
    required: true,
    order: 5,
    step_index: 0,
    validation_rules: null,
    help_text: 'The country, state, or region where your company is officially registered.',
    demo_autofill: 'Delaware, United States',
    created_at: 2025-03-05T07:32:29.195Z,
    updated_at: 2025-03-05T07:32:29.195Z
  }
]
[KYB Demo Auto-Fill] Field legalEntityName has these properties: [
  'id',           'field_key',
  'display_name', 'field_type',
  'question',     'group',
  'required',     'order',
  'step_index',   'validation_rules',
  'help_text',    'demo_autofill',
  'created_at',   'updated_at'
]
[KYB Demo Auto-Fill] Field legalEntityName demo_autofill = "null"
[KYB Demo Auto-Fill] Field registrationNumber has these properties: [
  'id',           'field_key',
  'display_name', 'field_type',
  'question',     'group',
  'required',     'order',
  'step_index',   'validation_rules',
  'help_text',    'demo_autofill',
  'created_at',   'updated_at'
]
[KYB Demo Auto-Fill] Field registrationNumber demo_autofill = "12-3456789"
[KYB Demo Auto-Fill] Field incorporationDate has these properties: [
  'id',           'field_key',
  'display_name', 'field_type',
  'question',     'group',
  'required',     'order',
  'step_index',   'validation_rules',
  'help_text',    'demo_autofill',
  'created_at',   'updated_at'
]
[KYB Demo Auto-Fill] Field incorporationDate demo_autofill = "5/12/2010"
[KYB Demo Auto-Fill] Field businessType has these properties: [
  'id',           'field_key',
  'display_name', 'field_type',
  'question',     'group',
  'required',     'order',
  'step_index',   'validation_rules',
  'help_text',    'demo_autofill',
  'created_at',   'updated_at'
]
[KYB Demo Auto-Fill] Field businessType demo_autofill = "Limited Liability Company (LLC)"
[KYB Demo Auto-Fill] Field jurisdiction has these properties: [
  'id',           'field_key',
  'display_name', 'field_type',
  'question',     'group',
  'required',     'order',
  'step_index',   'validation_rules',
  'help_text',    'demo_autofill',
  'created_at',   'updated_at'
]
[KYB Demo Auto-Fill] Field jurisdiction demo_autofill = "Delaware, United States"
[KYB Demo Auto-Fill] Using company name for legalEntityName: DevTest10
[KYB Demo Auto-Fill] Used database value for registrationNumber: 12-3456789
[KYB Demo Auto-Fill] Used database value for incorporationDate: 5/12/2010
[KYB Demo Auto-Fill] Used database value for businessType: Limited Liability Company (LLC)
[KYB Demo Auto-Fill] Used database value for jurisdiction: Delaware, United States
[KYB Demo Auto-Fill] Used database value for registeredAddress: 123 Market Street, Wilmington, DE 19801
[KYB Demo Auto-Fill] Used database value for companyPhone: (302) 555-1234
[KYB Demo Auto-Fill] Used database value for priorNames: None
[KYB Demo Auto-Fill] Used database value for marketCapitalization: $75 million (privately held)
[KYB Demo Auto-Fill] Used database value for lifetimeCustomerValue: $1,250
[KYB Demo Auto-Fill] Used database value for annualRecurringRevenue: 5,000,000
[KYB Demo Auto-Fill] Used database value for monthlyRecurringRevenue: 12,500,000
[KYB Demo Auto-Fill] Used database value for licenses: Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765
[KYB Demo Auto-Fill] Used database value for goodStanding: Yes
[KYB Demo Auto-Fill] Used database value for corporateRegistration: No
[KYB Demo Auto-Fill] Used database value for externalAudit: No
[KYB Demo Auto-Fill] Used database value for controlEnvironment: Yes
[KYB Demo Auto-Fill] Used database value for authorizedSigners: John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)
[KYB Demo Auto-Fill] Used database value for governmentOwnership: No
[KYB Demo Auto-Fill] Used database value for ultimateBeneficialOwners: None
[KYB Demo Auto-Fill] Used database value for directorsAndOfficers: John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)
[KYB Demo Auto-Fill] Using current user email for contactEmail: 10@e.com
[KYB Demo Auto-Fill] Used database value for investigationsIncidents: No significant incidents in the past 3 years
[KYB Demo Auto-Fill] Used database value for financialStatements: Yes
[KYB Demo Auto-Fill] Used database value for operationalPolicies: ISO 27001 certified, SOC 2 Type II compliant
[KYB Demo Auto-Fill] Used database value for dataVolume: Approximately 2 million records per month
[KYB Demo Auto-Fill] Used database value for dataTypes: Financial transaction data, Account balances, Customer KYC information
[KYB Demo Auto-Fill] Used database value for sanctionsCheck: Approximately 2 million records per month
[KYB Demo Auto-Fill] Used database value for dueDiligence: Yes
[KYB Demo Auto-Fill] Used database value for regulatoryActions: Yes
[2025-04-20T21:40:15.339Z] [INFO] [KYBRoutes] Generated demo data for auto-fill {"fieldCount":30,"taskId":"536"}
9:40:15 PM [info] GET /api/kyb/demo-autofill/536 200 in 117ms :: {"legalEntityName":"DevTest10","registrationNumber":"12-3456789","incorporati...
[TimestampHandler] Saving 30 timestamps for task 536
[TimestampHandler] Successfully saved timestamps for task 536
[TimestampAPI] Saved 30 timestamps for task 536
9:40:16 PM [info] POST /api/kyb/timestamps/536 200 in 62ms :: {"message":"Timestamps saved successfully","count":30}
===============================================
[SERVER DEBUG] KYB PROGRESS SAVE REQUEST RECEIVED at 2025-04-20T21:40:16.296Z
===============================================
Task ID: 536
Progress: 100
Status: ready_for_submission
Field count: 30
Sample form data values:
- legalEntityName: "DevTest10" (string)
- registrationNumber: "12-3456789" (string)
- incorporationDate: "5/12/2010" (string)
- businessType: "Limited Liability Company (LLC)" (string)
- jurisdiction: "Delaware, United States" (string)
Request details:
- Method: POST
- Content-Type: application/json
- Content-Length: 2419
===============================================
===============================================
[SERVER DEBUG] PROCESSING FORM DATA FIELDS AT 2025-04-20T21:40:16.358Z
[SERVER DEBUG] Task ID: 536, Field count: 30
===============================================
[SERVER DEBUG] COMPLETE FORM DATA DUMP:
[SERVER DEBUG] legalEntityName: "DevTest10" (string)
[SERVER DEBUG] registrationNumber: "12-3456789" (string)
[SERVER DEBUG] incorporationDate: "5/12/2010" (string)
[SERVER DEBUG] businessType: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] jurisdiction: "Delaware, United States" (string)
[SERVER DEBUG] registeredAddress: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] companyPhone: "(302) 555-1234" (string)
[SERVER DEBUG] priorNames: "None" (string)
[SERVER DEBUG] licenses: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] goodStanding: "Yes" (string)
[SERVER DEBUG] corporateRegistration: "No" (string)
[SERVER DEBUG] externalAudit: "No" (string)
[SERVER DEBUG] controlEnvironment: "Yes" (string)
[SERVER DEBUG] authorizedSigners: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] governmentOwnership: "No" (string)
[SERVER DEBUG] ultimateBeneficialOwners: "None" (string)
[SERVER DEBUG] directorsAndOfficers: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] contactEmail: "10@e.com" (string)
[SERVER DEBUG] marketCapitalization: "$75 million (privately held)" (string)
[SERVER DEBUG] lifetimeCustomerValue: "$1,250" (string)
[SERVER DEBUG] annualRecurringRevenue: "5,000,000" (string)
[SERVER DEBUG] monthlyRecurringRevenue: "12,500,000" (string)
[SERVER DEBUG] investigationsIncidents: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] financialStatements: "Yes" (string)
[SERVER DEBUG] operationalPolicies: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] dataVolume: "Approximately 2 million records per month" (string)
[SERVER DEBUG] dataTypes: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] sanctionsCheck: "Approximately 2 million records per month" (string)
[SERVER DEBUG] dueDiligence: "Yes" (string)
[SERVER DEBUG] regulatoryActions: "Yes" (string)
[SERVER DEBUG] END OF FORM DATA DUMP
[SERVER DEBUG] No fields with value "asdf" found in incoming data
[SERVER DEBUG] Processing field: "legalEntityName" (ID: 1)
[SERVER DEBUG] Original value: DevTest10
[SERVER DEBUG] Normalized value: "DevTest10" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "legalEntityName"
[SERVER DEBUG] - Value: "DevTest10" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "legalEntityName":
[SERVER DEBUG] - Expected: "DevTest10"
[SERVER DEBUG] - Actual: "DevTest10"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "legalEntityName"
[SERVER DEBUG] Broadcasting legalEntityName insert via WebSocket: "DevTest10"
[WebSocket] Broadcast "field_update" sent to 2 clients
[SERVER DEBUG] --- Finished processing field "legalEntityName" ---

[SERVER DEBUG] Processing field: "registrationNumber" (ID: 2)
[SERVER DEBUG] Original value: 12-3456789
[SERVER DEBUG] Normalized value: "12-3456789" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "registrationNumber"
[SERVER DEBUG] - Value: "12-3456789" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "registrationNumber":
[SERVER DEBUG] - Expected: "12-3456789"
[SERVER DEBUG] - Actual: "12-3456789"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "registrationNumber"
[SERVER DEBUG] --- Finished processing field "registrationNumber" ---

[SERVER DEBUG] Processing field: "incorporationDate" (ID: 3)
[SERVER DEBUG] Original value: 5/12/2010
[SERVER DEBUG] Normalized value: "5/12/2010" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "incorporationDate"
[SERVER DEBUG] - Value: "5/12/2010" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "incorporationDate":
[SERVER DEBUG] - Expected: "5/12/2010"
[SERVER DEBUG] - Actual: "5/12/2010"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "incorporationDate"
[SERVER DEBUG] --- Finished processing field "incorporationDate" ---

[SERVER DEBUG] Processing field: "businessType" (ID: 4)
[SERVER DEBUG] Original value: Limited Liability Company (LLC)
[SERVER DEBUG] Normalized value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "businessType"
[SERVER DEBUG] - Value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "businessType":
[SERVER DEBUG] - Expected: "Limited Liability Company (LLC)"
[SERVER DEBUG] - Actual: "Limited Liability Company (LLC)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "businessType"
[SERVER DEBUG] --- Finished processing field "businessType" ---

[SERVER DEBUG] Processing field: "jurisdiction" (ID: 5)
[SERVER DEBUG] Original value: Delaware, United States
[SERVER DEBUG] Normalized value: "Delaware, United States" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "jurisdiction"
[SERVER DEBUG] - Value: "Delaware, United States" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "jurisdiction":
[SERVER DEBUG] - Expected: "Delaware, United States"
[SERVER DEBUG] - Actual: "Delaware, United States"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "jurisdiction"
[SERVER DEBUG] --- Finished processing field "jurisdiction" ---

[SERVER DEBUG] Processing field: "registeredAddress" (ID: 6)
[SERVER DEBUG] Original value: 123 Market Street, Wilmington, DE 19801
[SERVER DEBUG] Normalized value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "registeredAddress"
[SERVER DEBUG] - Value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "registeredAddress":
[SERVER DEBUG] - Expected: "123 Market Street, Wilmington, DE 19801"
[SERVER DEBUG] - Actual: "123 Market Street, Wilmington, DE 19801"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "registeredAddress"
[SERVER DEBUG] --- Finished processing field "registeredAddress" ---

[SERVER DEBUG] Processing field: "companyPhone" (ID: 7)
[SERVER DEBUG] Original value: (302) 555-1234
[SERVER DEBUG] Normalized value: "(302) 555-1234" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "companyPhone"
[SERVER DEBUG] - Value: "(302) 555-1234" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "companyPhone":
[SERVER DEBUG] - Expected: "(302) 555-1234"
[SERVER DEBUG] - Actual: "(302) 555-1234"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "companyPhone"
[SERVER DEBUG] --- Finished processing field "companyPhone" ---

[SERVER DEBUG] Processing field: "priorNames" (ID: 8)
[SERVER DEBUG] Original value: None
[SERVER DEBUG] Normalized value: "None" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "priorNames"
[SERVER DEBUG] - Value: "None" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "priorNames":
[SERVER DEBUG] - Expected: "None"
[SERVER DEBUG] - Actual: "None"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "priorNames"
[SERVER DEBUG] --- Finished processing field "priorNames" ---

[SERVER DEBUG] Processing field: "licenses" (ID: 9)
[SERVER DEBUG] Original value: Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765
[SERVER DEBUG] Normalized value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "licenses"
[SERVER DEBUG] - Value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "licenses":
[SERVER DEBUG] - Expected: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] - Actual: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "licenses"
[SERVER DEBUG] --- Finished processing field "licenses" ---

[SERVER DEBUG] Processing field: "goodStanding" (ID: 10)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "goodStanding"
[SERVER DEBUG] - Value: "Yes" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "goodStanding":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "goodStanding"
[SERVER DEBUG] --- Finished processing field "goodStanding" ---

[SERVER DEBUG] Processing field: "corporateRegistration" (ID: 11)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "corporateRegistration"
[SERVER DEBUG] - Value: "No" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "corporateRegistration":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "corporateRegistration"
[SERVER DEBUG] --- Finished processing field "corporateRegistration" ---

[SERVER DEBUG] Processing field: "externalAudit" (ID: 12)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "externalAudit"
[SERVER DEBUG] - Value: "No" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "externalAudit":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "externalAudit"
[SERVER DEBUG] --- Finished processing field "externalAudit" ---

[SERVER DEBUG] Processing field: "controlEnvironment" (ID: 13)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "controlEnvironment"
[SERVER DEBUG] - Value: "Yes" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "controlEnvironment":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "controlEnvironment"
[SERVER DEBUG] --- Finished processing field "controlEnvironment" ---

[SERVER DEBUG] Processing field: "authorizedSigners" (ID: 14)
[SERVER DEBUG] Original value: John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)
[SERVER DEBUG] Normalized value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "authorizedSigners"
[SERVER DEBUG] - Value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "authorizedSigners":
[SERVER DEBUG] - Expected: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] - Actual: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "authorizedSigners"
[SERVER DEBUG] --- Finished processing field "authorizedSigners" ---

[SERVER DEBUG] Processing field: "governmentOwnership" (ID: 15)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "governmentOwnership"
[SERVER DEBUG] - Value: "No" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "governmentOwnership":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "governmentOwnership"
[SERVER DEBUG] --- Finished processing field "governmentOwnership" ---

[SERVER DEBUG] Processing field: "ultimateBeneficialOwners" (ID: 16)
[SERVER DEBUG] Original value: None
[SERVER DEBUG] Normalized value: "None" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "ultimateBeneficialOwners"
[SERVER DEBUG] - Value: "None" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "ultimateBeneficialOwners":
[SERVER DEBUG] - Expected: "None"
[SERVER DEBUG] - Actual: "None"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "ultimateBeneficialOwners"
[SERVER DEBUG] --- Finished processing field "ultimateBeneficialOwners" ---

[SERVER DEBUG] Processing field: "directorsAndOfficers" (ID: 17)
[SERVER DEBUG] Original value: John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)
[SERVER DEBUG] Normalized value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "directorsAndOfficers"
[SERVER DEBUG] - Value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "directorsAndOfficers":
[SERVER DEBUG] - Expected: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] - Actual: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "directorsAndOfficers"
[SERVER DEBUG] --- Finished processing field "directorsAndOfficers" ---

[SERVER DEBUG] Processing field: "contactEmail" (ID: 18)
[SERVER DEBUG] Original value: 10@e.com
[SERVER DEBUG] Normalized value: "10@e.com" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "contactEmail"
[SERVER DEBUG] - Value: "10@e.com" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "contactEmail":
[SERVER DEBUG] - Expected: "10@e.com"
[SERVER DEBUG] - Actual: "10@e.com"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "contactEmail"
[SERVER DEBUG] --- Finished processing field "contactEmail" ---

[SERVER DEBUG] Processing field: "marketCapitalization" (ID: 19)
[SERVER DEBUG] Original value: $75 million (privately held)
[SERVER DEBUG] Normalized value: "$75 million (privately held)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "marketCapitalization"
[SERVER DEBUG] - Value: "$75 million (privately held)" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "marketCapitalization":
[SERVER DEBUG] - Expected: "$75 million (privately held)"
[SERVER DEBUG] - Actual: "$75 million (privately held)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "marketCapitalization"
[SERVER DEBUG] --- Finished processing field "marketCapitalization" ---

[SERVER DEBUG] Processing field: "lifetimeCustomerValue" (ID: 20)
[SERVER DEBUG] Original value: $1,250
[SERVER DEBUG] Normalized value: "$1,250" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "lifetimeCustomerValue"
[SERVER DEBUG] - Value: "$1,250" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "lifetimeCustomerValue":
[SERVER DEBUG] - Expected: "$1,250"
[SERVER DEBUG] - Actual: "$1,250"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "lifetimeCustomerValue"
[SERVER DEBUG] --- Finished processing field "lifetimeCustomerValue" ---

[SERVER DEBUG] Processing field: "annualRecurringRevenue" (ID: 21)
[SERVER DEBUG] Original value: 5,000,000
[SERVER DEBUG] Normalized value: "5,000,000" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "annualRecurringRevenue"
[SERVER DEBUG] - Value: "5,000,000" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "annualRecurringRevenue":
[SERVER DEBUG] - Expected: "5,000,000"
[SERVER DEBUG] - Actual: "5,000,000"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "annualRecurringRevenue"
[SERVER DEBUG] --- Finished processing field "annualRecurringRevenue" ---

[SERVER DEBUG] Processing field: "monthlyRecurringRevenue" (ID: 22)
[SERVER DEBUG] Original value: 12,500,000
[SERVER DEBUG] Normalized value: "12,500,000" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "monthlyRecurringRevenue"
[SERVER DEBUG] - Value: "12,500,000" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "monthlyRecurringRevenue":
[SERVER DEBUG] - Expected: "12,500,000"
[SERVER DEBUG] - Actual: "12,500,000"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "monthlyRecurringRevenue"
[SERVER DEBUG] --- Finished processing field "monthlyRecurringRevenue" ---

[SERVER DEBUG] Processing field: "investigationsIncidents" (ID: 23)
[SERVER DEBUG] Original value: No significant incidents in the past 3 years
[SERVER DEBUG] Normalized value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "investigationsIncidents"
[SERVER DEBUG] - Value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "investigationsIncidents":
[SERVER DEBUG] - Expected: "No significant incidents in the past 3 years"
[SERVER DEBUG] - Actual: "No significant incidents in the past 3 years"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "investigationsIncidents"
[SERVER DEBUG] --- Finished processing field "investigationsIncidents" ---

[SERVER DEBUG] Processing field: "financialStatements" (ID: 24)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "financialStatements"
[SERVER DEBUG] - Value: "Yes" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "financialStatements":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "financialStatements"
[SERVER DEBUG] --- Finished processing field "financialStatements" ---

[SERVER DEBUG] Processing field: "operationalPolicies" (ID: 25)
[SERVER DEBUG] Original value: ISO 27001 certified, SOC 2 Type II compliant
[SERVER DEBUG] Normalized value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "operationalPolicies"
[SERVER DEBUG] - Value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "operationalPolicies":
[SERVER DEBUG] - Expected: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] - Actual: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "operationalPolicies"
[SERVER DEBUG] --- Finished processing field "operationalPolicies" ---

[SERVER DEBUG] Processing field: "dataVolume" (ID: 26)
[SERVER DEBUG] Original value: Approximately 2 million records per month
[SERVER DEBUG] Normalized value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "dataVolume"
[SERVER DEBUG] - Value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "dataVolume":
[SERVER DEBUG] - Expected: "Approximately 2 million records per month"
[SERVER DEBUG] - Actual: "Approximately 2 million records per month"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "dataVolume"
[SERVER DEBUG] --- Finished processing field "dataVolume" ---

[SERVER DEBUG] Processing field: "dataTypes" (ID: 27)
[SERVER DEBUG] Original value: Financial transaction data, Account balances, Customer KYC information
[SERVER DEBUG] Normalized value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "dataTypes"
[SERVER DEBUG] - Value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "dataTypes":
[SERVER DEBUG] - Expected: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] - Actual: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "dataTypes"
[SERVER DEBUG] --- Finished processing field "dataTypes" ---

[SERVER DEBUG] Processing field: "sanctionsCheck" (ID: 28)
[SERVER DEBUG] Original value: Approximately 2 million records per month
[SERVER DEBUG] Normalized value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "sanctionsCheck"
[SERVER DEBUG] - Value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "sanctionsCheck":
[SERVER DEBUG] - Expected: "Approximately 2 million records per month"
[SERVER DEBUG] - Actual: "Approximately 2 million records per month"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "sanctionsCheck"
[SERVER DEBUG] --- Finished processing field "sanctionsCheck" ---

[SERVER DEBUG] Processing field: "dueDiligence" (ID: 29)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "dueDiligence"
[SERVER DEBUG] - Value: "Yes" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "dueDiligence":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "dueDiligence"
[SERVER DEBUG] --- Finished processing field "dueDiligence" ---

[SERVER DEBUG] Processing field: "regulatoryActions" (ID: 30)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "regulatoryActions"
[SERVER DEBUG] - Value: "Yes" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "regulatoryActions":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "regulatoryActions"
[SERVER DEBUG] --- Finished processing field "regulatoryActions" ---

[KYB API Debug] Using client-provided status: ready_for_submission
[WebSocket] Broadcasting task update for task 536: progress=100, status=ready_for_submission
[WebSocket] Broadcast "task_updated" sent to 2 clients
===============================================
[SERVER DEBUG] PREPARING RESPONSE at 2025-04-20T21:40:19.057Z
[SERVER DEBUG] Found 30 fields in database after update
===============================================
[SERVER DEBUG] Checking field corporateRegistration in updated data: "No"
[SERVER DEBUG] Checking field goodStanding in updated data: "Yes"
[SERVER DEBUG] Checking field regulatoryActions in updated data: "Yes"
[SERVER DEBUG] Checking field investigationsIncidents in updated data: "No significant incidents in the past 3 years"
[SERVER DEBUG] No fields with value "asdf" found in response data
[SERVER DEBUG] Sending response with 30 fields, status: ready_for_submission, progress: 100%
[SERVER DEBUG] Updating task.savedFormData to ensure persistence across navigation
[SERVER DEBUG] ✅ Successfully updated task.savedFormData with latest form data
===============================================
9:40:19 PM [info] POST /api/kyb/progress 200 in 2821ms :: {"success":true,"savedData":{"progress":100,"status":"ready_for_submission","...
9:40:22 PM [info] GET /api/companies/current 304 in 31ms :: {"id":216,"name":"DevTest10","description":"FinTech partner company DevTest10...
9:40:32 PM [info] GET /api/companies/current 304 in 28ms :: {"id":216,"name":"DevTest10","description":"FinTech partner company DevTest10...
[WebSocket] Received ping
9:40:42 PM [info] GET /api/companies/current 304 in 30ms :: {"id":216,"name":"DevTest10","description":"FinTech partner company DevTest10...
9:40:53 PM [info] GET /api/companies/current 304 in 30ms :: {"id":216,"name":"DevTest10","description":"FinTech partner company DevTest10...
9:41:03 PM [info] GET /api/companies/current 304 in 29ms :: {"id":216,"name":"DevTest10","description":"FinTech partner company DevTest10...
[WebSocket] Received ping
[Current Company] Fetching company for user: { userId: 257, companyId: 216 }
[Current Company] Found company: {
  id: 216,
  name: 'DevTest10',
  onboardingCompleted: false,
  riskScore: null,
  isDemo: true
}
9:41:13 PM [info] GET /api/companies/current 304 in 59ms :: {"id":216,"name":"DevTest10","description":"FinTech partner company DevTest10...
[Current Company] Using cached company data: 216
9:41:23 PM [info] GET /api/companies/current 304 in 30ms :: {"id":216,"name":"DevTest10","description":"FinTech partner company DevTest10...
9:41:33 PM [info] GET /api/companies/current 304 in 30ms :: {"id":216,"name":"DevTest10","description":"FinTech partner company DevTest10...
[WebSocket] Received ping
9:41:44 PM [info] GET /api/companies/current 304 in 29ms :: {"id":216,"name":"DevTest10","description":"FinTech partner company DevTest10...
[KYB API Debug] KYB save endpoint triggered: {
  endpoint: '/api/kyb/save',
  method: 'POST',
  url: '/api/kyb/save',
  headers: {
    contentType: 'application/json',
    accept: 'application/json',
    cookie: true
  },
  timestamp: '2025-04-20T21:41:51.437Z'
}
[KYB API Debug] User authenticated: {
  userId: 257,
  userEmail: '10@e.com',
  companyId: 216,
  timestamp: '2025-04-20T21:41:51.437Z'
}
[2025-04-20T21:41:51.437Z] [DEBUG] [KYBRoutes] Save request received {"taskId":536,"formDataKeys":["legalEntityName","registrationNumber","incorporationDate","businessType","jurisdiction","registeredAddress","companyPhone","priorNames","licenses","goodStanding","corporateRegistration","externalAudit","controlEnvironment","authorizedSigners","governmentOwnership","ultimateBeneficialOwners","directorsAndOfficers","contactEmail","marketCapitalization","lifetimeCustomerValue","annualRecurringRevenue","monthlyRecurringRevenue","investigationsIncidents","financialStatements","operationalPolicies","dataVolume","dataTypes","sanctionsCheck","dueDiligence","regulatoryActions","completion_date"],"fileName":"kyb_form_536_2025-04-20T214151.csv","userId":257,"isSubmission":false}
[2025-04-20T21:41:51.495Z] [DEBUG] [FileCreationService] Starting file creation {"fileName":"kyb_form_536_2025-04-20T214151.csv","fileType":"text/csv","userId":183,"companyId":216}
[2025-04-20T21:41:51.495Z] [DEBUG] [FileCreationService] Storing KYB CSV content directly in database
[2025-04-20T21:41:51.526Z] [INFO] [FileCreationService] File created successfully {"fileId":753,"fileName":"kyb_form_536_2025-04-20T214151.csv","size":2148}
[SERVER DEBUG] File vault unlocking will be performed in the dedicated section below
[2025-04-20T21:41:52.504Z] [INFO] [KYBRoutes] Save completed successfully {"taskId":536,"fileId":753,"responseCount":30,"warningCount":0}
9:41:52 PM [info] POST /api/kyb/save 200 in 1098ms :: {"success":true,"fileId":753}
[WebSocket] Received message: {
  type: 'submission_status',
  payload: {
    taskId: 536,
    status: 'submitted',
    timestamp: 1745185312566,
    source: 'client-emit'
  }
}
[Tasks Routes] Fetching task by ID: {
  taskId: 536,
  userCompanyId: 216,
  timestamp: '2025-04-20T21:41:52.723Z'
}
[Tasks Routes] Fetching latest KYB form data for task: 536
[Tasks Routes] Found 60 KYB responses for task 536
[Tasks Routes] Constructed form data with 30 fields
[Tasks Routes] Task found by ID: {
  taskId: 536,
  title: '1. KYB Form: DevTest10',
  type: 'company_kyb',
  formDataFields: 30,
  timestamp: '2025-04-20T21:41:52.810Z'
}
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 257, company_id: 216, email: '10@e.com' }
9:41:52 PM [info] GET /api/tasks/536 200 in 115ms :: {"id":536,"title":"1. KYB Form: DevTest10","description":"Complete KYB verifi...
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 257',
    condition2: 'tasks.created_by = 257',
    condition3: "tasks.company_id = 216 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('10@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
9:41:52 PM [info] GET /api/tasks 200 in 92ms :: [{"id":537,"title":"2. Security Assessment: DevTest10","description":"Complet...
[Tasks Routes] Fetching task by ID: {
  taskId: 536,
  userCompanyId: 216,
  timestamp: '2025-04-20T21:41:52.987Z'
}
[API] Force unlock file vault request received: {
  userId: 257,
  companyId: '216',
  timestamp: '2025-04-20T21:41:53.017Z'
}
[Tasks Routes] Fetching latest KYB form data for task: 536
[API] Calling CompanyTabsService.unlockFileVault for company 216
[CompanyTabsService] ⚡ CRITICAL TIMING: File vault unlock operation started for company 216 at 2025-04-20T21:41:53.018Z
[CompanyTabsService] Current company state before unlock: {
  companyId: 216,
  name: 'DevTest10',
  available_tabs: [ 'task-center' ],
  timestamp: '2025-04-20T21:41:53.048Z'
}
[CompanyTabsService] Directly updating company 216 with file-vault tab at 2025-04-20T21:41:53.048Z
[CompanyTabsService] Updating company 216 tabs from ["task-center"] to ["task-center","file-vault"]
[CompanyTabsService] Successfully updated using direct array approach: {
  companyId: 216,
  newTabs: [ 'task-center', 'file-vault' ],
  timestamp: '2025-04-20T21:41:53.079Z'
}
[API] Successfully unlocked file vault for company 216
[Tasks Routes] Found 60 KYB responses for task 536
[Tasks Routes] Constructed form data with 30 fields
[Tasks Routes] Task found by ID: {
  taskId: 536,
  title: '1. KYB Form: DevTest10',
  type: 'company_kyb',
  formDataFields: 30,
  timestamp: '2025-04-20T21:41:53.081Z'
}
9:41:53 PM [info] GET /api/tasks 304 in 30ms :: [{"id":537,"title":"2. Security Assessment: DevTest10","description":"Complet...
9:41:53 PM [info] POST /api/companies/216/unlock-file-vault 200 in 92ms :: {"message":"File vault unlocked successfully","companyId":216,"availableTabs"...
9:41:53 PM [info] GET /api/tasks/536 304 in 124ms :: {"id":536,"title":"1. KYB Form: DevTest10","description":"Complete KYB verifi...
9:41:53 PM [info] GET /api/tasks 304 in 31ms :: [{"id":537,"title":"2. Security Assessment: DevTest10","description":"Complet...
9:41:53 PM [info] GET /api/companies/current 304 in 30ms :: {"id":216,"name":"DevTest10","description":"FinTech partner company DevTest10...
9:41:53 PM [warn] GET /api/companies/is-demo 400 in 31ms :: {"message":"Invalid company ID","code":"INVALID_ID"}
9:41:53 PM [info] GET /api/tasks 304 in 30ms :: [{"id":537,"title":"2. Security Assessment: DevTest10","description":"Complet...
9:41:53 PM [info] GET /api/companies/current 304 in 29ms :: {"id":216,"name":"DevTest10","description":"FinTech partner company DevTest10...
9:41:53 PM [info] GET /api/companies/216 200 in 62ms :: {"id":216,"name":"DevTest10","description":"FinTech partner company DevTest10...
9:41:53 PM [info] GET /api/companies/current 304 in 32ms :: {"id":216,"name":"DevTest10","description":"FinTech partner company DevTest10...
9:41:53 PM [info] GET /api/companies/current 304 in 31ms :: {"id":216,"name":"DevTest10","description":"FinTech partner company DevTest10...
[Auth] Using cached user data: 257
9:41:54 PM [info] GET /api/tasks 304 in 30ms :: [{"id":537,"title":"2. Security Assessment: DevTest10","description":"Complet...
9:41:54 PM [info] GET /api/companies/current 304 in 31ms :: {"id":216,"name":"DevTest10","description":"FinTech partner company DevTest10...
9:41:54 PM [info] GET /api/companies/current 304 in 30ms :: {"id":216,"name":"DevTest10","description":"FinTech partner company DevTest10...
9:41:54 PM [info] GET /api/companies/current 304 in 32ms :: {"id":216,"name":"DevTest10","description":"FinTech partner company DevTest10...
[Tasks Routes] Fetching task by ID: {
  taskId: 536,
  userCompanyId: 216,
  timestamp: '2025-04-20T21:42:02.733Z'
}
9:42:02 PM [info] GET /api/tasks 304 in 31ms :: [{"id":537,"title":"2. Security Assessment: DevTest10","description":"Complet...
[Tasks Routes] Fetching latest KYB form data for task: 536
[Tasks Routes] Found 60 KYB responses for task 536
[Tasks Routes] Constructed form data with 30 fields
[Tasks Routes] Task found by ID: {
  taskId: 536,
  title: '1. KYB Form: DevTest10',
  type: 'company_kyb',
  formDataFields: 30,
  timestamp: '2025-04-20T21:42:02.828Z'
}
9:42:02 PM [info] GET /api/tasks/536 304 in 126ms :: {"id":536,"title":"1. KYB Form: DevTest10","description":"Complete KYB verifi...
9:42:02 PM [info] GET /api/tasks 304 in 31ms :: [{"id":537,"title":"2. Security Assessment: DevTest10","description":"Complet...
9:42:04 PM [info] GET /api/companies/current 304 in 31ms :: {"id":216,"name":"DevTest10","description":"FinTech partner company DevTest10...
[WebSocket] Received ping
[WebSocket] Received ping
[Current Company] Fetching company for user: { userId: 257, companyId: 216 }
[Current Company] Found company: {
  id: 216,
  name: 'DevTest10',
  onboardingCompleted: false,
  riskScore: null,
  isDemo: true
}
9:42:14 PM [info] GET /api/companies/current 200 in 65ms :: {"id":216,"name":"DevTest10","description":"FinTech partner company DevTest10...
9:42:25 PM [info] GET /api/companies/current 304 in 31ms :: {"id":216,"name":"DevTest10","description":"FinTech partner company DevTest10...