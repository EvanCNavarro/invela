
> rest-express@1.0.0 dev
> tsx server/index.ts

Database migrations disabled - schema already applied
[EmailService] Initializing email service
[EmailService] Email service initialized successfully
[OpenAI] Service initialized with API key: API key is set
Database module not found, creating a mock implementation
Database module not found, creating a mock implementation
Database module not found, creating a mock implementation
[Auth] Setting up authentication...
[Auth] Authentication setup completed
[2025-05-04T07:51:42.076Z] [INFO] [KY3P-BATCH-UPDATE] Registering KY3P batch update routes 
[2025-05-04T07:51:42.077Z] [INFO] Registering KY3P batch update routes 
[2025-05-04T07:51:42.077Z] [INFO] [UnifiedKY3P] Registering unified KY3P update routes 
[2025-05-04T07:51:42.077Z] [INFO] Registering KY3P field update routes 
[2025-05-04T07:51:42.078Z] [INFO] [OpenBankingRoutes] Setting up routes... 
[Routes] Setting up unified form submission router
[Routes] Successfully registered unified form submission router
[Routes] Setting up transactional form submission router
[Routes] Successfully registered transactional form submission router
[Routes] Routes setup completed
[INFO] Unified WebSocket server initialized successfully with details: {
  clients: 0,
  path: '/ws',
  id: 'p9kktl',
  timestamp: '2025-05-04T07:51:42.080Z'
}
7:51:42 AM [info] [ServerStartup] WebSocket server initialized with unified implementation
[2025-05-04T07:51:42.096Z] [INFO] [TaskWebSocket] WebSocket server registered with unified implementation 
7:51:42 AM [info] [ServerStartup] WebSocket server registered with task-update utility
[TaskBroadcast] WebSocket server reference set up
[TaskBroadcast] WebSocket server active with 0 connected clients
7:51:42 AM [info] [ServerStartup] WebSocket server registered with task-broadcast utility
7:51:42 AM [info] Setting up Vite development server
7:51:42 AM [express] Server running on 0.0.0.0:5000
7:51:42 AM [express] Environment: development
[Deployment] Server running on 0.0.0.0:5000
[Deployment] Environment: development
[Deployment] Port forwarding: Custom port: 5000
[Deployment] Development mode: Hot reloading enabled
7:51:42 AM [express] Starting periodic task reconciliation system...
[PeriodicTaskReconciliation] Stopped periodic reconciliation system
[PeriodicTaskReconciliation] Starting periodic reconciliation system (interval: 300000ms)
7:51:42 AM [express] Task reconciliation system initialized successfully
7:51:43 AM [info] [ServerStartup] WebSocket server active with 0 connected clients
[2025-05-04T07:51:43.271Z] New client connected to the pool (1/3)
[2025-05-04T07:51:44.933Z] New client connected to the pool (2/3)
[2025-05-04T07:51:50.087Z] New client connected to the pool (3/3)
[INFO] [WebSocket] Client connected: client-1746345115295-q3u8xj0
[Auth] Unauthenticated user session
[INFO] [WebSocket] Client connected: client-1746345115334-zcf0d8k
[INFO] [WebSocket] Received message from client client-1746345115295-q3u8xj0: {
  type: 'authenticate',
  data: { timestamp: '2025-05-04T07:51:55.350Z' }
}
[INFO] [WebSocket] Authentication from client client-1746345115295-q3u8xj0: { userId: undefined, companyId: undefined, hasToken: false }
[INFO] [WebSocket] Client disconnected: client-1746345115295-q3u8xj0
[INFO] [WebSocket] Client disconnected: client-1746345115334-zcf0d8k
[Auth] Unauthenticated user session
[INFO] [WebSocket] Client connected: client-1746345122787-c7l365a
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: {
  type: 'authenticate',
  data: { timestamp: '2025-05-04T07:52:02.793Z' }
}
[INFO] [WebSocket] Authentication from client client-1746345122787-c7l365a: { userId: undefined, companyId: undefined, hasToken: true }
[INFO] [WebSocket] Client connected: client-1746345123282-2i9rhyw
[PeriodicTaskReconciliation] Reconciling batch of 10 tasks: [
  683, 685, 679, 699,
  691, 697, 703, 701,
  705, 702
]
[Task Progress] Calculated progress for task 683 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 685 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 679 (open_banking): 44/44 = 100%
[Task Progress] Calculated progress for task 699 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 691 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 697 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 703 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 701 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 705 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 702 (ky3p): 0/120 = 0%
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T07:52:23.290Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T07:52:43.290Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T07:53:03.290Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T07:53:23.290Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T07:53:43.290Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T07:54:03.290Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T07:54:23.290Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T07:54:43.290Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T07:55:03.290Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T07:55:23.290Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T07:55:43.289Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T07:56:03.290Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T07:56:23.290Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
Suppressing further connection logs. Pool size: 3
[PeriodicTaskReconciliation] Reconciling batch of 10 tasks: [
  683, 685, 679, 699,
  691, 697, 701, 705,
  702, 703
]
[Task Progress] Calculated progress for task 683 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 685 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 679 (open_banking): 44/44 = 100%
[Task Progress] Calculated progress for task 699 (open_banking): 0/44 = 0%
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T07:56:43.290Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[Task Progress] Calculated progress for task 691 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 697 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 701 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 705 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 702 (ky3p): 0/120 = 0%
[Task Progress] Calculated progress for task 703 (open_banking): 0/44 = 0%
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T07:57:03.290Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T07:57:23.289Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T07:57:43.290Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T07:58:03.290Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T07:58:23.290Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T07:58:43.290Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[Invite Debug] Starting validation for code: 4EB4CA
[Invite Debug] Found valid invitation: {
  id: 317,
  email: '12@e.com',
  status: 'pending',
  expires_at: 2025-05-10T19:18:35.499Z
}
7:58:54 AM [info] GET /api/invitations/4EB4CA/validate 304 in 53ms :: {"valid":true,"invitation":{"email":"12@e.com","invitee_name":"John Doe","com...
[Account Setup] Processing setup request for: 12@e.com
[Account Setup] Updated user: { id: 310, email: '12@e.com', onboarding_completed: false }
[Auth] Serializing user: 310
[Account Setup] Login successful for user ID: 310
7:58:58 AM [info] POST /api/account/setup 200 in 342ms :: {"id":310,"email":"12@e.com","full_name":"John Doe","first_name":"John","last...
[Current Company] Fetching company for user: { userId: 310, companyId: 267 }
[Current Company] Found company: {
  id: 267,
  name: 'DevTest12',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
7:58:59 AM [info] GET /api/companies/current 200 in 78ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 310, company_id: 267, email: '12@e.com' }
[2025-05-04T07:58:59.394Z] [INFO] Performing dynamic task unlocking check for company {"companyId":267,"userId":310}
[2025-05-04T07:58:59.424Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":267}
[Tasks] Automatically unlocking all tasks for company { userId: 310, companyId: 267, requestedBy: 'automatic_task_unlock' }
[2025-05-04T07:58:59.425Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":267}
[2025-05-04T07:58:59.455Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":267,"count":3,"taskIds":[738,739,740],"taskTypes":["company_kyb","ky3p","open_banking"]}
[Task Progress] Calculated progress for task 738 (company_kyb): 0/30 = 0%
[2025-05-04T07:58:59.532Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":738,"taskType":"company_kyb","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T07:58:59.532Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T07:58:59.532Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":738,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T07:58:59.567Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":738,"taskType":"company_kyb","progress":0,"status":"not_started"}
[2025-05-04T07:58:59.568Z] [DEBUG] Broadcasting task update with object format {"taskId":738,"status":"not_started"}
[2025-05-04T07:58:59.568Z] [INFO] Successfully retrieved unified WebSocket server for broadcast 
[WebSocket] Broadcast task_update to 2 clients (0 errors) { messageId: 'msg_1746345539568_b4bkkfhh7' }
[2025-05-04T07:58:59.569Z] [INFO] Successfully broadcasted task_update message 
[INFO] [WebSocket] Client connected: client-1746345539593-fzuaczh
[Task Progress] Calculated progress for task 739 (ky3p): 0/120 = 0%
[2025-05-04T07:58:59.650Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":739,"taskType":"ky3p","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T07:58:59.650Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T07:58:59.651Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":739,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[Current Company] Using cached company data: 267
[2025-05-04T07:58:59.682Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":739,"taskType":"ky3p","progress":0,"status":"not_started"}
[2025-05-04T07:58:59.682Z] [DEBUG] Broadcasting task update with object format {"taskId":739,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345539682_fu3biyh90' }
[2025-05-04T07:58:59.682Z] [INFO] Successfully broadcasted task_update message 
7:58:59 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345539593-fzuaczh: {
  type: 'authenticate',
  userId: null,
  companyId: null,
  clientId: 'ws_1746345122289_odxt01k1s',
  timestamp: '2025-05-04T07:58:59.599Z'
}
[INFO] [WebSocket] Authentication from client client-1746345539593-fzuaczh: { userId: null, companyId: null, hasToken: true }
[Task Progress] Calculated progress for task 740 (open_banking): 0/44 = 0%
[2025-05-04T07:58:59.751Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":740,"taskType":"open_banking","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T07:58:59.751Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T07:58:59.751Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":740,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T07:58:59.782Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":740,"taskType":"open_banking","progress":0,"status":"not_started"}
[2025-05-04T07:58:59.782Z] [DEBUG] Broadcasting task update with object format {"taskId":740,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345539782_j2ql0uwwk' }
[2025-05-04T07:58:59.783Z] [INFO] Successfully broadcasted task_update message 
[2025-05-04T07:58:59.783Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":267,"count":3}
[Tasks] Successfully unlocked all tasks for company: 267
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 310',
    condition2: 'tasks.created_by = 310',
    condition3: "tasks.company_id = 267 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('12@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
7:58:59 AM [info] GET /api/tasks 200 in 485ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
7:59:00 AM [info] GET /api/tasks 304 in 32ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
7:59:02 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T07:59:03.290Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[User Onboarding] Completing onboarding for user: 310
[User Onboarding] Updated user onboarding status: { id: 310, onboarding_completed: true }
7:59:03 AM [info] POST /api/user/complete-onboarding 200 in 62ms :: {"id":310,"email":"12@e.com","full_name":"John Doe","first_name":"John","last...
[Auth] Returning user session data
7:59:03 AM [info] GET /api/tasks 304 in 33ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
7:59:03 AM [info] GET /api/tasks 304 in 34ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
7:59:05 AM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
7:59:08 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
7:59:11 AM [info] GET /api/companies/current 304 in 37ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
7:59:14 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
7:59:17 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
7:59:18 AM [info] GET /api/tasks 304 in 32ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
7:59:20 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T07:59:23.290Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[Current Company] Using cached company data: 267
7:59:23 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
7:59:26 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
7:59:29 AM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
7:59:32 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 310, company_id: 267, email: '12@e.com' }
[2025-05-04T07:59:34.063Z] [INFO] Performing dynamic task unlocking check for company {"companyId":267,"userId":310}
[2025-05-04T07:59:34.093Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":267}
[Tasks] Automatically unlocking all tasks for company { userId: 310, companyId: 267, requestedBy: 'automatic_task_unlock' }
[2025-05-04T07:59:34.094Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":267}
[2025-05-04T07:59:34.125Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":267,"count":3,"taskIds":[738,739,740],"taskTypes":["company_kyb","ky3p","open_banking"]}
[Task Progress] Calculated progress for task 738 (company_kyb): 0/30 = 0%
[2025-05-04T07:59:34.186Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":738,"taskType":"company_kyb","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T07:59:34.186Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T07:59:34.186Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":738,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T07:59:34.218Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":738,"taskType":"company_kyb","progress":0,"status":"not_started"}
[2025-05-04T07:59:34.219Z] [DEBUG] Broadcasting task update with object format {"taskId":738,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345574219_g6yp198kk' }
[2025-05-04T07:59:34.219Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 739 (ky3p): 0/120 = 0%
[2025-05-04T07:59:34.279Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":739,"taskType":"ky3p","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T07:59:34.279Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T07:59:34.279Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":739,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T07:59:34.311Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":739,"taskType":"ky3p","progress":0,"status":"not_started"}
[2025-05-04T07:59:34.311Z] [DEBUG] Broadcasting task update with object format {"taskId":739,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345574311_4jpg1uv0o' }
[2025-05-04T07:59:34.311Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 740 (open_banking): 0/44 = 0%
[2025-05-04T07:59:34.373Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":740,"taskType":"open_banking","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T07:59:34.373Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T07:59:34.373Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":740,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T07:59:34.404Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":740,"taskType":"open_banking","progress":0,"status":"not_started"}
[2025-05-04T07:59:34.405Z] [DEBUG] Broadcasting task update with object format {"taskId":740,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345574405_xm03ucf41' }
[2025-05-04T07:59:34.405Z] [INFO] Successfully broadcasted task_update message 
[2025-05-04T07:59:34.405Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":267,"count":3}
[Tasks] Successfully unlocked all tasks for company: 267
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 310',
    condition2: 'tasks.created_by = 310',
    condition3: "tasks.company_id = 267 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('12@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
7:59:34 AM [info] GET /api/tasks 200 in 479ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
7:59:35 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
7:59:38 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
7:59:41 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T07:59:43.290Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
7:59:44 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
7:59:47 AM [info] GET /api/companies/current 304 in 36ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
7:59:49 AM [info] GET /api/tasks 304 in 32ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
7:59:50 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
7:59:53 AM [info] GET /api/companies/current 304 in 36ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
7:59:56 AM [info] GET /api/companies/current 304 in 33ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Fetching company for user: { userId: 310, companyId: 267 }
[Current Company] Found company: {
  id: 267,
  name: 'DevTest12',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
7:59:59 AM [info] GET /api/companies/current 304 in 63ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:00:02 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T08:00:03.290Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 310, company_id: 267, email: '12@e.com' }
[2025-05-04T08:00:04.918Z] [INFO] Performing dynamic task unlocking check for company {"companyId":267,"userId":310}
[2025-05-04T08:00:04.950Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":267}
[Tasks] Automatically unlocking all tasks for company { userId: 310, companyId: 267, requestedBy: 'automatic_task_unlock' }
[2025-05-04T08:00:04.950Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":267}
[2025-05-04T08:00:04.986Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":267,"count":3,"taskIds":[739,740,738],"taskTypes":["ky3p","open_banking","company_kyb"]}
[Task Progress] Calculated progress for task 739 (ky3p): 0/120 = 0%
[2025-05-04T08:00:05.049Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":739,"taskType":"ky3p","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:00:05.049Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T08:00:05.050Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":739,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T08:00:05.082Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":739,"taskType":"ky3p","progress":0,"status":"not_started"}
[2025-05-04T08:00:05.082Z] [DEBUG] Broadcasting task update with object format {"taskId":739,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345605082_ybc7ubsz5' }
[2025-05-04T08:00:05.083Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 740 (open_banking): 0/44 = 0%
[2025-05-04T08:00:05.143Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":740,"taskType":"open_banking","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:00:05.143Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T08:00:05.144Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":740,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T08:00:05.175Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":740,"taskType":"open_banking","progress":0,"status":"not_started"}
[2025-05-04T08:00:05.175Z] [DEBUG] Broadcasting task update with object format {"taskId":740,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345605175_ozfb3axe6' }
[2025-05-04T08:00:05.176Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 738 (company_kyb): 0/30 = 0%
[2025-05-04T08:00:05.237Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":738,"taskType":"company_kyb","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:00:05.237Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T08:00:05.237Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":738,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T08:00:05.274Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":738,"taskType":"company_kyb","progress":0,"status":"not_started"}
[2025-05-04T08:00:05.274Z] [DEBUG] Broadcasting task update with object format {"taskId":738,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345605274_r7vp0suee' }
[2025-05-04T08:00:05.274Z] [INFO] Successfully broadcasted task_update message 
[2025-05-04T08:00:05.274Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":267,"count":3}
[Tasks] Successfully unlocked all tasks for company: 267
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 310',
    condition2: 'tasks.created_by = 310',
    condition3: "tasks.company_id = 267 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('12@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
8:00:05 AM [info] GET /api/tasks 200 in 456ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
8:00:05 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:00:08 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:00:11 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:00:14 AM [info] GET /api/companies/current 304 in 35ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:00:17 AM [info] GET /api/companies/current 304 in 33ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:00:20 AM [info] GET /api/companies/current 304 in 33ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:00:20 AM [info] GET /api/tasks 304 in 32ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T08:00:23.290Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
8:00:23 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Using cached company data: 267
8:00:26 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:00:29 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:00:32 AM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
[Current Company] Using cached company data: 267
8:00:35 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 310, company_id: 267, email: '12@e.com' }
[2025-05-04T08:00:35.731Z] [INFO] Performing dynamic task unlocking check for company {"companyId":267,"userId":310}
[2025-05-04T08:00:35.761Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":267}
[Tasks] Automatically unlocking all tasks for company { userId: 310, companyId: 267, requestedBy: 'automatic_task_unlock' }
[2025-05-04T08:00:35.762Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":267}
[2025-05-04T08:00:35.793Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":267,"count":3,"taskIds":[740,738,739],"taskTypes":["open_banking","company_kyb","ky3p"]}
[Task Progress] Calculated progress for task 740 (open_banking): 0/44 = 0%
[2025-05-04T08:00:35.854Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":740,"taskType":"open_banking","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:00:35.854Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T08:00:35.854Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":740,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T08:00:35.886Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":740,"taskType":"open_banking","progress":0,"status":"not_started"}
[2025-05-04T08:00:35.886Z] [DEBUG] Broadcasting task update with object format {"taskId":740,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345635886_clnzbhn62' }
[2025-05-04T08:00:35.886Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 738 (company_kyb): 0/30 = 0%
[2025-05-04T08:00:35.947Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":738,"taskType":"company_kyb","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:00:35.947Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T08:00:35.947Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":738,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T08:00:35.979Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":738,"taskType":"company_kyb","progress":0,"status":"not_started"}
[2025-05-04T08:00:35.979Z] [DEBUG] Broadcasting task update with object format {"taskId":738,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345635979_odlhemiaj' }
[2025-05-04T08:00:35.979Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 739 (ky3p): 0/120 = 0%
[2025-05-04T08:00:36.040Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":739,"taskType":"ky3p","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:00:36.040Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T08:00:36.040Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":739,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T08:00:36.071Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":739,"taskType":"ky3p","progress":0,"status":"not_started"}
[2025-05-04T08:00:36.071Z] [DEBUG] Broadcasting task update with object format {"taskId":739,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345636071_fqg849ao5' }
[2025-05-04T08:00:36.072Z] [INFO] Successfully broadcasted task_update message 
[2025-05-04T08:00:36.072Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":267,"count":3}
[Tasks] Successfully unlocked all tasks for company: 267
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 310',
    condition2: 'tasks.created_by = 310',
    condition3: "tasks.company_id = 267 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('12@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
8:00:36 AM [info] GET /api/tasks 200 in 439ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
8:00:38 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:00:41 AM [info] GET /api/companies/current 304 in 33ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T08:00:43.290Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
8:00:44 AM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:00:47 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:00:50 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] Using cached task data for user: 310
8:00:51 AM [info] GET /api/tasks 304 in 32ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
8:00:53 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Using cached company data: 267
8:00:56 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Fetching company for user: { userId: 310, companyId: 267 }
[Current Company] Found company: {
  id: 267,
  name: 'DevTest12',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
8:00:59 AM [info] GET /api/companies/current 304 in 77ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345539593-fzuaczh: { type: 'ping' }
8:01:02 AM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T08:01:03.290Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
8:01:05 AM [info] GET /api/companies/current 304 in 33ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 310, company_id: 267, email: '12@e.com' }
[2025-05-04T08:01:06.521Z] [INFO] Performing dynamic task unlocking check for company {"companyId":267,"userId":310}
[2025-05-04T08:01:06.552Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":267}
[Tasks] Automatically unlocking all tasks for company { userId: 310, companyId: 267, requestedBy: 'automatic_task_unlock' }
[2025-05-04T08:01:06.553Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":267}
[2025-05-04T08:01:06.586Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":267,"count":3,"taskIds":[738,739,740],"taskTypes":["company_kyb","ky3p","open_banking"]}
[Task Progress] Calculated progress for task 738 (company_kyb): 0/30 = 0%
[2025-05-04T08:01:06.649Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":738,"taskType":"company_kyb","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:01:06.649Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T08:01:06.649Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":738,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T08:01:06.681Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":738,"taskType":"company_kyb","progress":0,"status":"not_started"}
[2025-05-04T08:01:06.681Z] [DEBUG] Broadcasting task update with object format {"taskId":738,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345666681_t92cll2pt' }
[2025-05-04T08:01:06.681Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 739 (ky3p): 0/120 = 0%
[2025-05-04T08:01:06.742Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":739,"taskType":"ky3p","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:01:06.742Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T08:01:06.742Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":739,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T08:01:06.775Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":739,"taskType":"ky3p","progress":0,"status":"not_started"}
[2025-05-04T08:01:06.775Z] [DEBUG] Broadcasting task update with object format {"taskId":739,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345666775_3j7trf6pu' }
[2025-05-04T08:01:06.775Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 740 (open_banking): 0/44 = 0%
[2025-05-04T08:01:06.837Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":740,"taskType":"open_banking","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:01:06.837Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T08:01:06.837Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":740,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T08:01:06.869Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":740,"taskType":"open_banking","progress":0,"status":"not_started"}
[2025-05-04T08:01:06.869Z] [DEBUG] Broadcasting task update with object format {"taskId":740,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345666870_9lwgq3kjj' }
[2025-05-04T08:01:06.870Z] [INFO] Successfully broadcasted task_update message 
[2025-05-04T08:01:06.870Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":267,"count":3}
[Tasks] Successfully unlocked all tasks for company: 267
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 310',
    condition2: 'tasks.created_by = 310',
    condition3: "tasks.company_id = 267 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('12@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
8:01:06 AM [info] GET /api/tasks 200 in 448ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
8:01:08 AM [info] GET /api/companies/current 304 in 36ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:01:11 AM [info] GET /api/companies/current 304 in 46ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:01:14 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:01:17 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:01:20 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:01:22 AM [info] GET /api/tasks 304 in 33ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T08:01:23.289Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
8:01:23 AM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:01:26 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:01:29 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:01:32 AM [info] GET /api/companies/current 304 in 42ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
8:01:35 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 310, company_id: 267, email: '12@e.com' }
[2025-05-04T08:01:37.340Z] [INFO] Performing dynamic task unlocking check for company {"companyId":267,"userId":310}
[2025-05-04T08:01:37.371Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":267}
[Tasks] Automatically unlocking all tasks for company { userId: 310, companyId: 267, requestedBy: 'automatic_task_unlock' }
[2025-05-04T08:01:37.371Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":267}
[2025-05-04T08:01:37.404Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":267,"count":3,"taskIds":[739,740,738],"taskTypes":["ky3p","open_banking","company_kyb"]}
[Task Progress] Calculated progress for task 739 (ky3p): 0/120 = 0%
[2025-05-04T08:01:37.478Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":739,"taskType":"ky3p","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:01:37.478Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T08:01:37.478Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":739,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T08:01:37.510Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":739,"taskType":"ky3p","progress":0,"status":"not_started"}
[2025-05-04T08:01:37.510Z] [DEBUG] Broadcasting task update with object format {"taskId":739,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345697510_ojlqjf7rk' }
[2025-05-04T08:01:37.510Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 740 (open_banking): 0/44 = 0%
[2025-05-04T08:01:37.581Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":740,"taskType":"open_banking","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:01:37.581Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T08:01:37.581Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":740,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T08:01:37.617Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":740,"taskType":"open_banking","progress":0,"status":"not_started"}
[2025-05-04T08:01:37.617Z] [DEBUG] Broadcasting task update with object format {"taskId":740,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345697617_2dgwxaafx' }
[2025-05-04T08:01:37.618Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 738 (company_kyb): 0/30 = 0%
[2025-05-04T08:01:37.683Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":738,"taskType":"company_kyb","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:01:37.683Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T08:01:37.683Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":738,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T08:01:37.716Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":738,"taskType":"company_kyb","progress":0,"status":"not_started"}
[2025-05-04T08:01:37.716Z] [DEBUG] Broadcasting task update with object format {"taskId":738,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345697717_1ai9q2z0n' }
[2025-05-04T08:01:37.717Z] [INFO] Successfully broadcasted task_update message 
[2025-05-04T08:01:37.717Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":267,"count":3}
[Tasks] Successfully unlocked all tasks for company: 267
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 310',
    condition2: 'tasks.created_by = 310',
    condition3: "tasks.company_id = 267 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('12@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
8:01:37 AM [info] GET /api/tasks 200 in 475ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
8:01:38 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:01:41 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[PeriodicTaskReconciliation] Reconciling batch of 10 tasks: [
  683, 685, 679, 691,
  697, 699, 705, 702,
  703, 701
]
[Task Progress] Calculated progress for task 683 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 685 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 679 (open_banking): 44/44 = 100%
[Task Progress] Calculated progress for task 691 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 697 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 699 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 705 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 702 (ky3p): 0/120 = 0%
[Task Progress] Calculated progress for task 703 (open_banking): 0/44 = 0%
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T08:01:43.290Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[Task Progress] Calculated progress for task 701 (company_kyb): 30/30 = 100%
8:01:44 AM [info] GET /api/companies/current 304 in 36ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:01:47 AM [info] GET /api/companies/current 304 in 38ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:01:50 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:01:53 AM [info] GET /api/tasks 304 in 39ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
8:01:53 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:01:56 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Fetching company for user: { userId: 310, companyId: 267 }
[Current Company] Found company: {
  id: 267,
  name: 'DevTest12',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
8:01:59 AM [info] GET /api/companies/current 304 in 64ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:02:02 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T08:02:03.289Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[Tasks] Using cached task data for user: 310
8:02:03 AM [info] GET /api/tasks 304 in 32ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
[Tasks Routes] Fetching task by ID: {
  taskId: 738,
  userCompanyId: 267,
  timestamp: '2025-05-04T08:02:03.695Z'
}
[Tasks Routes] Fetching latest KYB form data for task: 738
8:02:03 AM [info] GET /api/companies/current 304 in 35ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks Routes] No KYB responses found for task 738
[Tasks Routes] Task found by ID: {
  taskId: 738,
  title: '1. KYB Form: DevTest12',
  type: 'company_kyb',
  formDataFields: 0,
  timestamp: '2025-05-04T08:02:03.790Z'
}
8:02:03 AM [info] GET /api/tasks/738 200 in 127ms :: {"id":738,"title":"1. KYB Form: DevTest12","description":"Complete KYB verifi...
[Tasks Routes] Fetching task by ID: {
  taskId: 738,
  userCompanyId: 267,
  timestamp: '2025-05-04T08:02:03.982Z'
}
[Auth] Returning user session data
[Tasks Routes] Fetching latest KYB form data for task: 738
8:02:04 AM [info] GET /api/companies/current 304 in 30ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Task Templates API] Fetching template for task type: company_kyb, user: 310
[Tasks Routes] No KYB responses found for task 738
[Tasks Routes] Task found by ID: {
  taskId: 738,
  title: '1. KYB Form: DevTest12',
  type: 'company_kyb',
  formDataFields: 0,
  timestamp: '2025-05-04T08:02:04.101Z'
}
8:02:04 AM [info] GET /api/tasks/738 304 in 151ms :: {"id":738,"title":"1. KYB Form: DevTest12","description":"Complete KYB verifi...
[Task Templates API] Found template: 1 (KYB Form) for task type: company_kyb
[Task Templates API] Retrieved 9 configuration items for template ID: 1
8:02:04 AM [info] GET /api/task-templates/by-type/company_kyb 304 in 121ms :: {"id":1,"name":"KYB Form","description":"Know Your Business form for company ...
[2025-05-04T08:02:04.376Z] [INFO] Fetching KYB fields 
[2025-05-04T08:02:04.407Z] [INFO] KYB fields retrieved successfully {"fieldCount":30,"groups":["companyProfile","financialProfile","governanceLeadership","operationsCompliance"]}
8:02:04 AM [info] GET /api/kyb/fields 304 in 65ms :: [{"id":1,"field_key":"legalEntityName","display_name":"Legal Entity Name","fi...
[KYB API Debug] Loading progress for task: 738
[Task Reconciliation] Found 0 responses for task 738 (type: company_kyb)
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:02:04.668Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 738,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 738
[KYB API Debug] Retrieved task: {
  taskId: 738,
  status: 'not_started',
  progress: 0,
  metadata: [
    'locked',
    'company_id',
    'created_at',
    'created_via',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for',
    'prerequisite_completed',
    'prerequisite_completed_at'
  ],
  timestamp: '2025-05-04T08:02:04.699Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-05-04T08:02:04.731Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 738,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-05-04T08:02:04.732Z
[SERVER DEBUG] Task ID: 738, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
8:02:04 AM [info] GET /api/kyb/progress/738 200 in 163ms :: {"formData":{},"progress":0,"status":"not_started"}
[KYB API Debug] Loading progress for task: 738
[Task Reconciliation] Found 0 responses for task 738 (type: company_kyb)
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:02:04.977Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 738,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 738
[KYB API Debug] Retrieved task: {
  taskId: 738,
  status: 'not_started',
  progress: 0,
  metadata: [
    'locked',
    'company_id',
    'created_at',
    'created_via',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for',
    'prerequisite_completed',
    'prerequisite_completed_at'
  ],
  timestamp: '2025-05-04T08:02:05.012Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-05-04T08:02:05.048Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 738,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-05-04T08:02:05.048Z
[SERVER DEBUG] Task ID: 738, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
8:02:05 AM [info] GET /api/kyb/progress/738 304 in 176ms :: {"formData":{},"progress":0,"status":"not_started"}
8:02:06 AM [info] GET /api/tasks 304 in 34ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
8:02:06 AM [info] GET /api/companies/current 304 in 36ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:02:07 AM [info] GET /api/tasks 304 in 33ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
8:02:07 AM [info] GET /api/tasks 304 in 32ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
[Tasks Routes] Fetching task by ID: {
  taskId: 738,
  userCompanyId: 267,
  timestamp: '2025-05-04T08:02:08.050Z'
}
[Tasks Routes] Fetching latest KYB form data for task: 738
8:02:08 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks Routes] No KYB responses found for task 738
[Tasks Routes] Task found by ID: {
  taskId: 738,
  title: '1. KYB Form: DevTest12',
  type: 'company_kyb',
  formDataFields: 0,
  timestamp: '2025-05-04T08:02:08.140Z'
}
8:02:08 AM [info] GET /api/tasks/738 304 in 121ms :: {"id":738,"title":"1. KYB Form: DevTest12","description":"Complete KYB verifi...
[Task Templates API] Fetching template for task type: company_kyb, user: 310
[Task Templates API] Found template: 1 (KYB Form) for task type: company_kyb
8:02:08 AM [info] GET /api/companies/current 304 in 33ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Task Templates API] Retrieved 9 configuration items for template ID: 1
8:02:08 AM [info] GET /api/task-templates/by-type/company_kyb 304 in 92ms :: {"id":1,"name":"KYB Form","description":"Know Your Business form for company ...
[KYB API Debug] Loading progress for task: 738
[Task Reconciliation] Found 0 responses for task 738 (type: company_kyb)
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:02:08.642Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 738,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 738
[KYB API Debug] Retrieved task: {
  taskId: 738,
  status: 'not_started',
  progress: 0,
  metadata: [
    'locked',
    'company_id',
    'created_at',
    'created_via',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for',
    'prerequisite_completed',
    'prerequisite_completed_at'
  ],
  timestamp: '2025-05-04T08:02:08.674Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-05-04T08:02:08.704Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 738,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-05-04T08:02:08.704Z
[SERVER DEBUG] Task ID: 738, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
8:02:08 AM [info] GET /api/kyb/progress/738 304 in 158ms :: {"formData":{},"progress":0,"status":"not_started"}
[KYB API Debug] Loading progress for task: 738
[Task Reconciliation] Found 0 responses for task 738 (type: company_kyb)
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:02:08.945Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 738,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 738
[KYB API Debug] Retrieved task: {
  taskId: 738,
  status: 'not_started',
  progress: 0,
  metadata: [
    'locked',
    'company_id',
    'created_at',
    'created_via',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for',
    'prerequisite_completed',
    'prerequisite_completed_at'
  ],
  timestamp: '2025-05-04T08:02:08.974Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-05-04T08:02:09.006Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 738,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-05-04T08:02:09.006Z
[SERVER DEBUG] Task ID: 738, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
8:02:09 AM [info] GET /api/kyb/progress/738 304 in 151ms :: {"formData":{},"progress":0,"status":"not_started"}
8:02:11 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-04T08:02:12.400Z] [INFO] Demo auto-fill requested for KYB task (GET) {"taskId":738,"userId":310}
[2025-05-04T08:02:12.400Z] [INFO] Generating demo data {"taskId":738,"formType":"kyb","userId":310}
[2025-05-04T08:02:12.531Z] [INFO] Retrieved fields for demo auto-fill {"count":30}
[2025-05-04T08:02:12.532Z] [INFO] Successfully generated demo data {"taskId":738,"formType":"kyb","fieldCount":30}
[2025-05-04T08:02:12.532Z] [INFO] Generated demo data for KYB auto-fill using universal service {"fieldCount":30,"taskId":738}
8:02:12 AM [info] GET /api/kyb/demo-autofill/738 200 in 165ms :: {"legalEntityName":"DevTest12","registrationNumber":"12-3456789","incorporati...
[TimestampHandler] Saving 30 timestamps for task 738
[TimestampHandler] Successfully saved timestamps for task 738
[TimestampAPI] Saved 30 timestamps for task 738
8:02:13 AM [info] POST /api/kyb/timestamps/738 200 in 81ms :: {"message":"Timestamps saved successfully","count":30}
===============================================
[SERVER DEBUG] KYB PROGRESS SAVE REQUEST RECEIVED at 2025-05-04T08:02:13.465Z
===============================================
Task ID: 738
Progress: 100
Status: ready_for_submission
Field count: 30
Sample form data values:
- legalEntityName: "DevTest12" (string)
- registrationNumber: "12-3456789" (string)
- incorporationDate: "5/12/2010" (string)
- businessType: "Limited Liability Company (LLC)" (string)
- jurisdiction: "Delaware, United States" (string)
Request details:
- Method: POST
- Content-Type: application/json
- Content-Length: 2506
===============================================
===============================================
[SERVER DEBUG] PROCESSING FORM DATA FIELDS AT 2025-05-04T08:02:13.541Z
[SERVER DEBUG] Task ID: 738, Field count: 30
===============================================
[SERVER DEBUG] COMPLETE FORM DATA DUMP:
[SERVER DEBUG] legalEntityName: "DevTest12" (string)
[SERVER DEBUG] registrationNumber: "12-3456789" (string)
[SERVER DEBUG] incorporationDate: "5/12/2010" (string)
[SERVER DEBUG] businessType: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] jurisdiction: "Delaware, United States" (string)
[SERVER DEBUG] registeredAddress: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] companyPhone: "(302) 555-1234" (string)
[SERVER DEBUG] priorNames: "None" (string)
[SERVER DEBUG] licenses: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] goodStanding: "Yes" (string)
[SERVER DEBUG] corporateRegistration: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010" (string)
[SERVER DEBUG] externalAudit: "No" (string)
[SERVER DEBUG] controlEnvironment: "Yes" (string)
[SERVER DEBUG] authorizedSigners: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] governmentOwnership: "No" (string)
[SERVER DEBUG] ultimateBeneficialOwners: "None" (string)
[SERVER DEBUG] directorsAndOfficers: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] contactEmail: "12@e.com" (string)
[SERVER DEBUG] marketCapitalization: "$75 million (privately held)" (string)
[SERVER DEBUG] lifetimeCustomerValue: "$1,250" (string)
[SERVER DEBUG] annualRecurringRevenue: "5,000,000" (string)
[SERVER DEBUG] monthlyRecurringRevenue: "12,500,000" (string)
[SERVER DEBUG] investigationsIncidents: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] financialStatements: "Yes" (string)
[SERVER DEBUG] operationalPolicies: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] dataVolume: "Approximately 2 million records per month" (string)
[SERVER DEBUG] dataTypes: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] sanctionsCheck: "Approximately 2 million records per month" (string)
[SERVER DEBUG] dueDiligence: "Yes" (string)
[SERVER DEBUG] regulatoryActions: "Yes" (string)
[SERVER DEBUG] END OF FORM DATA DUMP
[SERVER DEBUG] No fields with value "asdf" found in incoming data
[SERVER DEBUG] Processing field: "legalEntityName" (ID: 1)
[SERVER DEBUG] Original value: DevTest12
[SERVER DEBUG] Normalized value: "DevTest12" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "legalEntityName"
[SERVER DEBUG] - Value: "DevTest12" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "legalEntityName":
[SERVER DEBUG] - Expected: "DevTest12"
[SERVER DEBUG] - Actual: "DevTest12"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "legalEntityName"
[SERVER DEBUG] Broadcasting legalEntityName insert via WebSocket: "DevTest12"
[WebSocket] Broadcast field_update to 3 clients (0 errors) { messageId: 'msg_1746345733645_u6ivrn3mj' }
[2025-05-04T08:02:13.645Z] [INFO] Successfully broadcasted field_update message 
[Progress Utils] Broadcasting field update for task 738, field legalEntityName: {
  value: 'DevTest12',
  fieldId: 1,
  timestamp: '2025-05-04T08:02:13.645Z'
}
[SERVER DEBUG] --- Finished processing field "legalEntityName" ---

[SERVER DEBUG] Processing field: "registrationNumber" (ID: 2)
[SERVER DEBUG] Original value: 12-3456789
[SERVER DEBUG] Normalized value: "12-3456789" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "registrationNumber"
[SERVER DEBUG] - Value: "12-3456789" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "registrationNumber":
[SERVER DEBUG] - Expected: "12-3456789"
[SERVER DEBUG] - Actual: "12-3456789"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "registrationNumber"
[SERVER DEBUG] --- Finished processing field "registrationNumber" ---

[SERVER DEBUG] Processing field: "incorporationDate" (ID: 3)
[SERVER DEBUG] Original value: 5/12/2010
[SERVER DEBUG] Normalized value: "5/12/2010" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "incorporationDate"
[SERVER DEBUG] - Value: "5/12/2010" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "incorporationDate":
[SERVER DEBUG] - Expected: "5/12/2010"
[SERVER DEBUG] - Actual: "5/12/2010"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "incorporationDate"
[SERVER DEBUG] --- Finished processing field "incorporationDate" ---

[SERVER DEBUG] Processing field: "businessType" (ID: 4)
[SERVER DEBUG] Original value: Limited Liability Company (LLC)
[SERVER DEBUG] Normalized value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "businessType"
[SERVER DEBUG] - Value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "businessType":
[SERVER DEBUG] - Expected: "Limited Liability Company (LLC)"
[SERVER DEBUG] - Actual: "Limited Liability Company (LLC)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "businessType"
[SERVER DEBUG] --- Finished processing field "businessType" ---

[SERVER DEBUG] Processing field: "jurisdiction" (ID: 5)
[SERVER DEBUG] Original value: Delaware, United States
[SERVER DEBUG] Normalized value: "Delaware, United States" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "jurisdiction"
[SERVER DEBUG] - Value: "Delaware, United States" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "jurisdiction":
[SERVER DEBUG] - Expected: "Delaware, United States"
[SERVER DEBUG] - Actual: "Delaware, United States"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "jurisdiction"
[SERVER DEBUG] --- Finished processing field "jurisdiction" ---

[SERVER DEBUG] Processing field: "registeredAddress" (ID: 6)
[SERVER DEBUG] Original value: 123 Market Street, Wilmington, DE 19801
[SERVER DEBUG] Normalized value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "registeredAddress"
[SERVER DEBUG] - Value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "registeredAddress":
[SERVER DEBUG] - Expected: "123 Market Street, Wilmington, DE 19801"
[SERVER DEBUG] - Actual: "123 Market Street, Wilmington, DE 19801"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "registeredAddress"
[SERVER DEBUG] --- Finished processing field "registeredAddress" ---

[SERVER DEBUG] Processing field: "companyPhone" (ID: 7)
[SERVER DEBUG] Original value: (302) 555-1234
[SERVER DEBUG] Normalized value: "(302) 555-1234" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "companyPhone"
[SERVER DEBUG] - Value: "(302) 555-1234" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "companyPhone":
[SERVER DEBUG] - Expected: "(302) 555-1234"
[SERVER DEBUG] - Actual: "(302) 555-1234"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "companyPhone"
[SERVER DEBUG] --- Finished processing field "companyPhone" ---

[SERVER DEBUG] Processing field: "priorNames" (ID: 8)
[SERVER DEBUG] Original value: None
[SERVER DEBUG] Normalized value: "None" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "priorNames"
[SERVER DEBUG] - Value: "None" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "priorNames":
[SERVER DEBUG] - Expected: "None"
[SERVER DEBUG] - Actual: "None"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "priorNames"
[SERVER DEBUG] --- Finished processing field "priorNames" ---

[SERVER DEBUG] Processing field: "licenses" (ID: 9)
[SERVER DEBUG] Original value: Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765
[SERVER DEBUG] Normalized value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "licenses"
[SERVER DEBUG] - Value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] - Status: COMPLETE
8:02:14 AM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "licenses":
[SERVER DEBUG] - Expected: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] - Actual: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "licenses"
[SERVER DEBUG] --- Finished processing field "licenses" ---

[SERVER DEBUG] Processing field: "goodStanding" (ID: 10)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "goodStanding"
[SERVER DEBUG] - Value: "Yes" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "goodStanding":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "goodStanding"
[SERVER DEBUG] --- Finished processing field "goodStanding" ---

[SERVER DEBUG] Processing field: "corporateRegistration" (ID: 11)
[SERVER DEBUG] Original value: Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010
[SERVER DEBUG] Normalized value: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "corporateRegistration"
[SERVER DEBUG] - Value: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "corporateRegistration":
[SERVER DEBUG] - Expected: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010"
[SERVER DEBUG] - Actual: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "corporateRegistration"
[SERVER DEBUG] --- Finished processing field "corporateRegistration" ---

[SERVER DEBUG] Processing field: "externalAudit" (ID: 12)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "externalAudit"
[SERVER DEBUG] - Value: "No" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "externalAudit":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "externalAudit"
[SERVER DEBUG] --- Finished processing field "externalAudit" ---

[SERVER DEBUG] Processing field: "controlEnvironment" (ID: 13)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "controlEnvironment"
[SERVER DEBUG] - Value: "Yes" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "controlEnvironment":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "controlEnvironment"
[SERVER DEBUG] --- Finished processing field "controlEnvironment" ---

[SERVER DEBUG] Processing field: "authorizedSigners" (ID: 14)
[SERVER DEBUG] Original value: John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)
[SERVER DEBUG] Normalized value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "authorizedSigners"
[SERVER DEBUG] - Value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "authorizedSigners":
[SERVER DEBUG] - Expected: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] - Actual: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "authorizedSigners"
[SERVER DEBUG] --- Finished processing field "authorizedSigners" ---

[SERVER DEBUG] Processing field: "governmentOwnership" (ID: 15)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "governmentOwnership"
[SERVER DEBUG] - Value: "No" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "governmentOwnership":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "governmentOwnership"
[SERVER DEBUG] --- Finished processing field "governmentOwnership" ---

[SERVER DEBUG] Processing field: "ultimateBeneficialOwners" (ID: 16)
[SERVER DEBUG] Original value: None
[SERVER DEBUG] Normalized value: "None" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "ultimateBeneficialOwners"
[SERVER DEBUG] - Value: "None" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "ultimateBeneficialOwners":
[SERVER DEBUG] - Expected: "None"
[SERVER DEBUG] - Actual: "None"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "ultimateBeneficialOwners"
[SERVER DEBUG] --- Finished processing field "ultimateBeneficialOwners" ---

[SERVER DEBUG] Processing field: "directorsAndOfficers" (ID: 17)
[SERVER DEBUG] Original value: John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)
[SERVER DEBUG] Normalized value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "directorsAndOfficers"
[SERVER DEBUG] - Value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "directorsAndOfficers":
[SERVER DEBUG] - Expected: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] - Actual: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "directorsAndOfficers"
[SERVER DEBUG] --- Finished processing field "directorsAndOfficers" ---

[SERVER DEBUG] Processing field: "contactEmail" (ID: 18)
[SERVER DEBUG] Original value: 12@e.com
[SERVER DEBUG] Normalized value: "12@e.com" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "contactEmail"
[SERVER DEBUG] - Value: "12@e.com" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "contactEmail":
[SERVER DEBUG] - Expected: "12@e.com"
[SERVER DEBUG] - Actual: "12@e.com"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "contactEmail"
[SERVER DEBUG] --- Finished processing field "contactEmail" ---

[SERVER DEBUG] Processing field: "marketCapitalization" (ID: 19)
[SERVER DEBUG] Original value: $75 million (privately held)
[SERVER DEBUG] Normalized value: "$75 million (privately held)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "marketCapitalization"
[SERVER DEBUG] - Value: "$75 million (privately held)" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "marketCapitalization":
[SERVER DEBUG] - Expected: "$75 million (privately held)"
[SERVER DEBUG] - Actual: "$75 million (privately held)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "marketCapitalization"
[SERVER DEBUG] --- Finished processing field "marketCapitalization" ---

[SERVER DEBUG] Processing field: "lifetimeCustomerValue" (ID: 20)
[SERVER DEBUG] Original value: $1,250
[SERVER DEBUG] Normalized value: "$1,250" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "lifetimeCustomerValue"
[SERVER DEBUG] - Value: "$1,250" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "lifetimeCustomerValue":
[SERVER DEBUG] - Expected: "$1,250"
[SERVER DEBUG] - Actual: "$1,250"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "lifetimeCustomerValue"
[SERVER DEBUG] --- Finished processing field "lifetimeCustomerValue" ---

[SERVER DEBUG] Processing field: "annualRecurringRevenue" (ID: 21)
[SERVER DEBUG] Original value: 5,000,000
[SERVER DEBUG] Normalized value: "5,000,000" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "annualRecurringRevenue"
[SERVER DEBUG] - Value: "5,000,000" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "annualRecurringRevenue":
[SERVER DEBUG] - Expected: "5,000,000"
[SERVER DEBUG] - Actual: "5,000,000"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "annualRecurringRevenue"
[SERVER DEBUG] --- Finished processing field "annualRecurringRevenue" ---

[SERVER DEBUG] Processing field: "monthlyRecurringRevenue" (ID: 22)
[SERVER DEBUG] Original value: 12,500,000
[SERVER DEBUG] Normalized value: "12,500,000" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "monthlyRecurringRevenue"
[SERVER DEBUG] - Value: "12,500,000" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "monthlyRecurringRevenue":
[SERVER DEBUG] - Expected: "12,500,000"
[SERVER DEBUG] - Actual: "12,500,000"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "monthlyRecurringRevenue"
[SERVER DEBUG] --- Finished processing field "monthlyRecurringRevenue" ---

[SERVER DEBUG] Processing field: "investigationsIncidents" (ID: 23)
[SERVER DEBUG] Original value: No significant incidents in the past 3 years
[SERVER DEBUG] Normalized value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "investigationsIncidents"
[SERVER DEBUG] - Value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "investigationsIncidents":
[SERVER DEBUG] - Expected: "No significant incidents in the past 3 years"
[SERVER DEBUG] - Actual: "No significant incidents in the past 3 years"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "investigationsIncidents"
[SERVER DEBUG] --- Finished processing field "investigationsIncidents" ---

[SERVER DEBUG] Processing field: "financialStatements" (ID: 24)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "financialStatements"
[SERVER DEBUG] - Value: "Yes" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "financialStatements":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "financialStatements"
[SERVER DEBUG] --- Finished processing field "financialStatements" ---

[SERVER DEBUG] Processing field: "operationalPolicies" (ID: 25)
[SERVER DEBUG] Original value: ISO 27001 certified, SOC 2 Type II compliant
[SERVER DEBUG] Normalized value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "operationalPolicies"
[SERVER DEBUG] - Value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "operationalPolicies":
[SERVER DEBUG] - Expected: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] - Actual: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "operationalPolicies"
[SERVER DEBUG] --- Finished processing field "operationalPolicies" ---

[SERVER DEBUG] Processing field: "dataVolume" (ID: 26)
[SERVER DEBUG] Original value: Approximately 2 million records per month
[SERVER DEBUG] Normalized value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "dataVolume"
[SERVER DEBUG] - Value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "dataVolume":
[SERVER DEBUG] - Expected: "Approximately 2 million records per month"
[SERVER DEBUG] - Actual: "Approximately 2 million records per month"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "dataVolume"
[SERVER DEBUG] --- Finished processing field "dataVolume" ---

[SERVER DEBUG] Processing field: "dataTypes" (ID: 27)
[SERVER DEBUG] Original value: Financial transaction data, Account balances, Customer KYC information
[SERVER DEBUG] Normalized value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "dataTypes"
[SERVER DEBUG] - Value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "dataTypes":
[SERVER DEBUG] - Expected: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] - Actual: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "dataTypes"
[SERVER DEBUG] --- Finished processing field "dataTypes" ---

[SERVER DEBUG] Processing field: "sanctionsCheck" (ID: 28)
[SERVER DEBUG] Original value: Approximately 2 million records per month
[SERVER DEBUG] Normalized value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "sanctionsCheck"
[SERVER DEBUG] - Value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "sanctionsCheck":
[SERVER DEBUG] - Expected: "Approximately 2 million records per month"
[SERVER DEBUG] - Actual: "Approximately 2 million records per month"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "sanctionsCheck"
[SERVER DEBUG] --- Finished processing field "sanctionsCheck" ---

[SERVER DEBUG] Processing field: "dueDiligence" (ID: 29)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "dueDiligence"
[SERVER DEBUG] - Value: "Yes" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "dueDiligence":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "dueDiligence"
[SERVER DEBUG] --- Finished processing field "dueDiligence" ---

[SERVER DEBUG] Processing field: "regulatoryActions" (ID: 30)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "regulatoryActions"
[SERVER DEBUG] - Value: "Yes" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "regulatoryActions":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "regulatoryActions"
[SERVER DEBUG] --- Finished processing field "regulatoryActions" ---

[KYB API Debug] Using client-provided status: ready_for_submission
[WebSocket] Broadcasting task update for task 738: progress=100, status=ready_for_submission
[Progress Broadcast broadcast-1746345736565-832] Broadcasting progress update for task 738: {
  taskId: 738,
  progress: 100,
  status: 'ready_for_submission',
  timestamp: '2025-05-04T08:02:16.565Z',
  source: 'at <anonymous> (/home/runner/workspace/server/routes/kyb.ts:1176:7)',
  hasMetadata: true
}
[Progress Utils] Broadcasting task progress update: {
  taskId: 738,
  progress: 100,
  requestedStatus: 'ready_for_submission',
  finalStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  timestamp: '2025-05-04T08:02:16.576Z'
}
[Progress Utils] Error tracking progress broadcast: ReferenceError: require is not defined
    at broadcastProgressUpdate (/home/runner/workspace/server/utils/progress.ts:749:40)
    at <anonymous> (/home/runner/workspace/server/routes/kyb.ts:1176:7)
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345736577_cq9n8wnhl' }
[2025-05-04T08:02:16.578Z] [INFO] Successfully broadcasted task_update message 
[Progress Broadcast broadcast-1746345736565-832] Successfully broadcast progress update for task 738
===============================================
[SERVER DEBUG] PREPARING RESPONSE at 2025-05-04T08:02:16.610Z
[SERVER DEBUG] Found 30 fields in database after update
===============================================
[SERVER DEBUG] Checking field corporateRegistration in updated data: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010"
[SERVER DEBUG] Checking field goodStanding in updated data: "Yes"
[SERVER DEBUG] Checking field regulatoryActions in updated data: "Yes"
[SERVER DEBUG] Checking field investigationsIncidents in updated data: "No significant incidents in the past 3 years"
[SERVER DEBUG] No fields with value "asdf" found in response data
[SERVER DEBUG] Sending response with 30 fields, status: ready_for_submission, progress: 100%
[KYB API] 🔑 PRE-UNLOCK: Unlocking File Vault tab for company during ready_for_submission
[KYB API] ✅ File vault tab unlocked in database when form reached ready_for_submission
[WebSocket] Broadcast company_tabs_update to 3 clients (0 errors) { messageId: 'msg_1746345736700_bkujaitai' }
[2025-05-04T08:02:16.700Z] [INFO] Successfully broadcasted company_tabs_update message 
[WebSocket] Broadcast company_tabs_updated to 3 clients (0 errors) { messageId: 'msg_1746345736700_ik3ha8u6t' }
[2025-05-04T08:02:16.701Z] [INFO] Successfully broadcasted company_tabs_updated message 
[WebSocket] Broadcast sidebar_refresh_tabs to 3 clients (0 errors) { messageId: 'msg_1746345736701_dzak7udnx' }
[2025-05-04T08:02:16.701Z] [INFO] Successfully broadcasted sidebar_refresh_tabs message 
[KYB API] 📣 Successfully broadcasted tab update for ready_for_submission
[SERVER DEBUG] Updating task.savedFormData to ensure persistence across navigation
[SERVER DEBUG] ✅ Successfully updated task.savedFormData with latest form data
===============================================
8:02:16 AM [info] POST /api/kyb/progress 200 in 3299ms :: {"success":true,"savedData":{"progress":100,"status":"ready_for_submission","...
8:02:17 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[WebSocket] Broadcast company_tabs_updated to 3 clients (0 errors) { messageId: 'msg_1746345737701_tacqxruap' }
[2025-05-04T08:02:17.701Z] [INFO] Successfully broadcasted company_tabs_updated message 
[TimestampHandler] Saving 30 timestamps for task 738
[TimestampHandler] Successfully saved timestamps for task 738
[TimestampAPI] Saved 30 timestamps for task 738
8:02:17 AM [info] POST /api/kyb/timestamps/738 200 in 65ms :: {"message":"Timestamps saved successfully","count":30}
===============================================
[SERVER DEBUG] KYB PROGRESS SAVE REQUEST RECEIVED at 2025-05-04T08:02:17.939Z
===============================================
Task ID: 738
Progress: 100
Status: ready_for_submission
Field count: 30
Sample form data values:
- legalEntityName: "DevTest12" (string)
- registrationNumber: "12-3456789" (string)
- incorporationDate: "5/12/2010" (string)
- businessType: "Limited Liability Company (LLC)" (string)
- jurisdiction: "Delaware, United States" (string)
Request details:
- Method: POST
- Content-Type: application/json
- Content-Length: 2506
===============================================
===============================================
[SERVER DEBUG] PROCESSING FORM DATA FIELDS AT 2025-05-04T08:02:18.000Z
[SERVER DEBUG] Task ID: 738, Field count: 30
===============================================
[SERVER DEBUG] COMPLETE FORM DATA DUMP:
[SERVER DEBUG] legalEntityName: "DevTest12" (string)
[SERVER DEBUG] registrationNumber: "12-3456789" (string)
[SERVER DEBUG] incorporationDate: "5/12/2010" (string)
[SERVER DEBUG] businessType: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] jurisdiction: "Delaware, United States" (string)
[SERVER DEBUG] registeredAddress: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] companyPhone: "(302) 555-1234" (string)
[SERVER DEBUG] priorNames: "None" (string)
[SERVER DEBUG] licenses: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] goodStanding: "Yes" (string)
[SERVER DEBUG] corporateRegistration: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010" (string)
[SERVER DEBUG] externalAudit: "No" (string)
[SERVER DEBUG] controlEnvironment: "Yes" (string)
[SERVER DEBUG] authorizedSigners: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] governmentOwnership: "No" (string)
[SERVER DEBUG] ultimateBeneficialOwners: "None" (string)
[SERVER DEBUG] directorsAndOfficers: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] contactEmail: "12@e.com" (string)
[SERVER DEBUG] marketCapitalization: "$75 million (privately held)" (string)
[SERVER DEBUG] lifetimeCustomerValue: "$1,250" (string)
[SERVER DEBUG] annualRecurringRevenue: "5,000,000" (string)
[SERVER DEBUG] monthlyRecurringRevenue: "12,500,000" (string)
[SERVER DEBUG] investigationsIncidents: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] financialStatements: "Yes" (string)
[SERVER DEBUG] operationalPolicies: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] dataVolume: "Approximately 2 million records per month" (string)
[SERVER DEBUG] dataTypes: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] sanctionsCheck: "Approximately 2 million records per month" (string)
[SERVER DEBUG] dueDiligence: "Yes" (string)
[SERVER DEBUG] regulatoryActions: "Yes" (string)
[SERVER DEBUG] END OF FORM DATA DUMP
[SERVER DEBUG] No fields with value "asdf" found in incoming data
[SERVER DEBUG] Processing field: "legalEntityName" (ID: 1)
[SERVER DEBUG] Original value: DevTest12
[SERVER DEBUG] Normalized value: "DevTest12" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "legalEntityName" in database
[SERVER DEBUG] - Old value: "DevTest12" (string)
[SERVER DEBUG] - New value: "DevTest12" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: legalEntityName
[SERVER DEBUG] - field_id: 1
[SERVER DEBUG] - response_value: "DevTest12"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "legalEntityName":
[SERVER DEBUG] - Expected: "DevTest12"
[SERVER DEBUG] - Actual: "DevTest12"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "legalEntityName" (ID: 6193)
[SERVER DEBUG] Broadcasting legalEntityName update via WebSocket: "DevTest12"
[WebSocket] Broadcast field_update to 3 clients (0 errors) { messageId: 'msg_1746345738195_8aqbz93bd' }
[2025-05-04T08:02:18.195Z] [INFO] Successfully broadcasted field_update message 
[Progress Utils] Broadcasting field update for task 738, field legalEntityName: {
  value: 'DevTest12',
  fieldId: 1,
  timestamp: '2025-05-04T08:02:18.195Z'
}
[SERVER DEBUG] --- Finished processing field "legalEntityName" ---

[SERVER DEBUG] Processing field: "registrationNumber" (ID: 2)
[SERVER DEBUG] Original value: 12-3456789
[SERVER DEBUG] Normalized value: "12-3456789" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "registrationNumber" in database
[SERVER DEBUG] - Old value: "12-3456789" (string)
[SERVER DEBUG] - New value: "12-3456789" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: registrationNumber
[SERVER DEBUG] - field_id: 2
[SERVER DEBUG] - response_value: "12-3456789"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "registrationNumber":
[SERVER DEBUG] - Expected: "12-3456789"
[SERVER DEBUG] - Actual: "12-3456789"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "registrationNumber" (ID: 6194)
[SERVER DEBUG] --- Finished processing field "registrationNumber" ---

[SERVER DEBUG] Processing field: "incorporationDate" (ID: 3)
[SERVER DEBUG] Original value: 5/12/2010
[SERVER DEBUG] Normalized value: "5/12/2010" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "incorporationDate" in database
[SERVER DEBUG] - Old value: "5/12/2010" (string)
[SERVER DEBUG] - New value: "5/12/2010" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: incorporationDate
[SERVER DEBUG] - field_id: 3
[SERVER DEBUG] - response_value: "5/12/2010"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "incorporationDate":
[SERVER DEBUG] - Expected: "5/12/2010"
[SERVER DEBUG] - Actual: "5/12/2010"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "incorporationDate" (ID: 6195)
[SERVER DEBUG] --- Finished processing field "incorporationDate" ---

[SERVER DEBUG] Processing field: "businessType" (ID: 4)
[SERVER DEBUG] Original value: Limited Liability Company (LLC)
[SERVER DEBUG] Normalized value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "businessType" in database
[SERVER DEBUG] - Old value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] - New value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: businessType
[SERVER DEBUG] - field_id: 4
[SERVER DEBUG] - response_value: "Limited Liability Company (LLC)"
[Tasks Routes] Updating task progress: { taskId: 738, timestamp: '2025-05-04T08:02:18.442Z' }
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 310, company_id: 267, email: '12@e.com' }
[2025-05-04T08:02:18.466Z] [INFO] Performing dynamic task unlocking check for company {"companyId":267,"userId":310}
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "businessType":
[SERVER DEBUG] - Expected: "Limited Liability Company (LLC)"
[SERVER DEBUG] - Actual: "Limited Liability Company (LLC)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "businessType" (ID: 6196)
[SERVER DEBUG] --- Finished processing field "businessType" ---

[SERVER DEBUG] Processing field: "jurisdiction" (ID: 5)
[SERVER DEBUG] Original value: Delaware, United States
[SERVER DEBUG] Normalized value: "Delaware, United States" (string)
[SERVER DEBUG] Field status: COMPLETE
8:02:18 AM [info] GET /api/companies/current 304 in 48ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-04T08:02:18.501Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":267}
[Tasks] Automatically unlocking all tasks for company { userId: 310, companyId: 267, requestedBy: 'automatic_task_unlock' }
[2025-05-04T08:02:18.502Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":267}
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "jurisdiction" in database
[SERVER DEBUG] - Old value: "Delaware, United States" (string)
[SERVER DEBUG] - New value: "Delaware, United States" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: jurisdiction
[SERVER DEBUG] - field_id: 5
[SERVER DEBUG] - response_value: "Delaware, United States"
[Task Reconciliation] Found 30 responses for task 738 (type: company_kyb)
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: true,
  timestamp: '2025-05-04T08:02:18.526Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[Task Reconciliation] Progress calculation: {
  taskId: 738,
  currentProgress: 100,
  calculatedProgress: 100,
  currentStatus: 'ready_for_submission',
  calculatedStatus: 'ready_for_submission',
  responseCount: 30,
  completeCount: 30
}
[Task Reconciliation] Correcting task 738: {
  progressFrom: 100,
  progressTo: 100,
  statusFrom: 'ready_for_submission',
  statusTo: 'ready_for_submission',
  forceUpdate: true
}
[2025-05-04T08:02:18.533Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":267,"count":3,"taskIds":[740,738,739],"taskTypes":["open_banking","company_kyb","ky3p"]}
[Progress Broadcast broadcast-1746345738557-703] Broadcasting progress update for task 738: {
  taskId: 738,
  progress: 100,
  status: 'ready_for_submission',
  timestamp: '2025-05-04T08:02:18.557Z',
  source: 'at reconcileTaskProgress (/home/runner/workspace/server/utils/task-reconciliation.ts:462:7)',
  hasMetadata: true
}
[Progress Utils] Broadcasting task progress update: {
  taskId: 738,
  progress: 100,
  requestedStatus: 'ready_for_submission',
  finalStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  timestamp: '2025-05-04T08:02:18.562Z'
}
[Progress Utils] Error tracking progress broadcast: ReferenceError: require is not defined
    at broadcastProgressUpdate (/home/runner/workspace/server/utils/progress.ts:749:40)
    at reconcileTaskProgress (/home/runner/workspace/server/utils/task-reconciliation.ts:462:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async <anonymous> (/home/runner/workspace/server/routes/tasks.ts:1105:5)
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345738563_9q438n8ty' }
[2025-05-04T08:02:18.563Z] [INFO] Successfully broadcasted task_update message 
[Progress Broadcast broadcast-1746345738557-703] Successfully broadcast progress update for task 738
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "jurisdiction":
[SERVER DEBUG] - Expected: "Delaware, United States"
[SERVER DEBUG] - Actual: "Delaware, United States"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "jurisdiction" (ID: 6197)
[SERVER DEBUG] --- Finished processing field "jurisdiction" ---

[SERVER DEBUG] Processing field: "registeredAddress" (ID: 6)
[SERVER DEBUG] Original value: 123 Market Street, Wilmington, DE 19801
[SERVER DEBUG] Normalized value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] Field status: COMPLETE
[Tasks Routes] Task progress reconciled: {
  taskId: 738,
  progress: 100,
  status: 'ready_for_submission',
  timestamp: '2025-05-04T08:02:18.594Z'
}
[Task Progress] Calculated progress for task 740 (open_banking): 0/44 = 0%
[2025-05-04T08:02:18.594Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":740,"taskType":"open_banking","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:02:18.595Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T08:02:18.595Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":740,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "registeredAddress" in database
[SERVER DEBUG] - Old value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] - New value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: registeredAddress
[SERVER DEBUG] - field_id: 6
[SERVER DEBUG] - response_value: "123 Market Street, Wilmington, DE 19801"
8:02:18 AM [info] POST /api/tasks/738/update-progress 200 in 183ms :: {"success":true,"progress":100,"status":"ready_for_submission","taskId":738}
[2025-05-04T08:02:18.626Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":740,"taskType":"open_banking","progress":0,"status":"not_started"}
[2025-05-04T08:02:18.626Z] [DEBUG] Broadcasting task update with object format {"taskId":740,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345738626_pefjazddw' }
[2025-05-04T08:02:18.626Z] [INFO] Successfully broadcasted task_update message 
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "registeredAddress":
[SERVER DEBUG] - Expected: "123 Market Street, Wilmington, DE 19801"
[SERVER DEBUG] - Actual: "123 Market Street, Wilmington, DE 19801"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "registeredAddress" (ID: 6198)
[SERVER DEBUG] --- Finished processing field "registeredAddress" ---

[SERVER DEBUG] Processing field: "companyPhone" (ID: 7)
[SERVER DEBUG] Original value: (302) 555-1234
[SERVER DEBUG] Normalized value: "(302) 555-1234" (string)
[SERVER DEBUG] Field status: COMPLETE
[Task Progress] Calculated progress for task 738 (company_kyb): 30/30 = 100%
[2025-05-04T08:02:18.686Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":738,"taskType":"company_kyb","storedProgress":100,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:02:18.687Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T08:02:18.687Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":738,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "companyPhone" in database
[SERVER DEBUG] - Old value: "(302) 555-1234" (string)
[SERVER DEBUG] - New value: "(302) 555-1234" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: companyPhone
[SERVER DEBUG] - field_id: 7
[SERVER DEBUG] - response_value: "(302) 555-1234"
[2025-05-04T08:02:18.718Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":738,"taskType":"company_kyb","progress":100,"status":"ready_for_submission"}
[2025-05-04T08:02:18.718Z] [DEBUG] Broadcasting task update with object format {"taskId":738,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345738718_xnbfuasfh' }
[2025-05-04T08:02:18.719Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 739 (ky3p): 0/120 = 0%
[2025-05-04T08:02:18.780Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":739,"taskType":"ky3p","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:02:18.780Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T08:02:18.780Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":739,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "companyPhone":
[SERVER DEBUG] - Expected: "(302) 555-1234"
[SERVER DEBUG] - Actual: "(302) 555-1234"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "companyPhone" (ID: 6199)
[SERVER DEBUG] --- Finished processing field "companyPhone" ---

[SERVER DEBUG] Processing field: "priorNames" (ID: 8)
[SERVER DEBUG] Original value: None
[SERVER DEBUG] Normalized value: "None" (string)
[SERVER DEBUG] Field status: COMPLETE
[2025-05-04T08:02:18.811Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":739,"taskType":"ky3p","progress":0,"status":"not_started"}
[2025-05-04T08:02:18.811Z] [DEBUG] Broadcasting task update with object format {"taskId":739,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345738811_tnl88e8dn' }
[2025-05-04T08:02:18.812Z] [INFO] Successfully broadcasted task_update message 
[2025-05-04T08:02:18.812Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":267,"count":3}
[Tasks] Successfully unlocked all tasks for company: 267
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "priorNames" in database
[SERVER DEBUG] - Old value: "None" (string)
[SERVER DEBUG] - New value: "None" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: priorNames
[SERVER DEBUG] - field_id: 8
[SERVER DEBUG] - response_value: "None"
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 310',
    condition2: 'tasks.created_by = 310',
    condition3: "tasks.company_id = 267 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('12@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "priorNames":
[SERVER DEBUG] - Expected: "None"
[SERVER DEBUG] - Actual: "None"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "priorNames" (ID: 6200)
[SERVER DEBUG] --- Finished processing field "priorNames" ---

[SERVER DEBUG] Processing field: "licenses" (ID: 9)
[SERVER DEBUG] Original value: Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765
[SERVER DEBUG] Normalized value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] Field status: COMPLETE
8:02:18 AM [info] GET /api/tasks 200 in 440ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "licenses" in database
[SERVER DEBUG] - Old value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] - New value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: licenses
[SERVER DEBUG] - field_id: 9
[SERVER DEBUG] - response_value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "licenses":
[SERVER DEBUG] - Expected: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] - Actual: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "licenses" (ID: 6201)
[SERVER DEBUG] --- Finished processing field "licenses" ---

[SERVER DEBUG] Processing field: "goodStanding" (ID: 10)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "goodStanding" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: goodStanding
[SERVER DEBUG] - field_id: 10
[SERVER DEBUG] - response_value: "Yes"
8:02:19 AM [info] GET /api/tasks 304 in 32ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "goodStanding":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "goodStanding" (ID: 6202)
[SERVER DEBUG] --- Finished processing field "goodStanding" ---

[SERVER DEBUG] Processing field: "corporateRegistration" (ID: 11)
[SERVER DEBUG] Original value: Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010
[SERVER DEBUG] Normalized value: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "corporateRegistration" in database
[SERVER DEBUG] - Old value: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010" (string)
[SERVER DEBUG] - New value: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: corporateRegistration
[SERVER DEBUG] - field_id: 11
[SERVER DEBUG] - response_value: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "corporateRegistration":
[SERVER DEBUG] - Expected: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010"
[SERVER DEBUG] - Actual: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "corporateRegistration" (ID: 6203)
[SERVER DEBUG] --- Finished processing field "corporateRegistration" ---

[SERVER DEBUG] Processing field: "externalAudit" (ID: 12)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "externalAudit" in database
[SERVER DEBUG] - Old value: "No" (string)
[SERVER DEBUG] - New value: "No" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: externalAudit
[SERVER DEBUG] - field_id: 12
[SERVER DEBUG] - response_value: "No"
8:02:19 AM [info] GET /api/tasks 304 in 67ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "externalAudit":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "externalAudit" (ID: 6204)
[SERVER DEBUG] --- Finished processing field "externalAudit" ---

[SERVER DEBUG] Processing field: "controlEnvironment" (ID: 13)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "controlEnvironment" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: controlEnvironment
[SERVER DEBUG] - field_id: 13
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "controlEnvironment":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "controlEnvironment" (ID: 6205)
[SERVER DEBUG] --- Finished processing field "controlEnvironment" ---

[SERVER DEBUG] Processing field: "authorizedSigners" (ID: 14)
[SERVER DEBUG] Original value: John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)
[SERVER DEBUG] Normalized value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "authorizedSigners" in database
[SERVER DEBUG] - Old value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] - New value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: authorizedSigners
[SERVER DEBUG] - field_id: 14
[SERVER DEBUG] - response_value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "authorizedSigners":
[SERVER DEBUG] - Expected: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] - Actual: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "authorizedSigners" (ID: 6206)
[SERVER DEBUG] --- Finished processing field "authorizedSigners" ---

[SERVER DEBUG] Processing field: "governmentOwnership" (ID: 15)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "governmentOwnership" in database
[SERVER DEBUG] - Old value: "No" (string)
[SERVER DEBUG] - New value: "No" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: governmentOwnership
[SERVER DEBUG] - field_id: 15
[SERVER DEBUG] - response_value: "No"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "governmentOwnership":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "governmentOwnership" (ID: 6207)
[SERVER DEBUG] --- Finished processing field "governmentOwnership" ---

[SERVER DEBUG] Processing field: "ultimateBeneficialOwners" (ID: 16)
[SERVER DEBUG] Original value: None
[SERVER DEBUG] Normalized value: "None" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "ultimateBeneficialOwners" in database
[SERVER DEBUG] - Old value: "None" (string)
[SERVER DEBUG] - New value: "None" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: ultimateBeneficialOwners
[SERVER DEBUG] - field_id: 16
[SERVER DEBUG] - response_value: "None"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "ultimateBeneficialOwners":
[SERVER DEBUG] - Expected: "None"
[SERVER DEBUG] - Actual: "None"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "ultimateBeneficialOwners" (ID: 6208)
[SERVER DEBUG] --- Finished processing field "ultimateBeneficialOwners" ---

[SERVER DEBUG] Processing field: "directorsAndOfficers" (ID: 17)
[SERVER DEBUG] Original value: John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)
[SERVER DEBUG] Normalized value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "directorsAndOfficers" in database
[SERVER DEBUG] - Old value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] - New value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: directorsAndOfficers
[SERVER DEBUG] - field_id: 17
[SERVER DEBUG] - response_value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "directorsAndOfficers":
[SERVER DEBUG] - Expected: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] - Actual: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "directorsAndOfficers" (ID: 6209)
[SERVER DEBUG] --- Finished processing field "directorsAndOfficers" ---

[SERVER DEBUG] Processing field: "contactEmail" (ID: 18)
[SERVER DEBUG] Original value: 12@e.com
[SERVER DEBUG] Normalized value: "12@e.com" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "contactEmail" in database
[SERVER DEBUG] - Old value: "12@e.com" (string)
[SERVER DEBUG] - New value: "12@e.com" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: contactEmail
[SERVER DEBUG] - field_id: 18
[SERVER DEBUG] - response_value: "12@e.com"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "contactEmail":
[SERVER DEBUG] - Expected: "12@e.com"
[SERVER DEBUG] - Actual: "12@e.com"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "contactEmail" (ID: 6210)
[SERVER DEBUG] --- Finished processing field "contactEmail" ---

[SERVER DEBUG] Processing field: "marketCapitalization" (ID: 19)
[SERVER DEBUG] Original value: $75 million (privately held)
[SERVER DEBUG] Normalized value: "$75 million (privately held)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "marketCapitalization" in database
[SERVER DEBUG] - Old value: "$75 million (privately held)" (string)
[SERVER DEBUG] - New value: "$75 million (privately held)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: marketCapitalization
[SERVER DEBUG] - field_id: 19
[SERVER DEBUG] - response_value: "$75 million (privately held)"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "marketCapitalization":
[SERVER DEBUG] - Expected: "$75 million (privately held)"
[SERVER DEBUG] - Actual: "$75 million (privately held)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "marketCapitalization" (ID: 6211)
[SERVER DEBUG] --- Finished processing field "marketCapitalization" ---

[SERVER DEBUG] Processing field: "lifetimeCustomerValue" (ID: 20)
[SERVER DEBUG] Original value: $1,250
[SERVER DEBUG] Normalized value: "$1,250" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "lifetimeCustomerValue" in database
[SERVER DEBUG] - Old value: "$1,250" (string)
[SERVER DEBUG] - New value: "$1,250" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: lifetimeCustomerValue
[SERVER DEBUG] - field_id: 20
[SERVER DEBUG] - response_value: "$1,250"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "lifetimeCustomerValue":
[SERVER DEBUG] - Expected: "$1,250"
[SERVER DEBUG] - Actual: "$1,250"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "lifetimeCustomerValue" (ID: 6212)
[SERVER DEBUG] --- Finished processing field "lifetimeCustomerValue" ---

[SERVER DEBUG] Processing field: "annualRecurringRevenue" (ID: 21)
[SERVER DEBUG] Original value: 5,000,000
[SERVER DEBUG] Normalized value: "5,000,000" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "annualRecurringRevenue" in database
[SERVER DEBUG] - Old value: "5,000,000" (string)
[SERVER DEBUG] - New value: "5,000,000" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: annualRecurringRevenue
[SERVER DEBUG] - field_id: 21
[SERVER DEBUG] - response_value: "5,000,000"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "annualRecurringRevenue":
[SERVER DEBUG] - Expected: "5,000,000"
[SERVER DEBUG] - Actual: "5,000,000"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "annualRecurringRevenue" (ID: 6213)
[SERVER DEBUG] --- Finished processing field "annualRecurringRevenue" ---

[SERVER DEBUG] Processing field: "monthlyRecurringRevenue" (ID: 22)
[SERVER DEBUG] Original value: 12,500,000
[SERVER DEBUG] Normalized value: "12,500,000" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "monthlyRecurringRevenue" in database
[SERVER DEBUG] - Old value: "12,500,000" (string)
[SERVER DEBUG] - New value: "12,500,000" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: monthlyRecurringRevenue
[SERVER DEBUG] - field_id: 22
[SERVER DEBUG] - response_value: "12,500,000"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "monthlyRecurringRevenue":
[SERVER DEBUG] - Expected: "12,500,000"
[SERVER DEBUG] - Actual: "12,500,000"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "monthlyRecurringRevenue" (ID: 6214)
[SERVER DEBUG] --- Finished processing field "monthlyRecurringRevenue" ---

[SERVER DEBUG] Processing field: "investigationsIncidents" (ID: 23)
[SERVER DEBUG] Original value: No significant incidents in the past 3 years
[SERVER DEBUG] Normalized value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "investigationsIncidents" in database
[SERVER DEBUG] - Old value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] - New value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: investigationsIncidents
[SERVER DEBUG] - field_id: 23
[SERVER DEBUG] - response_value: "No significant incidents in the past 3 years"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "investigationsIncidents":
[SERVER DEBUG] - Expected: "No significant incidents in the past 3 years"
[SERVER DEBUG] - Actual: "No significant incidents in the past 3 years"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "investigationsIncidents" (ID: 6215)
[SERVER DEBUG] --- Finished processing field "investigationsIncidents" ---

[SERVER DEBUG] Processing field: "financialStatements" (ID: 24)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "financialStatements" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: financialStatements
[SERVER DEBUG] - field_id: 24
[SERVER DEBUG] - response_value: "Yes"
[Tasks Routes] Fetching task by ID: {
  taskId: 739,
  userCompanyId: 267,
  timestamp: '2025-05-04T08:02:20.595Z'
}
[Tasks Routes] Task found by ID: {
  taskId: 739,
  title: '2. S&P KY3P Security Assessment: DevTest12',
  type: 'ky3p',
  formDataFields: 0,
  timestamp: '2025-05-04T08:02:20.624Z'
}
8:02:20 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:02:20 AM [info] GET /api/tasks/739 200 in 60ms :: {"id":739,"title":"2. S&P KY3P Security Assessment: DevTest12","description":...
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "financialStatements":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "financialStatements" (ID: 6216)
[SERVER DEBUG] --- Finished processing field "financialStatements" ---

[SERVER DEBUG] Processing field: "operationalPolicies" (ID: 25)
[SERVER DEBUG] Original value: ISO 27001 certified, SOC 2 Type II compliant
[SERVER DEBUG] Normalized value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "operationalPolicies" in database
[SERVER DEBUG] - Old value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] - New value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: operationalPolicies
[SERVER DEBUG] - field_id: 25
[SERVER DEBUG] - response_value: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "operationalPolicies":
[SERVER DEBUG] - Expected: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] - Actual: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "operationalPolicies" (ID: 6217)
[SERVER DEBUG] --- Finished processing field "operationalPolicies" ---

[SERVER DEBUG] Processing field: "dataVolume" (ID: 26)
[SERVER DEBUG] Original value: Approximately 2 million records per month
[SERVER DEBUG] Normalized value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "dataVolume" in database
[SERVER DEBUG] - Old value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - New value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: dataVolume
[SERVER DEBUG] - field_id: 26
[SERVER DEBUG] - response_value: "Approximately 2 million records per month"
[Tasks Routes] Fetching task by ID: {
  taskId: 739,
  userCompanyId: 267,
  timestamp: '2025-05-04T08:02:20.812Z'
}
[Task Templates API] Fetching template for task type: ky3p, user: 310
[Tasks Routes] Task found by ID: {
  taskId: 739,
  title: '2. S&P KY3P Security Assessment: DevTest12',
  type: 'ky3p',
  formDataFields: 0,
  timestamp: '2025-05-04T08:02:20.843Z'
}
[Task Templates API] Found template: 48 (S&P KY3P Security Assessment) for task type: ky3p
8:02:20 AM [info] GET /api/companies/current 304 in 47ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "dataVolume":
[SERVER DEBUG] - Expected: "Approximately 2 million records per month"
[SERVER DEBUG] - Actual: "Approximately 2 million records per month"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "dataVolume" (ID: 6218)
[SERVER DEBUG] --- Finished processing field "dataVolume" ---

[SERVER DEBUG] Processing field: "dataTypes" (ID: 27)
[SERVER DEBUG] Original value: Financial transaction data, Account balances, Customer KYC information
[SERVER DEBUG] Normalized value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] Field status: COMPLETE
[Task Templates API] Retrieved 10 configuration items for template ID: 48
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "dataTypes" in database
[SERVER DEBUG] - Old value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] - New value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: dataTypes
[SERVER DEBUG] - field_id: 27
[SERVER DEBUG] - response_value: "Financial transaction data, Account balances, Customer KYC information"
8:02:20 AM [info] GET /api/tasks/739 304 in 96ms :: {"id":739,"title":"2. S&P KY3P Security Assessment: DevTest12","description":...
8:02:20 AM [info] GET /api/task-templates/by-type/ky3p 304 in 119ms :: {"id":48,"name":"S&P KY3P Security Assessment","description":"S&P KY3P Securi...
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "dataTypes":
[SERVER DEBUG] - Expected: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] - Actual: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "dataTypes" (ID: 6219)
[SERVER DEBUG] --- Finished processing field "dataTypes" ---

[SERVER DEBUG] Processing field: "sanctionsCheck" (ID: 28)
[SERVER DEBUG] Original value: Approximately 2 million records per month
[SERVER DEBUG] Normalized value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "sanctionsCheck" in database
[SERVER DEBUG] - Old value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - New value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: sanctionsCheck
[SERVER DEBUG] - field_id: 28
[SERVER DEBUG] - response_value: "Approximately 2 million records per month"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "sanctionsCheck":
[SERVER DEBUG] - Expected: "Approximately 2 million records per month"
[SERVER DEBUG] - Actual: "Approximately 2 million records per month"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "sanctionsCheck" (ID: 6220)
[SERVER DEBUG] --- Finished processing field "sanctionsCheck" ---

[SERVER DEBUG] Processing field: "dueDiligence" (ID: 29)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[2025-05-04T08:02:21.084Z] [INFO] Fetching all KY3P fields 
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "dueDiligence" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: dueDiligence
[SERVER DEBUG] - field_id: 29
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "dueDiligence":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "dueDiligence" (ID: 6221)
[SERVER DEBUG] --- Finished processing field "dueDiligence" ---

[SERVER DEBUG] Processing field: "regulatoryActions" (ID: 30)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[2025-05-04T08:02:21.183Z] [INFO] Successfully retrieved 120 KY3P fields 
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "regulatoryActions" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: regulatoryActions
[SERVER DEBUG] - field_id: 30
[SERVER DEBUG] - response_value: "Yes"
8:02:21 AM [info] GET /api/ky3p-fields 304 in 133ms :: [{"id":1,"order":1,"field_key":"externalSystems","display_name":"External Sys...
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "regulatoryActions":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "regulatoryActions" (ID: 6222)
[SERVER DEBUG] --- Finished processing field "regulatoryActions" ---

[KYB API Debug] Using client-provided status: ready_for_submission
[WebSocket] Broadcasting task update for task 738: progress=100, status=ready_for_submission
[Progress Broadcast broadcast-1746345741317-610] Broadcasting progress update for task 738: {
  taskId: 738,
  progress: 100,
  status: 'ready_for_submission',
  timestamp: '2025-05-04T08:02:21.317Z',
  source: 'at <anonymous> (/home/runner/workspace/server/routes/kyb.ts:1176:7)',
  hasMetadata: true
}
[Progress Utils] Broadcasting task progress update: {
  taskId: 738,
  progress: 100,
  requestedStatus: 'ready_for_submission',
  finalStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  timestamp: '2025-05-04T08:02:21.318Z'
}
[Progress Utils] Error tracking progress broadcast: ReferenceError: require is not defined
    at broadcastProgressUpdate (/home/runner/workspace/server/utils/progress.ts:749:40)
    at <anonymous> (/home/runner/workspace/server/routes/kyb.ts:1176:7)
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345741318_6apa5o1wn' }
[2025-05-04T08:02:21.319Z] [INFO] Successfully broadcasted task_update message 
[Progress Broadcast broadcast-1746345741317-610] Successfully broadcast progress update for task 738
===============================================
[SERVER DEBUG] PREPARING RESPONSE at 2025-05-04T08:02:21.350Z
[SERVER DEBUG] Found 30 fields in database after update
===============================================
[SERVER DEBUG] Checking field corporateRegistration in updated data: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010"
[SERVER DEBUG] Checking field goodStanding in updated data: "Yes"
[SERVER DEBUG] Checking field regulatoryActions in updated data: "Yes"
[SERVER DEBUG] Checking field investigationsIncidents in updated data: "No significant incidents in the past 3 years"
[SERVER DEBUG] No fields with value "asdf" found in response data
[SERVER DEBUG] Sending response with 30 fields, status: ready_for_submission, progress: 100%
[KYB API] 🔑 PRE-UNLOCK: Unlocking File Vault tab for company during ready_for_submission
[2025-05-04T08:02:21.379Z] [INFO] Fetching KY3P progress for task 739 
[KYB API] File vault tab already unlocked for company 267
[SERVER DEBUG] Updating task.savedFormData to ensure persistence across navigation
[2025-05-04T08:02:21.440Z] [INFO] Retrieved 0 responses for task 739 
[SERVER DEBUG] ✅ Successfully updated task.savedFormData with latest form data
===============================================
8:02:21 AM [info] POST /api/kyb/progress 200 in 3536ms :: {"success":true,"savedData":{"progress":100,"status":"ready_for_submission","...
8:02:21 AM [info] GET /api/ky3p/progress/739 200 in 126ms :: {"success":true,"taskId":739,"status":"not_started","responses":[],"formData"...
[2025-05-04T08:02:21.666Z] [INFO] Fetching KY3P progress for task 739 
[Tasks Routes] Fetching task by ID: {
  taskId: 739,
  userCompanyId: 267,
  timestamp: '2025-05-04T08:02:21.668Z'
}
[Tasks Routes] Task found by ID: {
  taskId: 739,
  title: '2. S&P KY3P Security Assessment: DevTest12',
  type: 'ky3p',
  formDataFields: 0,
  timestamp: '2025-05-04T08:02:21.698Z'
}
[2025-05-04T08:02:21.725Z] [INFO] Retrieved 0 responses for task 739 
8:02:21 AM [info] GET /api/tasks/739 304 in 62ms :: {"id":739,"title":"2. S&P KY3P Security Assessment: DevTest12","description":...
8:02:21 AM [info] GET /api/ky3p/progress/739 304 in 123ms :: {"success":true,"taskId":739,"status":"not_started","responses":[],"formData"...
[2025-05-04T08:02:21.881Z] [INFO] Fetching KY3P responses for task 739 
[Tasks Routes] Fetching task by ID: {
  taskId: 739,
  userCompanyId: 267,
  timestamp: '2025-05-04T08:02:21.940Z'
}
[Tasks Routes] Task found by ID: {
  taskId: 739,
  title: '2. S&P KY3P Security Assessment: DevTest12',
  type: 'ky3p',
  formDataFields: 0,
  timestamp: '2025-05-04T08:02:21.971Z'
}
8:02:22 AM [info] GET /api/tasks/739 304 in 62ms :: {"id":739,"title":"2. S&P KY3P Security Assessment: DevTest12","description":...
[2025-05-04T08:02:22.034Z] [INFO] Retrieved 0 responses for task 739 
8:02:22 AM [info] GET /api/tasks/739/ky3p-responses 200 in 184ms :: {"success":true,"taskId":739,"status":"not_started","responses":[],"responseC...
[TimestampHandler] Saving 30 timestamps for task 738
[TimestampHandler] Successfully saved timestamps for task 738
[TimestampAPI] Saved 30 timestamps for task 738
8:02:22 AM [info] POST /api/kyb/timestamps/738 200 in 62ms :: {"message":"Timestamps saved successfully","count":30}
[2025-05-04T08:02:22.221Z] [INFO] Fetching KY3P progress for task 739 
[2025-05-04T08:02:22.222Z] [INFO] Fetching KY3P responses for task 739 
[2025-05-04T08:02:22.282Z] [INFO] Retrieved 0 responses for task 739 
[2025-05-04T08:02:22.291Z] [INFO] Retrieved 0 responses for task 739 
8:02:22 AM [info] GET /api/tasks/739/ky3p-responses 304 in 102ms :: {"success":true,"taskId":739,"status":"not_started","responses":[],"responseC...
===============================================
[SERVER DEBUG] KYB PROGRESS SAVE REQUEST RECEIVED at 2025-05-04T08:02:22.341Z
===============================================
Task ID: 738
Progress: 100
Status: ready_for_submission
Field count: 30
Sample form data values:
- legalEntityName: "DevTest12" (string)
- registrationNumber: "12-3456789" (string)
- incorporationDate: "5/12/2010" (string)
- businessType: "Limited Liability Company (LLC)" (string)
- jurisdiction: "Delaware, United States" (string)
Request details:
- Method: POST
- Content-Type: application/json
- Content-Length: 2506
===============================================
===============================================
[SERVER DEBUG] PROCESSING FORM DATA FIELDS AT 2025-05-04T08:02:22.400Z
[SERVER DEBUG] Task ID: 738, Field count: 30
===============================================
[SERVER DEBUG] COMPLETE FORM DATA DUMP:
[SERVER DEBUG] legalEntityName: "DevTest12" (string)
[SERVER DEBUG] registrationNumber: "12-3456789" (string)
[SERVER DEBUG] incorporationDate: "5/12/2010" (string)
[SERVER DEBUG] businessType: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] jurisdiction: "Delaware, United States" (string)
[SERVER DEBUG] registeredAddress: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] companyPhone: "(302) 555-1234" (string)
[SERVER DEBUG] priorNames: "None" (string)
[SERVER DEBUG] licenses: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] goodStanding: "Yes" (string)
[SERVER DEBUG] corporateRegistration: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010" (string)
[SERVER DEBUG] externalAudit: "No" (string)
[SERVER DEBUG] controlEnvironment: "Yes" (string)
[SERVER DEBUG] authorizedSigners: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] governmentOwnership: "No" (string)
[SERVER DEBUG] ultimateBeneficialOwners: "None" (string)
[SERVER DEBUG] directorsAndOfficers: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] contactEmail: "12@e.com" (string)
[SERVER DEBUG] marketCapitalization: "$75 million (privately held)" (string)
[SERVER DEBUG] lifetimeCustomerValue: "$1,250" (string)
[SERVER DEBUG] annualRecurringRevenue: "5,000,000" (string)
[SERVER DEBUG] monthlyRecurringRevenue: "12,500,000" (string)
[SERVER DEBUG] investigationsIncidents: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] financialStatements: "Yes" (string)
[SERVER DEBUG] operationalPolicies: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] dataVolume: "Approximately 2 million records per month" (string)
[SERVER DEBUG] dataTypes: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] sanctionsCheck: "Approximately 2 million records per month" (string)
[SERVER DEBUG] dueDiligence: "Yes" (string)
[SERVER DEBUG] regulatoryActions: "Yes" (string)
[SERVER DEBUG] END OF FORM DATA DUMP
[SERVER DEBUG] No fields with value "asdf" found in incoming data
[SERVER DEBUG] Processing field: "legalEntityName" (ID: 1)
[SERVER DEBUG] Original value: DevTest12
[SERVER DEBUG] Normalized value: "DevTest12" (string)
[SERVER DEBUG] Field status: COMPLETE
8:02:22 AM [info] GET /api/ky3p/progress/739 304 in 182ms :: {"success":true,"taskId":739,"status":"not_started","responses":[],"formData"...
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "legalEntityName" in database
[SERVER DEBUG] - Old value: "DevTest12" (string)
[SERVER DEBUG] - New value: "DevTest12" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: legalEntityName
[SERVER DEBUG] - field_id: 1
[SERVER DEBUG] - response_value: "DevTest12"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "legalEntityName":
[SERVER DEBUG] - Expected: "DevTest12"
[SERVER DEBUG] - Actual: "DevTest12"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "legalEntityName" (ID: 6193)
[SERVER DEBUG] Broadcasting legalEntityName update via WebSocket: "DevTest12"
[WebSocket] Broadcast field_update to 3 clients (0 errors) { messageId: 'msg_1746345742491_e2202x11n' }
[2025-05-04T08:02:22.491Z] [INFO] Successfully broadcasted field_update message 
[Progress Utils] Broadcasting field update for task 738, field legalEntityName: {
  value: 'DevTest12',
  fieldId: 1,
  timestamp: '2025-05-04T08:02:22.491Z'
}
[SERVER DEBUG] --- Finished processing field "legalEntityName" ---

[SERVER DEBUG] Processing field: "registrationNumber" (ID: 2)
[SERVER DEBUG] Original value: 12-3456789
[SERVER DEBUG] Normalized value: "12-3456789" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "registrationNumber" in database
[SERVER DEBUG] - Old value: "12-3456789" (string)
[SERVER DEBUG] - New value: "12-3456789" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: registrationNumber
[SERVER DEBUG] - field_id: 2
[SERVER DEBUG] - response_value: "12-3456789"
[2025-05-04T08:02:22.555Z] [INFO] Fetching KY3P progress for task 739 
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "registrationNumber":
[SERVER DEBUG] - Expected: "12-3456789"
[SERVER DEBUG] - Actual: "12-3456789"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "registrationNumber" (ID: 6194)
[SERVER DEBUG] --- Finished processing field "registrationNumber" ---

[SERVER DEBUG] Processing field: "incorporationDate" (ID: 3)
[SERVER DEBUG] Original value: 5/12/2010
[SERVER DEBUG] Normalized value: "5/12/2010" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "incorporationDate" in database
[SERVER DEBUG] - Old value: "5/12/2010" (string)
[SERVER DEBUG] - New value: "5/12/2010" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: incorporationDate
[SERVER DEBUG] - field_id: 3
[SERVER DEBUG] - response_value: "5/12/2010"
[2025-05-04T08:02:22.615Z] [INFO] Retrieved 0 responses for task 739 
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "incorporationDate":
[SERVER DEBUG] - Expected: "5/12/2010"
[SERVER DEBUG] - Actual: "5/12/2010"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "incorporationDate" (ID: 6195)
[SERVER DEBUG] --- Finished processing field "incorporationDate" ---

[SERVER DEBUG] Processing field: "businessType" (ID: 4)
[SERVER DEBUG] Original value: Limited Liability Company (LLC)
[SERVER DEBUG] Normalized value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] Field status: COMPLETE
8:02:22 AM [info] GET /api/ky3p/progress/739 304 in 123ms :: {"success":true,"taskId":739,"status":"not_started","responses":[],"formData"...
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "businessType" in database
[SERVER DEBUG] - Old value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] - New value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: businessType
[SERVER DEBUG] - field_id: 4
[SERVER DEBUG] - response_value: "Limited Liability Company (LLC)"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "businessType":
[SERVER DEBUG] - Expected: "Limited Liability Company (LLC)"
[SERVER DEBUG] - Actual: "Limited Liability Company (LLC)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "businessType" (ID: 6196)
[SERVER DEBUG] --- Finished processing field "businessType" ---

[SERVER DEBUG] Processing field: "jurisdiction" (ID: 5)
[SERVER DEBUG] Original value: Delaware, United States
[SERVER DEBUG] Normalized value: "Delaware, United States" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "jurisdiction" in database
[SERVER DEBUG] - Old value: "Delaware, United States" (string)
[SERVER DEBUG] - New value: "Delaware, United States" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: jurisdiction
[SERVER DEBUG] - field_id: 5
[SERVER DEBUG] - response_value: "Delaware, United States"
[2025-05-04T08:02:22.826Z] [INFO] Fetching KY3P progress for task 739 
[Tasks Routes] Fetching task by ID: {
  taskId: 739,
  userCompanyId: 267,
  timestamp: '2025-05-04T08:02:22.827Z'
}
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "jurisdiction":
[SERVER DEBUG] - Expected: "Delaware, United States"
[SERVER DEBUG] - Actual: "Delaware, United States"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "jurisdiction" (ID: 6197)
[SERVER DEBUG] --- Finished processing field "jurisdiction" ---

[SERVER DEBUG] Processing field: "registeredAddress" (ID: 6)
[SERVER DEBUG] Original value: 123 Market Street, Wilmington, DE 19801
[SERVER DEBUG] Normalized value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] Field status: COMPLETE
[Tasks Routes] Task found by ID: {
  taskId: 739,
  title: '2. S&P KY3P Security Assessment: DevTest12',
  type: 'ky3p',
  formDataFields: 0,
  timestamp: '2025-05-04T08:02:22.860Z'
}
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "registeredAddress" in database
[SERVER DEBUG] - Old value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] - New value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: registeredAddress
[SERVER DEBUG] - field_id: 6
[SERVER DEBUG] - response_value: "123 Market Street, Wilmington, DE 19801"
[2025-05-04T08:02:22.887Z] [INFO] Retrieved 0 responses for task 739 
8:02:22 AM [info] GET /api/tasks/739 304 in 65ms :: {"id":739,"title":"2. S&P KY3P Security Assessment: DevTest12","description":...
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "registeredAddress":
[SERVER DEBUG] - Expected: "123 Market Street, Wilmington, DE 19801"
[SERVER DEBUG] - Actual: "123 Market Street, Wilmington, DE 19801"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "registeredAddress" (ID: 6198)
[SERVER DEBUG] --- Finished processing field "registeredAddress" ---

[SERVER DEBUG] Processing field: "companyPhone" (ID: 7)
[SERVER DEBUG] Original value: (302) 555-1234
[SERVER DEBUG] Normalized value: "(302) 555-1234" (string)
[SERVER DEBUG] Field status: COMPLETE
8:02:22 AM [info] GET /api/ky3p/progress/739 304 in 125ms :: {"success":true,"taskId":739,"status":"not_started","responses":[],"formData"...
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "companyPhone" in database
[SERVER DEBUG] - Old value: "(302) 555-1234" (string)
[SERVER DEBUG] - New value: "(302) 555-1234" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: companyPhone
[SERVER DEBUG] - field_id: 7
[SERVER DEBUG] - response_value: "(302) 555-1234"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "companyPhone":
[SERVER DEBUG] - Expected: "(302) 555-1234"
[SERVER DEBUG] - Actual: "(302) 555-1234"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "companyPhone" (ID: 6199)
[SERVER DEBUG] --- Finished processing field "companyPhone" ---

[SERVER DEBUG] Processing field: "priorNames" (ID: 8)
[SERVER DEBUG] Original value: None
[SERVER DEBUG] Normalized value: "None" (string)
[SERVER DEBUG] Field status: COMPLETE
[2025-05-04T08:02:23.043Z] [INFO] Fetching KY3P responses for task 739 
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "priorNames" in database
[SERVER DEBUG] - Old value: "None" (string)
[SERVER DEBUG] - New value: "None" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: priorNames
[SERVER DEBUG] - field_id: 8
[SERVER DEBUG] - response_value: "None"
[2025-05-04T08:02:23.104Z] [INFO] Retrieved 0 responses for task 739 
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "priorNames":
[SERVER DEBUG] - Expected: "None"
[SERVER DEBUG] - Actual: "None"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "priorNames" (ID: 6200)
[SERVER DEBUG] --- Finished processing field "priorNames" ---

[SERVER DEBUG] Processing field: "licenses" (ID: 9)
[SERVER DEBUG] Original value: Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765
[SERVER DEBUG] Normalized value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] Field status: COMPLETE
8:02:23 AM [info] GET /api/tasks/739/ky3p-responses 304 in 94ms :: {"success":true,"taskId":739,"status":"not_started","responses":[],"responseC...
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "licenses" in database
[SERVER DEBUG] - Old value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] - New value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: licenses
[SERVER DEBUG] - field_id: 9
[SERVER DEBUG] - response_value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "licenses":
[SERVER DEBUG] - Expected: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] - Actual: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "licenses" (ID: 6201)
[SERVER DEBUG] --- Finished processing field "licenses" ---

[SERVER DEBUG] Processing field: "goodStanding" (ID: 10)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "goodStanding" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: goodStanding
[SERVER DEBUG] - field_id: 10
[SERVER DEBUG] - response_value: "Yes"
[2025-05-04T08:02:23.288Z] [INFO] Fetching KY3P progress for task 739 
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "goodStanding":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "goodStanding" (ID: 6202)
[SERVER DEBUG] --- Finished processing field "goodStanding" ---

[SERVER DEBUG] Processing field: "corporateRegistration" (ID: 11)
[SERVER DEBUG] Original value: Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010
[SERVER DEBUG] Normalized value: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "corporateRegistration" in database
[SERVER DEBUG] - Old value: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010" (string)
[SERVER DEBUG] - New value: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: corporateRegistration
[SERVER DEBUG] - field_id: 11
[SERVER DEBUG] - response_value: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010"
[2025-05-04T08:02:23.349Z] [INFO] Retrieved 0 responses for task 739 
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "corporateRegistration":
[SERVER DEBUG] - Expected: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010"
[SERVER DEBUG] - Actual: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "corporateRegistration" (ID: 6203)
[SERVER DEBUG] --- Finished processing field "corporateRegistration" ---

[SERVER DEBUG] Processing field: "externalAudit" (ID: 12)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T08:02:23.289Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "externalAudit" in database
[SERVER DEBUG] - Old value: "No" (string)
[SERVER DEBUG] - New value: "No" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: externalAudit
[SERVER DEBUG] - field_id: 12
[SERVER DEBUG] - response_value: "No"
8:02:23 AM [info] GET /api/ky3p/progress/739 304 in 125ms :: {"success":true,"taskId":739,"status":"not_started","responses":[],"formData"...
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "externalAudit":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "externalAudit" (ID: 6204)
[SERVER DEBUG] --- Finished processing field "externalAudit" ---

[SERVER DEBUG] Processing field: "controlEnvironment" (ID: 13)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "controlEnvironment" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: controlEnvironment
[SERVER DEBUG] - field_id: 13
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "controlEnvironment":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "controlEnvironment" (ID: 6205)
[SERVER DEBUG] --- Finished processing field "controlEnvironment" ---

[SERVER DEBUG] Processing field: "authorizedSigners" (ID: 14)
[SERVER DEBUG] Original value: John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)
[SERVER DEBUG] Normalized value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "authorizedSigners" in database
[SERVER DEBUG] - Old value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] - New value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: authorizedSigners
[SERVER DEBUG] - field_id: 14
[SERVER DEBUG] - response_value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "authorizedSigners":
[SERVER DEBUG] - Expected: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] - Actual: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "authorizedSigners" (ID: 6206)
[SERVER DEBUG] --- Finished processing field "authorizedSigners" ---

[SERVER DEBUG] Processing field: "governmentOwnership" (ID: 15)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "governmentOwnership" in database
[SERVER DEBUG] - Old value: "No" (string)
[SERVER DEBUG] - New value: "No" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: governmentOwnership
[SERVER DEBUG] - field_id: 15
[SERVER DEBUG] - response_value: "No"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "governmentOwnership":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "governmentOwnership" (ID: 6207)
[SERVER DEBUG] --- Finished processing field "governmentOwnership" ---

[SERVER DEBUG] Processing field: "ultimateBeneficialOwners" (ID: 16)
[SERVER DEBUG] Original value: None
[SERVER DEBUG] Normalized value: "None" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "ultimateBeneficialOwners" in database
[SERVER DEBUG] - Old value: "None" (string)
[SERVER DEBUG] - New value: "None" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: ultimateBeneficialOwners
[SERVER DEBUG] - field_id: 16
[SERVER DEBUG] - response_value: "None"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "ultimateBeneficialOwners":
[SERVER DEBUG] - Expected: "None"
[SERVER DEBUG] - Actual: "None"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "ultimateBeneficialOwners" (ID: 6208)
[SERVER DEBUG] --- Finished processing field "ultimateBeneficialOwners" ---

[SERVER DEBUG] Processing field: "directorsAndOfficers" (ID: 17)
[SERVER DEBUG] Original value: John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)
[SERVER DEBUG] Normalized value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "directorsAndOfficers" in database
[SERVER DEBUG] - Old value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] - New value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: directorsAndOfficers
[SERVER DEBUG] - field_id: 17
[SERVER DEBUG] - response_value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
8:02:23 AM [info] GET /api/companies/current 304 in 36ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "directorsAndOfficers":
[SERVER DEBUG] - Expected: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] - Actual: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "directorsAndOfficers" (ID: 6209)
[SERVER DEBUG] --- Finished processing field "directorsAndOfficers" ---

[SERVER DEBUG] Processing field: "contactEmail" (ID: 18)
[SERVER DEBUG] Original value: 12@e.com
[SERVER DEBUG] Normalized value: "12@e.com" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "contactEmail" in database
[SERVER DEBUG] - Old value: "12@e.com" (string)
[SERVER DEBUG] - New value: "12@e.com" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: contactEmail
[SERVER DEBUG] - field_id: 18
[SERVER DEBUG] - response_value: "12@e.com"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "contactEmail":
[SERVER DEBUG] - Expected: "12@e.com"
[SERVER DEBUG] - Actual: "12@e.com"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "contactEmail" (ID: 6210)
[SERVER DEBUG] --- Finished processing field "contactEmail" ---

[SERVER DEBUG] Processing field: "marketCapitalization" (ID: 19)
[SERVER DEBUG] Original value: $75 million (privately held)
[SERVER DEBUG] Normalized value: "$75 million (privately held)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "marketCapitalization" in database
[SERVER DEBUG] - Old value: "$75 million (privately held)" (string)
[SERVER DEBUG] - New value: "$75 million (privately held)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: marketCapitalization
[SERVER DEBUG] - field_id: 19
[SERVER DEBUG] - response_value: "$75 million (privately held)"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "marketCapitalization":
[SERVER DEBUG] - Expected: "$75 million (privately held)"
[SERVER DEBUG] - Actual: "$75 million (privately held)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "marketCapitalization" (ID: 6211)
[SERVER DEBUG] --- Finished processing field "marketCapitalization" ---

[SERVER DEBUG] Processing field: "lifetimeCustomerValue" (ID: 20)
[SERVER DEBUG] Original value: $1,250
[SERVER DEBUG] Normalized value: "$1,250" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "lifetimeCustomerValue" in database
[SERVER DEBUG] - Old value: "$1,250" (string)
[SERVER DEBUG] - New value: "$1,250" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: lifetimeCustomerValue
[SERVER DEBUG] - field_id: 20
[SERVER DEBUG] - response_value: "$1,250"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "lifetimeCustomerValue":
[SERVER DEBUG] - Expected: "$1,250"
[SERVER DEBUG] - Actual: "$1,250"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "lifetimeCustomerValue" (ID: 6212)
[SERVER DEBUG] --- Finished processing field "lifetimeCustomerValue" ---

[SERVER DEBUG] Processing field: "annualRecurringRevenue" (ID: 21)
[SERVER DEBUG] Original value: 5,000,000
[SERVER DEBUG] Normalized value: "5,000,000" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "annualRecurringRevenue" in database
[SERVER DEBUG] - Old value: "5,000,000" (string)
[SERVER DEBUG] - New value: "5,000,000" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: annualRecurringRevenue
[SERVER DEBUG] - field_id: 21
[SERVER DEBUG] - response_value: "5,000,000"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "annualRecurringRevenue":
[SERVER DEBUG] - Expected: "5,000,000"
[SERVER DEBUG] - Actual: "5,000,000"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "annualRecurringRevenue" (ID: 6213)
[SERVER DEBUG] --- Finished processing field "annualRecurringRevenue" ---

[SERVER DEBUG] Processing field: "monthlyRecurringRevenue" (ID: 22)
[SERVER DEBUG] Original value: 12,500,000
[SERVER DEBUG] Normalized value: "12,500,000" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "monthlyRecurringRevenue" in database
[SERVER DEBUG] - Old value: "12,500,000" (string)
[SERVER DEBUG] - New value: "12,500,000" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: monthlyRecurringRevenue
[SERVER DEBUG] - field_id: 22
[SERVER DEBUG] - response_value: "12,500,000"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "monthlyRecurringRevenue":
[SERVER DEBUG] - Expected: "12,500,000"
[SERVER DEBUG] - Actual: "12,500,000"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "monthlyRecurringRevenue" (ID: 6214)
[SERVER DEBUG] --- Finished processing field "monthlyRecurringRevenue" ---

[SERVER DEBUG] Processing field: "investigationsIncidents" (ID: 23)
[SERVER DEBUG] Original value: No significant incidents in the past 3 years
[SERVER DEBUG] Normalized value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "investigationsIncidents" in database
[SERVER DEBUG] - Old value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] - New value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: investigationsIncidents
[SERVER DEBUG] - field_id: 23
[SERVER DEBUG] - response_value: "No significant incidents in the past 3 years"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "investigationsIncidents":
[SERVER DEBUG] - Expected: "No significant incidents in the past 3 years"
[SERVER DEBUG] - Actual: "No significant incidents in the past 3 years"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "investigationsIncidents" (ID: 6215)
[SERVER DEBUG] --- Finished processing field "investigationsIncidents" ---

[SERVER DEBUG] Processing field: "financialStatements" (ID: 24)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "financialStatements" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: financialStatements
[SERVER DEBUG] - field_id: 24
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "financialStatements":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "financialStatements" (ID: 6216)
[SERVER DEBUG] --- Finished processing field "financialStatements" ---

[SERVER DEBUG] Processing field: "operationalPolicies" (ID: 25)
[SERVER DEBUG] Original value: ISO 27001 certified, SOC 2 Type II compliant
[SERVER DEBUG] Normalized value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "operationalPolicies" in database
[SERVER DEBUG] - Old value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] - New value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: operationalPolicies
[SERVER DEBUG] - field_id: 25
[SERVER DEBUG] - response_value: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "operationalPolicies":
[SERVER DEBUG] - Expected: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] - Actual: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "operationalPolicies" (ID: 6217)
[SERVER DEBUG] --- Finished processing field "operationalPolicies" ---

[SERVER DEBUG] Processing field: "dataVolume" (ID: 26)
[SERVER DEBUG] Original value: Approximately 2 million records per month
[SERVER DEBUG] Normalized value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "dataVolume" in database
[SERVER DEBUG] - Old value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - New value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: dataVolume
[SERVER DEBUG] - field_id: 26
[SERVER DEBUG] - response_value: "Approximately 2 million records per month"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "dataVolume":
[SERVER DEBUG] - Expected: "Approximately 2 million records per month"
[SERVER DEBUG] - Actual: "Approximately 2 million records per month"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "dataVolume" (ID: 6218)
[SERVER DEBUG] --- Finished processing field "dataVolume" ---

[SERVER DEBUG] Processing field: "dataTypes" (ID: 27)
[SERVER DEBUG] Original value: Financial transaction data, Account balances, Customer KYC information
[SERVER DEBUG] Normalized value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "dataTypes" in database
[SERVER DEBUG] - Old value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] - New value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: dataTypes
[SERVER DEBUG] - field_id: 27
[SERVER DEBUG] - response_value: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "dataTypes":
[SERVER DEBUG] - Expected: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] - Actual: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "dataTypes" (ID: 6219)
[SERVER DEBUG] --- Finished processing field "dataTypes" ---

[SERVER DEBUG] Processing field: "sanctionsCheck" (ID: 28)
[SERVER DEBUG] Original value: Approximately 2 million records per month
[SERVER DEBUG] Normalized value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "sanctionsCheck" in database
[SERVER DEBUG] - Old value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - New value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: sanctionsCheck
[SERVER DEBUG] - field_id: 28
[SERVER DEBUG] - response_value: "Approximately 2 million records per month"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "sanctionsCheck":
[SERVER DEBUG] - Expected: "Approximately 2 million records per month"
[SERVER DEBUG] - Actual: "Approximately 2 million records per month"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "sanctionsCheck" (ID: 6220)
[SERVER DEBUG] --- Finished processing field "sanctionsCheck" ---

[SERVER DEBUG] Processing field: "dueDiligence" (ID: 29)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "dueDiligence" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: dueDiligence
[SERVER DEBUG] - field_id: 29
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "dueDiligence":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "dueDiligence" (ID: 6221)
[SERVER DEBUG] --- Finished processing field "dueDiligence" ---

[SERVER DEBUG] Processing field: "regulatoryActions" (ID: 30)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "regulatoryActions" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: regulatoryActions
[SERVER DEBUG] - field_id: 30
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "regulatoryActions":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "regulatoryActions" (ID: 6222)
[SERVER DEBUG] --- Finished processing field "regulatoryActions" ---

[KYB API Debug] Using client-provided status: ready_for_submission
[WebSocket] Broadcasting task update for task 738: progress=100, status=ready_for_submission
[Progress Broadcast broadcast-1746345745197-236] Broadcasting progress update for task 738: {
  taskId: 738,
  progress: 100,
  status: 'ready_for_submission',
  timestamp: '2025-05-04T08:02:25.197Z',
  source: 'at <anonymous> (/home/runner/workspace/server/routes/kyb.ts:1176:7)',
  hasMetadata: true
}
[Progress Utils] Broadcasting task progress update: {
  taskId: 738,
  progress: 100,
  requestedStatus: 'ready_for_submission',
  finalStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  timestamp: '2025-05-04T08:02:25.198Z'
}
[Progress Utils] Error tracking progress broadcast: ReferenceError: require is not defined
    at broadcastProgressUpdate (/home/runner/workspace/server/utils/progress.ts:749:40)
    at <anonymous> (/home/runner/workspace/server/routes/kyb.ts:1176:7)
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345745198_clh627h3e' }
[2025-05-04T08:02:25.198Z] [INFO] Successfully broadcasted task_update message 
[Progress Broadcast broadcast-1746345745197-236] Successfully broadcast progress update for task 738
===============================================
[SERVER DEBUG] PREPARING RESPONSE at 2025-05-04T08:02:25.231Z
[SERVER DEBUG] Found 30 fields in database after update
===============================================
[SERVER DEBUG] Checking field corporateRegistration in updated data: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010"
[SERVER DEBUG] Checking field goodStanding in updated data: "Yes"
[SERVER DEBUG] Checking field regulatoryActions in updated data: "Yes"
[SERVER DEBUG] Checking field investigationsIncidents in updated data: "No significant incidents in the past 3 years"
[SERVER DEBUG] No fields with value "asdf" found in response data
[SERVER DEBUG] Sending response with 30 fields, status: ready_for_submission, progress: 100%
[KYB API] 🔑 PRE-UNLOCK: Unlocking File Vault tab for company during ready_for_submission
[KYB API] File vault tab already unlocked for company 267
[SERVER DEBUG] Updating task.savedFormData to ensure persistence across navigation
[SERVER DEBUG] ✅ Successfully updated task.savedFormData with latest form data
===============================================
8:02:25 AM [info] POST /api/kyb/progress 200 in 3011ms :: {"success":true,"savedData":{"progress":100,"status":"ready_for_submission","...
[KY3P API DEPRECATED] Demo auto-fill requested for task 739, delegating to universal service
[2025-05-04T08:02:26.338Z] [INFO] Applying demo data directly to database {"taskId":739,"formType":"ky3p","userId":310}
[2025-05-04T08:02:26.509Z] [INFO] Retrieved fields for demo auto-fill {"count":120}
[2025-05-04T08:02:26.540Z] [INFO] Found existing responses {"count":0}
[2025-05-04T08:02:26.540Z] [INFO] Found fields with demo values {"count":120,"sampleFields":[{"key":"externalSystems","demoValue":"Our external information systems inventory is updated monthly and validated through automated discovery tools and manual audits."},{"key":"breachNotification","demoValue":"Controllers are promptly notified of privacy data breaches within 24 hours of our organization's awareness, including detailed incident information and remediation steps."},{"key":"privacyIncidentProcedure","demoValue":"Formal procedures are in place for reporting, managing, and responding to privacy-related incidents, ensuring prompt and appropriate actions are taken."}]}
[2025-05-04T08:02:26.540Z] [INFO] Setting demo value for field "externalSystems" {"value":"Our external information systems inventory is updated monthly and validated through automated discovery tools and manual audits.","fieldId":1}
[2025-05-04T08:02:26.578Z] [DEBUG] Created new response for field externalSystems with demo value {"value":"Our external information systems inventory is updated monthly and validated through automated discovery tools and manual audits."}
[2025-05-04T08:02:26.578Z] [INFO] Setting demo value for field "breachNotification" {"value":"Controllers are promptly notified of privacy data breaches within 24 hours of our organization's awareness, including detailed incident information and remediation steps.","fieldId":2}
[2025-05-04T08:02:26.609Z] [DEBUG] Created new response for field breachNotification with demo value {"value":"Controllers are promptly notified of privacy data breaches within 24 hours of our organization's awareness, including detailed incident information and remediation steps."}
[2025-05-04T08:02:26.609Z] [INFO] Setting demo value for field "privacyIncidentProcedure" {"value":"Formal procedures are in place for reporting, managing, and responding to privacy-related incidents, ensuring prompt and appropriate actions are taken.","fieldId":3}
[2025-05-04T08:02:26.639Z] [DEBUG] Created new response for field privacyIncidentProcedure with demo value {"value":"Formal procedures are in place for reporting, managing, and responding to privacy-related incidents, ensuring prompt and appropriate actions are taken."}
[2025-05-04T08:02:26.639Z] [INFO] Setting demo value for field "publicPrivacyNotice" {"value":"Privacy notices and policies are publicly accessible at every point where personal data is collected, stored, processed, or transmitted, clearly detailing usage and rights.","fieldId":4}
[2025-05-04T08:02:26.671Z] [DEBUG] Created new response for field publicPrivacyNotice with demo value {"value":"Privacy notices and policies are publicly accessible at every point where personal data is collected, stored, processed, or transmitted, clearly detailing usage and rights."}
[2025-05-04T08:02:26.671Z] [INFO] Setting demo value for field "privacyLawCompliance" {"value":"Privacy policies and standards are fully compliant with global and regional privacy laws, including GDPR, CCPA, CPPA, and GLBA, supported by regular compliance audits.","fieldId":5}
[2025-05-04T08:02:26.701Z] [DEBUG] Created new response for field privacyLawCompliance with demo value {"value":"Privacy policies and standards are fully compliant with global and regional privacy laws, including GDPR, CCPA, CPPA, and GLBA, supported by regular compliance audits."}
[2025-05-04T08:02:26.701Z] [INFO] Setting demo value for field "dataRetentionLimits" {"value":"Personal data is retained only as long as required to fulfill the explicit purposes for which it was collected, after which it is securely destroyed.","fieldId":6}
[2025-05-04T08:02:26.732Z] [DEBUG] Created new response for field dataRetentionLimits with demo value {"value":"Personal data is retained only as long as required to fulfill the explicit purposes for which it was collected, after which it is securely destroyed."}
[2025-05-04T08:02:26.732Z] [INFO] Setting demo value for field "personalDataMinimization" {"value":"Collection and processing of personal data are strictly limited to essential business purposes, following clearly documented data minimization principles.","fieldId":7}
[2025-05-04T08:02:26.762Z] [DEBUG] Created new response for field personalDataMinimization with demo value {"value":"Collection and processing of personal data are strictly limited to essential business purposes, following clearly documented data minimization principles."}
[2025-05-04T08:02:26.762Z] [INFO] Setting demo value for field "dataMinimizationTechniques" {"value":"Data minimization is enforced through technical measures such as pseudonymization, anonymization, and strong encryption practices in line with privacy regulations.","fieldId":8}
[2025-05-04T08:02:26.792Z] [DEBUG] Created new response for field dataMinimizationTechniques with demo value {"value":"Data minimization is enforced through technical measures such as pseudonymization, anonymization, and strong encryption practices in line with privacy regulations."}
[2025-05-04T08:02:26.792Z] [INFO] Setting demo value for field "dpoAppointment" {"value":"A Data Protection Officer (DPO) has been formally appointed, responsible for overseeing compliance and ensuring informed consent mechanisms, including clear consent withdrawal procedures.","fieldId":9}
[2025-05-04T08:02:26.822Z] [DEBUG] Created new response for field dpoAppointment with demo value {"value":"A Data Protection Officer (DPO) has been formally appointed, responsible for overseeing compliance and ensuring informed consent mechanisms, including clear consent withdrawal procedures."}
[2025-05-04T08:02:26.822Z] [INFO] Setting demo value for field "developmentLifecycle" {"value":"Our System Development Lifecycle (SDLC) includes defined stages: requirements gathering, secure development, rigorous testing, deployment, and post-release maintenance.","fieldId":10}
8:02:26 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-04T08:02:26.853Z] [DEBUG] Created new response for field developmentLifecycle with demo value {"value":"Our System Development Lifecycle (SDLC) includes defined stages: requirements gathering, secure development, rigorous testing, deployment, and post-release maintenance."}
[2025-05-04T08:02:26.853Z] [INFO] Setting demo value for field "secureCodeReviews" {"value":"Secure source code reviews are performed regularly to ensure developers follow established secure coding standards and practices prior to deployment.","fieldId":11}
[2025-05-04T08:02:26.884Z] [DEBUG] Created new response for field secureCodeReviews with demo value {"value":"Secure source code reviews are performed regularly to ensure developers follow established secure coding standards and practices prior to deployment."}
[2025-05-04T08:02:26.884Z] [INFO] Setting demo value for field "codeScanning" {"value":"Static and dynamic source code scanning tools are used during development cycles and prior to deployment to identify and remediate security vulnerabilities.","fieldId":12}
[2025-05-04T08:02:26.914Z] [DEBUG] Created new response for field codeScanning with demo value {"value":"Static and dynamic source code scanning tools are used during development cycles and prior to deployment to identify and remediate security vulnerabilities."}
[2025-05-04T08:02:26.914Z] [INFO] Setting demo value for field "developerAccessControls" {"value":"Developer access to production environments is strictly controlled and monitored, restricted by role-based permissions and audited regularly.","fieldId":13}
[2025-05-04T08:02:26.944Z] [DEBUG] Created new response for field developerAccessControls with demo value {"value":"Developer access to production environments is strictly controlled and monitored, restricted by role-based permissions and audited regularly."}
[2025-05-04T08:02:26.944Z] [INFO] Setting demo value for field "backupRecoveryDocument" {"value":"Our backup and recovery documentation clearly defines requirements and procedures for system backups, data restoration, and data integrity checks.","fieldId":14}
[2025-05-04T08:02:26.975Z] [DEBUG] Created new response for field backupRecoveryDocument with demo value {"value":"Our backup and recovery documentation clearly defines requirements and procedures for system backups, data restoration, and data integrity checks."}
[2025-05-04T08:02:26.975Z] [INFO] Setting demo value for field "cyberLiabilityInsurance" {"value":"We hold Cyber Liability, Network Security, and Privacy Liability Insurance with coverage adequate to mitigate potential cyber incident impacts.","fieldId":15}
[2025-05-04T08:02:27.006Z] [DEBUG] Created new response for field cyberLiabilityInsurance with demo value {"value":"We hold Cyber Liability, Network Security, and Privacy Liability Insurance with coverage adequate to mitigate potential cyber incident impacts."}
[2025-05-04T08:02:27.006Z] [INFO] Setting demo value for field "dataLocationTracking" {"value":"Cloud data locations are tracked and documented through automated asset management tools and regular manual validations.","fieldId":16}
[2025-05-04T08:02:27.036Z] [DEBUG] Created new response for field dataLocationTracking with demo value {"value":"Cloud data locations are tracked and documented through automated asset management tools and regular manual validations."}
[2025-05-04T08:02:27.036Z] [INFO] Setting demo value for field "alternateFacilities" {"value":"We regularly test connectivity, recovery time objectives, and system capacity at alternate recovery sites through annual resilience exercises.","fieldId":17}
[2025-05-04T08:02:27.066Z] [DEBUG] Created new response for field alternateFacilities with demo value {"value":"We regularly test connectivity, recovery time objectives, and system capacity at alternate recovery sites through annual resilience exercises."}
[2025-05-04T08:02:27.066Z] [INFO] Setting demo value for field "logicalAccess" {"value":"Logical access is granted only after managerial approval, with regular access reviews conducted quarterly to confirm continued business justification.","fieldId":18}
[2025-05-04T08:02:27.097Z] [DEBUG] Created new response for field logicalAccess with demo value {"value":"Logical access is granted only after managerial approval, with regular access reviews conducted quarterly to confirm continued business justification."}
[2025-05-04T08:02:27.097Z] [INFO] Setting demo value for field "detectionSystems" {"value":"Notifications from detection systems trigger immediate investigation protocols managed by our 24/7 security operations center (SOC).","fieldId":19}
[2025-05-04T08:02:27.127Z] [DEBUG] Created new response for field detectionSystems with demo value {"value":"Notifications from detection systems trigger immediate investigation protocols managed by our 24/7 security operations center (SOC)."}
[2025-05-04T08:02:27.127Z] [INFO] Setting demo value for field "disasterRecoveryTesting" {"value":"Comprehensive disaster recovery tests covering all critical technology components are conducted annually, with results documented and improvements identified.","fieldId":20}
[2025-05-04T08:02:27.157Z] [DEBUG] Created new response for field disasterRecoveryTesting with demo value {"value":"Comprehensive disaster recovery tests covering all critical technology components are conducted annually, with results documented and improvements identified."}
[2025-05-04T08:02:27.157Z] [INFO] Setting demo value for field "appVulnerabilityScanning" {"value":"Application vulnerability scans are conducted quarterly and immediately after significant application changes, identifying and mitigating vulnerabilities promptly.","fieldId":21}
[2025-05-04T08:02:27.188Z] [DEBUG] Created new response for field appVulnerabilityScanning with demo value {"value":"Application vulnerability scans are conducted quarterly and immediately after significant application changes, identifying and mitigating vulnerabilities promptly."}
[2025-05-04T08:02:27.188Z] [INFO] Setting demo value for field "testingIssueTracking" {"value":"Issues identified during continuity tests are documented, tracked through resolution, and addressed with specific action plans and targeted completion dates.","fieldId":22}
[2025-05-04T08:02:27.218Z] [DEBUG] Created new response for field testingIssueTracking with demo value {"value":"Issues identified during continuity tests are documented, tracked through resolution, and addressed with specific action plans and targeted completion dates."}
[2025-05-04T08:02:27.218Z] [INFO] Setting demo value for field "cloudDataRetrieval" {"value":"Cloud service customers can securely retrieve their data using encrypted application programming interfaces (APIs), supporting interoperability and easy portability.","fieldId":23}
[2025-05-04T08:02:27.248Z] [DEBUG] Created new response for field cloudDataRetrieval with demo value {"value":"Cloud service customers can securely retrieve their data using encrypted application programming interfaces (APIs), supporting interoperability and easy portability."}
[2025-05-04T08:02:27.248Z] [INFO] Setting demo value for field "recoverySystemsUpdate" {"value":"Recovery documentation and systems at alternate sites are promptly updated following production system and business process changes.","fieldId":24}
[2025-05-04T08:02:27.282Z] [DEBUG] Created new response for field recoverySystemsUpdate with demo value {"value":"Recovery documentation and systems at alternate sites are promptly updated following production system and business process changes."}
[2025-05-04T08:02:27.282Z] [INFO] Setting demo value for field "webApplicationSecurity" {"value":"Application-layer security measures include Web Application Firewalls (WAFs) and proxy services, providing protection against common web-based threats.","fieldId":25}
[2025-05-04T08:02:27.312Z] [DEBUG] Created new response for field webApplicationSecurity with demo value {"value":"Application-layer security measures include Web Application Firewalls (WAFs) and proxy services, providing protection against common web-based threats."}
[2025-05-04T08:02:27.312Z] [INFO] Setting demo value for field "technicalResilience" {"value":"Technical resilience mechanisms employed include load balancing, failover clustering, and hot-swappable hardware to ensure continuous operations under adverse conditions.","fieldId":26}
[2025-05-04T08:02:27.342Z] [DEBUG] Created new response for field technicalResilience with demo value {"value":"Technical resilience mechanisms employed include load balancing, failover clustering, and hot-swappable hardware to ensure continuous operations under adverse conditions."}
[2025-05-04T08:02:27.342Z] [INFO] Setting demo value for field "externalDependencyResilience" {"value":"Critical external dependencies and business partners are integrated into our resilience strategy, participating in joint planning and periodic exercises.","fieldId":27}
[2025-05-04T08:02:27.373Z] [DEBUG] Created new response for field externalDependencyResilience with demo value {"value":"Critical external dependencies and business partners are integrated into our resilience strategy, participating in joint planning and periodic exercises."}
[2025-05-04T08:02:27.373Z] [INFO] Setting demo value for field "backupProcessTesting" {"value":"Backup and replication processes are thoroughly tested quarterly, including full-system recoveries, to validate their effectiveness and reliability.","fieldId":28}
[2025-05-04T08:02:27.402Z] [DEBUG] Created new response for field backupProcessTesting with demo value {"value":"Backup and replication processes are thoroughly tested quarterly, including full-system recoveries, to validate their effectiveness and reliability."}
[2025-05-04T08:02:27.402Z] [INFO] Setting demo value for field "penetrationTesting" {"value":"Application penetration tests are performed annually and after significant updates, utilizing independent third-party testing to validate application security.","fieldId":29}
[2025-05-04T08:02:27.433Z] [DEBUG] Created new response for field penetrationTesting with demo value {"value":"Application penetration tests are performed annually and after significant updates, utilizing independent third-party testing to validate application security."}
[2025-05-04T08:02:27.433Z] [INFO] Setting demo value for field "incidentContainment" {"value":"We maintain documented containment strategies tailored to various incident scenarios, enabling rapid isolation and mitigation of security threats.","fieldId":30}
[2025-05-04T08:02:27.464Z] [DEBUG] Created new response for field incidentContainment with demo value {"value":"We maintain documented containment strategies tailored to various incident scenarios, enabling rapid isolation and mitigation of security threats."}
[2025-05-04T08:02:27.464Z] [INFO] Setting demo value for field "privacyPolicyDocument" {"value":"Our written privacy policy outlines data collection practices, usage, sharing, retention periods, and individuals' rights regarding their personal data.","fieldId":31}
[2025-05-04T08:02:27.496Z] [DEBUG] Created new response for field privacyPolicyDocument with demo value {"value":"Our written privacy policy outlines data collection practices, usage, sharing, retention periods, and individuals' rights regarding their personal data."}
[2025-05-04T08:02:27.496Z] [INFO] Setting demo value for field "policyAcknowledgement" {"value":"Employees must formally acknowledge the acceptable use policy electronically before receiving access to company systems and data.","fieldId":32}
[2025-05-04T08:02:27.526Z] [DEBUG] Created new response for field policyAcknowledgement with demo value {"value":"Employees must formally acknowledge the acceptable use policy electronically before receiving access to company systems and data."}
[2025-05-04T08:02:27.527Z] [INFO] Setting demo value for field "changeManagement" {"value":"Our change management program includes documented policies, formal review processes, and clearly defined change authorization responsibilities.","fieldId":33}
[2025-05-04T08:02:27.557Z] [DEBUG] Created new response for field changeManagement with demo value {"value":"Our change management program includes documented policies, formal review processes, and clearly defined change authorization responsibilities."}
[2025-05-04T08:02:27.557Z] [INFO] Setting demo value for field "remoteMfa" {"value":"Multifactor authentication (MFA) is mandated for all remote network access, using secure methods such as mobile authenticator apps or hardware tokens.","fieldId":34}
[2025-05-04T08:02:27.588Z] [DEBUG] Created new response for field remoteMfa with demo value {"value":"Multifactor authentication (MFA) is mandated for all remote network access, using secure methods such as mobile authenticator apps or hardware tokens."}
[2025-05-04T08:02:27.588Z] [INFO] Setting demo value for field "securityPolicy" {"value":"Our organization maintains documented cybersecurity policies covering data protection, access control, and incident response, reviewed and updated annually.","fieldId":35}
[2025-05-04T08:02:27.618Z] [DEBUG] Created new response for field securityPolicy with demo value {"value":"Our organization maintains documented cybersecurity policies covering data protection, access control, and incident response, reviewed and updated annually."}
[2025-05-04T08:02:27.618Z] [INFO] Setting demo value for field "changeAuditTrail" {"value":"A detailed audit trail of all system changes is maintained, including timestamps, authorizations, justifications, and rollback procedures.","fieldId":36}
[2025-05-04T08:02:27.648Z] [DEBUG] Created new response for field changeAuditTrail with demo value {"value":"A detailed audit trail of all system changes is maintained, including timestamps, authorizations, justifications, and rollback procedures."}
[2025-05-04T08:02:27.648Z] [INFO] Setting demo value for field "regulatoryCompliance" {"value":"Cybersecurity strategies are explicitly aligned with applicable legal and regulatory requirements, including regular compliance audits and reporting.","fieldId":37}
[2025-05-04T08:02:27.678Z] [DEBUG] Created new response for field regulatoryCompliance with demo value {"value":"Cybersecurity strategies are explicitly aligned with applicable legal and regulatory requirements, including regular compliance audits and reporting."}
[2025-05-04T08:02:27.678Z] [INFO] Setting demo value for field "dataRetentionGovernance" {"value":"Data retention governance is documented, outlining policies, schedules, responsibilities, and processes for secure data storage, retention, and timely disposal.","fieldId":38}
[2025-05-04T08:02:27.709Z] [DEBUG] Created new response for field dataRetentionGovernance with demo value {"value":"Data retention governance is documented, outlining policies, schedules, responsibilities, and processes for secure data storage, retention, and timely disposal."}
[2025-05-04T08:02:27.709Z] [INFO] Setting demo value for field "acceptableUse" {"value":"Our acceptable use governance document covers permitted technology use, restrictions, and user responsibilities, communicated clearly to all employees.","fieldId":39}
[2025-05-04T08:02:27.740Z] [DEBUG] Created new response for field acceptableUse with demo value {"value":"Our acceptable use governance document covers permitted technology use, restrictions, and user responsibilities, communicated clearly to all employees."}
[2025-05-04T08:02:27.740Z] [INFO] Setting demo value for field "centralizedAuthentication" {"value":"Centralized account management uses Active Directory and Single Sign-On (SSO) solutions to manage credentials securely, encrypting them both at rest and in transit.","fieldId":40}
[2025-05-04T08:02:27.773Z] [DEBUG] Created new response for field centralizedAuthentication with demo value {"value":"Centralized account management uses Active Directory and Single Sign-On (SSO) solutions to manage credentials securely, encrypting them both at rest and in transit."}
[2025-05-04T08:02:27.773Z] [INFO] Setting demo value for field "dataClassificationGovernance" {"value":"Data governance and classification policies define data sensitivity levels, handling requirements, and access control measures across all organizational assets.","fieldId":41}
[2025-05-04T08:02:27.803Z] [DEBUG] Created new response for field dataClassificationGovernance with demo value {"value":"Data governance and classification policies define data sensitivity levels, handling requirements, and access control measures across all organizational assets."}
[2025-05-04T08:02:27.803Z] [INFO] Setting demo value for field "iamGovernance" {"value":"Our identity and access management (IAM) governance document clearly defines user access provisioning, management, and de-provisioning procedures.","fieldId":42}
[2025-05-04T08:02:27.833Z] [DEBUG] Created new response for field iamGovernance with demo value {"value":"Our identity and access management (IAM) governance document clearly defines user access provisioning, management, and de-provisioning procedures."}
[2025-05-04T08:02:27.833Z] [INFO] Setting demo value for field "cloudSecurityRequirements" {"value":"Cloud service infrastructure security requirements and virtualization practices are documented, reviewed annually, and aligned with industry best practices.","fieldId":43}
[2025-05-04T08:02:27.864Z] [DEBUG] Created new response for field cloudSecurityRequirements with demo value {"value":"Cloud service infrastructure security requirements and virtualization practices are documented, reviewed annually, and aligned with industry best practices."}
[2025-05-04T08:02:27.864Z] [INFO] Setting demo value for field "threatManagementGovernance" {"value":"Threat and vulnerability management governance is documented, outlining processes for identification, assessment, prioritization, and mitigation of security threats.","fieldId":44}
[2025-05-04T08:02:27.894Z] [DEBUG] Created new response for field threatManagementGovernance with demo value {"value":"Threat and vulnerability management governance is documented, outlining processes for identification, assessment, prioritization, and mitigation of security threats."}
[2025-05-04T08:02:27.894Z] [INFO] Setting demo value for field "amlGovernance" {"value":"Our anti-money laundering (AML) governance is documented and enforced through clearly defined procedures, ongoing employee training, and regular compliance checks.","fieldId":45}
[2025-05-04T08:02:27.935Z] [DEBUG] Created new response for field amlGovernance with demo value {"value":"Our anti-money laundering (AML) governance is documented and enforced through clearly defined procedures, ongoing employee training, and regular compliance checks."}
[2025-05-04T08:02:27.935Z] [INFO] Setting demo value for field "antiFraudGovernance" {"value":"Anti-fraud governance measures include detailed policies, controls, monitoring systems, employee training, and clear reporting procedures.","fieldId":46}
[2025-05-04T08:02:27.968Z] [DEBUG] Created new response for field antiFraudGovernance with demo value {"value":"Anti-fraud governance measures include detailed policies, controls, monitoring systems, employee training, and clear reporting procedures."}
[2025-05-04T08:02:27.968Z] [INFO] Setting demo value for field "loggingGovernance" {"value":"Logging program governance documents the procedures and standards for capturing, reviewing, and retaining system logs, supporting incident investigations and compliance reporting.","fieldId":47}
[2025-05-04T08:02:28.002Z] [DEBUG] Created new response for field loggingGovernance with demo value {"value":"Logging program governance documents the procedures and standards for capturing, reviewing, and retaining system logs, supporting incident investigations and compliance reporting."}
[2025-05-04T08:02:28.002Z] [INFO] Setting demo value for field "encryptionGovernance" {"value":"Our encryption program governance specifies encryption standards, protocols, and procedures for managing cryptographic implementations across our environment.","fieldId":48}
[2025-05-04T08:02:28.036Z] [DEBUG] Created new response for field encryptionGovernance with demo value {"value":"Our encryption program governance specifies encryption standards, protocols, and procedures for managing cryptographic implementations across our environment."}
[2025-05-04T08:02:28.036Z] [INFO] Setting demo value for field "transactionAuthentication" {"value":"Transaction authentication processes employ advanced, secure methods such as multifactor authentication and transaction verification codes to prevent fraud and errors.","fieldId":49}
[2025-05-04T08:02:28.068Z] [DEBUG] Created new response for field transactionAuthentication with demo value {"value":"Transaction authentication processes employ advanced, secure methods such as multifactor authentication and transaction verification codes to prevent fraud and errors."}
[2025-05-04T08:02:28.068Z] [INFO] Setting demo value for field "equipmentRedundancy" {"value":"Critical business equipment has redundant counterparts independently located at a separate, industry-standard minimum distance.","fieldId":50}
[2025-05-04T08:02:28.099Z] [DEBUG] Created new response for field equipmentRedundancy with demo value {"value":"Critical business equipment has redundant counterparts independently located at a separate, industry-standard minimum distance."}
[2025-05-04T08:02:28.099Z] [INFO] Setting demo value for field "passwordVisibility" {"value":"Password fields during login processes are concealed, encrypted, and obscured to prevent accidental disclosure or viewing by unauthorized individuals.","fieldId":51}
[2025-05-04T08:02:28.134Z] [DEBUG] Created new response for field passwordVisibility with demo value {"value":"Password fields during login processes are concealed, encrypted, and obscured to prevent accidental disclosure or viewing by unauthorized individuals."}
[2025-05-04T08:02:28.134Z] [INFO] Setting demo value for field "privilegedUserLogs" {"value":"Privileged user activities are logged, regularly reviewed, and monitored closely for anomalies or unauthorized actions.","fieldId":52}
[2025-05-04T08:02:28.165Z] [DEBUG] Created new response for field privilegedUserLogs with demo value {"value":"Privileged user activities are logged, regularly reviewed, and monitored closely for anomalies or unauthorized actions."}
[2025-05-04T08:02:28.165Z] [INFO] Setting demo value for field "physicalMfa" {"value":"Physical access at data-handling locations requires multifactor authentication with unique identification badges and biometric verification.","fieldId":53}
[2025-05-04T08:02:28.198Z] [DEBUG] Created new response for field physicalMfa with demo value {"value":"Physical access at data-handling locations requires multifactor authentication with unique identification badges and biometric verification."}
[2025-05-04T08:02:28.198Z] [INFO] Setting demo value for field "executiveCyberTraining" {"value":"Executive cybersecurity training is provided annually, highlighting current threats, strategic risks, and governance responsibilities for senior management.","fieldId":54}
[2025-05-04T08:02:28.228Z] [DEBUG] Created new response for field executiveCyberTraining with demo value {"value":"Executive cybersecurity training is provided annually, highlighting current threats, strategic risks, and governance responsibilities for senior management."}
[2025-05-04T08:02:28.228Z] [INFO] Setting demo value for field "complianceTraining" {"value":"Compliance-related training sessions are provided quarterly, covering critical regulations, ethical standards, and procedural compliance requirements.","fieldId":55}
[2025-05-04T08:02:28.261Z] [DEBUG] Created new response for field complianceTraining with demo value {"value":"Compliance-related training sessions are provided quarterly, covering critical regulations, ethical standards, and procedural compliance requirements."}
[2025-05-04T08:02:28.261Z] [INFO] Setting demo value for field "annualSecurityTraining" {"value":"All employees complete cybersecurity awareness training annually, covering phishing, password security, and information handling best practices.","fieldId":56}
[2025-05-04T08:02:28.293Z] [DEBUG] Created new response for field annualSecurityTraining with demo value {"value":"All employees complete cybersecurity awareness training annually, covering phishing, password security, and information handling best practices."}
[2025-05-04T08:02:28.293Z] [INFO] Setting demo value for field "developerTraining" {"value":"Developers, including subcontractors, complete mandatory secure development training annually, emphasizing secure coding practices and vulnerability prevention.","fieldId":57}
[2025-05-04T08:02:28.324Z] [DEBUG] Created new response for field developerTraining with demo value {"value":"Developers, including subcontractors, complete mandatory secure development training annually, emphasizing secure coding practices and vulnerability prevention."}
[2025-05-04T08:02:28.324Z] [INFO] Setting demo value for field "accountCompromise" {"value":"Suspected account compromises trigger immediate password resets, account reviews, and security incident investigations to mitigate further risk.","fieldId":58}
[2025-05-04T08:02:28.359Z] [DEBUG] Created new response for field accountCompromise with demo value {"value":"Suspected account compromises trigger immediate password resets, account reviews, and security incident investigations to mitigate further risk."}
[2025-05-04T08:02:28.359Z] [INFO] Setting demo value for field "passwordPolicies" {"value":"Password policies conform to industry best practices, requiring complexity, periodic changes, and preventing reuse across all systems handling client data.","fieldId":59}
[2025-05-04T08:02:28.393Z] [DEBUG] Created new response for field passwordPolicies with demo value {"value":"Password policies conform to industry best practices, requiring complexity, periodic changes, and preventing reuse across all systems handling client data."}
[2025-05-04T08:02:28.394Z] [INFO] Setting demo value for field "defaultPasswords" {"value":"Default passwords are immediately changed, and unnecessary default accounts are disabled before any system deployment or configuration in production environments.","fieldId":60}
[2025-05-04T08:02:28.433Z] [DEBUG] Created new response for field defaultPasswords with demo value {"value":"Default passwords are immediately changed, and unnecessary default accounts are disabled before any system deployment or configuration in production environments."}
[2025-05-04T08:02:28.433Z] [INFO] Setting demo value for field "deviceAccessMonitoring" {"value":"We utilize advanced network monitoring tools and endpoint protection solutions to detect, monitor, and control access to devices, connections, and data transfers.","fieldId":61}
[2025-05-04T08:02:28.465Z] [DEBUG] Created new response for field deviceAccessMonitoring with demo value {"value":"We utilize advanced network monitoring tools and endpoint protection solutions to detect, monitor, and control access to devices, connections, and data transfers."}
[2025-05-04T08:02:28.465Z] [INFO] Setting demo value for field "crisisTeamAvailability" {"value":"The crisis response team is staffed on a 24/7/365 basis, supported by trained alternates and robust escalation protocols.","fieldId":62}
[2025-05-04T08:02:28.500Z] [DEBUG] Created new response for field crisisTeamAvailability with demo value {"value":"The crisis response team is staffed on a 24/7/365 basis, supported by trained alternates and robust escalation protocols."}
[2025-05-04T08:02:28.500Z] [INFO] Setting demo value for field "vendorContracts" {"value":"Contractual agreements with critical subcontractors explicitly define and enforce compliance with our established resilience standards and expectations.","fieldId":63}
[2025-05-04T08:02:28.530Z] [DEBUG] Created new response for field vendorContracts with demo value {"value":"Contractual agreements with critical subcontractors explicitly define and enforce compliance with our established resilience standards and expectations."}
[2025-05-04T08:02:28.530Z] [INFO] Setting demo value for field "staffResilience" {"value":"Our resilience program includes remote work options, employee assistance services, and clear communication channels to support staff during disruptions.","fieldId":64}
[2025-05-04T08:02:28.565Z] [DEBUG] Created new response for field staffResilience with demo value {"value":"Our resilience program includes remote work options, employee assistance services, and clear communication channels to support staff during disruptions."}
[2025-05-04T08:02:28.565Z] [INFO] Setting demo value for field "pandemicResponse" {"value":"Our resilience measures explicitly include pandemic management plans, protocols for infectious disease outbreaks, natural event responses, and workforce absenteeism contingencies.","fieldId":65}
[2025-05-04T08:02:28.595Z] [DEBUG] Created new response for field pandemicResponse with demo value {"value":"Our resilience measures explicitly include pandemic management plans, protocols for infectious disease outbreaks, natural event responses, and workforce absenteeism contingencies."}
[2025-05-04T08:02:28.595Z] [INFO] Setting demo value for field "vendorBcmReview" {"value":"Subcontractors' resilience programs are reviewed annually to verify alignment with our standards and recovery objectives through audits and contractual obligations.","fieldId":66}
[2025-05-04T08:02:28.627Z] [DEBUG] Created new response for field vendorBcmReview with demo value {"value":"Subcontractors' resilience programs are reviewed annually to verify alignment with our standards and recovery objectives through audits and contractual obligations."}
[2025-05-04T08:02:28.627Z] [INFO] Setting demo value for field "continuityTesting" {"value":"Comprehensive business continuity tests are documented annually for all facilities and services processing client data, ensuring consistent operational readiness.","fieldId":67}
[2025-05-04T08:02:28.657Z] [DEBUG] Created new response for field continuityTesting with demo value {"value":"Comprehensive business continuity tests are documented annually for all facilities and services processing client data, ensuring consistent operational readiness."}
[2025-05-04T08:02:28.657Z] [INFO] Setting demo value for field "resiliencePolicy" {"value":"Our resilience policies cover comprehensive business continuity and disaster recovery measures, documented and enforced across all critical operational sites.","fieldId":68}
[2025-05-04T08:02:28.687Z] [DEBUG] Created new response for field resiliencePolicy with demo value {"value":"Our resilience policies cover comprehensive business continuity and disaster recovery measures, documented and enforced across all critical operational sites."}
[2025-05-04T08:02:28.687Z] [INFO] Setting demo value for field "bcpRolesResponsibilities" {"value":"Our business continuity plan explicitly defines personnel roles, responsibilities, and skills required for effective response and recovery during disruptions.","fieldId":69}
[2025-05-04T08:02:28.717Z] [DEBUG] Created new response for field bcpRolesResponsibilities with demo value {"value":"Our business continuity plan explicitly defines personnel roles, responsibilities, and skills required for effective response and recovery during disruptions."}
[2025-05-04T08:02:28.717Z] [INFO] Setting demo value for field "crisisManagementPlan" {"value":"Our crisis management plan clearly outlines response actions, communication protocols, and coordination strategies across all client data-handling locations.","fieldId":70}
[2025-05-04T08:02:28.748Z] [DEBUG] Created new response for field crisisManagementPlan with demo value {"value":"Our crisis management plan clearly outlines response actions, communication protocols, and coordination strategies across all client data-handling locations."}
[2025-05-04T08:02:28.748Z] [INFO] Setting demo value for field "bcpPolicyReview" {"value":"The business continuity and recovery policy undergoes a comprehensive review and formal approval annually to ensure it reflects our current operational environment.","fieldId":71}
[2025-05-04T08:02:28.779Z] [DEBUG] Created new response for field bcpPolicyReview with demo value {"value":"The business continuity and recovery policy undergoes a comprehensive review and formal approval annually to ensure it reflects our current operational environment."}
[2025-05-04T08:02:28.779Z] [INFO] Setting demo value for field "bcpCommunicationPlan" {"value":"The business continuity communication plan clearly specifies methods, channels, and responsibilities for communicating with internal and external stakeholders during events.","fieldId":72}
[2025-05-04T08:02:28.809Z] [DEBUG] Created new response for field bcpCommunicationPlan with demo value {"value":"The business continuity communication plan clearly specifies methods, channels, and responsibilities for communicating with internal and external stakeholders during events."}
[2025-05-04T08:02:28.809Z] [INFO] Setting demo value for field "continuityTraining" {"value":"Employees undergo annual training covering their business continuity responsibilities, roles during disruptions, and familiarization with continuity plans.","fieldId":73}
[2025-05-04T08:02:28.838Z] [DEBUG] Created new response for field continuityTraining with demo value {"value":"Employees undergo annual training covering their business continuity responsibilities, roles during disruptions, and familiarization with continuity plans."}
[2025-05-04T08:02:28.839Z] [INFO] Setting demo value for field "crisisTeamRoles" {"value":"Crisis response team roles and responsibilities are clearly documented and reviewed semi-annually, ensuring clarity at all business process levels.","fieldId":74}
[2025-05-04T08:02:28.869Z] [DEBUG] Created new response for field crisisTeamRoles with demo value {"value":"Crisis response team roles and responsibilities are clearly documented and reviewed semi-annually, ensuring clarity at all business process levels."}
[2025-05-04T08:02:28.869Z] [INFO] Setting demo value for field "assetRetrieval" {"value":"Assets from terminated employees and subcontractors are collected and inventoried on or before their last day, ensuring accurate reconciliation.","fieldId":75}
[2025-05-04T08:02:28.899Z] [DEBUG] Created new response for field assetRetrieval with demo value {"value":"Assets from terminated employees and subcontractors are collected and inventoried on or before their last day, ensuring accurate reconciliation."}
[2025-05-04T08:02:28.899Z] [INFO] Setting demo value for field "cloudInteroperability" {"value":"Our resiliency approach specifically addresses cloud service portability, interoperability, and exit strategies to mitigate vendor lock-in risks.","fieldId":76}
[2025-05-04T08:02:28.930Z] [DEBUG] Created new response for field cloudInteroperability with demo value {"value":"Our resiliency approach specifically addresses cloud service portability, interoperability, and exit strategies to mitigate vendor lock-in risks."}
[2025-05-04T08:02:28.931Z] [INFO] Setting demo value for field "immutableRecoveryData" {"value":"Immutable instances of recovery data are maintained using secure, air-gapped storage solutions, protected from modification or unauthorized access.","fieldId":77}
[2025-05-04T08:02:28.961Z] [DEBUG] Created new response for field immutableRecoveryData with demo value {"value":"Immutable instances of recovery data are maintained using secure, air-gapped storage solutions, protected from modification or unauthorized access."}
[2025-05-04T08:02:28.961Z] [INFO] Setting demo value for field "powerBackup" {"value":"Business-critical equipment is supported by multiple power sources, including backup generators and redundant power grids, routinely maintained and tested quarterly.","fieldId":78}
[2025-05-04T08:02:28.992Z] [DEBUG] Created new response for field powerBackup with demo value {"value":"Business-critical equipment is supported by multiple power sources, including backup generators and redundant power grids, routinely maintained and tested quarterly."}
[2025-05-04T08:02:28.992Z] [INFO] Setting demo value for field "securityExceptions" {"value":"We manage exceptions through a centralized registry, reviewed monthly to ensure timely mitigation.","fieldId":79}
[2025-05-04T08:02:29.022Z] [DEBUG] Created new response for field securityExceptions with demo value {"value":"We manage exceptions through a centralized registry, reviewed monthly to ensure timely mitigation."}
[2025-05-04T08:02:29.022Z] [INFO] Setting demo value for field "wirelessSegmentation" {"value":"Non-production and guest wireless networks are segregated from production systems through logical network isolation and firewall rules.","fieldId":80}
[2025-05-04T08:02:29.057Z] [DEBUG] Created new response for field wirelessSegmentation with demo value {"value":"Non-production and guest wireless networks are segregated from production systems through logical network isolation and firewall rules."}
[2025-05-04T08:02:29.057Z] [INFO] Setting demo value for field "standardChangeControl" {"value":"All system and operational changes undergo a standardized change control review process, documented and approved through our automated tracking system.","fieldId":81}
[2025-05-04T08:02:29.088Z] [DEBUG] Created new response for field standardChangeControl with demo value {"value":"All system and operational changes undergo a standardized change control review process, documented and approved through our automated tracking system."}
[2025-05-04T08:02:29.088Z] [INFO] Setting demo value for field "emergingTechnologies" {"value":"We integrate cybersecurity considerations at the beginning of the evaluation phase for emerging technologies, following our defined security framework.","fieldId":82}
[2025-05-04T08:02:29.118Z] [DEBUG] Created new response for field emergingTechnologies with demo value {"value":"We integrate cybersecurity considerations at the beginning of the evaluation phase for emerging technologies, following our defined security framework."}
[2025-05-04T08:02:29.118Z] [INFO] Setting demo value for field "recoveryObjectives" {"value":"Our RPO ensures data integrity by limiting potential data loss to less than one hour, fully aligning with our defined 4-hour RTO.","fieldId":83}
[2025-05-04T08:02:29.186Z] [DEBUG] Created new response for field recoveryObjectives with demo value {"value":"Our RPO ensures data integrity by limiting potential data loss to less than one hour, fully aligning with our defined 4-hour RTO."}
[2025-05-04T08:02:29.186Z] [INFO] Setting demo value for field "criticalOperations" {"value":"Our critical operational objectives include restoring service functionality within 4 hours and maintaining data integrity with minimal data loss.","fieldId":84}
[2025-05-04T08:02:29.217Z] [DEBUG] Created new response for field criticalOperations with demo value {"value":"Our critical operational objectives include restoring service functionality within 4 hours and maintaining data integrity with minimal data loss."}
[2025-05-04T08:02:29.217Z] [INFO] Setting demo value for field "fraudActivityReporting" {"value":"Suspected and confirmed fraud activities are promptly reported and communicated to affected clients using structured reporting processes and secure channels.","fieldId":85}
[2025-05-04T08:02:29.247Z] [DEBUG] Created new response for field fraudActivityReporting with demo value {"value":"Suspected and confirmed fraud activities are promptly reported and communicated to affected clients using structured reporting processes and secure channels."}
[2025-05-04T08:02:29.247Z] [INFO] Setting demo value for field "cybersecurityRoles" {"value":"Roles and responsibilities within our cybersecurity team are clearly documented, updated annually, and communicated during onboarding and ongoing training.","fieldId":86}
[2025-05-04T08:02:29.277Z] [DEBUG] Created new response for field cybersecurityRoles with demo value {"value":"Roles and responsibilities within our cybersecurity team are clearly documented, updated annually, and communicated during onboarding and ongoing training."}
[2025-05-04T08:02:29.277Z] [INFO] Setting demo value for field "insuranceCoverage" {"value":"Our organization maintains comprehensive insurance coverage, including liability, property damage, cybersecurity, and operational risk insurance.","fieldId":87}
[2025-05-04T08:02:29.308Z] [DEBUG] Created new response for field insuranceCoverage with demo value {"value":"Our organization maintains comprehensive insurance coverage, including liability, property damage, cybersecurity, and operational risk insurance."}
[2025-05-04T08:02:29.308Z] [INFO] Setting demo value for field "networkRedundancy" {"value":"We employ diverse telecommunication carriers, redundant network pathways, and scalable circuits designed around risk assessments and operational requirements.","fieldId":88}
[2025-05-04T08:02:29.338Z] [DEBUG] Created new response for field networkRedundancy with demo value {"value":"We employ diverse telecommunication carriers, redundant network pathways, and scalable circuits designed around risk assessments and operational requirements."}
[2025-05-04T08:02:29.338Z] [INFO] Setting demo value for field "dataLossPrevention" {"value":"Our DLP measures include endpoint monitoring, real-time alerts, and automatic prevention to detect and prevent unauthorized access or data leakage.","fieldId":89}
[2025-05-04T08:02:29.368Z] [DEBUG] Created new response for field dataLossPrevention with demo value {"value":"Our DLP measures include endpoint monitoring, real-time alerts, and automatic prevention to detect and prevent unauthorized access or data leakage."}
[2025-05-04T08:02:29.368Z] [INFO] Setting demo value for field "dataLossGovernance" {"value":"Information and data loss prevention governance is documented, with clear policies, detection mechanisms, and periodic training for employees.","fieldId":90}
[2025-05-04T08:02:29.398Z] [DEBUG] Created new response for field dataLossGovernance with demo value {"value":"Information and data loss prevention governance is documented, with clear policies, detection mechanisms, and periodic training for employees."}
[2025-05-04T08:02:29.398Z] [INFO] Setting demo value for field "activityLogging" {"value":"User activities across all critical systems and applications are logged and monitored continuously to detect and respond to suspicious behavior.","fieldId":91}
[2025-05-04T08:02:29.428Z] [DEBUG] Created new response for field activityLogging with demo value {"value":"User activities across all critical systems and applications are logged and monitored continuously to detect and respond to suspicious behavior."}
[2025-05-04T08:02:29.428Z] [INFO] Setting demo value for field "incidentDocumentation" {"value":"Cybersecurity incidents are systematically documented and reported, including incident timelines, actions taken, and post-incident analysis.","fieldId":92}
[2025-05-04T08:02:29.458Z] [DEBUG] Created new response for field incidentDocumentation with demo value {"value":"Cybersecurity incidents are systematically documented and reported, including incident timelines, actions taken, and post-incident analysis."}
[2025-05-04T08:02:29.459Z] [INFO] Setting demo value for field "databaseSynchronization" {"value":"Database mirroring, replication, and synchronization technologies are actively used to ensure continuous data protection and rapid recovery capabilities.","fieldId":93}
[2025-05-04T08:02:29.489Z] [DEBUG] Created new response for field databaseSynchronization with demo value {"value":"Database mirroring, replication, and synchronization technologies are actively used to ensure continuous data protection and rapid recovery capabilities."}
[2025-05-04T08:02:29.489Z] [INFO] Setting demo value for field "webFiltering" {"value":"We use advanced web-filtering technology to block and monitor access to high-risk or malicious websites, updated continuously based on threat intelligence.","fieldId":94}
[2025-05-04T08:02:29.519Z] [DEBUG] Created new response for field webFiltering with demo value {"value":"We use advanced web-filtering technology to block and monitor access to high-risk or malicious websites, updated continuously based on threat intelligence."}
[2025-05-04T08:02:29.519Z] [INFO] Setting demo value for field "encryptionVerification" {"value":"Regular audits and verification processes confirm that no client data remains unencrypted at rest or in transit, with quarterly validation checks.","fieldId":95}
[2025-05-04T08:02:29.550Z] [DEBUG] Created new response for field encryptionVerification with demo value {"value":"Regular audits and verification processes confirm that no client data remains unencrypted at rest or in transit, with quarterly validation checks."}
[2025-05-04T08:02:29.550Z] [INFO] Setting demo value for field "clientDataSegregation" {"value":"We implement strict logical and physical segregation of client data through virtual networks, dedicated servers, and secure data storage areas.","fieldId":96}
[2025-05-04T08:02:29.580Z] [DEBUG] Created new response for field clientDataSegregation with demo value {"value":"We implement strict logical and physical segregation of client data through virtual networks, dedicated servers, and secure data storage areas."}
[2025-05-04T08:02:29.580Z] [INFO] Setting demo value for field "tlsEncryptionStandards" {"value":"Client data in transit is encrypted using modern protocols equivalent to TLS 1.2 or greater, regularly audited for compliance with security standards.","fieldId":97}
[2025-05-04T08:02:29.610Z] [DEBUG] Created new response for field tlsEncryptionStandards with demo value {"value":"Client data in transit is encrypted using modern protocols equivalent to TLS 1.2 or greater, regularly audited for compliance with security standards."}
[2025-05-04T08:02:29.611Z] [INFO] Setting demo value for field "endpointMalwareScanning" {"value":"Endpoint devices, including servers, laptops, and workstations, are protected by regularly updated antivirus and antimalware software with automated scanning enabled.","fieldId":98}
[2025-05-04T08:02:29.641Z] [DEBUG] Created new response for field endpointMalwareScanning with demo value {"value":"Endpoint devices, including servers, laptops, and workstations, are protected by regularly updated antivirus and antimalware software with automated scanning enabled."}
[2025-05-04T08:02:29.641Z] [INFO] Setting demo value for field "emailMalwareScanning" {"value":"Email attachments and embedded links are automatically scanned for malware and phishing threats using advanced email security solutions.","fieldId":99}
[2025-05-04T08:02:29.672Z] [DEBUG] Created new response for field emailMalwareScanning with demo value {"value":"Email attachments and embedded links are automatically scanned for malware and phishing threats using advanced email security solutions."}
[2025-05-04T08:02:29.672Z] [INFO] Setting demo value for field "threatIntelligence" {"value":"We maintain active subscriptions and partnerships with leading cyber threat intelligence agencies to stay updated on emerging threats.","fieldId":100}
[2025-05-04T08:02:29.703Z] [DEBUG] Created new response for field threatIntelligence with demo value {"value":"We maintain active subscriptions and partnerships with leading cyber threat intelligence agencies to stay updated on emerging threats."}
[2025-05-04T08:02:29.703Z] [INFO] Setting demo value for field "impactAnalysis" {"value":"A detailed Business Impact Analysis (BIA) is conducted annually, defining recovery priorities, resource requirements, and acceptable downtime for critical operations.","fieldId":101}
[2025-05-04T08:02:29.733Z] [DEBUG] Created new response for field impactAnalysis with demo value {"value":"A detailed Business Impact Analysis (BIA) is conducted annually, defining recovery priorities, resource requirements, and acceptable downtime for critical operations."}
[2025-05-04T08:02:29.733Z] [INFO] Setting demo value for field "realisticTesting" {"value":"We use realistic business-disruption scenarios during our annual continuity exercises to verify our capability to meet defined recovery objectives.","fieldId":102}
[2025-05-04T08:02:29.763Z] [DEBUG] Created new response for field realisticTesting with demo value {"value":"We use realistic business-disruption scenarios during our annual continuity exercises to verify our capability to meet defined recovery objectives."}
[2025-05-04T08:02:29.763Z] [INFO] Setting demo value for field "riskAssessment" {"value":"We conduct information security risk assessments bi-annually, identifying and mitigating emerging risks.","fieldId":103}
[2025-05-04T08:02:29.792Z] [DEBUG] Created new response for field riskAssessment with demo value {"value":"We conduct information security risk assessments bi-annually, identifying and mitigating emerging risks."}
[2025-05-04T08:02:29.792Z] [INFO] Setting demo value for field "riskBasedControls" {"value":"Our cybersecurity team updates security controls quarterly based on outcomes of periodic risk assessments to stay within our risk tolerance.","fieldId":104}
[2025-05-04T08:02:29.822Z] [DEBUG] Created new response for field riskBasedControls with demo value {"value":"Our cybersecurity team updates security controls quarterly based on outcomes of periodic risk assessments to stay within our risk tolerance."}
[2025-05-04T08:02:29.823Z] [INFO] Setting demo value for field "incidentReporting" {"value":"Cyber incidents and threats are reported promptly through structured channels, ensuring rapid communication internally and externally, supported by regular updates.","fieldId":105}
8:02:29 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-04T08:02:29.853Z] [DEBUG] Created new response for field incidentReporting with demo value {"value":"Cyber incidents and threats are reported promptly through structured channels, ensuring rapid communication internally and externally, supported by regular updates."}
[2025-05-04T08:02:29.853Z] [INFO] Setting demo value for field "keyManagementStrategy" {"value":"A centralized cryptographic key management system securely stores and regularly rotates encryption keys, following industry best practices.","fieldId":106}
[2025-05-04T08:02:29.885Z] [DEBUG] Created new response for field keyManagementStrategy with demo value {"value":"A centralized cryptographic key management system securely stores and regularly rotates encryption keys, following industry best practices."}
[2025-05-04T08:02:29.885Z] [INFO] Setting demo value for field "incidentPlanTesting" {"value":"We test our incident management plan annually through scenario-based simulations and tabletop exercises, documenting outcomes and improvements.","fieldId":107}
[2025-05-04T08:02:29.915Z] [DEBUG] Created new response for field incidentPlanTesting with demo value {"value":"We test our incident management plan annually through scenario-based simulations and tabletop exercises, documenting outcomes and improvements."}
[2025-05-04T08:02:29.915Z] [INFO] Setting demo value for field "incidentManagementPlan" {"value":"Our incident management plan is comprehensively documented, covering detection, response, communication, and recovery procedures, and reviewed annually.","fieldId":108}
[2025-05-04T08:02:29.946Z] [DEBUG] Created new response for field incidentManagementPlan with demo value {"value":"Our incident management plan is comprehensively documented, covering detection, response, communication, and recovery procedures, and reviewed annually."}
[2025-05-04T08:02:29.946Z] [INFO] Setting demo value for field "incidentCoordination" {"value":"Incident response involves coordinated efforts between internal teams, external stakeholders, and, if necessary, engagement with law enforcement authorities.","fieldId":109}
[2025-05-04T08:02:29.977Z] [DEBUG] Created new response for field incidentCoordination with demo value {"value":"Incident response involves coordinated efforts between internal teams, external stakeholders, and, if necessary, engagement with law enforcement authorities."}
[2025-05-04T08:02:29.977Z] [INFO] Setting demo value for field "incidentPlanUpdates" {"value":"Incident response plans are reviewed and updated quarterly, integrating insights from real incidents, threat intelligence, and best practices shared by industry partners.","fieldId":110}
[2025-05-04T08:02:30.012Z] [DEBUG] Created new response for field incidentPlanUpdates with demo value {"value":"Incident response plans are reviewed and updated quarterly, integrating insights from real incidents, threat intelligence, and best practices shared by industry partners."}
[2025-05-04T08:02:30.012Z] [INFO] Setting demo value for field "incidentEscalation" {"value":"Incident escalation protocols are clearly documented, outlining specific thresholds, escalation paths, and communication responsibilities for various incident levels.","fieldId":111}
[2025-05-04T08:02:30.044Z] [DEBUG] Created new response for field incidentEscalation with demo value {"value":"Incident escalation protocols are clearly documented, outlining specific thresholds, escalation paths, and communication responsibilities for various incident levels."}
[2025-05-04T08:02:30.044Z] [INFO] Setting demo value for field "incidentRoles" {"value":"Our incident response program clearly specifies team roles, decision-making authorities, and escalation paths, documented and reviewed bi-annually.","fieldId":112}
[2025-05-04T08:02:30.078Z] [DEBUG] Created new response for field incidentRoles with demo value {"value":"Our incident response program clearly specifies team roles, decision-making authorities, and escalation paths, documented and reviewed bi-annually."}
[2025-05-04T08:02:30.078Z] [INFO] Setting demo value for field "incidentResponse" {"value":"Our incident response plan is reviewed quarterly by our security team and formally approved annually by senior management following a comprehensive audit.","fieldId":113}
[2025-05-04T08:02:30.110Z] [DEBUG] Created new response for field incidentResponse with demo value {"value":"Our incident response plan is reviewed quarterly by our security team and formally approved annually by senior management following a comprehensive audit."}
[2025-05-04T08:02:30.110Z] [INFO] Setting demo value for field "incidentContainmentSpeed" {"value":"Cybersecurity incidents are contained and mitigated promptly through predefined procedures, with actions initiated within 1 hour of detection.","fieldId":114}
[2025-05-04T08:02:30.143Z] [DEBUG] Created new response for field incidentContainmentSpeed with demo value {"value":"Cybersecurity incidents are contained and mitigated promptly through predefined procedures, with actions initiated within 1 hour of detection."}
[2025-05-04T08:02:30.143Z] [INFO] Setting demo value for field "forensicSupport" {"value":"Our cybersecurity team possesses dedicated forensic investigation tools and specialists to thoroughly examine and respond to incidents promptly.","fieldId":115}
[2025-05-04T08:02:30.175Z] [DEBUG] Created new response for field forensicSupport with demo value {"value":"Our cybersecurity team possesses dedicated forensic investigation tools and specialists to thoroughly examine and respond to incidents promptly."}
[2025-05-04T08:02:30.175Z] [INFO] Setting demo value for field "clientIncidentNotification" {"value":"Clients are notified promptly about security incidents affecting their data through secure communication channels, including incident details and mitigation steps.","fieldId":116}
[2025-05-04T08:02:30.207Z] [DEBUG] Created new response for field clientIncidentNotification with demo value {"value":"Clients are notified promptly about security incidents affecting their data through secure communication channels, including incident details and mitigation steps."}
[2025-05-04T08:02:30.207Z] [INFO] Setting demo value for field "logRetention" {"value":"We maintain immediate access to the most recent three months of activity and security event logs, stored securely and reviewed frequently.","fieldId":117}
[2025-05-04T08:02:30.239Z] [DEBUG] Created new response for field logRetention with demo value {"value":"We maintain immediate access to the most recent three months of activity and security event logs, stored securely and reviewed frequently."}
[2025-05-04T08:02:30.240Z] [INFO] Setting demo value for field "cyberInvestigation" {"value":"Cyber events undergo thorough analysis within 24 hours to identify root cause, scope, damage assessment, and preventive recommendations.","fieldId":118}
[2025-05-04T08:02:30.275Z] [DEBUG] Created new response for field cyberInvestigation with demo value {"value":"Cyber events undergo thorough analysis within 24 hours to identify root cause, scope, damage assessment, and preventive recommendations."}
[2025-05-04T08:02:30.275Z] [INFO] Setting demo value for field "vulnerabilityRootCause" {"value":"Root cause analysis of vulnerabilities is conducted systematically, with outcomes documented and used proactively to reduce future occurrences.","fieldId":119}
[2025-05-04T08:02:30.306Z] [DEBUG] Created new response for field vulnerabilityRootCause with demo value {"value":"Root cause analysis of vulnerabilities is conducted systematically, with outcomes documented and used proactively to reduce future occurrences."}
[2025-05-04T08:02:30.306Z] [INFO] Setting demo value for field "disruptionRisk" {"value":"Risk assessments are performed annually to evaluate potential disruptions, documenting risks and mitigation measures as part of our resiliency program.","fieldId":120}
[2025-05-04T08:02:30.342Z] [DEBUG] Created new response for field disruptionRisk with demo value {"value":"Risk assessments are performed annually to evaluate potential disruptions, documenting risks and mitigation measures as part of our resiliency program."}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:02:30.342Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T08:02:30.342Z] [INFO] Demo auto-fill progress calculation result {"taskId":739,"fieldCount":120,"completedCount":120,"calculatedProgress":100,"oldStatus":"not_started","newStatus":"ready_for_submission"}
[2025-05-04T08:02:30.373Z] [DEBUG] Broadcasting task update with object format {"taskId":739,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345750373_ovzs35dey' }
[2025-05-04T08:02:30.374Z] [INFO] Successfully broadcasted task_update message 
[2025-05-04T08:02:30.374Z] [INFO] Demo data application completed {"taskId":739,"formType":"ky3p","inserted":120,"updated":0,"errors":0,"progress":100}
8:02:30 AM [info] POST /api/ky3p/demo-autofill/739 200 in 4070ms :: {"success":true,"message":"Successfully applied demo data to 120 fields","fie...
[Tasks Routes] Fetching task by ID: {
  taskId: 739,
  userCompanyId: 267,
  timestamp: '2025-05-04T08:02:30.572Z'
}
[Tasks Routes] Task found by ID: {
  taskId: 739,
  title: '2. S&P KY3P Security Assessment: DevTest12',
  type: 'ky3p',
  formDataFields: 0,
  timestamp: '2025-05-04T08:02:30.603Z'
}
8:02:30 AM [info] GET /api/tasks/739 200 in 65ms :: {"id":739,"title":"2. S&P KY3P Security Assessment: DevTest12","description":...
[2025-05-04T08:02:30.791Z] [INFO] Fetching KY3P progress for task 739 
[2025-05-04T08:02:30.856Z] [INFO] Retrieved 120 responses for task 739 
8:02:30 AM [info] GET /api/ky3p/progress/739 200 in 132ms :: {"success":true,"taskId":739,"status":"ready_for_submission","responses":[{"i...
[2025-05-04T08:02:31.305Z] [INFO] Fetching KY3P progress for task 739 
[2025-05-04T08:02:31.369Z] [INFO] Retrieved 120 responses for task 739 
8:02:31 AM [info] GET /api/ky3p/progress/739 304 in 133ms :: {"success":true,"taskId":739,"status":"ready_for_submission","responses":[{"i...
8:02:32 AM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
[KY3P API] Received batch update for task 739 with 120 fields
[KY3P] Task 739 progress updated: 0%
8:02:33 AM [info] POST /api/ky3p/batch-update/739 200 in 371ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[KY3P API] Received batch update for task 739 with 120 fields
[KY3P] Task 739 progress updated: 0%
8:02:34 AM [info] POST /api/ky3p/batch-update/739 200 in 367ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
8:02:35 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[KY3P API] Received batch update for task 739 with 120 fields
[KY3P] Task 739 progress updated: 0%
8:02:36 AM [info] POST /api/ky3p/batch-update/739 200 in 360ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[KY3P API] Received batch update for task 739 with 120 fields
[KY3P] Task 739 progress updated: 0%
8:02:37 AM [info] POST /api/ky3p/batch-update/739 200 in 361ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
8:02:38 AM [info] GET /api/companies/current 304 in 30ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[KY3P API] Received batch update for task 739 with 120 fields
[KY3P] Task 739 progress updated: 0%
8:02:39 AM [info] POST /api/ky3p/batch-update/739 200 in 359ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[KY3P API] Received batch update for task 739 with 120 fields
[KY3P] Task 739 progress updated: 0%
8:02:41 AM [info] POST /api/ky3p/batch-update/739 200 in 393ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
8:02:41 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[KY3P API] Received batch update for task 739 with 120 fields
[KY3P] Task 739 progress updated: 0%
8:02:42 AM [info] POST /api/ky3p/batch-update/739 200 in 415ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T08:02:43.278Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[KY3P API] Received batch update for task 739 with 120 fields
[KY3P] Task 739 progress updated: 0%
8:02:43 AM [info] POST /api/ky3p/batch-update/739 200 in 362ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
8:02:44 AM [info] GET /api/companies/current 304 in 33ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[KY3P API] Received batch update for task 739 with 120 fields
[KY3P] Task 739 progress updated: 0%
8:02:45 AM [info] POST /api/ky3p/batch-update/739 200 in 383ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[Tasks Routes] Updating task progress: { taskId: 739, timestamp: '2025-05-04T08:02:46.204Z' }
[KY3P API] Received batch update for task 739 with 120 fields
[Task Reconciliation] Using improved unified progress calculation for KY3P task 739
[Task Reconciliation] Error fetching KY3P responses: TypeError: calculateAndUpdateTaskProgress is not a function
    at reconcileTaskProgress (/home/runner/workspace/server/utils/task-reconciliation.ts:353:30)
    at async <anonymous> (/home/runner/workspace/server/routes/tasks.ts:1105:5)
TypeError: calculateAndUpdateTaskProgress is not a function
    at reconcileTaskProgress (/home/runner/workspace/server/utils/task-reconciliation.ts:353:30)
    at async <anonymous> (/home/runner/workspace/server/routes/tasks.ts:1105:5)
[Task Reconciliation] Found 0 responses for task 739 (type: ky3p)
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:02:46.244Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 739,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'ready_for_submission',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] Correcting task 739: {
  progressFrom: 0,
  progressTo: 0,
  statusFrom: 'ready_for_submission',
  statusTo: 'not_started',
  forceUpdate: true
}
8:02:46 AM [info] GET /api/companies/current 304 in 60ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:02:46 AM [info] GET /api/tasks 304 in 43ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
[Progress Broadcast broadcast-1746345766304-350] Broadcasting progress update for task 739: {
  taskId: 739,
  progress: 0,
  status: 'not_started',
  timestamp: '2025-05-04T08:02:46.304Z',
  source: 'at reconcileTaskProgress (/home/runner/workspace/server/utils/task-reconciliation.ts:462:7)',
  hasMetadata: true
}
[Progress Utils] Broadcasting task progress update: {
  taskId: 739,
  progress: 0,
  requestedStatus: 'not_started',
  finalStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  timestamp: '2025-05-04T08:02:46.304Z'
}
[Progress Utils] Error tracking progress broadcast: ReferenceError: require is not defined
    at broadcastProgressUpdate (/home/runner/workspace/server/utils/progress.ts:749:40)
    at reconcileTaskProgress (/home/runner/workspace/server/utils/task-reconciliation.ts:462:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async <anonymous> (/home/runner/workspace/server/routes/tasks.ts:1105:5)
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345766305_2ceqydt7z' }
[2025-05-04T08:02:46.305Z] [INFO] Successfully broadcasted task_update message 
[Progress Broadcast broadcast-1746345766304-350] Successfully broadcast progress update for task 739
[Tasks Routes] Task progress reconciled: {
  taskId: 739,
  progress: 0,
  status: 'not_started',
  timestamp: '2025-05-04T08:02:46.336Z'
}
8:02:46 AM [info] POST /api/tasks/739/update-progress 200 in 169ms :: {"success":true,"progress":0,"status":"not_started","taskId":739}
8:02:46 AM [info] GET /api/tasks 304 in 35ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
[KY3P] Task 739 progress updated: 0%
8:02:46 AM [info] POST /api/ky3p/batch-update/739 200 in 386ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
8:02:46 AM [info] GET /api/tasks 304 in 32ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
8:02:49 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:02:52 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:02:55 AM [info] GET /api/companies/current 304 in 30ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:02:58 AM [info] GET /api/companies/current 304 in 30ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345539593-fzuaczh: { type: 'ping' }
[Current Company] Fetching company for user: { userId: 310, companyId: 267 }
[Current Company] Found company: {
  id: 267,
  name: 'DevTest12',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
8:03:01 AM [info] GET /api/companies/current 200 in 63ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 310, company_id: 267, email: '12@e.com' }
[2025-05-04T08:03:01.621Z] [INFO] Performing dynamic task unlocking check for company {"companyId":267,"userId":310}
[2025-05-04T08:03:01.650Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":267}
[Tasks] Automatically unlocking all tasks for company { userId: 310, companyId: 267, requestedBy: 'automatic_task_unlock' }
[2025-05-04T08:03:01.651Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":267}
[2025-05-04T08:03:01.681Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":267,"count":3,"taskIds":[738,740,739],"taskTypes":["company_kyb","open_banking","ky3p"]}
[Task Progress] Calculated progress for task 738 (company_kyb): 30/30 = 100%
[2025-05-04T08:03:01.740Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":738,"taskType":"company_kyb","storedProgress":100,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:03:01.740Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T08:03:01.740Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":738,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T08:03:01.770Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":738,"taskType":"company_kyb","progress":100,"status":"ready_for_submission"}
[2025-05-04T08:03:01.770Z] [DEBUG] Broadcasting task update with object format {"taskId":738,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345781770_qct1lis8e' }
[2025-05-04T08:03:01.771Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 740 (open_banking): 0/44 = 0%
[2025-05-04T08:03:01.829Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":740,"taskType":"open_banking","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:03:01.829Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T08:03:01.829Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":740,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T08:03:01.860Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":740,"taskType":"open_banking","progress":0,"status":"not_started"}
[2025-05-04T08:03:01.860Z] [DEBUG] Broadcasting task update with object format {"taskId":740,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345781860_d17c2s89i' }
[2025-05-04T08:03:01.860Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 739 (ky3p): 120/120 = 100%
[2025-05-04T08:03:01.918Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":739,"taskType":"ky3p","storedProgress":0,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:03:01.918Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T08:03:01.919Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":739,"progress":100,"currentStatus":"not_started","newStatus":"ready_for_submission"}
[2025-05-04T08:03:01.949Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":739,"taskType":"ky3p","progress":100,"status":"ready_for_submission"}
[2025-05-04T08:03:01.949Z] [DEBUG] Broadcasting task update with object format {"taskId":739,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345781949_rcq0fc54l' }
[2025-05-04T08:03:01.949Z] [INFO] Successfully broadcasted task_update message 
[2025-05-04T08:03:01.950Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":267,"count":3}
[Tasks] Successfully unlocked all tasks for company: 267
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 310',
    condition2: 'tasks.created_by = 310',
    condition3: "tasks.company_id = 267 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('12@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
8:03:02 AM [info] GET /api/tasks 200 in 430ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T08:03:03.261Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
8:03:04 AM [info] GET /api/companies/current 304 in 30ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:03:07 AM [info] GET /api/companies/current 304 in 30ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:03:10 AM [info] GET /api/companies/current 304 in 30ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:03:13 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:03:16 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:03:17 AM [info] GET /api/tasks 304 in 31ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
8:03:19 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:03:22 AM [info] GET /api/companies/current 304 in 30ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T08:03:23.256Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
8:03:25 AM [info] GET /api/companies/current 304 in 35ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:03:28 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:03:31 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 310, company_id: 267, email: '12@e.com' }
[2025-05-04T08:03:32.418Z] [INFO] Performing dynamic task unlocking check for company {"companyId":267,"userId":310}
[2025-05-04T08:03:32.456Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":267}
[Tasks] Automatically unlocking all tasks for company { userId: 310, companyId: 267, requestedBy: 'automatic_task_unlock' }
[2025-05-04T08:03:32.456Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":267}
[2025-05-04T08:03:32.494Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":267,"count":3,"taskIds":[740,739,738],"taskTypes":["open_banking","ky3p","company_kyb"]}
[Task Progress] Calculated progress for task 740 (open_banking): 0/44 = 0%
[2025-05-04T08:03:32.555Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":740,"taskType":"open_banking","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:03:32.555Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T08:03:32.556Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":740,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T08:03:32.586Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":740,"taskType":"open_banking","progress":0,"status":"not_started"}
[2025-05-04T08:03:32.586Z] [DEBUG] Broadcasting task update with object format {"taskId":740,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345812586_psxujvekl' }
[2025-05-04T08:03:32.586Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 739 (ky3p): 120/120 = 100%
[2025-05-04T08:03:32.650Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":739,"taskType":"ky3p","storedProgress":0,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:03:32.650Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T08:03:32.650Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":739,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T08:03:32.681Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":739,"taskType":"ky3p","progress":100,"status":"ready_for_submission"}
[2025-05-04T08:03:32.681Z] [DEBUG] Broadcasting task update with object format {"taskId":739,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345812681_9xqbydvc8' }
[2025-05-04T08:03:32.682Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 738 (company_kyb): 30/30 = 100%
[2025-05-04T08:03:32.766Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":738,"taskType":"company_kyb","storedProgress":100,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:03:32.766Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T08:03:32.767Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":738,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T08:03:32.797Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":738,"taskType":"company_kyb","progress":100,"status":"ready_for_submission"}
[2025-05-04T08:03:32.797Z] [DEBUG] Broadcasting task update with object format {"taskId":738,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345812797_3qn2qaiiu' }
[2025-05-04T08:03:32.798Z] [INFO] Successfully broadcasted task_update message 
[2025-05-04T08:03:32.798Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":267,"count":3}
[Tasks] Successfully unlocked all tasks for company: 267
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 310',
    condition2: 'tasks.created_by = 310',
    condition3: "tasks.company_id = 267 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('12@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
8:03:32 AM [info] GET /api/tasks 200 in 491ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
8:03:34 AM [info] GET /api/companies/current 304 in 37ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:03:37 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:03:40 AM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:03:43 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T08:03:43.255Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
8:03:46 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:03:48 AM [info] GET /api/tasks 304 in 33ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
8:03:49 AM [info] GET /api/companies/current 304 in 33ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:03:52 AM [info] GET /api/companies/current 304 in 33ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Using cached company data: 267
8:03:55 AM [info] GET /api/companies/current 304 in 30ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:03:58 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Fetching company for user: { userId: 310, companyId: 267 }
[Current Company] Found company: {
  id: 267,
  name: 'DevTest12',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
8:04:01 AM [info] GET /api/companies/current 304 in 62ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 310, company_id: 267, email: '12@e.com' }
[2025-05-04T08:04:03.276Z] [INFO] Performing dynamic task unlocking check for company {"companyId":267,"userId":310}
[2025-05-04T08:04:03.305Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":267}
[Tasks] Automatically unlocking all tasks for company { userId: 310, companyId: 267, requestedBy: 'automatic_task_unlock' }
[2025-05-04T08:04:03.306Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":267}
[2025-05-04T08:04:03.336Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":267,"count":3,"taskIds":[739,738,740],"taskTypes":["ky3p","company_kyb","open_banking"]}
[Task Progress] Calculated progress for task 739 (ky3p): 120/120 = 100%
[2025-05-04T08:04:03.395Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":739,"taskType":"ky3p","storedProgress":0,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:04:03.395Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T08:04:03.395Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":739,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T08:04:03.255Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[2025-05-04T08:04:03.425Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":739,"taskType":"ky3p","progress":100,"status":"ready_for_submission"}
[2025-05-04T08:04:03.425Z] [DEBUG] Broadcasting task update with object format {"taskId":739,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345843425_la1x4cknd' }
[2025-05-04T08:04:03.426Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 738 (company_kyb): 30/30 = 100%
[2025-05-04T08:04:03.484Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":738,"taskType":"company_kyb","storedProgress":100,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:04:03.484Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T08:04:03.484Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":738,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T08:04:03.518Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":738,"taskType":"company_kyb","progress":100,"status":"ready_for_submission"}
[2025-05-04T08:04:03.518Z] [DEBUG] Broadcasting task update with object format {"taskId":738,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345843519_hw9ghb26f' }
[2025-05-04T08:04:03.519Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 740 (open_banking): 0/44 = 0%
[2025-05-04T08:04:03.577Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":740,"taskType":"open_banking","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:04:03.577Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T08:04:03.577Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":740,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T08:04:03.608Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":740,"taskType":"open_banking","progress":0,"status":"not_started"}
[2025-05-04T08:04:03.608Z] [DEBUG] Broadcasting task update with object format {"taskId":740,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345843608_t6vtxrvhp' }
[2025-05-04T08:04:03.608Z] [INFO] Successfully broadcasted task_update message 
[2025-05-04T08:04:03.608Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":267,"count":3}
[Tasks] Successfully unlocked all tasks for company: 267
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 310',
    condition2: 'tasks.created_by = 310',
    condition3: "tasks.company_id = 267 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('12@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
8:04:03 AM [info] GET /api/tasks 200 in 424ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
8:04:04 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:04:07 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:04:10 AM [info] GET /api/companies/current 304 in 33ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:04:13 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:04:16 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:04:18 AM [info] GET /api/tasks 304 in 33ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
8:04:19 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:04:22 AM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T08:04:23.254Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
8:04:25 AM [info] GET /api/companies/current 304 in 35ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:04:28 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:04:31 AM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 310, company_id: 267, email: '12@e.com' }
[2025-05-04T08:04:34.056Z] [INFO] Performing dynamic task unlocking check for company {"companyId":267,"userId":310}
[2025-05-04T08:04:34.091Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":267}
[Tasks] Automatically unlocking all tasks for company { userId: 310, companyId: 267, requestedBy: 'automatic_task_unlock' }
[2025-05-04T08:04:34.092Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":267}
[2025-05-04T08:04:34.128Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":267,"count":3,"taskIds":[738,740,739],"taskTypes":["company_kyb","open_banking","ky3p"]}
[Task Progress] Calculated progress for task 738 (company_kyb): 30/30 = 100%
[2025-05-04T08:04:34.196Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":738,"taskType":"company_kyb","storedProgress":100,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:04:34.196Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T08:04:34.196Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":738,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T08:04:34.228Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":738,"taskType":"company_kyb","progress":100,"status":"ready_for_submission"}
[2025-05-04T08:04:34.228Z] [DEBUG] Broadcasting task update with object format {"taskId":738,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345874228_rcyvt5vbx' }
[2025-05-04T08:04:34.229Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 740 (open_banking): 0/44 = 0%
[2025-05-04T08:04:34.291Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":740,"taskType":"open_banking","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:04:34.291Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T08:04:34.291Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":740,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
8:04:34 AM [info] GET /api/companies/current 304 in 30ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-04T08:04:34.326Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":740,"taskType":"open_banking","progress":0,"status":"not_started"}
[2025-05-04T08:04:34.326Z] [DEBUG] Broadcasting task update with object format {"taskId":740,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345874326_vooqrxwsh' }
[2025-05-04T08:04:34.327Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 739 (ky3p): 120/120 = 100%
[2025-05-04T08:04:34.391Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":739,"taskType":"ky3p","storedProgress":0,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:04:34.391Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T08:04:34.391Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":739,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T08:04:34.423Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":739,"taskType":"ky3p","progress":100,"status":"ready_for_submission"}
[2025-05-04T08:04:34.423Z] [DEBUG] Broadcasting task update with object format {"taskId":739,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345874423_1p5gqzqc5' }
[2025-05-04T08:04:34.423Z] [INFO] Successfully broadcasted task_update message 
[2025-05-04T08:04:34.423Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":267,"count":3}
[Tasks] Successfully unlocked all tasks for company: 267
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 310',
    condition2: 'tasks.created_by = 310',
    condition3: "tasks.company_id = 267 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('12@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
8:04:34 AM [info] GET /api/tasks 200 in 467ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
8:04:37 AM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:04:40 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:04:43 AM [info] GET /api/companies/current 304 in 43ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T08:04:43.254Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
8:04:46 AM [info] GET /api/companies/current 304 in 33ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:04:49 AM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:04:49 AM [info] GET /api/tasks 304 in 32ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
8:04:52 AM [info] GET /api/companies/current 304 in 33ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:04:55 AM [info] GET /api/companies/current 304 in 33ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:04:58 AM [info] GET /api/companies/current 304 in 38ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345539593-fzuaczh: { type: 'ping' }
8:05:01 AM [info] GET /api/companies/current 304 in 33ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T08:05:03.254Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[Current Company] Fetching company for user: { userId: 310, companyId: 267 }
[Current Company] Found company: {
  id: 267,
  name: 'DevTest12',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
8:05:04 AM [info] GET /api/companies/current 304 in 85ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 310, company_id: 267, email: '12@e.com' }
[2025-05-04T08:05:04.885Z] [INFO] Performing dynamic task unlocking check for company {"companyId":267,"userId":310}
[2025-05-04T08:05:04.918Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":267}
[Tasks] Automatically unlocking all tasks for company { userId: 310, companyId: 267, requestedBy: 'automatic_task_unlock' }
[2025-05-04T08:05:04.918Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":267}
[2025-05-04T08:05:04.954Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":267,"count":3,"taskIds":[740,739,738],"taskTypes":["open_banking","ky3p","company_kyb"]}
[Task Progress] Calculated progress for task 740 (open_banking): 0/44 = 0%
[2025-05-04T08:05:05.022Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":740,"taskType":"open_banking","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:05:05.022Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T08:05:05.023Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":740,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T08:05:05.064Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":740,"taskType":"open_banking","progress":0,"status":"not_started"}
[2025-05-04T08:05:05.064Z] [DEBUG] Broadcasting task update with object format {"taskId":740,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345905064_vjnhz17n5' }
[2025-05-04T08:05:05.064Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 739 (ky3p): 120/120 = 100%
[2025-05-04T08:05:05.153Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":739,"taskType":"ky3p","storedProgress":0,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:05:05.153Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T08:05:05.153Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":739,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T08:05:05.195Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":739,"taskType":"ky3p","progress":100,"status":"ready_for_submission"}
[2025-05-04T08:05:05.195Z] [DEBUG] Broadcasting task update with object format {"taskId":739,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345905195_4142bq397' }
[2025-05-04T08:05:05.195Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 738 (company_kyb): 30/30 = 100%
[2025-05-04T08:05:05.260Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":738,"taskType":"company_kyb","storedProgress":100,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:05:05.260Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T08:05:05.260Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":738,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T08:05:05.295Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":738,"taskType":"company_kyb","progress":100,"status":"ready_for_submission"}
[2025-05-04T08:05:05.295Z] [DEBUG] Broadcasting task update with object format {"taskId":738,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345905295_99pucoyid' }
[2025-05-04T08:05:05.295Z] [INFO] Successfully broadcasted task_update message 
[2025-05-04T08:05:05.295Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":267,"count":3}
[Tasks] Successfully unlocked all tasks for company: 267
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 310',
    condition2: 'tasks.created_by = 310',
    condition3: "tasks.company_id = 267 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('12@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
8:05:05 AM [info] GET /api/tasks 200 in 505ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
8:05:07 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:05:10 AM [info] GET /api/companies/current 304 in 35ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:05:13 AM [info] GET /api/companies/current 304 in 36ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Using cached company data: 267
8:05:16 AM [info] GET /api/companies/current 304 in 38ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:05:19 AM [info] GET /api/companies/current 304 in 35ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] Using cached task data for user: 310
8:05:20 AM [info] GET /api/tasks 304 in 37ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
8:05:22 AM [info] GET /api/companies/current 304 in 35ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T08:05:23.254Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
8:05:25 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:05:28 AM [info] GET /api/companies/current 304 in 30ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:05:31 AM [info] GET /api/companies/current 304 in 33ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
8:05:34 AM [info] GET /api/companies/current 304 in 37ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 310, company_id: 267, email: '12@e.com' }
[2025-05-04T08:05:35.783Z] [INFO] Performing dynamic task unlocking check for company {"companyId":267,"userId":310}
[2025-05-04T08:05:35.812Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":267}
[Tasks] Automatically unlocking all tasks for company { userId: 310, companyId: 267, requestedBy: 'automatic_task_unlock' }
[2025-05-04T08:05:35.813Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":267}
[2025-05-04T08:05:35.851Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":267,"count":3,"taskIds":[739,738,740],"taskTypes":["ky3p","company_kyb","open_banking"]}
[Task Progress] Calculated progress for task 739 (ky3p): 120/120 = 100%
[2025-05-04T08:05:35.924Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":739,"taskType":"ky3p","storedProgress":0,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:05:35.924Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T08:05:35.924Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":739,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T08:05:35.957Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":739,"taskType":"ky3p","progress":100,"status":"ready_for_submission"}
[2025-05-04T08:05:35.957Z] [DEBUG] Broadcasting task update with object format {"taskId":739,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345935957_u60umlqad' }
[2025-05-04T08:05:35.957Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 738 (company_kyb): 30/30 = 100%
[2025-05-04T08:05:36.021Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":738,"taskType":"company_kyb","storedProgress":100,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:05:36.022Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T08:05:36.022Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":738,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T08:05:36.058Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":738,"taskType":"company_kyb","progress":100,"status":"ready_for_submission"}
[2025-05-04T08:05:36.058Z] [DEBUG] Broadcasting task update with object format {"taskId":738,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345936058_oirlfnk2c' }
[2025-05-04T08:05:36.058Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 740 (open_banking): 0/44 = 0%
[2025-05-04T08:05:36.133Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":740,"taskType":"open_banking","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:05:36.133Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T08:05:36.133Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":740,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T08:05:36.170Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":740,"taskType":"open_banking","progress":0,"status":"not_started"}
[2025-05-04T08:05:36.171Z] [DEBUG] Broadcasting task update with object format {"taskId":740,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746345936171_o64k955tq' }
[2025-05-04T08:05:36.171Z] [INFO] Successfully broadcasted task_update message 
[2025-05-04T08:05:36.171Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":267,"count":3}
[Tasks] Successfully unlocked all tasks for company: 267
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 310',
    condition2: 'tasks.created_by = 310',
    condition3: "tasks.company_id = 267 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('12@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
8:05:36 AM [info] GET /api/tasks 200 in 483ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
8:05:37 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:05:40 AM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:05:43 AM [info] GET /api/companies/current 304 in 36ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T08:05:43.254Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
8:05:47 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:05:50 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:05:53 AM [info] GET /api/companies/current 304 in 37ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:05:56 AM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:05:59 AM [info] GET /api/companies/current 304 in 42ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:06:02 AM [info] GET /api/companies/current 304 in 36ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T08:06:03.820Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[Current Company] Fetching company for user: { userId: 310, companyId: 267 }
[Current Company] Found company: {
  id: 267,
  name: 'DevTest12',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
8:06:05 AM [info] GET /api/companies/current 304 in 62ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:06:08 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:06:11 AM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:06:14 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:06:17 AM [info] GET /api/companies/current 304 in 36ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:06:20 AM [info] GET /api/companies/current 304 in 33ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:06:23 AM [info] GET /api/companies/current 304 in 38ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T08:06:23.819Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
8:06:26 AM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:06:29 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:06:32 AM [info] GET /api/companies/current 304 in 30ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
8:06:35 AM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:06:38 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:06:41 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[PeriodicTaskReconciliation] Cleaned up 10 expired entries from cache
[PeriodicTaskReconciliation] Reconciling batch of 10 tasks: [
  683, 685, 679, 699,
  691, 697, 702, 703,
  701, 705
]
[Task Progress] Calculated progress for task 683 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 685 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 679 (open_banking): 44/44 = 100%
[Task Progress] Calculated progress for task 699 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 691 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 697 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 702 (ky3p): 0/120 = 0%
[Task Progress] Calculated progress for task 703 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 701 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 705 (company_kyb): 30/30 = 100%
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T08:06:43.825Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
8:06:44 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345539593-fzuaczh: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T08:07:15.830Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[Current Company] Fetching company for user: { userId: 310, companyId: 267 }
[Current Company] Found company: {
  id: 267,
  name: 'DevTest12',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
8:07:16 AM [info] GET /api/companies/current 304 in 69ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T08:08:01.269Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 310, company_id: 267, email: '12@e.com' }
[2025-05-04T08:08:01.559Z] [INFO] Performing dynamic task unlocking check for company {"companyId":267,"userId":310}
[2025-05-04T08:08:01.595Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":267}
[Tasks] Automatically unlocking all tasks for company { userId: 310, companyId: 267, requestedBy: 'automatic_task_unlock' }
[2025-05-04T08:08:01.595Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":267}
[2025-05-04T08:08:01.632Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":267,"count":3,"taskIds":[738,740,739],"taskTypes":["company_kyb","open_banking","ky3p"]}
[Task Progress] Calculated progress for task 738 (company_kyb): 30/30 = 100%
[2025-05-04T08:08:01.706Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":738,"taskType":"company_kyb","storedProgress":100,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:08:01.706Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T08:08:01.706Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":738,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
8:08:01 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-04T08:08:01.738Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":738,"taskType":"company_kyb","progress":100,"status":"ready_for_submission"}
[2025-05-04T08:08:01.738Z] [DEBUG] Broadcasting task update with object format {"taskId":738,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746346081738_udzag1j5m' }
[2025-05-04T08:08:01.738Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 740 (open_banking): 0/44 = 0%
[2025-05-04T08:08:01.805Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":740,"taskType":"open_banking","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:08:01.805Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T08:08:01.805Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":740,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T08:08:01.837Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":740,"taskType":"open_banking","progress":0,"status":"not_started"}
[2025-05-04T08:08:01.838Z] [DEBUG] Broadcasting task update with object format {"taskId":740,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746346081838_6lq7m057t' }
[2025-05-04T08:08:01.838Z] [INFO] Successfully broadcasted task_update message 
8:08:01 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Task Progress] Calculated progress for task 739 (ky3p): 120/120 = 100%
[2025-05-04T08:08:01.906Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":739,"taskType":"ky3p","storedProgress":0,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:08:01.906Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T08:08:01.906Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":739,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T08:08:01.938Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":739,"taskType":"ky3p","progress":100,"status":"ready_for_submission"}
[2025-05-04T08:08:01.938Z] [DEBUG] Broadcasting task update with object format {"taskId":739,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746346081938_rvlbngqhb' }
[2025-05-04T08:08:01.938Z] [INFO] Successfully broadcasted task_update message 
[2025-05-04T08:08:01.938Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":267,"count":3}
[Tasks] Successfully unlocked all tasks for company: 267
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 310',
    condition2: 'tasks.created_by = 310',
    condition3: "tasks.company_id = 267 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('12@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
8:08:02 AM [info] GET /api/tasks 200 in 478ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T08:08:03.252Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
8:08:04 AM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:08:07 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:08:10 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:08:13 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Fetching company for user: { userId: 310, companyId: 267 }
[Current Company] Found company: {
  id: 267,
  name: 'DevTest12',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
8:08:16 AM [info] GET /api/companies/current 304 in 73ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:08:17 AM [info] GET /api/tasks 304 in 35ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
8:08:19 AM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:08:22 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T08:08:23.252Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
8:08:25 AM [info] GET /api/companies/current 304 in 43ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:08:28 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:08:31 AM [info] GET /api/companies/current 304 in 35ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 310, company_id: 267, email: '12@e.com' }
[2025-05-04T08:08:32.405Z] [INFO] Performing dynamic task unlocking check for company {"companyId":267,"userId":310}
[2025-05-04T08:08:32.436Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":267}
[Tasks] Automatically unlocking all tasks for company { userId: 310, companyId: 267, requestedBy: 'automatic_task_unlock' }
[2025-05-04T08:08:32.437Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":267}
[2025-05-04T08:08:32.468Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":267,"count":3,"taskIds":[740,739,738],"taskTypes":["open_banking","ky3p","company_kyb"]}
[Task Progress] Calculated progress for task 740 (open_banking): 0/44 = 0%
[2025-05-04T08:08:32.540Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":740,"taskType":"open_banking","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:08:32.540Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T08:08:32.540Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":740,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T08:08:32.576Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":740,"taskType":"open_banking","progress":0,"status":"not_started"}
[2025-05-04T08:08:32.576Z] [DEBUG] Broadcasting task update with object format {"taskId":740,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746346112576_u4sij7bx7' }
[2025-05-04T08:08:32.576Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 739 (ky3p): 120/120 = 100%
[2025-05-04T08:08:32.639Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":739,"taskType":"ky3p","storedProgress":0,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:08:32.639Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T08:08:32.639Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":739,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T08:08:32.672Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":739,"taskType":"ky3p","progress":100,"status":"ready_for_submission"}
[2025-05-04T08:08:32.672Z] [DEBUG] Broadcasting task update with object format {"taskId":739,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746346112672_gvtx3qbm3' }
[2025-05-04T08:08:32.673Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 738 (company_kyb): 30/30 = 100%
[2025-05-04T08:08:32.732Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":738,"taskType":"company_kyb","storedProgress":100,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:08:32.732Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T08:08:32.732Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":738,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T08:08:32.766Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":738,"taskType":"company_kyb","progress":100,"status":"ready_for_submission"}
[2025-05-04T08:08:32.766Z] [DEBUG] Broadcasting task update with object format {"taskId":738,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746346112766_yzuotvdxs' }
[2025-05-04T08:08:32.767Z] [INFO] Successfully broadcasted task_update message 
[2025-05-04T08:08:32.767Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":267,"count":3}
[Tasks] Successfully unlocked all tasks for company: 267
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 310',
    condition2: 'tasks.created_by = 310',
    condition3: "tasks.company_id = 267 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('12@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
8:08:32 AM [info] GET /api/tasks 200 in 459ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
8:08:34 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:08:37 AM [info] GET /api/companies/current 304 in 33ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:08:40 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:08:43 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T08:08:43.253Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
8:08:46 AM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:08:48 AM [info] GET /api/tasks 304 in 32ms :: [{"id":737,"title":"New User Invitation: 12@e.com","description":"Complete us...
8:08:49 AM [info] GET /api/companies/current 304 in 39ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:08:52 AM [info] GET /api/companies/current 304 in 35ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:08:55 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
8:08:58 AM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345539593-fzuaczh: { type: 'ping' }
8:09:01 AM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746345122787-c7l365a: { type: 'ping' }
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 310, company_id: 267, email: '12@e.com' }
[2025-05-04T08:09:03.232Z] [INFO] Performing dynamic task unlocking check for company {"companyId":267,"userId":310}
[2025-05-04T08:09:03.266Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":267}
[Tasks] Automatically unlocking all tasks for company { userId: 310, companyId: 267, requestedBy: 'automatic_task_unlock' }
[2025-05-04T08:09:03.267Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":267}
[2025-05-04T08:09:03.300Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":267,"count":3,"taskIds":[739,738,740],"taskTypes":["ky3p","company_kyb","open_banking"]}
[Task Progress] Calculated progress for task 739 (ky3p): 120/120 = 100%
[2025-05-04T08:09:03.362Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":739,"taskType":"ky3p","storedProgress":0,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:09:03.363Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T08:09:03.363Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":739,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T08:09:03.395Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":739,"taskType":"ky3p","progress":100,"status":"ready_for_submission"}
[2025-05-04T08:09:03.395Z] [DEBUG] Broadcasting task update with object format {"taskId":739,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746346143395_3ibj5x6b5' }
[2025-05-04T08:09:03.395Z] [INFO] Successfully broadcasted task_update message 
[INFO] [WebSocket] Received message from client client-1746345123282-2i9rhyw: {
  type: 'ping',
  timestamp: '2025-05-04T08:09:03.251Z',
  connectionId: 'ws_1746345122334_m7t8ic0rz'
}
[Task Progress] Calculated progress for task 738 (company_kyb): 30/30 = 100%
[2025-05-04T08:09:03.460Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":738,"taskType":"company_kyb","storedProgress":100,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T08:09:03.460Z'
}
[STATUS DETERMINATION] Task has 100% progress but