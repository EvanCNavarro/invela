> rest-express@1.0.0 dev
Database migrations disabled - schema already applied
[EmailService] Initializing email service
[EmailService] Email service initialized successfully
[OpenAI] Service initialized with API key: API key is set
Database module not found, creating a mock implementation
Database module not found, creating a mock implementation
Database module not found, creating a mock implementation
[Auth] Setting up authentication...
[Auth] Setting up PostgreSQL session store
[Auth] PostgreSQL session store initialized successfully
[Auth] Authentication setup completed
[2025-05-04T15:56:33.338Z] [INFO] [KY3P-BATCH-UPDATE] Registering KY3P batch update routes 
[2025-05-04T15:56:33.339Z] [INFO] Registering KY3P batch update routes 
[2025-05-04T15:56:33.339Z] [INFO] [UnifiedKY3P] Registering unified KY3P update routes 
[KY3P-FIELD-KEY] Successfully registered KY3P field key router
[Routes] Registered KY3P field key router
[2025-05-04T15:56:33.339Z] [INFO] Registering KY3P field update routes 
[2025-05-04T15:56:33.341Z] [INFO] [OpenBankingRoutes] Setting up routes... 
[Routes] Setting up unified form submission router
[Routes] Successfully registered unified form submission router
[Routes] Setting up transactional form submission router
[Routes] Successfully registered transactional form submission router
[Routes] Routes setup completed
[INFO] Unified WebSocket server initialized successfully with details: {
  clients: 0,
  path: '/ws',
  id: '39mg6m',
  timestamp: '2025-05-04T15:56:33.343Z'
}
3:56:33 PM [info] [ServerStartup] WebSocket server initialized with unified implementation
[2025-05-04T15:56:33.362Z] [INFO] [TaskWebSocket] WebSocket server registered with unified implementation 
3:56:33 PM [info] [ServerStartup] WebSocket server registered with task-update utility
[TaskBroadcast] WebSocket server reference set up
[TaskBroadcast] WebSocket server active with 0 connected clients
3:56:33 PM [info] [ServerStartup] WebSocket server registered with task-broadcast utility
3:56:33 PM [info] Setting up Vite development server
3:56:33 PM [express] Server running on 0.0.0.0:5000
3:56:33 PM [express] Environment: development
[Deployment] Server running on 0.0.0.0:5000
[Deployment] Environment: development
[Deployment] Port forwarding: Custom port: 5000
[Deployment] Development mode: Hot reloading enabled
3:56:33 PM [express] Starting periodic task reconciliation system...
[PeriodicTaskReconciliation] Stopped periodic reconciliation system
[PeriodicTaskReconciliation] Starting periodic reconciliation system (interval: 300000ms)
3:56:33 PM [express] Task reconciliation system initialized successfully
3:56:34 PM [info] [ServerStartup] WebSocket server active with 0 connected clients
[2025-05-04T15:56:39.190Z] New client connected to the pool (1/3)
[Current Company] Fetching company for user: { userId: 310, companyId: 267 }
[Current Company] Found company: {
  id: 267,
  name: 'DevTest12',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
3:56:39 PM [info] GET /api/companies/current 200 in 98ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:56:40 PM [info] GET /api/companies/current 304 in 42ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Client connected: client-1746374200791-9yighnc
[Auth] Unauthenticated user session
[INFO] [WebSocket] Client connected: client-1746374200840-jgpjffp
[INFO] [WebSocket] Received message from client client-1746374200791-9yighnc: {
  type: 'authenticate',
  data: { timestamp: '2025-05-04T15:56:40.867Z' }
}
[INFO] [WebSocket] Authentication from client client-1746374200791-9yighnc: { userId: undefined, companyId: undefined, hasToken: false }
3:56:41 PM [info] GET /api/companies/current 304 in 48ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 310, company_id: 267, email: '12@e.com' }
[2025-05-04T15:56:41.245Z] [INFO] Performing dynamic task unlocking check for company {"companyId":267,"userId":310}
[2025-05-04T15:56:41.278Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":267}
[Tasks] Automatically unlocking all tasks for company { userId: 310, companyId: 267, requestedBy: 'automatic_task_unlock' }
[2025-05-04T15:56:41.279Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":267}
[2025-05-04T15:56:41.356Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":267,"count":3,"taskIds":[740,739,738],"taskTypes":["open_banking","ky3p","company_kyb"]}
[Task Progress] Calculated progress for task 740 (open_banking): 0/44 = 0%
[2025-05-04T15:56:41.439Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":740,"taskType":"open_banking","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T15:56:41.439Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T15:56:41.440Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":740,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T15:56:41.474Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":740,"taskType":"open_banking","progress":0,"status":"not_started"}
[2025-05-04T15:56:41.474Z] [DEBUG] Broadcasting task update with object format {"taskId":740,"status":"not_started"}
[2025-05-04T15:56:41.474Z] [INFO] Successfully retrieved unified WebSocket server for broadcast 
[WebSocket] Broadcast task_update to 2 clients (0 errors) { messageId: 'msg_1746374201475_xnyobyudl' }
[2025-05-04T15:56:41.475Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 739 (ky3p): 120/120 = 100%
[2025-05-04T15:56:41.537Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":739,"taskType":"ky3p","storedProgress":100,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T15:56:41.537Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T15:56:41.537Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":739,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T15:56:41.572Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":739,"taskType":"ky3p","progress":100,"status":"ready_for_submission"}
[2025-05-04T15:56:41.572Z] [DEBUG] Broadcasting task update with object format {"taskId":739,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 2 clients (0 errors) { messageId: 'msg_1746374201572_37208i6r5' }
[2025-05-04T15:56:41.573Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 738 (company_kyb): 30/30 = 100%
[2025-05-04T15:56:41.638Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":738,"taskType":"company_kyb","storedProgress":100,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T15:56:41.638Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T15:56:41.639Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":738,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T15:56:41.671Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":738,"taskType":"company_kyb","progress":100,"status":"ready_for_submission"}
[2025-05-04T15:56:41.671Z] [DEBUG] Broadcasting task update with object format {"taskId":738,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 2 clients (0 errors) { messageId: 'msg_1746374201671_qisypvwul' }
[2025-05-04T15:56:41.672Z] [INFO] Successfully broadcasted task_update message 
[2025-05-04T15:56:41.672Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":267,"count":3}
[Tasks] Successfully unlocked all tasks for company: 267
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 310',
    condition2: 'tasks.created_by = 310',
    condition3: "tasks.company_id = 267 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('12@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
3:56:41 PM [info] GET /api/tasks 200 in 553ms :: [{"id":739,"title":"2. S&P KY3P Security Assessment: DevTest12","description"...
[INFO] [WebSocket] Client disconnected: client-1746374200791-9yighnc
[INFO] [WebSocket] Client disconnected: client-1746374200840-jgpjffp
3:56:44 PM [info] GET /api/companies/current 304 in 40ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:56:47 PM [info] GET /api/companies/current 304 in 37ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:56:50 PM [info] GET /api/companies/current 304 in 49ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Using cached company data: 267
3:56:53 PM [info] GET /api/companies/current 304 in 36ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:56:56 PM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] Using cached task data for user: 310
3:56:57 PM [info] GET /api/tasks 304 in 34ms :: [{"id":739,"title":"2. S&P KY3P Security Assessment: DevTest12","description"...
3:56:59 PM [info] GET /api/companies/current 304 in 37ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:57:02 PM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[PeriodicTaskReconciliation] Reconciling batch of 10 tasks: [
  683, 685, 679, 697,
  691, 699, 701, 705,
  702, 703
]
[Task Progress] Calculated progress for task 683 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 685 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 679 (open_banking): 44/44 = 100%
[Task Progress] Calculated progress for task 697 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 691 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 699 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 701 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 705 (company_kyb): 30/30 = 100%
[2025-05-04T15:57:05.111Z] New client connected to the pool (2/3)
[Task Progress] Calculated progress for task 702 (ky3p): 0/120 = 0%
3:57:05 PM [info] GET /api/companies/current 304 in 56ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Task Progress] Calculated progress for task 703 (open_banking): 0/44 = 0%
3:57:08 PM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:57:11 PM [info] GET /api/companies/current 304 in 40ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 310, company_id: 267, email: '12@e.com' }
[2025-05-04T15:57:12.161Z] [INFO] Performing dynamic task unlocking check for company {"companyId":267,"userId":310}
[2025-05-04T15:57:12.192Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":267}
[Tasks] Automatically unlocking all tasks for company { userId: 310, companyId: 267, requestedBy: 'automatic_task_unlock' }
[2025-05-04T15:57:12.193Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":267}
[2025-05-04T15:57:12.227Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":267,"count":3,"taskIds":[739,740,738],"taskTypes":["ky3p","open_banking","company_kyb"]}
[Task Progress] Calculated progress for task 739 (ky3p): 120/120 = 100%
[2025-05-04T15:57:12.298Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":739,"taskType":"ky3p","storedProgress":100,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T15:57:12.298Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T15:57:12.299Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":739,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T15:57:12.333Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":739,"taskType":"ky3p","progress":100,"status":"ready_for_submission"}
[2025-05-04T15:57:12.333Z] [DEBUG] Broadcasting task update with object format {"taskId":739,"status":"ready_for_submission"}
[2025-05-04T15:57:12.334Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[Task Progress] Calculated progress for task 740 (open_banking): 0/44 = 0%
[2025-05-04T15:57:12.402Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":740,"taskType":"open_banking","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T15:57:12.402Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T15:57:12.402Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":740,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T15:57:12.437Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":740,"taskType":"open_banking","progress":0,"status":"not_started"}
[2025-05-04T15:57:12.437Z] [DEBUG] Broadcasting task update with object format {"taskId":740,"status":"not_started"}
[2025-05-04T15:57:12.437Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[Task Progress] Calculated progress for task 738 (company_kyb): 30/30 = 100%
[2025-05-04T15:57:12.504Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":738,"taskType":"company_kyb","storedProgress":100,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T15:57:12.504Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T15:57:12.505Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":738,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T15:57:12.536Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":738,"taskType":"company_kyb","progress":100,"status":"ready_for_submission"}
[2025-05-04T15:57:12.536Z] [DEBUG] Broadcasting task update with object format {"taskId":738,"status":"ready_for_submission"}
[2025-05-04T15:57:12.536Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[2025-05-04T15:57:12.536Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":267,"count":3}
[Tasks] Successfully unlocked all tasks for company: 267
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 310',
    condition2: 'tasks.created_by = 310',
    condition3: "tasks.company_id = 267 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('12@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
3:57:12 PM [info] GET /api/tasks 200 in 469ms :: [{"id":739,"title":"2. S&P KY3P Security Assessment: DevTest12","description"...
3:57:14 PM [info] GET /api/companies/current 304 in 35ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:57:17 PM [info] GET /api/companies/current 304 in 37ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:57:20 PM [info] GET /api/companies/current 304 in 46ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:57:23 PM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:57:26 PM [info] GET /api/companies/current 304 in 46ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:57:27 PM [info] GET /api/tasks 304 in 35ms :: [{"id":739,"title":"2. S&P KY3P Security Assessment: DevTest12","description"...
3:57:29 PM [info] GET /api/companies/current 304 in 44ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:57:32 PM [info] GET /api/companies/current 304 in 35ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:57:35 PM [info] GET /api/companies/current 304 in 40ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:57:38 PM [info] GET /api/companies/current 304 in 37ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Fetching company for user: { userId: 310, companyId: 267 }
[Current Company] Found company: {
  id: 267,
  name: 'DevTest12',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
3:57:41 PM [info] GET /api/companies/current 304 in 63ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 310, company_id: 267, email: '12@e.com' }
[2025-05-04T15:57:43.002Z] [INFO] Performing dynamic task unlocking check for company {"companyId":267,"userId":310}
[2025-05-04T15:57:43.033Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":267}
[Tasks] Automatically unlocking all tasks for company { userId: 310, companyId: 267, requestedBy: 'automatic_task_unlock' }
[2025-05-04T15:57:43.034Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":267}
[2025-05-04T15:57:43.071Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":267,"count":3,"taskIds":[739,740,738],"taskTypes":["ky3p","open_banking","company_kyb"]}
[Task Progress] Calculated progress for task 739 (ky3p): 120/120 = 100%
[2025-05-04T15:57:43.138Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":739,"taskType":"ky3p","storedProgress":100,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T15:57:43.138Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T15:57:43.139Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":739,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T15:57:43.174Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":739,"taskType":"ky3p","progress":100,"status":"ready_for_submission"}
[2025-05-04T15:57:43.174Z] [DEBUG] Broadcasting task update with object format {"taskId":739,"status":"ready_for_submission"}
[2025-05-04T15:57:43.174Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[Task Progress] Calculated progress for task 740 (open_banking): 0/44 = 0%
[2025-05-04T15:57:43.240Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":740,"taskType":"open_banking","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T15:57:43.240Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T15:57:43.240Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":740,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T15:57:43.272Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":740,"taskType":"open_banking","progress":0,"status":"not_started"}
[2025-05-04T15:57:43.272Z] [DEBUG] Broadcasting task update with object format {"taskId":740,"status":"not_started"}
[2025-05-04T15:57:43.272Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[Task Progress] Calculated progress for task 738 (company_kyb): 30/30 = 100%
[2025-05-04T15:57:43.332Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":738,"taskType":"company_kyb","storedProgress":100,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T15:57:43.332Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T15:57:43.332Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":738,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T15:57:43.367Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":738,"taskType":"company_kyb","progress":100,"status":"ready_for_submission"}
[2025-05-04T15:57:43.367Z] [DEBUG] Broadcasting task update with object format {"taskId":738,"status":"ready_for_submission"}
[2025-05-04T15:57:43.367Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[2025-05-04T15:57:43.367Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":267,"count":3}
[Tasks] Successfully unlocked all tasks for company: 267
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 310',
    condition2: 'tasks.created_by = 310',
    condition3: "tasks.company_id = 267 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('12@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
3:57:43 PM [info] GET /api/tasks 200 in 498ms :: [{"id":739,"title":"2. S&P KY3P Security Assessment: DevTest12","description"...
3:57:44 PM [info] GET /api/companies/current 304 in 36ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:57:47 PM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:57:50 PM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:57:53 PM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:57:56 PM [info] GET /api/companies/current 304 in 35ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] Using cached task data for user: 310
3:57:58 PM [info] GET /api/tasks 304 in 40ms :: [{"id":739,"title":"2. S&P KY3P Security Assessment: DevTest12","description"...
3:57:59 PM [info] GET /api/companies/current 304 in 42ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:58:02 PM [info] GET /api/companies/current 304 in 35ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:58:05 PM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:58:08 PM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:58:11 PM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 310, company_id: 267, email: '12@e.com' }
[2025-05-04T15:58:13.874Z] [INFO] Performing dynamic task unlocking check for company {"companyId":267,"userId":310}
[2025-05-04T15:58:13.910Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":267}
[Tasks] Automatically unlocking all tasks for company { userId: 310, companyId: 267, requestedBy: 'automatic_task_unlock' }
[2025-05-04T15:58:13.911Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":267}
[2025-05-04T15:58:13.943Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":267,"count":3,"taskIds":[739,740,738],"taskTypes":["ky3p","open_banking","company_kyb"]}
[Task Progress] Calculated progress for task 739 (ky3p): 120/120 = 100%
[2025-05-04T15:58:14.020Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":739,"taskType":"ky3p","storedProgress":100,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T15:58:14.020Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T15:58:14.020Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":739,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T15:58:14.052Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":739,"taskType":"ky3p","progress":100,"status":"ready_for_submission"}
[2025-05-04T15:58:14.052Z] [DEBUG] Broadcasting task update with object format {"taskId":739,"status":"ready_for_submission"}
[2025-05-04T15:58:14.052Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[Task Progress] Calculated progress for task 740 (open_banking): 0/44 = 0%
[2025-05-04T15:58:14.113Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":740,"taskType":"open_banking","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T15:58:14.113Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T15:58:14.113Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":740,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T15:58:14.146Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":740,"taskType":"open_banking","progress":0,"status":"not_started"}
[2025-05-04T15:58:14.147Z] [DEBUG] Broadcasting task update with object format {"taskId":740,"status":"not_started"}
[2025-05-04T15:58:14.147Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[2025-05-04T15:58:14.169Z] New client connected to the pool (3/3)
[Task Progress] Calculated progress for task 738 (company_kyb): 30/30 = 100%
[2025-05-04T15:58:14.218Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":738,"taskType":"company_kyb","storedProgress":100,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T15:58:14.218Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T15:58:14.218Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":738,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T15:58:14.256Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":738,"taskType":"company_kyb","progress":100,"status":"ready_for_submission"}
[2025-05-04T15:58:14.256Z] [DEBUG] Broadcasting task update with object format {"taskId":738,"status":"ready_for_submission"}
[2025-05-04T15:58:14.256Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[2025-05-04T15:58:14.257Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":267,"count":3}
[Tasks] Successfully unlocked all tasks for company: 267
3:58:14 PM [info] GET /api/companies/current 304 in 35ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 310',
    condition2: 'tasks.created_by = 310',
    condition3: "tasks.company_id = 267 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('12@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
3:58:14 PM [info] GET /api/tasks 200 in 496ms :: [{"id":740,"title":"3. Open Banking Survey: DevTest12","description":"Complet...
3:58:17 PM [info] GET /api/companies/current 304 in 36ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:58:20 PM [info] GET /api/companies/current 304 in 33ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:58:23 PM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:58:26 PM [info] GET /api/companies/current 304 in 38ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:58:29 PM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:58:29 PM [info] GET /api/tasks 304 in 32ms :: [{"id":740,"title":"3. Open Banking Survey: DevTest12","description":"Complet...
3:58:32 PM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:58:35 PM [info] GET /api/companies/current 304 in 35ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:58:38 PM [info] GET /api/companies/current 304 in 37ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Fetching company for user: { userId: 310, companyId: 267 }
[Current Company] Found company: {
  id: 267,
  name: 'DevTest12',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
3:58:41 PM [info] GET /api/companies/current 304 in 98ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:58:44 PM [info] GET /api/companies/current 304 in 51ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 310, company_id: 267, email: '12@e.com' }
[2025-05-04T15:58:44.728Z] [INFO] Performing dynamic task unlocking check for company {"companyId":267,"userId":310}
[2025-05-04T15:58:44.758Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":267}
[Tasks] Automatically unlocking all tasks for company { userId: 310, companyId: 267, requestedBy: 'automatic_task_unlock' }
[2025-05-04T15:58:44.759Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":267}
[2025-05-04T15:58:44.790Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":267,"count":3,"taskIds":[740,739,738],"taskTypes":["open_banking","ky3p","company_kyb"]}
[Task Progress] Calculated progress for task 740 (open_banking): 0/44 = 0%
[2025-05-04T15:58:44.858Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":740,"taskType":"open_banking","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T15:58:44.858Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T15:58:44.858Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":740,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T15:58:44.894Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":740,"taskType":"open_banking","progress":0,"status":"not_started"}
[2025-05-04T15:58:44.894Z] [DEBUG] Broadcasting task update with object format {"taskId":740,"status":"not_started"}
[2025-05-04T15:58:44.894Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[Task Progress] Calculated progress for task 739 (ky3p): 120/120 = 100%
[2025-05-04T15:58:44.960Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":739,"taskType":"ky3p","storedProgress":100,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T15:58:44.960Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T15:58:44.960Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":739,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T15:58:44.994Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":739,"taskType":"ky3p","progress":100,"status":"ready_for_submission"}
[2025-05-04T15:58:44.994Z] [DEBUG] Broadcasting task update with object format {"taskId":739,"status":"ready_for_submission"}
[2025-05-04T15:58:44.994Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[Task Progress] Calculated progress for task 738 (company_kyb): 30/30 = 100%
[2025-05-04T15:58:45.085Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":738,"taskType":"company_kyb","storedProgress":100,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T15:58:45.085Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T15:58:45.085Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":738,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T15:58:45.118Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":738,"taskType":"company_kyb","progress":100,"status":"ready_for_submission"}
[2025-05-04T15:58:45.118Z] [DEBUG] Broadcasting task update with object format {"taskId":738,"status":"ready_for_submission"}
[2025-05-04T15:58:45.118Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[2025-05-04T15:58:45.118Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":267,"count":3}
[Tasks] Successfully unlocked all tasks for company: 267
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 310',
    condition2: 'tasks.created_by = 310',
    condition3: "tasks.company_id = 267 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('12@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
3:58:45 PM [info] GET /api/tasks 200 in 507ms :: [{"id":740,"title":"3. Open Banking Survey: DevTest12","description":"Complet...
3:58:47 PM [info] GET /api/companies/current 304 in 41ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:58:50 PM [info] GET /api/companies/current 304 in 48ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:58:53 PM [info] GET /api/companies/current 304 in 38ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:58:56 PM [info] GET /api/companies/current 304 in 36ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:58:59 PM [info] GET /api/companies/current 304 in 49ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:59:00 PM [info] GET /api/tasks 304 in 34ms :: [{"id":740,"title":"3. Open Banking Survey: DevTest12","description":"Complet...
3:59:02 PM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Using cached company data: 267
3:59:05 PM [info] GET /api/companies/current 304 in 40ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:59:08 PM [info] GET /api/companies/current 304 in 45ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:59:11 PM [info] GET /api/companies/current 304 in 41ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:59:14 PM [info] GET /api/companies/current 304 in 33ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 310, company_id: 267, email: '12@e.com' }
[2025-05-04T15:59:15.609Z] [INFO] Performing dynamic task unlocking check for company {"companyId":267,"userId":310}
[2025-05-04T15:59:15.641Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":267}
[Tasks] Automatically unlocking all tasks for company { userId: 310, companyId: 267, requestedBy: 'automatic_task_unlock' }
[2025-05-04T15:59:15.642Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":267}
[2025-05-04T15:59:15.675Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":267,"count":3,"taskIds":[740,739,738],"taskTypes":["open_banking","ky3p","company_kyb"]}
[Task Progress] Calculated progress for task 740 (open_banking): 0/44 = 0%
[2025-05-04T15:59:15.745Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":740,"taskType":"open_banking","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T15:59:15.745Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T15:59:15.746Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":740,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T15:59:15.778Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":740,"taskType":"open_banking","progress":0,"status":"not_started"}
[2025-05-04T15:59:15.778Z] [DEBUG] Broadcasting task update with object format {"taskId":740,"status":"not_started"}
[2025-05-04T15:59:15.778Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[Task Progress] Calculated progress for task 739 (ky3p): 120/120 = 100%
[2025-05-04T15:59:15.843Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":739,"taskType":"ky3p","storedProgress":100,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T15:59:15.843Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T15:59:15.843Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":739,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T15:59:15.877Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":739,"taskType":"ky3p","progress":100,"status":"ready_for_submission"}
[2025-05-04T15:59:15.877Z] [DEBUG] Broadcasting task update with object format {"taskId":739,"status":"ready_for_submission"}
[2025-05-04T15:59:15.877Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[Task Progress] Calculated progress for task 738 (company_kyb): 30/30 = 100%
[2025-05-04T15:59:15.939Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":738,"taskType":"company_kyb","storedProgress":100,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T15:59:15.939Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T15:59:15.939Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":738,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T15:59:15.973Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":738,"taskType":"company_kyb","progress":100,"status":"ready_for_submission"}
[2025-05-04T15:59:15.973Z] [DEBUG] Broadcasting task update with object format {"taskId":738,"status":"ready_for_submission"}
[2025-05-04T15:59:15.973Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[2025-05-04T15:59:15.973Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":267,"count":3}
[Tasks] Successfully unlocked all tasks for company: 267
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 310',
    condition2: 'tasks.created_by = 310',
    condition3: "tasks.company_id = 267 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('12@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
3:59:16 PM [info] GET /api/tasks 200 in 470ms :: [{"id":740,"title":"3. Open Banking Survey: DevTest12","description":"Complet...
[Current Company] Using cached company data: 267
3:59:17 PM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:59:20 PM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:59:23 PM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:59:26 PM [info] GET /api/companies/current 304 in 33ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:59:29 PM [info] GET /api/companies/current 304 in 45ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:59:31 PM [info] GET /api/tasks 304 in 34ms :: [{"id":740,"title":"3. Open Banking Survey: DevTest12","description":"Complet...
3:59:32 PM [info] GET /api/companies/current 304 in 42ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:59:35 PM [info] GET /api/companies/current 304 in 33ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:59:38 PM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:59:41 PM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Fetching company for user: { userId: 310, companyId: 267 }
[Current Company] Found company: {
  id: 267,
  name: 'DevTest12',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
3:59:44 PM [info] GET /api/companies/current 304 in 64ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 310, company_id: 267, email: '12@e.com' }
[2025-05-04T15:59:46.462Z] [INFO] Performing dynamic task unlocking check for company {"companyId":267,"userId":310}
[2025-05-04T15:59:46.493Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":267}
[Tasks] Automatically unlocking all tasks for company { userId: 310, companyId: 267, requestedBy: 'automatic_task_unlock' }
[2025-05-04T15:59:46.493Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":267}
[2025-05-04T15:59:46.523Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":267,"count":3,"taskIds":[740,739,738],"taskTypes":["open_banking","ky3p","company_kyb"]}
[Task Progress] Calculated progress for task 740 (open_banking): 0/44 = 0%
[2025-05-04T15:59:46.593Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":740,"taskType":"open_banking","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T15:59:46.593Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T15:59:46.594Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":740,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T15:59:46.626Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":740,"taskType":"open_banking","progress":0,"status":"not_started"}
[2025-05-04T15:59:46.626Z] [DEBUG] Broadcasting task update with object format {"taskId":740,"status":"not_started"}
[2025-05-04T15:59:46.627Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[Task Progress] Calculated progress for task 739 (ky3p): 120/120 = 100%
[2025-05-04T15:59:46.686Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":739,"taskType":"ky3p","storedProgress":100,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T15:59:46.686Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T15:59:46.686Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":739,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T15:59:46.723Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":739,"taskType":"ky3p","progress":100,"status":"ready_for_submission"}
[2025-05-04T15:59:46.723Z] [DEBUG] Broadcasting task update with object format {"taskId":739,"status":"ready_for_submission"}
[2025-05-04T15:59:46.723Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[Task Progress] Calculated progress for task 738 (company_kyb): 30/30 = 100%
[2025-05-04T15:59:46.792Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":738,"taskType":"company_kyb","storedProgress":100,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T15:59:46.792Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T15:59:46.792Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":738,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T15:59:46.824Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":738,"taskType":"company_kyb","progress":100,"status":"ready_for_submission"}
[2025-05-04T15:59:46.824Z] [DEBUG] Broadcasting task update with object format {"taskId":738,"status":"ready_for_submission"}
[2025-05-04T15:59:46.825Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[2025-05-04T15:59:46.825Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":267,"count":3}
[Tasks] Successfully unlocked all tasks for company: 267
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 310',
    condition2: 'tasks.created_by = 310',
    condition3: "tasks.company_id = 267 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('12@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
3:59:46 PM [info] GET /api/tasks 200 in 478ms :: [{"id":739,"title":"2. S&P KY3P Security Assessment: DevTest12","description"...
3:59:47 PM [info] GET /api/companies/current 304 in 49ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:59:50 PM [info] GET /api/companies/current 304 in 43ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:59:53 PM [info] GET /api/companies/current 304 in 33ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:59:56 PM [info] GET /api/companies/current 304 in 35ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
3:59:59 PM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
4:00:02 PM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
4:00:02 PM [info] GET /api/tasks 304 in 34ms :: [{"id":739,"title":"2. S&P KY3P Security Assessment: DevTest12","description"...
4:00:03 PM [info] GET /api/tasks 304 in 31ms :: [{"id":739,"title":"2. S&P KY3P Security Assessment: DevTest12","description"...
Suppressing further connection logs. Pool size: 3
4:00:03 PM [info] GET /api/companies/current 304 in 30ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks Routes] Fetching task by ID: {
  taskId: 739,
  userCompanyId: 267,
  timestamp: '2025-05-04T16:00:03.417Z'
}
[Tasks Routes] Task found by ID: {
  taskId: 739,
  title: '2. S&P KY3P Security Assessment: DevTest12',
  type: 'ky3p',
  formDataFields: 0,
  timestamp: '2025-05-04T16:00:03.466Z'
}
4:00:03 PM [info] GET /api/tasks/739 200 in 88ms :: {"id":739,"title":"2. S&P KY3P Security Assessment: DevTest12","description":...
[INFO] [WebSocket] Client connected: client-1746374403612-bgqqb6s
[Auth] Returning user session data
[Tasks Routes] Fetching task by ID: {
  taskId: 739,
  userCompanyId: 267,
  timestamp: '2025-05-04T16:00:03.676Z'
}
[Tasks Routes] Task found by ID: {
  taskId: 739,
  title: '2. S&P KY3P Security Assessment: DevTest12',
  type: 'ky3p',
  formDataFields: 0,
  timestamp: '2025-05-04T16:00:03.710Z'
}
[INFO] [WebSocket] Received message from client client-1746374403612-bgqqb6s: {
  type: 'authenticate',
  userId: null,
  companyId: null,
  clientId: 'ws_1746371328794_4gb79o3ds',
  timestamp: '2025-05-04T16:00:03.532Z'
}
[INFO] [WebSocket] Authentication from client client-1746374403612-bgqqb6s: { userId: null, companyId: null, hasToken: true }
[Current Company] Using cached company data: 267
4:00:03 PM [info] GET /api/tasks/739 304 in 83ms :: {"id":739,"title":"2. S&P KY3P Security Assessment: DevTest12","description":...
4:00:03 PM [info] GET /api/companies/current 304 in 33ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Task Templates API] Fetching template for task type: ky3p, user: 310
[Task Templates API] Found template: 48 (S&P KY3P Security Assessment) for task type: ky3p
[Task Templates API] Retrieved 10 configuration items for template ID: 48
4:00:04 PM [info] GET /api/task-templates/by-type/ky3p 304 in 155ms :: {"id":48,"name":"S&P KY3P Security Assessment","description":"S&P KY3P Securi...
[2025-05-04T16:00:04.188Z] [INFO] Fetching all KY3P fields 
[2025-05-04T16:00:04.305Z] [INFO] Successfully retrieved 120 KY3P fields 
4:00:04 PM [info] GET /api/ky3p-fields 304 in 155ms :: [{"id":1,"order":1,"field_key":"externalSystems","display_name":"External Sys...
[2025-05-04T16:00:04.504Z] [INFO] Fetching KY3P progress for task 739 
[2025-05-04T16:00:04.581Z] [INFO] Retrieved 120 responses for task 739 
4:00:04 PM [info] GET /api/ky3p/progress/739 200 in 153ms :: {"success":true,"taskId":739,"status":"ready_for_submission","responses":[{"i...
[2025-05-04T16:00:04.794Z] [INFO] Fetching KY3P progress for task 739 
[2025-05-04T16:00:04.862Z] [INFO] Retrieved 120 responses for task 739 
4:00:04 PM [info] GET /api/ky3p/progress/739 304 in 140ms :: {"success":true,"taskId":739,"status":"ready_for_submission","responses":[{"i...
[Tasks Routes] Fetching task by ID: {
  taskId: 739,
  userCompanyId: 267,
  timestamp: '2025-05-04T16:00:05.049Z'
}
[Tasks Routes] Task found by ID: {
  taskId: 739,
  title: '2. S&P KY3P Security Assessment: DevTest12',
  type: 'ky3p',
  formDataFields: 0,
  timestamp: '2025-05-04T16:00:05.088Z'
}
4:00:05 PM [info] GET /api/tasks/739 304 in 79ms :: {"id":739,"title":"2. S&P KY3P Security Assessment: DevTest12","description":...
[Tasks Routes] Fetching task by ID: {
  taskId: 739,
  userCompanyId: 267,
  timestamp: '2025-05-04T16:00:05.279Z'
}
[Tasks Routes] Task found by ID: {
  taskId: 739,
  title: '2. S&P KY3P Security Assessment: DevTest12',
  type: 'ky3p',
  formDataFields: 0,
  timestamp: '2025-05-04T16:00:05.309Z'
}
[2025-05-04T16:00:05.320Z] [INFO] Fetching KY3P responses for task 739 
4:00:05 PM [info] GET /api/tasks/739 304 in 62ms :: {"id":739,"title":"2. S&P KY3P Security Assessment: DevTest12","description":...
[2025-05-04T16:00:05.423Z] [INFO] Retrieved 120 responses for task 739 
4:00:05 PM [info] GET /api/tasks/739/ky3p-responses 200 in 137ms :: {"success":true,"taskId":739,"status":"ready_for_submission","responses":[{"i...
[2025-05-04T16:00:05.588Z] [INFO] Fetching KY3P responses for task 739 
[2025-05-04T16:00:05.690Z] [INFO] Retrieved 120 responses for task 739 
4:00:05 PM [info] GET /api/tasks/739/ky3p-responses 304 in 142ms :: {"success":true,"taskId":739,"status":"ready_for_submission","responses":[{"i...
[2025-05-04T16:00:05.818Z] [INFO] Fetching KY3P progress for task 739 
[2025-05-04T16:00:05.888Z] [INFO] Retrieved 120 responses for task 739 
4:00:06 PM [info] GET /api/ky3p/progress/739 304 in 181ms :: {"success":true,"taskId":739,"status":"ready_for_submission","responses":[{"i...
[2025-05-04T16:00:06.149Z] [INFO] Fetching KY3P progress for task 739 
[2025-05-04T16:00:06.221Z] [INFO] Retrieved 120 responses for task 739 
4:00:06 PM [info] GET /api/ky3p/progress/739 304 in 163ms :: {"success":true,"taskId":739,"status":"ready_for_submission","responses":[{"i...
4:00:06 PM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[KY3P API] Clear all fields requested for task 739
[KY3P] Task 739 progress updated: 0%
4:00:08 PM [info] POST /api/ky3p/clear-fields/739 200 in 155ms :: {"success":true,"message":"Successfully cleared all fields for task 739","pro...
[KY3P API] Received batch update for task 739 with 120 fields
[KY3P] Task 739 progress updated: 0%
4:00:09 PM [info] POST /api/ky3p/batch-update/739 200 in 502ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
4:00:09 PM [info] GET /api/companies/current 304 in 71ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[KY3P API] Received batch update for task 739 with 120 fields
[KY3P] Task 739 progress updated: 0%
4:00:10 PM [info] POST /api/ky3p/batch-update/739 200 in 417ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[Tasks Routes] Updating task progress: { taskId: 739, timestamp: '2025-05-04T16:00:11.606Z' }
[KY3P API] Received batch update for task 739 with 120 fields
[Task Reconciliation] Using improved unified progress calculation for KY3P task 739
4:00:11 PM [info] GET /api/companies/current 304 in 56ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
4:00:11 PM [info] GET /api/tasks 304 in 49ms :: [{"id":739,"title":"2. S&P KY3P Security Assessment: DevTest12","description"...
[2025-05-04T16:00:11.792Z] [INFO] [KY3P Progress] Calculated progress for task 739: 0/120 = 0% 
[2025-05-04T16:00:11.792Z] [INFO] [KY3P Progress] Using explicit SQL casting for task 739 progress update {"taskId":739,"calculatedProgress":0,"calculatedStatus":"not_started","timestamp":"2025-05-04T16:00:11.792Z","source":"task_reconciliation"}
[2025-05-04T16:00:11.809Z] [INFO] [Progress Validation] Task 739 progress value normalized: {"taskId":739,"source":"task_reconciliation","originalValue":0,"originalType":"number","validatedValue":0,"wasChanged":false,"calculationMethod":"calculateAndUpdateTaskProgress","isForceUpdate":true,"previous":0}
4:00:11 PM [info] GET /api/tasks 304 in 37ms :: [{"id":739,"title":"2. S&P KY3P Security Assessment: DevTest12","description"...
[Progress Broadcast broadcast-1746374411889-65] Broadcasting progress update for task 739: {
  taskId: 739,
  progress: 0,
  status: 'not_started',
  timestamp: '2025-05-04T16:00:11.889Z',
  source: 'at calculateAndUpdateTaskProgress (/home/runner/workspace/server/utils/unified-progress-fixed.ts:366:7)',
  hasMetadata: true
}
[Progress Utils] Broadcasting task progress update: {
  taskId: 739,
  progress: 0,
  requestedStatus: 'not_started',
  finalStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  timestamp: '2025-05-04T16:00:11.897Z'
}
[Progress Utils] Error tracking progress broadcast: ReferenceError: require is not defined
    at broadcastProgressUpdate (/home/runner/workspace/server/utils/progress.ts:749:40)
    at calculateAndUpdateTaskProgress (/home/runner/workspace/server/utils/unified-progress-fixed.ts:366:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async reconcileTaskProgress (/home/runner/workspace/server/utils/task-reconciliation.ts:353:24)
    at async <anonymous> (/home/runner/workspace/server/routes/tasks.ts:1105:5)
[WebSocket] Broadcast task_update to 1 clients (0 errors) { messageId: 'msg_1746374411898_bkv1hbubz' }
[2025-05-04T16:00:11.898Z] [INFO] Successfully broadcasted task_update message 
[Progress Broadcast broadcast-1746374411889-65] Successfully broadcast progress update for task 739
[2025-05-04T16:00:11.898Z] [INFO] [KY3P Progress] Broadcasted progress update for task 739: 0% (not_started) 
[Task Reconciliation] KY3P progress update result: {
  taskId: 739,
  success: true,
  progress: 0,
  status: 'not_started',
  message: 'Task 739 progress calculation complete'
}
[Tasks Routes] Task progress reconciled: {
  taskId: 739,
  progress: 0,
  status: 'not_started',
  timestamp: '2025-05-04T16:00:11.932Z'
}
4:00:11 PM [info] POST /api/tasks/739/update-progress 200 in 358ms :: {"success":true,"progress":0,"status":"not_started","taskId":739}
[KY3P] Task 739 progress updated: 0%
4:00:12 PM [info] POST /api/ky3p/batch-update/739 200 in 386ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
4:00:12 PM [info] GET /api/tasks 304 in 33ms :: [{"id":739,"title":"2. S&P KY3P Security Assessment: DevTest12","description"...
[INFO] [WebSocket] Client disconnected: client-1746374403612-bgqqb6s
[Auth] Returning user session data
[Current Company] Using cached company data: 267
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 310, company_id: 267, email: '12@e.com' }
[2025-05-04T16:00:24.310Z] [INFO] Performing dynamic task unlocking check for company {"companyId":267,"userId":310}
4:00:24 PM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-04T16:00:24.341Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":267}
[Tasks] Automatically unlocking all tasks for company { userId: 310, companyId: 267, requestedBy: 'automatic_task_unlock' }
[2025-05-04T16:00:24.342Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":267}
[2025-05-04T16:00:24.375Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":267,"count":3,"taskIds":[740,739,738],"taskTypes":["open_banking","ky3p","company_kyb"]}
[INFO] [WebSocket] Client connected: client-1746374424434-msatoyv
[Task Progress] Calculated progress for task 740 (open_banking): 0/44 = 0%
[2025-05-04T16:00:24.439Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":740,"taskType":"open_banking","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T16:00:24.439Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T16:00:24.439Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":740,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T16:00:24.477Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":740,"taskType":"open_banking","progress":0,"status":"not_started"}
[2025-05-04T16:00:24.477Z] [DEBUG] Broadcasting task update with object format {"taskId":740,"status":"not_started"}
[WebSocket] Broadcast task_update to 1 clients (0 errors) { messageId: 'msg_1746374424477_vb4i1t2bg' }
[2025-05-04T16:00:24.478Z] [INFO] Successfully broadcasted task_update message 
[INFO] [WebSocket] Received message from client client-1746374424434-msatoyv: {
  type: 'authenticate',
  data: { timestamp: '2025-05-04T16:00:24.350Z' }
}
[INFO] [WebSocket] Authentication from client client-1746374424434-msatoyv: { userId: undefined, companyId: undefined, hasToken: true }
[Task Progress] Calculated progress for task 739 (ky3p): 0/120 = 0%
[2025-05-04T16:00:24.556Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":739,"taskType":"ky3p","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T16:00:24.556Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T16:00:24.556Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":739,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T16:00:24.589Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":739,"taskType":"ky3p","progress":0,"status":"not_started"}
[2025-05-04T16:00:24.589Z] [DEBUG] Broadcasting task update with object format {"taskId":739,"status":"not_started"}
[WebSocket] Broadcast task_update to 1 clients (0 errors) { messageId: 'msg_1746374424589_4v4w9w8zn' }
[2025-05-04T16:00:24.589Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 738 (company_kyb): 30/30 = 100%
[2025-05-04T16:00:24.651Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":738,"taskType":"company_kyb","storedProgress":100,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T16:00:24.651Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T16:00:24.652Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":738,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T16:00:24.686Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":738,"taskType":"company_kyb","progress":100,"status":"ready_for_submission"}
[2025-05-04T16:00:24.686Z] [DEBUG] Broadcasting task update with object format {"taskId":738,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 1 clients (0 errors) { messageId: 'msg_1746374424686_ojryi7r6h' }
[2025-05-04T16:00:24.687Z] [INFO] Successfully broadcasted task_update message 
[2025-05-04T16:00:24.687Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":267,"count":3}
[Tasks] Successfully unlocked all tasks for company: 267
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 310',
    condition2: 'tasks.created_by = 310',
    condition3: "tasks.company_id = 267 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('12@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
4:00:24 PM [info] GET /api/tasks 200 in 501ms :: [{"id":740,"title":"3. Open Banking Survey: DevTest12","description":"Complet...
[INFO] [WebSocket] Client connected: client-1746374424999-ibu2ieh
[Tasks] Using cached task data for user: 310
4:00:25 PM [info] GET /api/tasks 304 in 36ms :: [{"id":740,"title":"3. Open Banking Survey: DevTest12","description":"Complet...
[INFO] [WebSocket] Client connected: client-1746374425537-lx9y8na
[INFO] [WebSocket] Received message from client client-1746374425537-lx9y8na: {
  type: 'authenticate',
  userId: null,
  companyId: null,
  clientId: 'ws_1746374423777_28wcyn8s9',
  timestamp: '2025-05-04T16:00:25.489Z'
}
[INFO] [WebSocket] Authentication from client client-1746374425537-lx9y8na: { userId: null, companyId: null, hasToken: true }
4:00:27 PM [info] GET /api/companies/current 304 in 40ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks Routes] Fetching task by ID: {
  taskId: 739,
  userCompanyId: 267,
  timestamp: '2025-05-04T16:00:28.143Z'
}
[Tasks Routes] Task found by ID: {
  taskId: 739,
  title: '2. S&P KY3P Security Assessment: DevTest12',
  type: 'ky3p',
  formDataFields: 0,
  timestamp: '2025-05-04T16:00:28.174Z'
}
4:00:28 PM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
4:00:28 PM [info] GET /api/tasks/739 200 in 62ms :: {"id":739,"title":"2. S&P KY3P Security Assessment: DevTest12","description":...
[Tasks Routes] Fetching task by ID: {
  taskId: 739,
  userCompanyId: 267,
  timestamp: '2025-05-04T16:00:28.391Z'
}
[Task Templates API] Fetching template for task type: ky3p, user: 310
[Tasks Routes] Task found by ID: {
  taskId: 739,
  title: '2. S&P KY3P Security Assessment: DevTest12',
  type: 'ky3p',
  formDataFields: 0,
  timestamp: '2025-05-04T16:00:28.424Z'
}
4:00:28 PM [info] GET /api/companies/current 304 in 30ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Task Templates API] Found template: 48 (S&P KY3P Security Assessment) for task type: ky3p
4:00:28 PM [info] GET /api/tasks/739 304 in 63ms :: {"id":739,"title":"2. S&P KY3P Security Assessment: DevTest12","description":...
[Task Templates API] Retrieved 10 configuration items for template ID: 48
4:00:28 PM [info] GET /api/task-templates/by-type/ky3p 304 in 107ms :: {"id":48,"name":"S&P KY3P Security Assessment","description":"S&P KY3P Securi...
[2025-05-04T16:00:28.700Z] [INFO] Fetching all KY3P fields 
[2025-05-04T16:00:28.796Z] [INFO] Successfully retrieved 120 KY3P fields 
4:00:28 PM [info] GET /api/ky3p-fields 304 in 142ms :: [{"id":1,"order":1,"field_key":"externalSystems","display_name":"External Sys...
[2025-05-04T16:00:29.005Z] [INFO] Fetching KY3P progress for task 739 
[2025-05-04T16:00:29.074Z] [INFO] Retrieved 120 responses for task 739 
4:00:29 PM [info] GET /api/ky3p/progress/739 200 in 136ms :: {"success":true,"taskId":739,"status":"not_started","responses":[{"id":119504...
[2025-05-04T16:00:29.316Z] [INFO] Fetching KY3P progress for task 739 
[2025-05-04T16:00:29.387Z] [INFO] Retrieved 120 responses for task 739 
4:00:29 PM [info] GET /api/ky3p/progress/739 304 in 157ms :: {"success":true,"taskId":739,"status":"not_started","responses":[{"id":119504...
[Tasks Routes] Fetching task by ID: {
  taskId: 739,
  userCompanyId: 267,
  timestamp: '2025-05-04T16:00:29.497Z'
}
[Tasks Routes] Task found by ID: {
  taskId: 739,
  title: '2. S&P KY3P Security Assessment: DevTest12',
  type: 'ky3p',
  formDataFields: 0,
  timestamp: '2025-05-04T16:00:29.534Z'
}
4:00:29 PM [info] GET /api/tasks/739 304 in 70ms :: {"id":739,"title":"2. S&P KY3P Security Assessment: DevTest12","description":...
[Tasks Routes] Fetching task by ID: {
  taskId: 739,
  userCompanyId: 267,
  timestamp: '2025-05-04T16:00:29.726Z'
}
[2025-05-04T16:00:29.730Z] [INFO] Fetching KY3P responses for task 739 
[Tasks Routes] Task found by ID: {
  taskId: 739,
  title: '2. S&P KY3P Security Assessment: DevTest12',
  type: 'ky3p',
  formDataFields: 0,
  timestamp: '2025-05-04T16:00:29.767Z'
}
4:00:29 PM [info] GET /api/tasks/739 304 in 82ms :: {"id":739,"title":"2. S&P KY3P Security Assessment: DevTest12","description":...
[2025-05-04T16:00:29.814Z] [INFO] Retrieved 120 responses for task 739 
4:00:29 PM [info] GET /api/tasks/739/ky3p-responses 200 in 133ms :: {"success":true,"taskId":739,"status":"not_started","responses":[{"id":119504...
[2025-05-04T16:00:30.028Z] [INFO] Fetching KY3P responses for task 739 
[2025-05-04T16:00:30.092Z] [INFO] Retrieved 120 responses for task 739 
4:00:30 PM [info] GET /api/tasks/739/ky3p-responses 304 in 100ms :: {"success":true,"taskId":739,"status":"not_started","responses":[{"id":119504...
[2025-05-04T16:00:30.163Z] [INFO] Fetching KY3P progress for task 739 
[2025-05-04T16:00:30.246Z] [INFO] Retrieved 120 responses for task 739 
4:00:30 PM [info] GET /api/ky3p/progress/739 304 in 155ms :: {"success":true,"taskId":739,"status":"not_started","responses":[{"id":119504...
[2025-05-04T16:00:30.467Z] [INFO] Fetching KY3P progress for task 739 
[2025-05-04T16:00:30.536Z] [INFO] Retrieved 120 responses for task 739 
4:00:30 PM [info] GET /api/ky3p/progress/739 304 in 138ms :: {"success":true,"taskId":739,"status":"not_started","responses":[{"id":119504...
4:00:31 PM [info] GET /api/companies/current 304 in 42ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[KY3P API DEPRECATED] Demo auto-fill requested for task 739, delegating to universal service
[2025-05-04T16:00:32.368Z] [INFO] Applying demo data directly to database {"taskId":739,"formType":"ky3p","userId":310}
[2025-05-04T16:00:32.582Z] [INFO] Retrieved fields for demo auto-fill {"count":120}
[2025-05-04T16:00:32.629Z] [INFO] Found existing responses {"count":120}
[2025-05-04T16:00:32.630Z] [INFO] Found fields with demo values {"count":120,"sampleFields":[{"key":"externalSystems","demoValue":"Our external information systems inventory is updated monthly and validated through automated discovery tools and manual audits."},{"key":"breachNotification","demoValue":"Controllers are promptly notified of privacy data breaches within 24 hours of our organization's awareness, including detailed incident information and remediation steps."},{"key":"privacyIncidentProcedure","demoValue":"Formal procedures are in place for reporting, managing, and responding to privacy-related incidents, ensuring prompt and appropriate actions are taken."}]}
[2025-05-04T16:00:32.630Z] [INFO] Setting demo value for field "externalSystems" {"value":"Our external information systems inventory is updated monthly and validated through automated discovery tools and manual audits.","fieldId":1}
[2025-05-04T16:00:32.696Z] [DEBUG] Updated field externalSystems with demo value {"oldValue":"","newValue":"Our external information systems inventory is updated monthly and validated through automated discovery tools and manual audits."}
[2025-05-04T16:00:32.696Z] [INFO] Setting demo value for field "breachNotification" {"value":"Controllers are promptly notified of privacy data breaches within 24 hours of our organization's awareness, including detailed incident information and remediation steps.","fieldId":2}
[2025-05-04T16:00:32.745Z] [DEBUG] Updated field breachNotification with demo value {"oldValue":"","newValue":"Controllers are promptly notified of privacy data breaches within 24 hours of our organization's awareness, including detailed incident information and remediation steps."}
[2025-05-04T16:00:32.745Z] [INFO] Setting demo value for field "privacyIncidentProcedure" {"value":"Formal procedures are in place for reporting, managing, and responding to privacy-related incidents, ensuring prompt and appropriate actions are taken.","fieldId":3}
[2025-05-04T16:00:32.782Z] [DEBUG] Updated field privacyIncidentProcedure with demo value {"oldValue":"","newValue":"Formal procedures are in place for reporting, managing, and responding to privacy-related incidents, ensuring prompt and appropriate actions are taken."}
[2025-05-04T16:00:32.782Z] [INFO] Setting demo value for field "publicPrivacyNotice" {"value":"Privacy notices and policies are publicly accessible at every point where personal data is collected, stored, processed, or transmitted, clearly detailing usage and rights.","fieldId":4}
[2025-05-04T16:00:32.815Z] [DEBUG] Updated field publicPrivacyNotice with demo value {"oldValue":"","newValue":"Privacy notices and policies are publicly accessible at every point where personal data is collected, stored, processed, or transmitted, clearly detailing usage and rights."}
[2025-05-04T16:00:32.815Z] [INFO] Setting demo value for field "privacyLawCompliance" {"value":"Privacy policies and standards are fully compliant with global and regional privacy laws, including GDPR, CCPA, CPPA, and GLBA, supported by regular compliance audits.","fieldId":5}
[2025-05-04T16:00:32.852Z] [DEBUG] Updated field privacyLawCompliance with demo value {"oldValue":"","newValue":"Privacy policies and standards are fully compliant with global and regional privacy laws, including GDPR, CCPA, CPPA, and GLBA, supported by regular compliance audits."}
[2025-05-04T16:00:32.853Z] [INFO] Setting demo value for field "dataRetentionLimits" {"value":"Personal data is retained only as long as required to fulfill the explicit purposes for which it was collected, after which it is securely destroyed.","fieldId":6}
[2025-05-04T16:00:32.896Z] [DEBUG] Updated field dataRetentionLimits with demo value {"oldValue":"","newValue":"Personal data is retained only as long as required to fulfill the explicit purposes for which it was collected, after which it is securely destroyed."}
[2025-05-04T16:00:32.897Z] [INFO] Setting demo value for field "personalDataMinimization" {"value":"Collection and processing of personal data are strictly limited to essential business purposes, following clearly documented data minimization principles.","fieldId":7}
[2025-05-04T16:00:32.955Z] [DEBUG] Updated field personalDataMinimization with demo value {"oldValue":"","newValue":"Collection and processing of personal data are strictly limited to essential business purposes, following clearly documented data minimization principles."}
[2025-05-04T16:00:32.955Z] [INFO] Setting demo value for field "dataMinimizationTechniques" {"value":"Data minimization is enforced through technical measures such as pseudonymization, anonymization, and strong encryption practices in line with privacy regulations.","fieldId":8}
[2025-05-04T16:00:32.996Z] [DEBUG] Updated field dataMinimizationTechniques with demo value {"oldValue":"","newValue":"Data minimization is enforced through technical measures such as pseudonymization, anonymization, and strong encryption practices in line with privacy regulations."}
[2025-05-04T16:00:32.996Z] [INFO] Setting demo value for field "dpoAppointment" {"value":"A Data Protection Officer (DPO) has been formally appointed, responsible for overseeing compliance and ensuring informed consent mechanisms, including clear consent withdrawal procedures.","fieldId":9}
[2025-05-04T16:00:33.032Z] [DEBUG] Updated field dpoAppointment with demo value {"oldValue":"","newValue":"A Data Protection Officer (DPO) has been formally appointed, responsible for overseeing compliance and ensuring informed consent mechanisms, including clear consent withdrawal procedures."}
[2025-05-04T16:00:33.032Z] [INFO] Setting demo value for field "developmentLifecycle" {"value":"Our System Development Lifecycle (SDLC) includes defined stages: requirements gathering, secure development, rigorous testing, deployment, and post-release maintenance.","fieldId":10}
[2025-05-04T16:00:33.075Z] [DEBUG] Updated field developmentLifecycle with demo value {"oldValue":"","newValue":"Our System Development Lifecycle (SDLC) includes defined stages: requirements gathering, secure development, rigorous testing, deployment, and post-release maintenance."}
[2025-05-04T16:00:33.075Z] [INFO] Setting demo value for field "secureCodeReviews" {"value":"Secure source code reviews are performed regularly to ensure developers follow established secure coding standards and practices prior to deployment.","fieldId":11}
[2025-05-04T16:00:33.114Z] [DEBUG] Updated field secureCodeReviews with demo value {"oldValue":"","newValue":"Secure source code reviews are performed regularly to ensure developers follow established secure coding standards and practices prior to deployment."}
[2025-05-04T16:00:33.114Z] [INFO] Setting demo value for field "codeScanning" {"value":"Static and dynamic source code scanning tools are used during development cycles and prior to deployment to identify and remediate security vulnerabilities.","fieldId":12}
[2025-05-04T16:00:33.155Z] [DEBUG] Updated field codeScanning with demo value {"oldValue":"","newValue":"Static and dynamic source code scanning tools are used during development cycles and prior to deployment to identify and remediate security vulnerabilities."}
[2025-05-04T16:00:33.155Z] [INFO] Setting demo value for field "developerAccessControls" {"value":"Developer access to production environments is strictly controlled and monitored, restricted by role-based permissions and audited regularly.","fieldId":13}
[2025-05-04T16:00:33.195Z] [DEBUG] Updated field developerAccessControls with demo value {"oldValue":"","newValue":"Developer access to production environments is strictly controlled and monitored, restricted by role-based permissions and audited regularly."}
[2025-05-04T16:00:33.195Z] [INFO] Setting demo value for field "backupRecoveryDocument" {"value":"Our backup and recovery documentation clearly defines requirements and procedures for system backups, data restoration, and data integrity checks.","fieldId":14}
[2025-05-04T16:00:33.243Z] [DEBUG] Updated field backupRecoveryDocument with demo value {"oldValue":"","newValue":"Our backup and recovery documentation clearly defines requirements and procedures for system backups, data restoration, and data integrity checks."}
[2025-05-04T16:00:33.243Z] [INFO] Setting demo value for field "cyberLiabilityInsurance" {"value":"We hold Cyber Liability, Network Security, and Privacy Liability Insurance with coverage adequate to mitigate potential cyber incident impacts.","fieldId":15}
[2025-05-04T16:00:33.280Z] [DEBUG] Updated field cyberLiabilityInsurance with demo value {"oldValue":"","newValue":"We hold Cyber Liability, Network Security, and Privacy Liability Insurance with coverage adequate to mitigate potential cyber incident impacts."}
[2025-05-04T16:00:33.280Z] [INFO] Setting demo value for field "dataLocationTracking" {"value":"Cloud data locations are tracked and documented through automated asset management tools and regular manual validations.","fieldId":16}
[2025-05-04T16:00:33.316Z] [DEBUG] Updated field dataLocationTracking with demo value {"oldValue":"","newValue":"Cloud data locations are tracked and documented through automated asset management tools and regular manual validations."}
[2025-05-04T16:00:33.316Z] [INFO] Setting demo value for field "alternateFacilities" {"value":"We regularly test connectivity, recovery time objectives, and system capacity at alternate recovery sites through annual resilience exercises.","fieldId":17}
[2025-05-04T16:00:33.363Z] [DEBUG] Updated field alternateFacilities with demo value {"oldValue":"","newValue":"We regularly test connectivity, recovery time objectives, and system capacity at alternate recovery sites through annual resilience exercises."}
[2025-05-04T16:00:33.363Z] [INFO] Setting demo value for field "logicalAccess" {"value":"Logical access is granted only after managerial approval, with regular access reviews conducted quarterly to confirm continued business justification.","fieldId":18}
[2025-05-04T16:00:33.438Z] [DEBUG] Updated field logicalAccess with demo value {"oldValue":"","newValue":"Logical access is granted only after managerial approval, with regular access reviews conducted quarterly to confirm continued business justification."}
[2025-05-04T16:00:33.438Z] [INFO] Setting demo value for field "detectionSystems" {"value":"Notifications from detection systems trigger immediate investigation protocols managed by our 24/7 security operations center (SOC).","fieldId":19}
[2025-05-04T16:00:33.473Z] [DEBUG] Updated field detectionSystems with demo value {"oldValue":"","newValue":"Notifications from detection systems trigger immediate investigation protocols managed by our 24/7 security operations center (SOC)."}
[2025-05-04T16:00:33.473Z] [INFO] Setting demo value for field "disasterRecoveryTesting" {"value":"Comprehensive disaster recovery tests covering all critical technology components are conducted annually, with results documented and improvements identified.","fieldId":20}
[2025-05-04T16:00:33.509Z] [DEBUG] Updated field disasterRecoveryTesting with demo value {"oldValue":"","newValue":"Comprehensive disaster recovery tests covering all critical technology components are conducted annually, with results documented and improvements identified."}
[2025-05-04T16:00:33.509Z] [INFO] Setting demo value for field "appVulnerabilityScanning" {"value":"Application vulnerability scans are conducted quarterly and immediately after significant application changes, identifying and mitigating vulnerabilities promptly.","fieldId":21}
[2025-05-04T16:00:33.565Z] [DEBUG] Updated field appVulnerabilityScanning with demo value {"oldValue":"","newValue":"Application vulnerability scans are conducted quarterly and immediately after significant application changes, identifying and mitigating vulnerabilities promptly."}
[2025-05-04T16:00:33.565Z] [INFO] Setting demo value for field "testingIssueTracking" {"value":"Issues identified during continuity tests are documented, tracked through resolution, and addressed with specific action plans and targeted completion dates.","fieldId":22}
[2025-05-04T16:00:33.598Z] [DEBUG] Updated field testingIssueTracking with demo value {"oldValue":"","newValue":"Issues identified during continuity tests are documented, tracked through resolution, and addressed with specific action plans and targeted completion dates."}
[2025-05-04T16:00:33.598Z] [INFO] Setting demo value for field "cloudDataRetrieval" {"value":"Cloud service customers can securely retrieve their data using encrypted application programming interfaces (APIs), supporting interoperability and easy portability.","fieldId":23}
[2025-05-04T16:00:33.631Z] [DEBUG] Updated field cloudDataRetrieval with demo value {"oldValue":"","newValue":"Cloud service customers can securely retrieve their data using encrypted application programming interfaces (APIs), supporting interoperability and easy portability."}
[2025-05-04T16:00:33.631Z] [INFO] Setting demo value for field "recoverySystemsUpdate" {"value":"Recovery documentation and systems at alternate sites are promptly updated following production system and business process changes.","fieldId":24}
[2025-05-04T16:00:33.663Z] [DEBUG] Updated field recoverySystemsUpdate with demo value {"oldValue":"","newValue":"Recovery documentation and systems at alternate sites are promptly updated following production system and business process changes."}
[2025-05-04T16:00:33.664Z] [INFO] Setting demo value for field "webApplicationSecurity" {"value":"Application-layer security measures include Web Application Firewalls (WAFs) and proxy services, providing protection against common web-based threats.","fieldId":25}
[2025-05-04T16:00:33.709Z] [DEBUG] Updated field webApplicationSecurity with demo value {"oldValue":"","newValue":"Application-layer security measures include Web Application Firewalls (WAFs) and proxy services, providing protection against common web-based threats."}
[2025-05-04T16:00:33.709Z] [INFO] Setting demo value for field "technicalResilience" {"value":"Technical resilience mechanisms employed include load balancing, failover clustering, and hot-swappable hardware to ensure continuous operations under adverse conditions.","fieldId":26}
[2025-05-04T16:00:33.747Z] [DEBUG] Updated field technicalResilience with demo value {"oldValue":"","newValue":"Technical resilience mechanisms employed include load balancing, failover clustering, and hot-swappable hardware to ensure continuous operations under adverse conditions."}
[2025-05-04T16:00:33.748Z] [INFO] Setting demo value for field "externalDependencyResilience" {"value":"Critical external dependencies and business partners are integrated into our resilience strategy, participating in joint planning and periodic exercises.","fieldId":27}
[2025-05-04T16:00:33.814Z] [DEBUG] Updated field externalDependencyResilience with demo value {"oldValue":"","newValue":"Critical external dependencies and business partners are integrated into our resilience strategy, participating in joint planning and periodic exercises."}
[2025-05-04T16:00:33.814Z] [INFO] Setting demo value for field "backupProcessTesting" {"value":"Backup and replication processes are thoroughly tested quarterly, including full-system recoveries, to validate their effectiveness and reliability.","fieldId":28}
[2025-05-04T16:00:33.866Z] [DEBUG] Updated field backupProcessTesting with demo value {"oldValue":"","newValue":"Backup and replication processes are thoroughly tested quarterly, including full-system recoveries, to validate their effectiveness and reliability."}
[2025-05-04T16:00:33.866Z] [INFO] Setting demo value for field "penetrationTesting" {"value":"Application penetration tests are performed annually and after significant updates, utilizing independent third-party testing to validate application security.","fieldId":29}
[2025-05-04T16:00:33.903Z] [DEBUG] Updated field penetrationTesting with demo value {"oldValue":"","newValue":"Application penetration tests are performed annually and after significant updates, utilizing independent third-party testing to validate application security."}
[2025-05-04T16:00:33.904Z] [INFO] Setting demo value for field "incidentContainment" {"value":"We maintain documented containment strategies tailored to various incident scenarios, enabling rapid isolation and mitigation of security threats.","fieldId":30}
[2025-05-04T16:00:33.946Z] [DEBUG] Updated field incidentContainment with demo value {"oldValue":"","newValue":"We maintain documented containment strategies tailored to various incident scenarios, enabling rapid isolation and mitigation of security threats."}
[2025-05-04T16:00:33.946Z] [INFO] Setting demo value for field "privacyPolicyDocument" {"value":"Our written privacy policy outlines data collection practices, usage, sharing, retention periods, and individuals' rights regarding their personal data.","fieldId":31}
[2025-05-04T16:00:33.977Z] [DEBUG] Updated field privacyPolicyDocument with demo value {"oldValue":"","newValue":"Our written privacy policy outlines data collection practices, usage, sharing, retention periods, and individuals' rights regarding their personal data."}
[2025-05-04T16:00:33.977Z] [INFO] Setting demo value for field "policyAcknowledgement" {"value":"Employees must formally acknowledge the acceptable use policy electronically before receiving access to company systems and data.","fieldId":32}
[2025-05-04T16:00:34.020Z] [DEBUG] Updated field policyAcknowledgement with demo value {"oldValue":"","newValue":"Employees must formally acknowledge the acceptable use policy electronically before receiving access to company systems and data."}
[2025-05-04T16:00:34.020Z] [INFO] Setting demo value for field "changeManagement" {"value":"Our change management program includes documented policies, formal review processes, and clearly defined change authorization responsibilities.","fieldId":33}
[2025-05-04T16:00:34.074Z] [DEBUG] Updated field changeManagement with demo value {"oldValue":"","newValue":"Our change management program includes documented policies, formal review processes, and clearly defined change authorization responsibilities."}
[2025-05-04T16:00:34.074Z] [INFO] Setting demo value for field "remoteMfa" {"value":"Multifactor authentication (MFA) is mandated for all remote network access, using secure methods such as mobile authenticator apps or hardware tokens.","fieldId":34}
[2025-05-04T16:00:34.125Z] [DEBUG] Updated field remoteMfa with demo value {"oldValue":"","newValue":"Multifactor authentication (MFA) is mandated for all remote network access, using secure methods such as mobile authenticator apps or hardware tokens."}
[2025-05-04T16:00:34.125Z] [INFO] Setting demo value for field "securityPolicy" {"value":"Our organization maintains documented cybersecurity policies covering data protection, access control, and incident response, reviewed and updated annually.","fieldId":35}
[2025-05-04T16:00:34.169Z] [DEBUG] Updated field securityPolicy with demo value {"oldValue":"","newValue":"Our organization maintains documented cybersecurity policies covering data protection, access control, and incident response, reviewed and updated annually."}
[2025-05-04T16:00:34.169Z] [INFO] Setting demo value for field "changeAuditTrail" {"value":"A detailed audit trail of all system changes is maintained, including timestamps, authorizations, justifications, and rollback procedures.","fieldId":36}
[2025-05-04T16:00:34.206Z] [DEBUG] Updated field changeAuditTrail with demo value {"oldValue":"","newValue":"A detailed audit trail of all system changes is maintained, including timestamps, authorizations, justifications, and rollback procedures."}
[2025-05-04T16:00:34.206Z] [INFO] Setting demo value for field "regulatoryCompliance" {"value":"Cybersecurity strategies are explicitly aligned with applicable legal and regulatory requirements, including regular compliance audits and reporting.","fieldId":37}
[2025-05-04T16:00:34.261Z] [DEBUG] Updated field regulatoryCompliance with demo value {"oldValue":"","newValue":"Cybersecurity strategies are explicitly aligned with applicable legal and regulatory requirements, including regular compliance audits and reporting."}
[2025-05-04T16:00:34.261Z] [INFO] Setting demo value for field "dataRetentionGovernance" {"value":"Data retention governance is documented, outlining policies, schedules, responsibilities, and processes for secure data storage, retention, and timely disposal.","fieldId":38}
[2025-05-04T16:00:34.295Z] [DEBUG] Updated field dataRetentionGovernance with demo value {"oldValue":"","newValue":"Data retention governance is documented, outlining policies, schedules, responsibilities, and processes for secure data storage, retention, and timely disposal."}
[2025-05-04T16:00:34.296Z] [INFO] Setting demo value for field "acceptableUse" {"value":"Our acceptable use governance document covers permitted technology use, restrictions, and user responsibilities, communicated clearly to all employees.","fieldId":39}
[2025-05-04T16:00:34.335Z] [DEBUG] Updated field acceptableUse with demo value {"oldValue":"","newValue":"Our acceptable use governance document covers permitted technology use, restrictions, and user responsibilities, communicated clearly to all employees."}
[2025-05-04T16:00:34.335Z] [INFO] Setting demo value for field "centralizedAuthentication" {"value":"Centralized account management uses Active Directory and Single Sign-On (SSO) solutions to manage credentials securely, encrypting them both at rest and in transit.","fieldId":40}
[2025-05-04T16:00:34.368Z] [DEBUG] Updated field centralizedAuthentication with demo value {"oldValue":"","newValue":"Centralized account management uses Active Directory and Single Sign-On (SSO) solutions to manage credentials securely, encrypting them both at rest and in transit."}
[2025-05-04T16:00:34.368Z] [INFO] Setting demo value for field "dataClassificationGovernance" {"value":"Data governance and classification policies define data sensitivity levels, handling requirements, and access control measures across all organizational assets.","fieldId":41}
[2025-05-04T16:00:34.405Z] [DEBUG] Updated field dataClassificationGovernance with demo value {"oldValue":"","newValue":"Data governance and classification policies define data sensitivity levels, handling requirements, and access control measures across all organizational assets."}
[2025-05-04T16:00:34.405Z] [INFO] Setting demo value for field "iamGovernance" {"value":"Our identity and access management (IAM) governance document clearly defines user access provisioning, management, and de-provisioning procedures.","fieldId":42}
4:00:34 PM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-04T16:00:34.439Z] [DEBUG] Updated field iamGovernance with demo value {"oldValue":"","newValue":"Our identity and access management (IAM) governance document clearly defines user access provisioning, management, and de-provisioning procedures."}
[2025-05-04T16:00:34.439Z] [INFO] Setting demo value for field "cloudSecurityRequirements" {"value":"Cloud service infrastructure security requirements and virtualization practices are documented, reviewed annually, and aligned with industry best practices.","fieldId":43}
[2025-05-04T16:00:34.472Z] [DEBUG] Updated field cloudSecurityRequirements with demo value {"oldValue":"","newValue":"Cloud service infrastructure security requirements and virtualization practices are documented, reviewed annually, and aligned with industry best practices."}
[2025-05-04T16:00:34.472Z] [INFO] Setting demo value for field "threatManagementGovernance" {"value":"Threat and vulnerability management governance is documented, outlining processes for identification, assessment, prioritization, and mitigation of security threats.","fieldId":44}
[2025-05-04T16:00:34.513Z] [DEBUG] Updated field threatManagementGovernance with demo value {"oldValue":"","newValue":"Threat and vulnerability management governance is documented, outlining processes for identification, assessment, prioritization, and mitigation of security threats."}
[2025-05-04T16:00:34.513Z] [INFO] Setting demo value for field "amlGovernance" {"value":"Our anti-money laundering (AML) governance is documented and enforced through clearly defined procedures, ongoing employee training, and regular compliance checks.","fieldId":45}
[2025-05-04T16:00:34.551Z] [DEBUG] Updated field amlGovernance with demo value {"oldValue":"","newValue":"Our anti-money laundering (AML) governance is documented and enforced through clearly defined procedures, ongoing employee training, and regular compliance checks."}
[2025-05-04T16:00:34.551Z] [INFO] Setting demo value for field "antiFraudGovernance" {"value":"Anti-fraud governance measures include detailed policies, controls, monitoring systems, employee training, and clear reporting procedures.","fieldId":46}
[2025-05-04T16:00:34.591Z] [DEBUG] Updated field antiFraudGovernance with demo value {"oldValue":"","newValue":"Anti-fraud governance measures include detailed policies, controls, monitoring systems, employee training, and clear reporting procedures."}
[2025-05-04T16:00:34.591Z] [INFO] Setting demo value for field "loggingGovernance" {"value":"Logging program governance documents the procedures and standards for capturing, reviewing, and retaining system logs, supporting incident investigations and compliance reporting.","fieldId":47}
[2025-05-04T16:00:34.627Z] [DEBUG] Updated field loggingGovernance with demo value {"oldValue":"","newValue":"Logging program governance documents the procedures and standards for capturing, reviewing, and retaining system logs, supporting incident investigations and compliance reporting."}
[2025-05-04T16:00:34.627Z] [INFO] Setting demo value for field "encryptionGovernance" {"value":"Our encryption program governance specifies encryption standards, protocols, and procedures for managing cryptographic implementations across our environment.","fieldId":48}
[2025-05-04T16:00:34.663Z] [DEBUG] Updated field encryptionGovernance with demo value {"oldValue":"","newValue":"Our encryption program governance specifies encryption standards, protocols, and procedures for managing cryptographic implementations across our environment."}
[2025-05-04T16:00:34.663Z] [INFO] Setting demo value for field "transactionAuthentication" {"value":"Transaction authentication processes employ advanced, secure methods such as multifactor authentication and transaction verification codes to prevent fraud and errors.","fieldId":49}
[2025-05-04T16:00:34.698Z] [DEBUG] Updated field transactionAuthentication with demo value {"oldValue":"","newValue":"Transaction authentication processes employ advanced, secure methods such as multifactor authentication and transaction verification codes to prevent fraud and errors."}
[2025-05-04T16:00:34.699Z] [INFO] Setting demo value for field "equipmentRedundancy" {"value":"Critical business equipment has redundant counterparts independently located at a separate, industry-standard minimum distance.","fieldId":50}
[2025-05-04T16:00:34.735Z] [DEBUG] Updated field equipmentRedundancy with demo value {"oldValue":"","newValue":"Critical business equipment has redundant counterparts independently located at a separate, industry-standard minimum distance."}
[2025-05-04T16:00:34.736Z] [INFO] Setting demo value for field "passwordVisibility" {"value":"Password fields during login processes are concealed, encrypted, and obscured to prevent accidental disclosure or viewing by unauthorized individuals.","fieldId":51}
[2025-05-04T16:00:34.769Z] [DEBUG] Updated field passwordVisibility with demo value {"oldValue":"","newValue":"Password fields during login processes are concealed, encrypted, and obscured to prevent accidental disclosure or viewing by unauthorized individuals."}
[2025-05-04T16:00:34.770Z] [INFO] Setting demo value for field "privilegedUserLogs" {"value":"Privileged user activities are logged, regularly reviewed, and monitored closely for anomalies or unauthorized actions.","fieldId":52}
[2025-05-04T16:00:34.800Z] [DEBUG] Updated field privilegedUserLogs with demo value {"oldValue":"","newValue":"Privileged user activities are logged, regularly reviewed, and monitored closely for anomalies or unauthorized actions."}
[2025-05-04T16:00:34.800Z] [INFO] Setting demo value for field "physicalMfa" {"value":"Physical access at data-handling locations requires multifactor authentication with unique identification badges and biometric verification.","fieldId":53}
[2025-05-04T16:00:34.838Z] [DEBUG] Updated field physicalMfa with demo value {"oldValue":"","newValue":"Physical access at data-handling locations requires multifactor authentication with unique identification badges and biometric verification."}
[2025-05-04T16:00:34.838Z] [INFO] Setting demo value for field "executiveCyberTraining" {"value":"Executive cybersecurity training is provided annually, highlighting current threats, strategic risks, and governance responsibilities for senior management.","fieldId":54}
[2025-05-04T16:00:34.875Z] [DEBUG] Updated field executiveCyberTraining with demo value {"oldValue":"","newValue":"Executive cybersecurity training is provided annually, highlighting current threats, strategic risks, and governance responsibilities for senior management."}
[2025-05-04T16:00:34.875Z] [INFO] Setting demo value for field "complianceTraining" {"value":"Compliance-related training sessions are provided quarterly, covering critical regulations, ethical standards, and procedural compliance requirements.","fieldId":55}
[2025-05-04T16:00:34.910Z] [DEBUG] Updated field complianceTraining with demo value {"oldValue":"","newValue":"Compliance-related training sessions are provided quarterly, covering critical regulations, ethical standards, and procedural compliance requirements."}
[2025-05-04T16:00:34.910Z] [INFO] Setting demo value for field "annualSecurityTraining" {"value":"All employees complete cybersecurity awareness training annually, covering phishing, password security, and information handling best practices.","fieldId":56}
[2025-05-04T16:00:34.943Z] [DEBUG] Updated field annualSecurityTraining with demo value {"oldValue":"","newValue":"All employees complete cybersecurity awareness training annually, covering phishing, password security, and information handling best practices."}
[2025-05-04T16:00:34.943Z] [INFO] Setting demo value for field "developerTraining" {"value":"Developers, including subcontractors, complete mandatory secure development training annually, emphasizing secure coding practices and vulnerability prevention.","fieldId":57}
[2025-05-04T16:00:34.974Z] [DEBUG] Updated field developerTraining with demo value {"oldValue":"","newValue":"Developers, including subcontractors, complete mandatory secure development training annually, emphasizing secure coding practices and vulnerability prevention."}
[2025-05-04T16:00:34.975Z] [INFO] Setting demo value for field "accountCompromise" {"value":"Suspected account compromises trigger immediate password resets, account reviews, and security incident investigations to mitigate further risk.","fieldId":58}
[2025-05-04T16:00:35.012Z] [DEBUG] Updated field accountCompromise with demo value {"oldValue":"","newValue":"Suspected account compromises trigger immediate password resets, account reviews, and security incident investigations to mitigate further risk."}
[2025-05-04T16:00:35.012Z] [INFO] Setting demo value for field "passwordPolicies" {"value":"Password policies conform to industry best practices, requiring complexity, periodic changes, and preventing reuse across all systems handling client data.","fieldId":59}
[2025-05-04T16:00:35.058Z] [DEBUG] Updated field passwordPolicies with demo value {"oldValue":"","newValue":"Password policies conform to industry best practices, requiring complexity, periodic changes, and preventing reuse across all systems handling client data."}
[2025-05-04T16:00:35.058Z] [INFO] Setting demo value for field "defaultPasswords" {"value":"Default passwords are immediately changed, and unnecessary default accounts are disabled before any system deployment or configuration in production environments.","fieldId":60}
[2025-05-04T16:00:35.094Z] [DEBUG] Updated field defaultPasswords with demo value {"oldValue":"","newValue":"Default passwords are immediately changed, and unnecessary default accounts are disabled before any system deployment or configuration in production environments."}
[2025-05-04T16:00:35.094Z] [INFO] Setting demo value for field "deviceAccessMonitoring" {"value":"We utilize advanced network monitoring tools and endpoint protection solutions to detect, monitor, and control access to devices, connections, and data transfers.","fieldId":61}
[2025-05-04T16:00:35.127Z] [DEBUG] Updated field deviceAccessMonitoring with demo value {"oldValue":"","newValue":"We utilize advanced network monitoring tools and endpoint protection solutions to detect, monitor, and control access to devices, connections, and data transfers."}
[2025-05-04T16:00:35.127Z] [INFO] Setting demo value for field "crisisTeamAvailability" {"value":"The crisis response team is staffed on a 24/7/365 basis, supported by trained alternates and robust escalation protocols.","fieldId":62}
[2025-05-04T16:00:35.159Z] [DEBUG] Updated field crisisTeamAvailability with demo value {"oldValue":"","newValue":"The crisis response team is staffed on a 24/7/365 basis, supported by trained alternates and robust escalation protocols."}
[2025-05-04T16:00:35.159Z] [INFO] Setting demo value for field "vendorContracts" {"value":"Contractual agreements with critical subcontractors explicitly define and enforce compliance with our established resilience standards and expectations.","fieldId":63}
[2025-05-04T16:00:35.192Z] [DEBUG] Updated field vendorContracts with demo value {"oldValue":"","newValue":"Contractual agreements with critical subcontractors explicitly define and enforce compliance with our established resilience standards and expectations."}
[2025-05-04T16:00:35.193Z] [INFO] Setting demo value for field "staffResilience" {"value":"Our resilience program includes remote work options, employee assistance services, and clear communication channels to support staff during disruptions.","fieldId":64}
[2025-05-04T16:00:35.230Z] [DEBUG] Updated field staffResilience with demo value {"oldValue":"","newValue":"Our resilience program includes remote work options, employee assistance services, and clear communication channels to support staff during disruptions."}
[2025-05-04T16:00:35.230Z] [INFO] Setting demo value for field "pandemicResponse" {"value":"Our resilience measures explicitly include pandemic management plans, protocols for infectious disease outbreaks, natural event responses, and workforce absenteeism contingencies.","fieldId":65}
[2025-05-04T16:00:35.261Z] [DEBUG] Updated field pandemicResponse with demo value {"oldValue":"","newValue":"Our resilience measures explicitly include pandemic management plans, protocols for infectious disease outbreaks, natural event responses, and workforce absenteeism contingencies."}
[2025-05-04T16:00:35.261Z] [INFO] Setting demo value for field "vendorBcmReview" {"value":"Subcontractors' resilience programs are reviewed annually to verify alignment with our standards and recovery objectives through audits and contractual obligations.","fieldId":66}
[2025-05-04T16:00:35.298Z] [DEBUG] Updated field vendorBcmReview with demo value {"oldValue":"","newValue":"Subcontractors' resilience programs are reviewed annually to verify alignment with our standards and recovery objectives through audits and contractual obligations."}
[2025-05-04T16:00:35.298Z] [INFO] Setting demo value for field "continuityTesting" {"value":"Comprehensive business continuity tests are documented annually for all facilities and services processing client data, ensuring consistent operational readiness.","fieldId":67}
[2025-05-04T16:00:35.344Z] [DEBUG] Updated field continuityTesting with demo value {"oldValue":"","newValue":"Comprehensive business continuity tests are documented annually for all facilities and services processing client data, ensuring consistent operational readiness."}
[2025-05-04T16:00:35.344Z] [INFO] Setting demo value for field "resiliencePolicy" {"value":"Our resilience policies cover comprehensive business continuity and disaster recovery measures, documented and enforced across all critical operational sites.","fieldId":68}
[2025-05-04T16:00:35.379Z] [DEBUG] Updated field resiliencePolicy with demo value {"oldValue":"","newValue":"Our resilience policies cover comprehensive business continuity and disaster recovery measures, documented and enforced across all critical operational sites."}
[2025-05-04T16:00:35.379Z] [INFO] Setting demo value for field "bcpRolesResponsibilities" {"value":"Our business continuity plan explicitly defines personnel roles, responsibilities, and skills required for effective response and recovery during disruptions.","fieldId":69}
[2025-05-04T16:00:35.415Z] [DEBUG] Updated field bcpRolesResponsibilities with demo value {"oldValue":"","newValue":"Our business continuity plan explicitly defines personnel roles, responsibilities, and skills required for effective response and recovery during disruptions."}
[2025-05-04T16:00:35.415Z] [INFO] Setting demo value for field "crisisManagementPlan" {"value":"Our crisis management plan clearly outlines response actions, communication protocols, and coordination strategies across all client data-handling locations.","fieldId":70}
[2025-05-04T16:00:35.451Z] [DEBUG] Updated field crisisManagementPlan with demo value {"oldValue":"","newValue":"Our crisis management plan clearly outlines response actions, communication protocols, and coordination strategies across all client data-handling locations."}
[2025-05-04T16:00:35.451Z] [INFO] Setting demo value for field "bcpPolicyReview" {"value":"The business continuity and recovery policy undergoes a comprehensive review and formal approval annually to ensure it reflects our current operational environment.","fieldId":71}
[2025-05-04T16:00:35.496Z] [DEBUG] Updated field bcpPolicyReview with demo value {"oldValue":"","newValue":"The business continuity and recovery policy undergoes a comprehensive review and formal approval annually to ensure it reflects our current operational environment."}
[2025-05-04T16:00:35.496Z] [INFO] Setting demo value for field "bcpCommunicationPlan" {"value":"The business continuity communication plan clearly specifies methods, channels, and responsibilities for communicating with internal and external stakeholders during events.","fieldId":72}
[2025-05-04T16:00:35.542Z] [DEBUG] Updated field bcpCommunicationPlan with demo value {"oldValue":"","newValue":"The business continuity communication plan clearly specifies methods, channels, and responsibilities for communicating with internal and external stakeholders during events."}
[2025-05-04T16:00:35.542Z] [INFO] Setting demo value for field "continuityTraining" {"value":"Employees undergo annual training covering their business continuity responsibilities, roles during disruptions, and familiarization with continuity plans.","fieldId":73}
[2025-05-04T16:00:35.581Z] [DEBUG] Updated field continuityTraining with demo value {"oldValue":"","newValue":"Employees undergo annual training covering their business continuity responsibilities, roles during disruptions, and familiarization with continuity plans."}
[2025-05-04T16:00:35.582Z] [INFO] Setting demo value for field "crisisTeamRoles" {"value":"Crisis response team roles and responsibilities are clearly documented and reviewed semi-annually, ensuring clarity at all business process levels.","fieldId":74}
[2025-05-04T16:00:35.631Z] [DEBUG] Updated field crisisTeamRoles with demo value {"oldValue":"","newValue":"Crisis response team roles and responsibilities are clearly documented and reviewed semi-annually, ensuring clarity at all business process levels."}
[2025-05-04T16:00:35.631Z] [INFO] Setting demo value for field "assetRetrieval" {"value":"Assets from terminated employees and subcontractors are collected and inventoried on or before their last day, ensuring accurate reconciliation.","fieldId":75}
[2025-05-04T16:00:35.670Z] [DEBUG] Updated field assetRetrieval with demo value {"oldValue":"","newValue":"Assets from terminated employees and subcontractors are collected and inventoried on or before their last day, ensuring accurate reconciliation."}
[2025-05-04T16:00:35.670Z] [INFO] Setting demo value for field "cloudInteroperability" {"value":"Our resiliency approach specifically addresses cloud service portability, interoperability, and exit strategies to mitigate vendor lock-in risks.","fieldId":76}
[2025-05-04T16:00:35.725Z] [DEBUG] Updated field cloudInteroperability with demo value {"oldValue":"","newValue":"Our resiliency approach specifically addresses cloud service portability, interoperability, and exit strategies to mitigate vendor lock-in risks."}
[2025-05-04T16:00:35.725Z] [INFO] Setting demo value for field "immutableRecoveryData" {"value":"Immutable instances of recovery data are maintained using secure, air-gapped storage solutions, protected from modification or unauthorized access.","fieldId":77}
[2025-05-04T16:00:35.772Z] [DEBUG] Updated field immutableRecoveryData with demo value {"oldValue":"","newValue":"Immutable instances of recovery data are maintained using secure, air-gapped storage solutions, protected from modification or unauthorized access."}
[2025-05-04T16:00:35.773Z] [INFO] Setting demo value for field "powerBackup" {"value":"Business-critical equipment is supported by multiple power sources, including backup generators and redundant power grids, routinely maintained and tested quarterly.","fieldId":78}
[2025-05-04T16:00:35.810Z] [DEBUG] Updated field powerBackup with demo value {"oldValue":"","newValue":"Business-critical equipment is supported by multiple power sources, including backup generators and redundant power grids, routinely maintained and tested quarterly."}
[2025-05-04T16:00:35.810Z] [INFO] Setting demo value for field "securityExceptions" {"value":"We manage exceptions through a centralized registry, reviewed monthly to ensure timely mitigation.","fieldId":79}
[2025-05-04T16:00:35.853Z] [DEBUG] Updated field securityExceptions with demo value {"oldValue":"","newValue":"We manage exceptions through a centralized registry, reviewed monthly to ensure timely mitigation."}
[2025-05-04T16:00:35.853Z] [INFO] Setting demo value for field "wirelessSegmentation" {"value":"Non-production and guest wireless networks are segregated from production systems through logical network isolation and firewall rules.","fieldId":80}
[2025-05-04T16:00:35.895Z] [DEBUG] Updated field wirelessSegmentation with demo value {"oldValue":"","newValue":"Non-production and guest wireless networks are segregated from production systems through logical network isolation and firewall rules."}
[2025-05-04T16:00:35.895Z] [INFO] Setting demo value for field "standardChangeControl" {"value":"All system and operational changes undergo a standardized change control review process, documented and approved through our automated tracking system.","fieldId":81}
[2025-05-04T16:00:35.934Z] [DEBUG] Updated field standardChangeControl with demo value {"oldValue":"","newValue":"All system and operational changes undergo a standardized change control review process, documented and approved through our automated tracking system."}
[2025-05-04T16:00:35.934Z] [INFO] Setting demo value for field "emergingTechnologies" {"value":"We integrate cybersecurity considerations at the beginning of the evaluation phase for emerging technologies, following our defined security framework.","fieldId":82}
[2025-05-04T16:00:35.972Z] [DEBUG] Updated field emergingTechnologies with demo value {"oldValue":"","newValue":"We integrate cybersecurity considerations at the beginning of the evaluation phase for emerging technologies, following our defined security framework."}
[2025-05-04T16:00:35.972Z] [INFO] Setting demo value for field "recoveryObjectives" {"value":"Our RPO ensures data integrity by limiting potential data loss to less than one hour, fully aligning with our defined 4-hour RTO.","fieldId":83}
[2025-05-04T16:00:36.014Z] [DEBUG] Updated field recoveryObjectives with demo value {"oldValue":"","newValue":"Our RPO ensures data integrity by limiting potential data loss to less than one hour, fully aligning with our defined 4-hour RTO."}
[2025-05-04T16:00:36.014Z] [INFO] Setting demo value for field "criticalOperations" {"value":"Our critical operational objectives include restoring service functionality within 4 hours and maintaining data integrity with minimal data loss.","fieldId":84}
[2025-05-04T16:00:36.050Z] [DEBUG] Updated field criticalOperations with demo value {"oldValue":"","newValue":"Our critical operational objectives include restoring service functionality within 4 hours and maintaining data integrity with minimal data loss."}
[2025-05-04T16:00:36.050Z] [INFO] Setting demo value for field "fraudActivityReporting" {"value":"Suspected and confirmed fraud activities are promptly reported and communicated to affected clients using structured reporting processes and secure channels.","fieldId":85}
[2025-05-04T16:00:36.089Z] [DEBUG] Updated field fraudActivityReporting with demo value {"oldValue":"","newValue":"Suspected and confirmed fraud activities are promptly reported and communicated to affected clients using structured reporting processes and secure channels."}
[2025-05-04T16:00:36.089Z] [INFO] Setting demo value for field "cybersecurityRoles" {"value":"Roles and responsibilities within our cybersecurity team are clearly documented, updated annually, and communicated during onboarding and ongoing training.","fieldId":86}
[2025-05-04T16:00:36.133Z] [DEBUG] Updated field cybersecurityRoles with demo value {"oldValue":"","newValue":"Roles and responsibilities within our cybersecurity team are clearly documented, updated annually, and communicated during onboarding and ongoing training."}
[2025-05-04T16:00:36.133Z] [INFO] Setting demo value for field "insuranceCoverage" {"value":"Our organization maintains comprehensive insurance coverage, including liability, property damage, cybersecurity, and operational risk insurance.","fieldId":87}
[2025-05-04T16:00:36.193Z] [DEBUG] Updated field insuranceCoverage with demo value {"oldValue":"","newValue":"Our organization maintains comprehensive insurance coverage, including liability, property damage, cybersecurity, and operational risk insurance."}
[2025-05-04T16:00:36.194Z] [INFO] Setting demo value for field "networkRedundancy" {"value":"We employ diverse telecommunication carriers, redundant network pathways, and scalable circuits designed around risk assessments and operational requirements.","fieldId":88}
[2025-05-04T16:00:36.252Z] [DEBUG] Updated field networkRedundancy with demo value {"oldValue":"","newValue":"We employ diverse telecommunication carriers, redundant network pathways, and scalable circuits designed around risk assessments and operational requirements."}
[2025-05-04T16:00:36.252Z] [INFO] Setting demo value for field "dataLossPrevention" {"value":"Our DLP measures include endpoint monitoring, real-time alerts, and automatic prevention to detect and prevent unauthorized access or data leakage.","fieldId":89}
[2025-05-04T16:00:36.297Z] [DEBUG] Updated field dataLossPrevention with demo value {"oldValue":"","newValue":"Our DLP measures include endpoint monitoring, real-time alerts, and automatic prevention to detect and prevent unauthorized access or data leakage."}
[2025-05-04T16:00:36.297Z] [INFO] Setting demo value for field "dataLossGovernance" {"value":"Information and data loss prevention governance is documented, with clear policies, detection mechanisms, and periodic training for employees.","fieldId":90}
[2025-05-04T16:00:36.329Z] [DEBUG] Updated field dataLossGovernance with demo value {"oldValue":"","newValue":"Information and data loss prevention governance is documented, with clear policies, detection mechanisms, and periodic training for employees."}
[2025-05-04T16:00:36.329Z] [INFO] Setting demo value for field "activityLogging" {"value":"User activities across all critical systems and applications are logged and monitored continuously to detect and respond to suspicious behavior.","fieldId":91}
[2025-05-04T16:00:36.372Z] [DEBUG] Updated field activityLogging with demo value {"oldValue":"","newValue":"User activities across all critical systems and applications are logged and monitored continuously to detect and respond to suspicious behavior."}
[2025-05-04T16:00:36.372Z] [INFO] Setting demo value for field "incidentDocumentation" {"value":"Cybersecurity incidents are systematically documented and reported, including incident timelines, actions taken, and post-incident analysis.","fieldId":92}
[2025-05-04T16:00:36.422Z] [DEBUG] Updated field incidentDocumentation with demo value {"oldValue":"","newValue":"Cybersecurity incidents are systematically documented and reported, including incident timelines, actions taken, and post-incident analysis."}
[2025-05-04T16:00:36.422Z] [INFO] Setting demo value for field "databaseSynchronization" {"value":"Database mirroring, replication, and synchronization technologies are actively used to ensure continuous data protection and rapid recovery capabilities.","fieldId":93}
[2025-05-04T16:00:36.460Z] [DEBUG] Updated field databaseSynchronization with demo value {"oldValue":"","newValue":"Database mirroring, replication, and synchronization technologies are actively used to ensure continuous data protection and rapid recovery capabilities."}
[2025-05-04T16:00:36.461Z] [INFO] Setting demo value for field "webFiltering" {"value":"We use advanced web-filtering technology to block and monitor access to high-risk or malicious websites, updated continuously based on threat intelligence.","fieldId":94}
[2025-05-04T16:00:36.500Z] [DEBUG] Updated field webFiltering with demo value {"oldValue":"","newValue":"We use advanced web-filtering technology to block and monitor access to high-risk or malicious websites, updated continuously based on threat intelligence."}
[2025-05-04T16:00:36.500Z] [INFO] Setting demo value for field "encryptionVerification" {"value":"Regular audits and verification processes confirm that no client data remains unencrypted at rest or in transit, with quarterly validation checks.","fieldId":95}
[2025-05-04T16:00:36.542Z] [DEBUG] Updated field encryptionVerification with demo value {"oldValue":"","newValue":"Regular audits and verification processes confirm that no client data remains unencrypted at rest or in transit, with quarterly validation checks."}
[2025-05-04T16:00:36.542Z] [INFO] Setting demo value for field "clientDataSegregation" {"value":"We implement strict logical and physical segregation of client data through virtual networks, dedicated servers, and secure data storage areas.","fieldId":96}
[2025-05-04T16:00:36.576Z] [DEBUG] Updated field clientDataSegregation with demo value {"oldValue":"","newValue":"We implement strict logical and physical segregation of client data through virtual networks, dedicated servers, and secure data storage areas."}
[2025-05-04T16:00:36.576Z] [INFO] Setting demo value for field "tlsEncryptionStandards" {"value":"Client data in transit is encrypted using modern protocols equivalent to TLS 1.2 or greater, regularly audited for compliance with security standards.","fieldId":97}
[2025-05-04T16:00:36.607Z] [DEBUG] Updated field tlsEncryptionStandards with demo value {"oldValue":"","newValue":"Client data in transit is encrypted using modern protocols equivalent to TLS 1.2 or greater, regularly audited for compliance with security standards."}
[2025-05-04T16:00:36.607Z] [INFO] Setting demo value for field "endpointMalwareScanning" {"value":"Endpoint devices, including servers, laptops, and workstations, are protected by regularly updated antivirus and antimalware software with automated scanning enabled.","fieldId":98}
[2025-05-04T16:00:36.651Z] [DEBUG] Updated field endpointMalwareScanning with demo value {"oldValue":"","newValue":"Endpoint devices, including servers, laptops, and workstations, are protected by regularly updated antivirus and antimalware software with automated scanning enabled."}
[2025-05-04T16:00:36.651Z] [INFO] Setting demo value for field "emailMalwareScanning" {"value":"Email attachments and embedded links are automatically scanned for malware and phishing threats using advanced email security solutions.","fieldId":99}
[2025-05-04T16:00:36.692Z] [DEBUG] Updated field emailMalwareScanning with demo value {"oldValue":"","newValue":"Email attachments and embedded links are automatically scanned for malware and phishing threats using advanced email security solutions."}
[2025-05-04T16:00:36.692Z] [INFO] Setting demo value for field "threatIntelligence" {"value":"We maintain active subscriptions and partnerships with leading cyber threat intelligence agencies to stay updated on emerging threats.","fieldId":100}
[2025-05-04T16:00:36.729Z] [DEBUG] Updated field threatIntelligence with demo value {"oldValue":"","newValue":"We maintain active subscriptions and partnerships with leading cyber threat intelligence agencies to stay updated on emerging threats."}
[2025-05-04T16:00:36.729Z] [INFO] Setting demo value for field "impactAnalysis" {"value":"A detailed Business Impact Analysis (BIA) is conducted annually, defining recovery priorities, resource requirements, and acceptable downtime for critical operations.","fieldId":101}
[2025-05-04T16:00:36.761Z] [DEBUG] Updated field impactAnalysis with demo value {"oldValue":"","newValue":"A detailed Business Impact Analysis (BIA) is conducted annually, defining recovery priorities, resource requirements, and acceptable downtime for critical operations."}
[2025-05-04T16:00:36.761Z] [INFO] Setting demo value for field "realisticTesting" {"value":"We use realistic business-disruption scenarios during our annual continuity exercises to verify our capability to meet defined recovery objectives.","fieldId":102}
[2025-05-04T16:00:36.792Z] [DEBUG] Updated field realisticTesting with demo value {"oldValue":"","newValue":"We use realistic business-disruption scenarios during our annual continuity exercises to verify our capability to meet defined recovery objectives."}
[2025-05-04T16:00:36.792Z] [INFO] Setting demo value for field "riskAssessment" {"value":"We conduct information security risk assessments bi-annually, identifying and mitigating emerging risks.","fieldId":103}
[2025-05-04T16:00:36.825Z] [DEBUG] Updated field riskAssessment with demo value {"oldValue":"","newValue":"We conduct information security risk assessments bi-annually, identifying and mitigating emerging risks."}
[2025-05-04T16:00:36.825Z] [INFO] Setting demo value for field "riskBasedControls" {"value":"Our cybersecurity team updates security controls quarterly based on outcomes of periodic risk assessments to stay within our risk tolerance.","fieldId":104}
[2025-05-04T16:00:36.861Z] [DEBUG] Updated field riskBasedControls with demo value {"oldValue":"","newValue":"Our cybersecurity team updates security controls quarterly based on outcomes of periodic risk assessments to stay within our risk tolerance."}
[2025-05-04T16:00:36.861Z] [INFO] Setting demo value for field "incidentReporting" {"value":"Cyber incidents and threats are reported promptly through structured channels, ensuring rapid communication internally and externally, supported by regular updates.","fieldId":105}
[2025-05-04T16:00:36.900Z] [DEBUG] Updated field incidentReporting with demo value {"oldValue":"","newValue":"Cyber incidents and threats are reported promptly through structured channels, ensuring rapid communication internally and externally, supported by regular updates."}
[2025-05-04T16:00:36.900Z] [INFO] Setting demo value for field "keyManagementStrategy" {"value":"A centralized cryptographic key management system securely stores and regularly rotates encryption keys, following industry best practices.","fieldId":106}
[2025-05-04T16:00:36.941Z] [DEBUG] Updated field keyManagementStrategy with demo value {"oldValue":"","newValue":"A centralized cryptographic key management system securely stores and regularly rotates encryption keys, following industry best practices."}
[2025-05-04T16:00:36.941Z] [INFO] Setting demo value for field "incidentPlanTesting" {"value":"We test our incident management plan annually through scenario-based simulations and tabletop exercises, documenting outcomes and improvements.","fieldId":107}
[2025-05-04T16:00:36.973Z] [DEBUG] Updated field incidentPlanTesting with demo value {"oldValue":"","newValue":"We test our incident management plan annually through scenario-based simulations and tabletop exercises, documenting outcomes and improvements."}
[2025-05-04T16:00:36.974Z] [INFO] Setting demo value for field "incidentManagementPlan" {"value":"Our incident management plan is comprehensively documented, covering detection, response, communication, and recovery procedures, and reviewed annually.","fieldId":108}
[2025-05-04T16:00:37.011Z] [DEBUG] Updated field incidentManagementPlan with demo value {"oldValue":"","newValue":"Our incident management plan is comprehensively documented, covering detection, response, communication, and recovery procedures, and reviewed annually."}
[2025-05-04T16:00:37.011Z] [INFO] Setting demo value for field "incidentCoordination" {"value":"Incident response involves coordinated efforts between internal teams, external stakeholders, and, if necessary, engagement with law enforcement authorities.","fieldId":109}
[2025-05-04T16:00:37.046Z] [DEBUG] Updated field incidentCoordination with demo value {"oldValue":"","newValue":"Incident response involves coordinated efforts between internal teams, external stakeholders, and, if necessary, engagement with law enforcement authorities."}
[2025-05-04T16:00:37.046Z] [INFO] Setting demo value for field "incidentPlanUpdates" {"value":"Incident response plans are reviewed and updated quarterly, integrating insights from real incidents, threat intelligence, and best practices shared by industry partners.","fieldId":110}
[2025-05-04T16:00:37.083Z] [DEBUG] Updated field incidentPlanUpdates with demo value {"oldValue":"","newValue":"Incident response plans are reviewed and updated quarterly, integrating insights from real incidents, threat intelligence, and best practices shared by industry partners."}
[2025-05-04T16:00:37.083Z] [INFO] Setting demo value for field "incidentEscalation" {"value":"Incident escalation protocols are clearly documented, outlining specific thresholds, escalation paths, and communication responsibilities for various incident levels.","fieldId":111}
[2025-05-04T16:00:37.116Z] [DEBUG] Updated field incidentEscalation with demo value {"oldValue":"","newValue":"Incident escalation protocols are clearly documented, outlining specific thresholds, escalation paths, and communication responsibilities for various incident levels."}
[2025-05-04T16:00:37.116Z] [INFO] Setting demo value for field "incidentRoles" {"value":"Our incident response program clearly specifies team roles, decision-making authorities, and escalation paths, documented and reviewed bi-annually.","fieldId":112}
[2025-05-04T16:00:37.153Z] [DEBUG] Updated field incidentRoles with demo value {"oldValue":"","newValue":"Our incident response program clearly specifies team roles, decision-making authorities, and escalation paths, documented and reviewed bi-annually."}
[2025-05-04T16:00:37.153Z] [INFO] Setting demo value for field "incidentResponse" {"value":"Our incident response plan is reviewed quarterly by our security team and formally approved annually by senior management following a comprehensive audit.","fieldId":113}
[2025-05-04T16:00:37.192Z] [DEBUG] Updated field incidentResponse with demo value {"oldValue":"","newValue":"Our incident response plan is reviewed quarterly by our security team and formally approved annually by senior management following a comprehensive audit."}
[2025-05-04T16:00:37.192Z] [INFO] Setting demo value for field "incidentContainmentSpeed" {"value":"Cybersecurity incidents are contained and mitigated promptly through predefined procedures, with actions initiated within 1 hour of detection.","fieldId":114}
[2025-05-04T16:00:37.238Z] [DEBUG] Updated field incidentContainmentSpeed with demo value {"oldValue":"","newValue":"Cybersecurity incidents are contained and mitigated promptly through predefined procedures, with actions initiated within 1 hour of detection."}
[2025-05-04T16:00:37.238Z] [INFO] Setting demo value for field "forensicSupport" {"value":"Our cybersecurity team possesses dedicated forensic investigation tools and specialists to thoroughly examine and respond to incidents promptly.","fieldId":115}
[2025-05-04T16:00:37.273Z] [DEBUG] Updated field forensicSupport with demo value {"oldValue":"","newValue":"Our cybersecurity team possesses dedicated forensic investigation tools and specialists to thoroughly examine and respond to incidents promptly."}
[2025-05-04T16:00:37.273Z] [INFO] Setting demo value for field "clientIncidentNotification" {"value":"Clients are notified promptly about security incidents affecting their data through secure communication channels, including incident details and mitigation steps.","fieldId":116}
[2025-05-04T16:00:37.304Z] [DEBUG] Updated field clientIncidentNotification with demo value {"oldValue":"","newValue":"Clients are notified promptly about security incidents affecting their data through secure communication channels, including incident details and mitigation steps."}
[2025-05-04T16:00:37.304Z] [INFO] Setting demo value for field "logRetention" {"value":"We maintain immediate access to the most recent three months of activity and security event logs, stored securely and reviewed frequently.","fieldId":117}
[2025-05-04T16:00:37.336Z] [DEBUG] Updated field logRetention with demo value {"oldValue":"","newValue":"We maintain immediate access to the most recent three months of activity and security event logs, stored securely and reviewed frequently."}
[2025-05-04T16:00:37.336Z] [INFO] Setting demo value for field "cyberInvestigation" {"value":"Cyber events undergo thorough analysis within 24 hours to identify root cause, scope, damage assessment, and preventive recommendations.","fieldId":118}
[2025-05-04T16:00:37.371Z] [DEBUG] Updated field cyberInvestigation with demo value {"oldValue":"","newValue":"Cyber events undergo thorough analysis within 24 hours to identify root cause, scope, damage assessment, and preventive recommendations."}
[2025-05-04T16:00:37.371Z] [INFO] Setting demo value for field "vulnerabilityRootCause" {"value":"Root cause analysis of vulnerabilities is conducted systematically, with outcomes documented and used proactively to reduce future occurrences.","fieldId":119}
[2025-05-04T16:00:37.403Z] [DEBUG] Updated field vulnerabilityRootCause with demo value {"oldValue":"","newValue":"Root cause analysis of vulnerabilities is conducted systematically, with outcomes documented and used proactively to reduce future occurrences."}
[2025-05-04T16:00:37.403Z] [INFO] Setting demo value for field "disruptionRisk" {"value":"Risk assessments are performed annually to evaluate potential disruptions, documenting risks and mitigation measures as part of our resiliency program.","fieldId":120}
4:00:37 PM [info] GET /api/companies/current 304 in 36ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-04T16:00:37.439Z] [DEBUG] Updated field disruptionRisk with demo value {"oldValue":"","newValue":"Risk assessments are performed annually to evaluate potential disruptions, documenting risks and mitigation measures as part of our resiliency program."}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T16:00:37.439Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T16:00:37.439Z] [INFO] Demo auto-fill progress calculation result {"taskId":739,"fieldCount":120,"completedCount":120,"calculatedProgress":100,"oldStatus":"not_started","newStatus":"ready_for_submission"}
[2025-05-04T16:00:37.471Z] [DEBUG] Broadcasting task update with object format {"taskId":739,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746374437471_p06gzr0fr' }
[2025-05-04T16:00:37.472Z] [INFO] Successfully broadcasted task_update message 
[2025-05-04T16:00:37.472Z] [INFO] Demo data application completed {"taskId":739,"formType":"ky3p","inserted":0,"updated":120,"errors":0,"progress":100}
4:00:37 PM [info] POST /api/ky3p/demo-autofill/739 200 in 5138ms :: {"success":true,"message":"Successfully applied demo data to 120 fields","fie...
[Tasks Routes] Fetching task by ID: {
  taskId: 739,
  userCompanyId: 267,
  timestamp: '2025-05-04T16:00:37.705Z'
}
[Tasks Routes] Task found by ID: {
  taskId: 739,
  title: '2. S&P KY3P Security Assessment: DevTest12',
  type: 'ky3p',
  formDataFields: 0,
  timestamp: '2025-05-04T16:00:37.740Z'
}
4:00:37 PM [info] GET /api/tasks/739 200 in 68ms :: {"id":739,"title":"2. S&P KY3P Security Assessment: DevTest12","description":...
[2025-05-04T16:00:37.927Z] [INFO] Fetching KY3P progress for task 739 
[2025-05-04T16:00:37.998Z] [INFO] Retrieved 120 responses for task 739 
4:00:38 PM [info] GET /api/ky3p/progress/739 200 in 156ms :: {"success":true,"taskId":739,"status":"ready_for_submission","responses":[{"i...
[2025-05-04T16:00:38.525Z] [INFO] Fetching KY3P progress for task 739 
[2025-05-04T16:00:38.598Z] [INFO] Retrieved 120 responses for task 739 
4:00:38 PM [info] GET /api/ky3p/progress/739 304 in 144ms :: {"success":true,"taskId":739,"status":"ready_for_submission","responses":[{"i...
[KY3P API] Received batch update for task 739 with 120 fields
4:00:40 PM [info] GET /api/companies/current 304 in 48ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[KY3P] Task 739 progress updated: 0%
4:00:40 PM [info] POST /api/ky3p/batch-update/739 200 in 431ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[KY3P API] Received batch update for task 739 with 120 fields
[KY3P] Task 739 progress updated: 0%
4:00:42 PM [info] POST /api/ky3p/batch-update/739 200 in 553ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[Tasks Routes] Updating task progress: { taskId: 739, timestamp: '2025-05-04T16:00:42.836Z' }
[KY3P API] Received batch update for task 739 with 120 fields
4:00:42 PM [info] GET /api/tasks 304 in 40ms :: [{"id":740,"title":"3. Open Banking Survey: DevTest12","description":"Complet...
[Task Reconciliation] Using improved unified progress calculation for KY3P task 739
4:00:42 PM [info] GET /api/companies/current 304 in 49ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-04T16:00:43.038Z] [INFO] [KY3P Progress] Calculated progress for task 739: 120/120 = 100% 
[2025-05-04T16:00:43.038Z] [INFO] [KY3P Progress] Using explicit SQL casting for task 739 progress update {"taskId":739,"calculatedProgress":100,"calculatedStatus":"ready_for_submission","timestamp":"2025-05-04T16:00:43.038Z","source":"task_reconciliation"}
[2025-05-04T16:00:43.039Z] [INFO] [Progress Validation] Task 739 progress value normalized: {"taskId":739,"source":"task_reconciliation","originalValue":100,"originalType":"number","validatedValue":100,"wasChanged":false,"calculationMethod":"calculateAndUpdateTaskProgress","isForceUpdate":true,"previous":0}
4:00:43 PM [info] GET /api/tasks 304 in 37ms :: [{"id":740,"title":"3. Open Banking Survey: DevTest12","description":"Complet...
[Progress Broadcast broadcast-1746374443118-17] Broadcasting progress update for task 739: {
  taskId: 739,
  progress: 100,
  status: 'ready_for_submission',
  timestamp: '2025-05-04T16:00:43.118Z',
  source: 'at calculateAndUpdateTaskProgress (/home/runner/workspace/server/utils/unified-progress-fixed.ts:366:7)',
  hasMetadata: true
}
[Progress Utils] Broadcasting task progress update: {
  taskId: 739,
  progress: 100,
  requestedStatus: 'ready_for_submission',
  finalStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  timestamp: '2025-05-04T16:00:43.118Z'
}
[Progress Utils] Error tracking progress broadcast: ReferenceError: require is not defined
    at broadcastProgressUpdate (/home/runner/workspace/server/utils/progress.ts:749:40)
    at calculateAndUpdateTaskProgress (/home/runner/workspace/server/utils/unified-progress-fixed.ts:366:7)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async reconcileTaskProgress (/home/runner/workspace/server/utils/task-reconciliation.ts:353:24)
    at async <anonymous> (/home/runner/workspace/server/routes/tasks.ts:1105:5)
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746374443119_r4ub64oql' }
[2025-05-04T16:00:43.119Z] [INFO] Successfully broadcasted task_update message 
[Progress Broadcast broadcast-1746374443118-17] Successfully broadcast progress update for task 739
[2025-05-04T16:00:43.119Z] [INFO] [KY3P Progress] Broadcasted progress update for task 739: 100% (ready_for_submission) 
[Task Reconciliation] KY3P progress update result: {
  taskId: 739,
  success: true,
  progress: 100,
  status: 'ready_for_submission',
  message: 'Task 739 progress calculation complete'
}
[Tasks Routes] Task progress reconciled: {
  taskId: 739,
  progress: 100,
  status: 'ready_for_submission',
  timestamp: '2025-05-04T16:00:43.154Z'
}
4:00:43 PM [info] POST /api/tasks/739/update-progress 200 in 361ms :: {"success":true,"progress":100,"status":"ready_for_submission","taskId":739}
[KY3P] Task 739 progress updated: 0%
4:00:43 PM [info] POST /api/ky3p/batch-update/739 200 in 386ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
4:00:43 PM [info] GET /api/tasks 304 in 30ms :: [{"id":740,"title":"3. Open Banking Survey: DevTest12","description":"Complet...
[INFO] [WebSocket] Received message from client client-1746374424999-ibu2ieh: {
  type: 'ping',
  timestamp: '2025-05-04T16:00:44.954Z',
  connectionId: 'ws_1746374423830_46q5xak8f'
}
[Current Company] Fetching company for user: { userId: 310, companyId: 267 }
[Current Company] Found company: {
  id: 267,
  name: 'DevTest12',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
4:00:45 PM [info] GET /api/companies/current 304 in 58ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
4:00:48 PM [info] GET /api/companies/current 304 in 30ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Using cached company data: 267
4:00:51 PM [info] GET /api/companies/current 304 in 33ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746374424434-msatoyv: { type: 'ping' }
4:00:54 PM [info] GET /api/companies/current 304 in 36ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
4:00:57 PM [info] GET /api/companies/current 304 in 30ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 310, company_id: 267, email: '12@e.com' }
[2025-05-04T16:00:58.274Z] [INFO] Performing dynamic task unlocking check for company {"companyId":267,"userId":310}
[2025-05-04T16:00:58.304Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":267}
[Tasks] Automatically unlocking all tasks for company { userId: 310, companyId: 267, requestedBy: 'automatic_task_unlock' }
[2025-05-04T16:00:58.304Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":267}
[2025-05-04T16:00:58.333Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":267,"count":3,"taskIds":[740,738,739],"taskTypes":["open_banking","company_kyb","ky3p"]}
[Task Progress] Calculated progress for task 740 (open_banking): 0/44 = 0%
[2025-05-04T16:00:58.390Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":740,"taskType":"open_banking","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T16:00:58.390Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T16:00:58.390Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":740,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T16:00:58.420Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":740,"taskType":"open_banking","progress":0,"status":"not_started"}
[2025-05-04T16:00:58.420Z] [DEBUG] Broadcasting task update with object format {"taskId":740,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746374458420_qubavoszl' }
[2025-05-04T16:00:58.421Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 738 (company_kyb): 30/30 = 100%
[2025-05-04T16:00:58.478Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":738,"taskType":"company_kyb","storedProgress":100,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T16:00:58.478Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T16:00:58.479Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":738,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T16:00:58.508Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":738,"taskType":"company_kyb","progress":100,"status":"ready_for_submission"}
[2025-05-04T16:00:58.508Z] [DEBUG] Broadcasting task update with object format {"taskId":738,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746374458508_kvgebr7oc' }
[2025-05-04T16:00:58.508Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 739 (ky3p): 120/120 = 100%
[2025-05-04T16:00:58.564Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":739,"taskType":"ky3p","storedProgress":0,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T16:00:58.565Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T16:00:58.565Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":739,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T16:00:58.595Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":739,"taskType":"ky3p","progress":100,"status":"ready_for_submission"}
[2025-05-04T16:00:58.595Z] [DEBUG] Broadcasting task update with object format {"taskId":739,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746374458595_g8k04qxis' }
[2025-05-04T16:00:58.595Z] [INFO] Successfully broadcasted task_update message 
[2025-05-04T16:00:58.595Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":267,"count":3}
[Tasks] Successfully unlocked all tasks for company: 267
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 310',
    condition2: 'tasks.created_by = 310',
    condition3: "tasks.company_id = 267 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('12@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
4:00:58 PM [info] GET /api/tasks 200 in 413ms :: [{"id":740,"title":"3. Open Banking Survey: DevTest12","description":"Complet...
4:01:00 PM [info] GET /api/companies/current 304 in 29ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
4:01:03 PM [info] GET /api/companies/current 304 in 30ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746374424999-ibu2ieh: {
  type: 'ping',
  timestamp: '2025-05-04T16:01:04.953Z',
  connectionId: 'ws_1746374423830_46q5xak8f'
}
4:01:06 PM [info] GET /api/companies/current 304 in 33ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
4:01:09 PM [info] GET /api/companies/current 304 in 36ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
4:01:12 PM [info] GET /api/companies/current 304 in 57ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
4:01:13 PM [info] GET /api/tasks 304 in 30ms :: [{"id":740,"title":"3. Open Banking Survey: DevTest12","description":"Complet...
4:01:15 PM [info] GET /api/companies/current 304 in 30ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Using cached company data: 267
[Tasks Routes] Fetching task by ID: {
  taskId: 740,
  userCompanyId: 267,
  timestamp: '2025-05-04T16:01:16.835Z'
}
4:01:16 PM [info] GET /api/tasks 304 in 29ms :: [{"id":740,"title":"3. Open Banking Survey: DevTest12","description":"Complet...
4:01:16 PM [info] GET /api/companies/current 304 in 31ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks Routes] Task found by ID: {
  taskId: 740,
  title: '3. Open Banking Survey: DevTest12',
  type: 'open_banking',
  formDataFields: 0,
  timestamp: '2025-05-04T16:01:16.867Z'
}
4:01:16 PM [info] GET /api/tasks/740 200 in 81ms :: {"id":740,"title":"3. Open Banking Survey: DevTest12","description":"Complete...
[Task Templates API] Fetching template for task type: open_banking, user: 310
[Tasks Routes] Fetching task by ID: {
  taskId: 740,
  userCompanyId: 267,
  timestamp: '2025-05-04T16:01:17.139Z'
}
[Auth] Returning user session data
[Task Templates API] Found template: 50 (Open Banking Survey Template) for task type: open_banking
[Tasks Routes] Task found by ID: {
  taskId: 740,
  title: '3. Open Banking Survey: DevTest12',
  type: 'open_banking',
  formDataFields: 0,
  timestamp: '2025-05-04T16:01:17.179Z'
}
4:01:17 PM [info] GET /api/companies/current 304 in 46ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
4:01:17 PM [info] GET /api/tasks/740 304 in 90ms :: {"id":740,"title":"3. Open Banking Survey: DevTest12","description":"Complete...
[Task Templates API] Retrieved 7 configuration items for template ID: 50
4:01:17 PM [info] GET /api/task-templates/by-type/open_banking 304 in 132ms :: {"id":50,"name":"Open Banking Survey Template","description":"Template for Op...
[Current Company] Using cached company data: 267
4:01:20 PM [info] GET /api/companies/current 304 in 30ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
4:01:22 PM [info] GET /api/tasks 304 in 31ms :: [{"id":740,"title":"3. Open Banking Survey: DevTest12","description":"Complet...
4:01:23 PM [info] GET /api/companies/current 304 in 41ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
4:01:23 PM [info] GET /api/tasks 304 in 39ms :: [{"id":740,"title":"3. Open Banking Survey: DevTest12","description":"Complet...
4:01:23 PM [info] GET /api/tasks 304 in 37ms :: [{"id":740,"title":"3. Open Banking Survey: DevTest12","description":"Complet...
[INFO] [WebSocket] Received message from client client-1746374424434-msatoyv: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746374424999-ibu2ieh: {
  type: 'ping',
  timestamp: '2025-05-04T16:01:24.954Z',
  connectionId: 'ws_1746374423830_46q5xak8f'
}
4:01:25 PM [info] GET /api/companies/current 304 in 48ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
4:01:29 PM [info] GET /api/companies/current 304 in 56ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
4:01:32 PM [info] GET /api/companies/current 304 in 82ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[PeriodicTaskReconciliation] Reconciling batch of 10 tasks: [
  683, 685, 679, 691,
  699, 697, 705, 702,
  703, 701
]
[Task Progress] Calculated progress for task 683 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 685 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 679 (open_banking): 44/44 = 100%
[Task Progress] Calculated progress for task 691 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 699 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 697 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 705 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 702 (ky3p): 0/120 = 0%
4:01:34 PM [info] GET /api/companies/current 304 in 33ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Task Progress] Calculated progress for task 703 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 701 (company_kyb): 30/30 = 100%
4:01:38 PM [info] GET /api/companies/current 304 in 52ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 310, company_id: 267, email: '12@e.com' }
[2025-05-04T16:01:38.394Z] [INFO] Performing dynamic task unlocking check for company {"companyId":267,"userId":310}
[2025-05-04T16:01:38.443Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":267}
[Tasks] Automatically unlocking all tasks for company { userId: 310, companyId: 267, requestedBy: 'automatic_task_unlock' }
[2025-05-04T16:01:38.443Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":267}
[2025-05-04T16:01:38.480Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":267,"count":3,"taskIds":[740,739,738],"taskTypes":["open_banking","ky3p","company_kyb"]}
[Task Progress] Calculated progress for task 740 (open_banking): 0/44 = 0%
[2025-05-04T16:01:38.583Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":740,"taskType":"open_banking","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T16:01:38.583Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T16:01:38.583Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":740,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T16:01:38.641Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":740,"taskType":"open_banking","progress":0,"status":"not_started"}
[2025-05-04T16:01:38.641Z] [DEBUG] Broadcasting task update with object format {"taskId":740,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746374498641_uu5hk8vy4' }
[2025-05-04T16:01:38.641Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 739 (ky3p): 120/120 = 100%
[2025-05-04T16:01:38.740Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":739,"taskType":"ky3p","storedProgress":0,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T16:01:38.740Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T16:01:38.741Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":739,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T16:01:38.776Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":739,"taskType":"ky3p","progress":100,"status":"ready_for_submission"}
[2025-05-04T16:01:38.776Z] [DEBUG] Broadcasting task update with object format {"taskId":739,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746374498776_o1ue04ihn' }
[2025-05-04T16:01:38.776Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 738 (company_kyb): 30/30 = 100%
[2025-05-04T16:01:38.844Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":738,"taskType":"company_kyb","storedProgress":100,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T16:01:38.844Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T16:01:38.844Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":738,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T16:01:38.881Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":738,"taskType":"company_kyb","progress":100,"status":"ready_for_submission"}
[2025-05-04T16:01:38.881Z] [DEBUG] Broadcasting task update with object format {"taskId":738,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746374498881_ak3pgbym9' }
[2025-05-04T16:01:38.882Z] [INFO] Successfully broadcasted task_update message 
[2025-05-04T16:01:38.882Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":267,"count":3}
[Tasks] Successfully unlocked all tasks for company: 267
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 310',
    condition2: 'tasks.created_by = 310',
    condition3: "tasks.company_id = 267 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('12@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
4:01:38 PM [info] GET /api/tasks 200 in 598ms :: [{"id":740,"title":"3. Open Banking Survey: DevTest12","description":"Complet...
4:01:41 PM [info] GET /api/companies/current 304 in 43ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Using cached company data: 267
4:01:43 PM [info] GET /api/companies/current 304 in 36ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746374424999-ibu2ieh: {
  type: 'ping',
  timestamp: '2025-05-04T16:01:44.953Z',
  connectionId: 'ws_1746374423830_46q5xak8f'
}
[Current Company] Fetching company for user: { userId: 310, companyId: 267 }
[Current Company] Found company: {
  id: 267,
  name: 'DevTest12',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
4:01:47 PM [info] GET /api/companies/current 304 in 67ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
4:01:49 PM [info] GET /api/companies/current 304 in 33ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
4:01:53 PM [info] GET /api/companies/current 304 in 33ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
4:01:54 PM [info] GET /api/tasks 304 in 34ms :: [{"id":740,"title":"3. Open Banking Survey: DevTest12","description":"Complet...
[INFO] [WebSocket] Received message from client client-1746374424434-msatoyv: { type: 'ping' }
4:01:56 PM [info] GET /api/companies/current 304 in 37ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
4:01:58 PM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Using cached company data: 267
4:02:02 PM [info] GET /api/companies/current 304 in 48ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
4:02:04 PM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746374424999-ibu2ieh: {
  type: 'ping',
  timestamp: '2025-05-04T16:02:04.953Z',
  connectionId: 'ws_1746374423830_46q5xak8f'
}
4:02:07 PM [info] GET /api/companies/current 304 in 37ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 310, company_id: 267, email: '12@e.com' }
[2025-05-04T16:02:09.406Z] [INFO] Performing dynamic task unlocking check for company {"companyId":267,"userId":310}
[2025-05-04T16:02:09.441Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":267}
[Tasks] Automatically unlocking all tasks for company { userId: 310, companyId: 267, requestedBy: 'automatic_task_unlock' }
[2025-05-04T16:02:09.443Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":267}
[2025-05-04T16:02:09.483Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":267,"count":3,"taskIds":[740,738,739],"taskTypes":["open_banking","company_kyb","ky3p"]}
[Task Progress] Calculated progress for task 740 (open_banking): 0/44 = 0%
[2025-05-04T16:02:09.562Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":740,"taskType":"open_banking","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T16:02:09.562Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T16:02:09.562Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":740,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T16:02:09.595Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":740,"taskType":"open_banking","progress":0,"status":"not_started"}
[2025-05-04T16:02:09.595Z] [DEBUG] Broadcasting task update with object format {"taskId":740,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746374529595_cubex0n3y' }
[2025-05-04T16:02:09.595Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 738 (company_kyb): 30/30 = 100%
[2025-05-04T16:02:09.671Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":738,"taskType":"company_kyb","storedProgress":100,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T16:02:09.672Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T16:02:09.672Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":738,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T16:02:09.705Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":738,"taskType":"company_kyb","progress":100,"status":"ready_for_submission"}
[2025-05-04T16:02:09.705Z] [DEBUG] Broadcasting task update with object format {"taskId":738,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746374529705_mlb7c04m6' }
[2025-05-04T16:02:09.706Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 739 (ky3p): 120/120 = 100%
[2025-05-04T16:02:09.775Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":739,"taskType":"ky3p","storedProgress":0,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T16:02:09.776Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T16:02:09.776Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":739,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T16:02:09.812Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":739,"taskType":"ky3p","progress":100,"status":"ready_for_submission"}
[2025-05-04T16:02:09.813Z] [DEBUG] Broadcasting task update with object format {"taskId":739,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746374529813_uegu8qdps' }
[2025-05-04T16:02:09.813Z] [INFO] Successfully broadcasted task_update message 
[2025-05-04T16:02:09.813Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":267,"count":3}
[Tasks] Successfully unlocked all tasks for company: 267
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 310',
    condition2: 'tasks.created_by = 310',
    condition3: "tasks.company_id = 267 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('12@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
4:02:09 PM [info] GET /api/tasks 200 in 513ms :: [{"id":740,"title":"3. Open Banking Survey: DevTest12","description":"Complet...
4:02:10 PM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
4:02:13 PM [info] GET /api/companies/current 304 in 35ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
4:02:17 PM [info] GET /api/companies/current 304 in 48ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
4:02:19 PM [info] GET /api/companies/current 304 in 34ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
4:02:23 PM [info] GET /api/companies/current 304 in 35ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746374424434-msatoyv: { type: 'ping' }
4:02:25 PM [info] GET /api/tasks 304 in 47ms :: [{"id":740,"title":"3. Open Banking Survey: DevTest12","description":"Complet...
[INFO] [WebSocket] Received message from client client-1746374424999-ibu2ieh: {
  type: 'ping',
  timestamp: '2025-05-04T16:02:24.954Z',
  connectionId: 'ws_1746374423830_46q5xak8f'
}
[INFO] [WebSocket] Received message from client client-1746374425537-lx9y8na: { type: 'ping' }
4:02:26 PM [info] GET /api/companies/current 304 in 47ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
4:02:28 PM [info] GET /api/companies/current 304 in 39ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
4:02:32 PM [info] GET /api/companies/current 304 in 32ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
4:02:34 PM [info] GET /api/companies/current 304 in 35ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
4:02:37 PM [info] GET /api/companies/current 304 in 33ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 310, company_id: 267, email: '12@e.com' }
[2025-05-04T16:02:40.351Z] [INFO] Performing dynamic task unlocking check for company {"companyId":267,"userId":310}
[2025-05-04T16:02:40.382Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":267}
[Tasks] Automatically unlocking all tasks for company { userId: 310, companyId: 267, requestedBy: 'automatic_task_unlock' }
[2025-05-04T16:02:40.383Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":267}
[2025-05-04T16:02:40.418Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":267,"count":3,"taskIds":[740,739,738],"taskTypes":["open_banking","ky3p","company_kyb"]}
[Task Progress] Calculated progress for task 740 (open_banking): 0/44 = 0%
[2025-05-04T16:02:40.483Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":740,"taskType":"open_banking","storedProgress":0,"calculatedProgress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T16:02:40.483Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[2025-05-04T16:02:40.483Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":740,"progress":0,"currentStatus":"not_started","newStatus":"not_started"}
[2025-05-04T16:02:40.517Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":740,"taskType":"open_banking","progress":0,"status":"not_started"}
[2025-05-04T16:02:40.517Z] [DEBUG] Broadcasting task update with object format {"taskId":740,"status":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746374560517_brm5r7mex' }
[2025-05-04T16:02:40.518Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 739 (ky3p): 120/120 = 100%
[2025-05-04T16:02:40.581Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":739,"taskType":"ky3p","storedProgress":0,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T16:02:40.581Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T16:02:40.581Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":739,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T16:02:40.614Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":739,"taskType":"ky3p","progress":100,"status":"ready_for_submission"}
[2025-05-04T16:02:40.614Z] [DEBUG] Broadcasting task update with object format {"taskId":739,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746374560614_x3ffqfie3' }
[2025-05-04T16:02:40.614Z] [INFO] Successfully broadcasted task_update message 
[Task Progress] Calculated progress for task 738 (company_kyb): 30/30 = 100%
[2025-05-04T16:02:40.688Z] [INFO] [TaskDependencies] Calculated actual progress from database {"taskId":738,"taskType":"company_kyb","storedProgress":100,"calculatedProgress":100}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-05-04T16:02:40.688Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-04T16:02:40.688Z] [INFO] [TaskDependencies] Determining correct status for task {"taskId":738,"progress":100,"currentStatus":"ready_for_submission","newStatus":"ready_for_submission"}
[2025-05-04T16:02:40.726Z] [INFO] [TaskDependencies] Unlocked task {"companyId":267,"taskId":738,"taskType":"company_kyb","progress":100,"status":"ready_for_submission"}
[2025-05-04T16:02:40.727Z] [DEBUG] Broadcasting task update with object format {"taskId":738,"status":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746374560727_1f063eueh' }
[2025-05-04T16:02:40.727Z] [INFO] Successfully broadcasted task_update message 
[2025-05-04T16:02:40.727Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":267,"count":3}
[Tasks] Successfully unlocked all tasks for company: 267
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 310',
    condition2: 'tasks.created_by = 310',
    condition3: "tasks.company_id = 267 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('12@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
4:02:40 PM [info] GET /api/tasks 200 in 504ms :: [{"id":740,"title":"3. Open Banking Survey: DevTest12","description":"Complet...
4:02:40 PM [info] GET /api/companies/current 304 in 36ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
4:02:44 PM [info] GET /api/companies/current 304 in 38ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746374424999-ibu2ieh: {
  type: 'ping',
  timestamp: '2025-05-04T16:02:44.953Z',
  connectionId: 'ws_1746374423830_46q5xak8f'
}
4:02:46 PM [info] GET /api/companies/current 304 in 36ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Fetching company for user: { userId: 310, companyId: 267 }
[Current Company] Found company: {
  id: 267,
  name: 'DevTest12',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
4:02:50 PM [info] GET /api/companies/current 304 in 96ms :: {"id":267,"name":"DevTest12","category":"FinTech","is_demo":true,"revenue_tie...