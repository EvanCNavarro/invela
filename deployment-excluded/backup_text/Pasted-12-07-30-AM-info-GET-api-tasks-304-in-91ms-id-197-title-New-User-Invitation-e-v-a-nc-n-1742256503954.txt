12:07:30 AM [info] GET /api/tasks 304 in 91ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
New WebSocket client connected
[Files] Processing file upload request
[Files] File details: {
  originalname: 'soc2-type2 (1).pdf',
  mimetype: 'application/pdf',
  size: 760657,
  filename: '20250318000729.pdf'
}
[Files] Processing PDF file, extracting first pages
[PDF Service] Starting text extraction from first pages: {
  filePath: '/home/runner/workspace/uploads/documents/20250318000729.pdf',
  maxPages: 3,
  timestamp: '2025-03-18T00:07:30.531Z'
}
[PDF Service] Reading PDF file
[PDF Service] Extraction successful: {
  totalPages: 56,
  extractedPages: 3,
  timestamp: '2025-03-18T00:07:32.048Z'
}
[PDF Service] Truncating text to stay within token limits: { originalLength: 145224, truncatedLength: 64000 }
[Files] Starting document classification
[Files] Classification result: {
  category: 'soc2_audit',
  confidence: 0.9,
  reasoning: "The document describes an independent service auditor's report on controls relevant to security, confidentiality, and availability. It includes specific testing matrices, management's assertion, description of the system, testing methodologies, and detailed control activities."
}
[Files] Created file record: { id: 278, name: 'soc2-type2 (1).pdf', status: 'uploaded' }
12:07:33 AM [info] POST /api/files 201 in 3712ms :: {"id":278,"name":"soc2-type2 (1).pdf","size":760657,"type":"application/pdf",...
WebSocket client disconnected with code 1005 and reason: 
[Auth] Deserializing user: 150
New WebSocket client connected
[Files] Processing file upload request
[Files] File details: {
  originalname: 'Anonymized-ISO-27001-Assessment-Report.pdf',
  mimetype: 'application/pdf',
  size: 889081,
  filename: '20250318000733.pdf'
}
[Files] Processing PDF file, extracting first pages
[PDF Service] Starting text extraction from first pages: {
  filePath: '/home/runner/workspace/uploads/documents/20250318000733.pdf',
  maxPages: 3,
  timestamp: '2025-03-18T00:07:34.743Z'
}
[PDF Service] Reading PDF file
[PDF Service] Extraction successful: {
  totalPages: 50,
  extractedPages: 3,
  timestamp: '2025-03-18T00:07:35.974Z'
}
[PDF Service] Truncating text to stay within token limits: { originalLength: 75775, truncatedLength: 64000 }
[Files] Starting document classification
[Auth] Deserializing user: 150
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
12:07:36 AM [info] GET /api/companies/current 304 in 72ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
12:07:36 AM [info] GET /api/tasks 304 in 99ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Files] Classification result: {
  category: 'iso27001_cert',
  confidence: 0.9,
  reasoning: 'The document structure, terminology, and content align closely with the requirements and controls outlined in the ISO 27001 standard. The report details the assessment, methodology, key stakeholders, maturity levels per clause, conclusions, and recommendations in line with ISO 27001 certification preparation.'
}
[Files] Created file record: {
  id: 279,
  name: 'Anonymized-ISO-27001-Assessment-Report.pdf',
  status: 'uploaded'
}
12:07:37 AM [info] POST /api/files 201 in 3933ms :: {"id":279,"name":"Anonymized-ISO-27001-Assessment-Report.pdf","size":889081,"...
WebSocket client disconnected with code 1005 and reason: 
New WebSocket client connected
WebSocket client disconnected with code 1005 and reason: 
New WebSocket client connected
WebSocket client disconnected with code 1005 and reason: 
[WebSocket] Received pong from client
[Auth] Deserializing user: 150
[2025-03-18T00:07:39.309Z] [INFO] [CardRoutes] Fetching CARD fields
12:07:39 AM [info] GET /api/card/fields 304 in 121ms :: [{"id":1,"field_key":"security_access_control","wizard_section":"Security","q...
[Auth] Deserializing user: 150
[Document Processing] Creating chunks for file: {
  fileId: 278,
  fileName: 'soc2-type2 (1).pdf',
  mimeType: 'application/pdf',
  timestamp: '2025-03-18T00:07:39.613Z'
}
[DocumentChunking] Starting document chunking: {
  filePath: '/home/runner/workspace/uploads/documents/20250318000729.pdf',
  mimeType: 'application/pdf',
  chunkSize: 4000,
  timestamp: '2025-03-18T00:07:39.613Z'
}
[PDF Service] Starting text extraction from first pages: {
  filePath: '/home/runner/workspace/uploads/documents/20250318000729.pdf',
  maxPages: 0,
  timestamp: '2025-03-18T00:07:39.613Z'
}
[PDF Service] Reading PDF file
[PDF Service] Extraction successful: {
  totalPages: 56,
  extractedPages: 0,
  timestamp: '2025-03-18T00:07:40.777Z'
}
[PDF Service] Truncating text to stay within token limits: { originalLength: 145224, truncatedLength: 64000 }
[DocumentChunking] Created chunk: {
  chunkIndex: 0,
  chunkSize: 0,
  totalChunks: 1,
  timestamp: '2025-03-18T00:07:40.779Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 1,
  chunkSize: 0,
  totalChunks: 2,
  timestamp: '2025-03-18T00:07:40.779Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 2,
  chunkSize: 0,
  totalChunks: 3,
  timestamp: '2025-03-18T00:07:40.779Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 3,
  chunkSize: 0,
  totalChunks: 4,
  timestamp: '2025-03-18T00:07:40.779Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 4,
  chunkSize: 0,
  totalChunks: 5,
  timestamp: '2025-03-18T00:07:40.779Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 5,
  chunkSize: 0,
  totalChunks: 6,
  timestamp: '2025-03-18T00:07:40.779Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 6,
  chunkSize: 0,
  totalChunks: 7,
  timestamp: '2025-03-18T00:07:40.779Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 7,
  chunkSize: 0,
  totalChunks: 8,
  timestamp: '2025-03-18T00:07:40.779Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 8,
  chunkSize: 0,
  totalChunks: 9,
  timestamp: '2025-03-18T00:07:40.780Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 9,
  chunkSize: 0,
  totalChunks: 10,
  timestamp: '2025-03-18T00:07:40.780Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 10,
  chunkSize: 0,
  totalChunks: 11,
  timestamp: '2025-03-18T00:07:40.780Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 11,
  chunkSize: 0,
  totalChunks: 12,
  timestamp: '2025-03-18T00:07:40.780Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 12,
  chunkSize: 0,
  totalChunks: 13,
  timestamp: '2025-03-18T00:07:40.780Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 13,
  chunkSize: 0,
  totalChunks: 14,
  timestamp: '2025-03-18T00:07:40.780Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 14,
  chunkSize: 0,
  totalChunks: 15,
  timestamp: '2025-03-18T00:07:40.780Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 15,
  chunkSize: 0,
  totalChunks: 16,
  timestamp: '2025-03-18T00:07:40.780Z'
}
[DocumentChunking] Chunks created: {
  totalChunks: 16,
  averageChunkSize: 4000,
  timestamp: '2025-03-18T00:07:40.780Z'
}
[Document Processing] Processing chunk: {
  fileId: 278,
  chunkIndex: 0,
  progress: '1/16',
  timestamp: '2025-03-18T00:07:40.812Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 0,
  contentLength: 3922,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:07:40.813Z'
}
[OpenAI Service] Document analysis error: {
  error: "Cannot read properties of null (reading 'field_key')",
  duration: 0,
  timestamp: '2025-03-18T00:07:40.813Z'
}
[DocumentChunking] Error processing chunk: {
  error: TypeError: Cannot read properties of null (reading 'field_key')
      at <anonymous> (/home/runner/workspace/server/services/openai.ts:790:36)
      at Array.map (<anonymous>)
      at analyzeDocument (/home/runner/workspace/server/services/openai.ts:790:25)
      at processChunk (/home/runner/workspace/server/services/documentChunking.ts:116:26)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:339:34)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:384:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:95:5),
  chunkIndex: 0,
  timestamp: '2025-03-18T00:07:40.844Z'
}
12:07:40 AM [info] POST /api/documents/278/process 200 in 1270ms :: {"status":"processing","totalChunks":16}
[Document Processing] Processing chunk: {
  fileId: 278,
  chunkIndex: 1,
  progress: '2/16',
  timestamp: '2025-03-18T00:07:40.950Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 1,
  contentLength: 4000,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:07:40.950Z'
}
[OpenAI Service] Document analysis error: {
  error: "Cannot read properties of null (reading 'field_key')",
  duration: 0,
  timestamp: '2025-03-18T00:07:40.950Z'
}
[Auth] Deserializing user: 150
[DocumentChunking] Error processing chunk: {
  error: TypeError: Cannot read properties of null (reading 'field_key')
      at <anonymous> (/home/runner/workspace/server/services/openai.ts:790:36)
      at Array.map (<anonymous>)
      at analyzeDocument (/home/runner/workspace/server/services/openai.ts:790:25)
      at processChunk (/home/runner/workspace/server/services/documentChunking.ts:116:26)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:339:34),
  chunkIndex: 1,
  timestamp: '2025-03-18T00:07:40.982Z'
}
12:07:41 AM [info] GET /api/documents/278/progress 200 in 58ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Document Processing] Processing chunk: {
  fileId: 278,
  chunkIndex: 2,
  progress: '3/16',
  timestamp: '2025-03-18T00:07:41.084Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 2,
  contentLength: 4020,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:07:41.084Z'
}
[OpenAI Service] Document analysis error: {
  error: "Cannot read properties of null (reading 'field_key')",
  duration: 0,
  timestamp: '2025-03-18T00:07:41.084Z'
}
[DocumentChunking] Error processing chunk: {
  error: TypeError: Cannot read properties of null (reading 'field_key')
      at <anonymous> (/home/runner/workspace/server/services/openai.ts:790:36)
      at Array.map (<anonymous>)
      at analyzeDocument (/home/runner/workspace/server/services/openai.ts:790:25)
      at processChunk (/home/runner/workspace/server/services/documentChunking.ts:116:26)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:339:34),
  chunkIndex: 2,
  timestamp: '2025-03-18T00:07:41.114Z'
}
[Document Processing] Processing chunk: {
  fileId: 278,
  chunkIndex: 3,
  progress: '4/16',
  timestamp: '2025-03-18T00:07:41.215Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 3,
  contentLength: 4000,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:07:41.215Z'
}
[OpenAI Service] Document analysis error: {
  error: "Cannot read properties of null (reading 'field_key')",
  duration: 0,
  timestamp: '2025-03-18T00:07:41.215Z'
}
[Auth] Deserializing user: 150
[DocumentChunking] Error processing chunk: {
  error: TypeError: Cannot read properties of null (reading 'field_key')
      at <anonymous> (/home/runner/workspace/server/services/openai.ts:790:36)
      at Array.map (<anonymous>)
      at analyzeDocument (/home/runner/workspace/server/services/openai.ts:790:25)
      at processChunk (/home/runner/workspace/server/services/documentChunking.ts:116:26)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:339:34),
  chunkIndex: 3,
  timestamp: '2025-03-18T00:07:41.244Z'
}
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
12:07:41 AM [info] GET /api/companies/current 304 in 60ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[2025-03-18T00:07:41.318Z] New client connected to the pool
[Document Processing] Processing chunk: {
  fileId: 278,
  chunkIndex: 4,
  progress: '5/16',
  timestamp: '2025-03-18T00:07:41.345Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 4,
  contentLength: 3952,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:07:41.345Z'
}
[OpenAI Service] Document analysis error: {
  error: "Cannot read properties of null (reading 'field_key')",
  duration: 0,
  timestamp: '2025-03-18T00:07:41.345Z'
}
[Auth] Deserializing user: 150
[DocumentChunking] Error processing chunk: {
  error: TypeError: Cannot read properties of null (reading 'field_key')
      at <anonymous> (/home/runner/workspace/server/services/openai.ts:790:36)
      at Array.map (<anonymous>)
      at analyzeDocument (/home/runner/workspace/server/services/openai.ts:790:25)
      at processChunk (/home/runner/workspace/server/services/documentChunking.ts:116:26)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:339:34),
  chunkIndex: 4,
  timestamp: '2025-03-18T00:07:41.373Z'
}
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
[Document Processing] Processing chunk: {
  fileId: 278,
  chunkIndex: 5,
  progress: '6/16',
  timestamp: '2025-03-18T00:07:41.474Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 5,
  contentLength: 4077,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:07:41.474Z'
}
[OpenAI Service] Document analysis error: {
  error: "Cannot read properties of null (reading 'field_key')",
  duration: 0,
  timestamp: '2025-03-18T00:07:41.474Z'
}
12:07:41 AM [info] GET /api/tasks 304 in 91ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[DocumentChunking] Error processing chunk: {
  error: TypeError: Cannot read properties of null (reading 'field_key')
      at <anonymous> (/home/runner/workspace/server/services/openai.ts:790:36)
      at Array.map (<anonymous>)
      at analyzeDocument (/home/runner/workspace/server/services/openai.ts:790:25)
      at processChunk (/home/runner/workspace/server/services/documentChunking.ts:116:26)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:339:34),
  chunkIndex: 5,
  timestamp: '2025-03-18T00:07:41.505Z'
}
[Document Processing] Processing chunk: {
  fileId: 278,
  chunkIndex: 6,
  progress: '7/16',
  timestamp: '2025-03-18T00:07:41.606Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 6,
  contentLength: 4000,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:07:41.606Z'
}
[OpenAI Service] Document analysis error: {
  error: "Cannot read properties of null (reading 'field_key')",
  duration: 0,
  timestamp: '2025-03-18T00:07:41.606Z'
}
[DocumentChunking] Error processing chunk: {
  error: TypeError: Cannot read properties of null (reading 'field_key')
      at <anonymous> (/home/runner/workspace/server/services/openai.ts:790:36)
      at Array.map (<anonymous>)
      at analyzeDocument (/home/runner/workspace/server/services/openai.ts:790:25)
      at processChunk (/home/runner/workspace/server/services/documentChunking.ts:116:26)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:339:34),
  chunkIndex: 6,
  timestamp: '2025-03-18T00:07:41.637Z'
}
[Document Processing] Processing chunk: {
  fileId: 278,
  chunkIndex: 7,
  progress: '8/16',
  timestamp: '2025-03-18T00:07:41.737Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 7,
  contentLength: 4014,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:07:41.738Z'
}
[OpenAI Service] Document analysis error: {
  error: "Cannot read properties of null (reading 'field_key')",
  duration: 0,
  timestamp: '2025-03-18T00:07:41.738Z'
}
[DocumentChunking] Error processing chunk: {
  error: TypeError: Cannot read properties of null (reading 'field_key')
      at <anonymous> (/home/runner/workspace/server/services/openai.ts:790:36)
      at Array.map (<anonymous>)
      at analyzeDocument (/home/runner/workspace/server/services/openai.ts:790:25)
      at processChunk (/home/runner/workspace/server/services/documentChunking.ts:116:26)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:339:34),
  chunkIndex: 7,
  timestamp: '2025-03-18T00:07:41.768Z'
}
[Document Processing] Processing chunk: {
  fileId: 278,
  chunkIndex: 8,
  progress: '9/16',
  timestamp: '2025-03-18T00:07:41.870Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 8,
  contentLength: 3971,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:07:41.870Z'
}
[OpenAI Service] Document analysis error: {
  error: "Cannot read properties of null (reading 'field_key')",
  duration: 0,
  timestamp: '2025-03-18T00:07:41.870Z'
}
[DocumentChunking] Error processing chunk: {
  error: TypeError: Cannot read properties of null (reading 'field_key')
      at <anonymous> (/home/runner/workspace/server/services/openai.ts:790:36)
      at Array.map (<anonymous>)
      at analyzeDocument (/home/runner/workspace/server/services/openai.ts:790:25)
      at processChunk (/home/runner/workspace/server/services/documentChunking.ts:116:26)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:339:34),
  chunkIndex: 8,
  timestamp: '2025-03-18T00:07:41.901Z'
}
[Document Processing] Processing chunk: {
  fileId: 278,
  chunkIndex: 9,
  progress: '10/16',
  timestamp: '2025-03-18T00:07:42.002Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 9,
  contentLength: 3976,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:07:42.002Z'
}
[OpenAI Service] Document analysis error: {
  error: "Cannot read properties of null (reading 'field_key')",
  duration: 0,
  timestamp: '2025-03-18T00:07:42.002Z'
}
[DocumentChunking] Error processing chunk: {
  error: TypeError: Cannot read properties of null (reading 'field_key')
      at <anonymous> (/home/runner/workspace/server/services/openai.ts:790:36)
      at Array.map (<anonymous>)
      at analyzeDocument (/home/runner/workspace/server/services/openai.ts:790:25)
      at processChunk (/home/runner/workspace/server/services/documentChunking.ts:116:26)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:339:34),
  chunkIndex: 9,
  timestamp: '2025-03-18T00:07:42.032Z'
}
[Document Processing] Processing chunk: {
  fileId: 278,
  chunkIndex: 10,
  progress: '11/16',
  timestamp: '2025-03-18T00:07:42.133Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 10,
  contentLength: 4026,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:07:42.133Z'
}
[OpenAI Service] Document analysis error: {
  error: "Cannot read properties of null (reading 'field_key')",
  duration: 0,
  timestamp: '2025-03-18T00:07:42.133Z'
}
[Auth] Deserializing user: 150
[DocumentChunking] Error processing chunk: {
  error: TypeError: Cannot read properties of null (reading 'field_key')
      at <anonymous> (/home/runner/workspace/server/services/openai.ts:790:36)
      at Array.map (<anonymous>)
      at analyzeDocument (/home/runner/workspace/server/services/openai.ts:790:25)
      at processChunk (/home/runner/workspace/server/services/documentChunking.ts:116:26)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:339:34),
  chunkIndex: 10,
  timestamp: '2025-03-18T00:07:42.170Z'
}
12:07:42 AM [info] GET /api/documents/278/progress 304 in 62ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Document Processing] Processing chunk: {
  fileId: 278,
  chunkIndex: 11,
  progress: '12/16',
  timestamp: '2025-03-18T00:07:42.272Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 11,
  contentLength: 4017,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:07:42.274Z'
}
[OpenAI Service] Document analysis error: {
  error: "Cannot read properties of null (reading 'field_key')",
  duration: 0,
  timestamp: '2025-03-18T00:07:42.276Z'
}
[DocumentChunking] Error processing chunk: {
  error: TypeError: Cannot read properties of null (reading 'field_key')
      at <anonymous> (/home/runner/workspace/server/services/openai.ts:790:36)
      at Array.map (<anonymous>)
      at analyzeDocument (/home/runner/workspace/server/services/openai.ts:790:25)
      at processChunk (/home/runner/workspace/server/services/documentChunking.ts:116:26)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:339:34),
  chunkIndex: 11,
  timestamp: '2025-03-18T00:07:42.323Z'
}
[Document Processing] Processing chunk: {
  fileId: 278,
  chunkIndex: 12,
  progress: '13/16',
  timestamp: '2025-03-18T00:07:42.430Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 12,
  contentLength: 4005,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:07:42.431Z'
}
[OpenAI Service] Document analysis error: {
  error: "Cannot read properties of null (reading 'field_key')",
  duration: 0,
  timestamp: '2025-03-18T00:07:42.431Z'
}
[DocumentChunking] Error processing chunk: {
  error: TypeError: Cannot read properties of null (reading 'field_key')
      at <anonymous> (/home/runner/workspace/server/services/openai.ts:790:36)
      at Array.map (<anonymous>)
      at analyzeDocument (/home/runner/workspace/server/services/openai.ts:790:25)
      at processChunk (/home/runner/workspace/server/services/documentChunking.ts:116:26)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:339:34),
  chunkIndex: 12,
  timestamp: '2025-03-18T00:07:42.461Z'
}
[Document Processing] Processing chunk: {
  fileId: 278,
  chunkIndex: 13,
  progress: '14/16',
  timestamp: '2025-03-18T00:07:42.565Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 13,
  contentLength: 4035,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:07:42.565Z'
}
[OpenAI Service] Document analysis error: {
  error: "Cannot read properties of null (reading 'field_key')",
  duration: 0,
  timestamp: '2025-03-18T00:07:42.565Z'
}
[DocumentChunking] Error processing chunk: {
  error: TypeError: Cannot read properties of null (reading 'field_key')
      at <anonymous> (/home/runner/workspace/server/services/openai.ts:790:36)
      at Array.map (<anonymous>)
      at analyzeDocument (/home/runner/workspace/server/services/openai.ts:790:25)
      at processChunk (/home/runner/workspace/server/services/documentChunking.ts:116:26)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:339:34),
  chunkIndex: 13,
  timestamp: '2025-03-18T00:07:42.598Z'
}
[Document Processing] Processing chunk: {
  fileId: 278,
  chunkIndex: 14,
  progress: '15/16',
  timestamp: '2025-03-18T00:07:42.698Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 14,
  contentLength: 4032,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:07:42.699Z'
}
[OpenAI Service] Document analysis error: {
  error: "Cannot read properties of null (reading 'field_key')",
  duration: 0,
  timestamp: '2025-03-18T00:07:42.699Z'
}
[DocumentChunking] Error processing chunk: {
  error: TypeError: Cannot read properties of null (reading 'field_key')
      at <anonymous> (/home/runner/workspace/server/services/openai.ts:790:36)
      at Array.map (<anonymous>)
      at analyzeDocument (/home/runner/workspace/server/services/openai.ts:790:25)
      at processChunk (/home/runner/workspace/server/services/documentChunking.ts:116:26)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:339:34),
  chunkIndex: 14,
  timestamp: '2025-03-18T00:07:42.728Z'
}
[Document Processing] Processing chunk: {
  fileId: 278,
  chunkIndex: 15,
  progress: '16/16',
  timestamp: '2025-03-18T00:07:42.829Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 15,
  contentLength: 3953,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:07:42.830Z'
}
[OpenAI Service] Document analysis error: {
  error: "Cannot read properties of null (reading 'field_key')",
  duration: 0,
  timestamp: '2025-03-18T00:07:42.830Z'
}
[DocumentChunking] Error processing chunk: {
  error: TypeError: Cannot read properties of null (reading 'field_key')
      at <anonymous> (/home/runner/workspace/server/services/openai.ts:790:36)
      at Array.map (<anonymous>)
      at analyzeDocument (/home/runner/workspace/server/services/openai.ts:790:25)
      at processChunk (/home/runner/workspace/server/services/documentChunking.ts:116:26)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:339:34),
  chunkIndex: 15,
  timestamp: '2025-03-18T00:07:42.860Z'
}
[Auth] Deserializing user: 150
12:07:43 AM [info] GET /api/documents/278/progress 200 in 58ms :: {"status":"processed","progress":{"chunksProcessed":0,"totalChunks":1},"answe...
[Auth] Deserializing user: 150
12:07:43 AM [info] GET /api/documents/278/results 200 in 59ms :: {"status":"completed","answers":[],"answersFound":0}
[Auth] Deserializing user: 150
[Document Processing] Creating chunks for file: {
  fileId: 279,
  fileName: 'Anonymized-ISO-27001-Assessment-Report.pdf',
  mimeType: 'application/pdf',
  timestamp: '2025-03-18T00:07:43.783Z'
}
[DocumentChunking] Starting document chunking: {
  filePath: '/home/runner/workspace/uploads/documents/20250318000733.pdf',
  mimeType: 'application/pdf',
  chunkSize: 4000,
  timestamp: '2025-03-18T00:07:43.783Z'
}
[PDF Service] Starting text extraction from first pages: {
  filePath: '/home/runner/workspace/uploads/documents/20250318000733.pdf',
  maxPages: 0,
  timestamp: '2025-03-18T00:07:43.783Z'
}
[PDF Service] Reading PDF file
[PDF Service] Extraction successful: {
  totalPages: 50,
  extractedPages: 0,
  timestamp: '2025-03-18T00:07:45.622Z'
}
[PDF Service] Truncating text to stay within token limits: { originalLength: 75775, truncatedLength: 64000 }
[DocumentChunking] Created chunk: {
  chunkIndex: 0,
  chunkSize: 0,
  totalChunks: 1,
  timestamp: '2025-03-18T00:07:45.623Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 1,
  chunkSize: 0,
  totalChunks: 2,
  timestamp: '2025-03-18T00:07:45.623Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 2,
  chunkSize: 0,
  totalChunks: 3,
  timestamp: '2025-03-18T00:07:45.623Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 3,
  chunkSize: 0,
  totalChunks: 4,
  timestamp: '2025-03-18T00:07:45.624Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 4,
  chunkSize: 0,
  totalChunks: 5,
  timestamp: '2025-03-18T00:07:45.634Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 5,
  chunkSize: 0,
  totalChunks: 6,
  timestamp: '2025-03-18T00:07:45.634Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 6,
  chunkSize: 0,
  totalChunks: 7,
  timestamp: '2025-03-18T00:07:45.634Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 7,
  chunkSize: 0,
  totalChunks: 8,
  timestamp: '2025-03-18T00:07:45.635Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 8,
  chunkSize: 0,
  totalChunks: 9,
  timestamp: '2025-03-18T00:07:45.635Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 9,
  chunkSize: 0,
  totalChunks: 10,
  timestamp: '2025-03-18T00:07:45.635Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 10,
  chunkSize: 0,
  totalChunks: 11,
  timestamp: '2025-03-18T00:07:45.635Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 11,
  chunkSize: 0,
  totalChunks: 12,
  timestamp: '2025-03-18T00:07:45.635Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 12,
  chunkSize: 0,
  totalChunks: 13,
  timestamp: '2025-03-18T00:07:45.635Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 13,
  chunkSize: 0,
  totalChunks: 14,
  timestamp: '2025-03-18T00:07:45.635Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 14,
  chunkSize: 0,
  totalChunks: 15,
  timestamp: '2025-03-18T00:07:45.635Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 15,
  chunkSize: 0,
  totalChunks: 16,
  timestamp: '2025-03-18T00:07:45.635Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 16,
  chunkSize: 0,
  totalChunks: 17,
  timestamp: '2025-03-18T00:07:45.635Z'
}
[DocumentChunking] Chunks created: {
  totalChunks: 17,
  averageChunkSize: 3764.705882352941,
  timestamp: '2025-03-18T00:07:45.635Z'
}
[Document Processing] Processing chunk: {
  fileId: 279,
  chunkIndex: 0,
  progress: '1/17',
  timestamp: '2025-03-18T00:07:45.666Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 0,
  contentLength: 4000,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:07:45.666Z'
}
[OpenAI Service] Document analysis error: {
  error: "Cannot read properties of null (reading 'field_key')",
  duration: 0,
  timestamp: '2025-03-18T00:07:45.667Z'
}
[Auth] Deserializing user: 150
[DocumentChunking] Error processing chunk: {
  error: TypeError: Cannot read properties of null (reading 'field_key')
      at <anonymous> (/home/runner/workspace/server/services/openai.ts:790:36)
      at Array.map (<anonymous>)
      at analyzeDocument (/home/runner/workspace/server/services/openai.ts:790:25)
      at processChunk (/home/runner/workspace/server/services/documentChunking.ts:116:26)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:339:34)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:384:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:95:5),
  chunkIndex: 0,
  timestamp: '2025-03-18T00:07:45.698Z'
}
12:07:45 AM [info] POST /api/documents/279/process 200 in 1953ms :: {"status":"processing","totalChunks":17}
[Document Processing] Creating chunks for file: {
  fileId: 278,
  fileName: 'soc2-type2 (1).pdf',
  mimeType: 'application/pdf',
  timestamp: '2025-03-18T00:07:45.726Z'
}
[DocumentChunking] Starting document chunking: {
  filePath: '/home/runner/workspace/uploads/documents/20250318000729.pdf',
  mimeType: 'application/pdf',
  chunkSize: 4000,
  timestamp: '2025-03-18T00:07:45.726Z'
}
[PDF Service] Starting text extraction from first pages: {
  filePath: '/home/runner/workspace/uploads/documents/20250318000729.pdf',
  maxPages: 0,
  timestamp: '2025-03-18T00:07:45.726Z'
}
[PDF Service] Reading PDF file
[PDF Service] Extraction successful: {
  totalPages: 56,
  extractedPages: 0,
  timestamp: '2025-03-18T00:07:46.979Z'
}
[PDF Service] Truncating text to stay within token limits: { originalLength: 145224, truncatedLength: 64000 }
[DocumentChunking] Created chunk: {
  chunkIndex: 0,
  chunkSize: 0,
  totalChunks: 1,
  timestamp: '2025-03-18T00:07:46.981Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 1,
  chunkSize: 0,
  totalChunks: 2,
  timestamp: '2025-03-18T00:07:46.981Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 2,
  chunkSize: 0,
  totalChunks: 3,
  timestamp: '2025-03-18T00:07:46.981Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 3,
  chunkSize: 0,
  totalChunks: 4,
  timestamp: '2025-03-18T00:07:46.981Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 4,
  chunkSize: 0,
  totalChunks: 5,
  timestamp: '2025-03-18T00:07:46.981Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 5,
  chunkSize: 0,
  totalChunks: 6,
  timestamp: '2025-03-18T00:07:46.982Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 6,
  chunkSize: 0,
  totalChunks: 7,
  timestamp: '2025-03-18T00:07:46.982Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 7,
  chunkSize: 0,
  totalChunks: 8,
  timestamp: '2025-03-18T00:07:46.982Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 8,
  chunkSize: 0,
  totalChunks: 9,
  timestamp: '2025-03-18T00:07:46.982Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 9,
  chunkSize: 0,
  totalChunks: 10,
  timestamp: '2025-03-18T00:07:46.982Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 10,
  chunkSize: 0,
  totalChunks: 11,
  timestamp: '2025-03-18T00:07:46.982Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 11,
  chunkSize: 0,
  totalChunks: 12,
  timestamp: '2025-03-18T00:07:46.982Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 12,
  chunkSize: 0,
  totalChunks: 13,
  timestamp: '2025-03-18T00:07:46.982Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 13,
  chunkSize: 0,
  totalChunks: 14,
  timestamp: '2025-03-18T00:07:46.982Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 14,
  chunkSize: 0,
  totalChunks: 15,
  timestamp: '2025-03-18T00:07:46.982Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 15,
  chunkSize: 0,
  totalChunks: 16,
  timestamp: '2025-03-18T00:07:46.982Z'
}
[DocumentChunking] Chunks created: {
  totalChunks: 16,
  averageChunkSize: 4000,
  timestamp: '2025-03-18T00:07:46.982Z'
}
[Document Processing] Processing chunk: {
  fileId: 279,
  chunkIndex: 1,
  progress: '2/17',
  timestamp: '2025-03-18T00:07:46.983Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 1,
  contentLength: 3920,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:07:46.983Z'
}
[OpenAI Service] Document analysis error: {
  error: "Cannot read properties of null (reading 'field_key')",
  duration: 0,
  timestamp: '2025-03-18T00:07:46.983Z'
}
[Auth] Deserializing user: 150
[Document Processing] Processing chunk: {
  fileId: 278,
  chunkIndex: 0,
  progress: '1/16',
  timestamp: '2025-03-18T00:07:47.014Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 0,
  contentLength: 3922,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:07:47.014Z'
}
[OpenAI Service] Document analysis error: {
  error: "Cannot read properties of null (reading 'field_key')",
  duration: 0,
  timestamp: '2025-03-18T00:07:47.014Z'
}
[DocumentChunking] Error processing chunk: {
  error: TypeError: Cannot read properties of null (reading 'field_key')
      at <anonymous> (/home/runner/workspace/server/services/openai.ts:790:36)
      at Array.map (<anonymous>)
      at analyzeDocument (/home/runner/workspace/server/services/openai.ts:790:25)
      at processChunk (/home/runner/workspace/server/services/documentChunking.ts:116:26)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:339:34)
      at runNextTicks (node:internal/process/task_queues:60:5)
      at process.processTimers (node:internal/timers:516:9),
  chunkIndex: 1,
  timestamp: '2025-03-18T00:07:47.015Z'
}
12:07:47 AM [info] POST /api/documents/278/process 200 in 1346ms :: {"status":"processing","totalChunks":16}
[DocumentChunking] Error processing chunk: {
  error: TypeError: Cannot read properties of null (reading 'field_key')
      at <anonymous> (/home/runner/workspace/server/services/openai.ts:790:36)
      at Array.map (<anonymous>)
      at analyzeDocument (/home/runner/workspace/server/services/openai.ts:790:25)
      at processChunk (/home/runner/workspace/server/services/documentChunking.ts:116:26)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:339:34)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:384:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:95:5),
  chunkIndex: 0,
  timestamp: '2025-03-18T00:07:47.045Z'
}
[2025-03-18T00:07:47.071Z] New client connected to the pool
[2025-03-18T00:07:47.074Z] New client connected to the pool
12:07:47 AM [info] GET /api/documents/279/progress 200 in 61ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
[Auth] Deserializing user: 150
[Document Processing] Processing chunk: {
  fileId: 279,
  chunkIndex: 2,
  progress: '3/17',
  timestamp: '2025-03-18T00:07:47.115Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 2,
  contentLength: 4000,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:07:47.115Z'
}
[OpenAI Service] Document analysis error: {
  error: "Cannot read properties of null (reading 'field_key')",
  duration: 0,
  timestamp: '2025-03-18T00:07:47.115Z'
}
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Auth] Deserializing user: 150
[DocumentChunking] Error processing chunk: {
  error: TypeError: Cannot read properties of null (reading 'field_key')
      at <anonymous> (/home/runner/workspace/server/services/openai.ts:790:36)
      at Array.map (<anonymous>)
      at analyzeDocument (/home/runner/workspace/server/services/openai.ts:790:25)
      at processChunk (/home/runner/workspace/server/services/documentChunking.ts:116:26)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:339:34)
      at runNextTicks (node:internal/process/task_queues:60:5)
      at process.processTimers (node:internal/timers:516:9),
  chunkIndex: 2,
  timestamp: '2025-03-18T00:07:47.144Z'
}
[Document Processing] Processing chunk: {
  fileId: 278,
  chunkIndex: 1,
  progress: '2/16',
  timestamp: '2025-03-18T00:07:47.146Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 1,
  contentLength: 4000,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:07:47.146Z'
}
[OpenAI Service] Document analysis error: {
  error: "Cannot read properties of null (reading 'field_key')",
  duration: 0,
  timestamp: '2025-03-18T00:07:47.146Z'
}
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[DocumentChunking] Error processing chunk: {
  error: TypeError: Cannot read properties of null (reading 'field_key')
      at <anonymous> (/home/runner/workspace/server/services/openai.ts:790:36)
      at Array.map (<anonymous>)
      at analyzeDocument (/home/runner/workspace/server/services/openai.ts:790:25)
      at processChunk (/home/runner/workspace/server/services/documentChunking.ts:116:26)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:339:34),
  chunkIndex: 1,
  timestamp: '2025-03-18T00:07:47.175Z'
}
12:07:47 AM [info] GET /api/companies/current 304 in 59ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
12:07:47 AM [info] GET /api/tasks 304 in 88ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
12:07:47 AM [info] GET /api/documents/278/progress 200 in 60ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Document Processing] Processing chunk: {
  fileId: 279,
  chunkIndex: 3,
  progress: '4/17',
  timestamp: '2025-03-18T00:07:47.245Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 3,
  contentLength: 3918,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:07:47.245Z'
}
[OpenAI Service] Document analysis error: {
  error: "Cannot read properties of null (reading 'field_key')",
  duration: 1,
  timestamp: '2025-03-18T00:07:47.246Z'
}
[Document Processing] Processing chunk: {
  fileId: 278,
  chunkIndex: 2,
  progress: '3/16',
  timestamp: '2025-03-18T00:07:47.275Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 2,
  contentLength: 4020,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:07:47.275Z'
}
[OpenAI Service] Document analysis error: {
  error: "Cannot read properties of null (reading 'field_key')",
  duration: 0,
  timestamp: '2025-03-18T00:07:47.275Z'
}
[DocumentChunking] Error processing chunk: {
  error: TypeError: Cannot read properties of null (reading 'field_key')
      at <anonymous> (/home/runner/workspace/server/services/openai.ts:790:36)
      at Array.map (<anonymous>)
      at analyzeDocument (/home/runner/workspace/server/services/openai.ts:790:25)
      at processChunk (/home/runner/workspace/server/services/documentChunking.ts:116:26)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:339:34),
  chunkIndex: 3,
  timestamp: '2025-03-18T00:07:47.276Z'
}
[DocumentChunking] Error processing chunk: {
  error: TypeError: Cannot read properties of null (reading 'field_key')
      at <anonymous> (/home/runner/workspace/server/services/openai.ts:790:36)
      at Array.map (<anonymous>)
      at analyzeDocument (/home/runner/workspace/server/services/openai.ts:790:25)
      at processChunk (/home/runner/workspace/server/services/documentChunking.ts:116:26)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:339:34),
  chunkIndex: 2,
  timestamp: '2025-03-18T00:07:47.310Z'
}
[Document Processing] Processing chunk: {
  fileId: 279,
  chunkIndex: 4,
  progress: '5/17',
  timestamp: '2025-03-18T00:07:47.377Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 4,
  contentLength: 3969,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:07:47.377Z'
}
[OpenAI Service] Document analysis error: {
  error: "Cannot read properties of null (reading 'field_key')",
  duration: 0,
  timestamp: '2025-03-18T00:07:47.377Z'
}
[DocumentChunking] Error processing chunk: {
  error: TypeError: Cannot read properties of null (reading 'field_key')
      at <anonymous> (/home/runner/workspace/server/services/openai.ts:790:36)
      at Array.map (<anonymous>)
      at analyzeDocument (/home/runner/workspace/server/services/openai.ts:790:25)
      at processChunk (/home/runner/workspace/server/services/documentChunking.ts:116:26)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:339:34),
  chunkIndex: 4,
  timestamp: '2025-03-18T00:07:47.407Z'
}
[Document Processing] Processing chunk: {
  fileId: 278,
  chunkIndex: 3,
  progress: '4/16',
  timestamp: '2025-03-18T00:07:47.411Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 3,
  contentLength: 4000,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:07:47.411Z'
}
[OpenAI Service] Document analysis error: {
  error: "Cannot read properties of null (reading 'field_key')",
  duration: 0,
  timestamp: '2025-03-18T00:07:47.411Z'
}
[DocumentChunking] Error processing chunk: {
  error: TypeError: Cannot read properties of null (reading 'field_key')
      at <anonymous> (/home/runner/workspace/server/services/openai.ts:790:36)
      at Array.map (<anonymous>)
      at analyzeDocument (/home/runner/workspace/server/services/openai.ts:790:25)
      at processChunk (/home/runner/workspace/server/services/documentChunking.ts:116:26)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:339:34),
  chunkIndex: 3,
  timestamp: '2025-03-18T00:07:47.441Z'
}
[Document Processing] Processing chunk: {
  fileId: 279,
  chunkIndex: 5,
  progress: '6/17',
  timestamp: '2025-03-18T00:07:47.507Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 5,
  contentLength: 3901,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:07:47.508Z'
}
[OpenAI Service] Document analysis error: {
  error: "Cannot read properties of null (reading 'field_key')",
  duration: 0,
  timestamp: '2025-03-18T00:07:47.508Z'
}
[DocumentChunking] Error processing chunk: {
  error: TypeError: Cannot read properties of null (reading 'field_key')
      at <anonymous> (/home/runner/workspace/server/services/openai.ts:790:36)
      at Array.map (<anonymous>)
      at analyzeDocument (/home/runner/workspace/server/services/openai.ts:790:25)
      at processChunk (/home/runner/workspace/server/services/documentChunking.ts:116:26)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:339:34),
  chunkIndex: 5,
  timestamp: '2025-03-18T00:07:47.538Z'
}
[Document Processing] Processing chunk: {
  fileId: 278,
  chunkIndex: 4,
  progress: '5/16',
  timestamp: '2025-03-18T00:07:47.541Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 4,
  contentLength: 3952,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:07:47.542Z'
}
[OpenAI Service] Document analysis error: {
  error: "Cannot read properties of null (reading 'field_key')",
  duration: 0,
  timestamp: '2025-03-18T00:07:47.542Z'
}
[DocumentChunking] Error processing chunk: {
  error: TypeError: Cannot read properties of null (reading 'field_key')
      at <anonymous> (/home/runner/workspace/server/services/openai.ts:790:36)
      at Array.map (<anonymous>)
      at analyzeDocument (/home/runner/workspace/server/services/openai.ts:790:25)
      at processChunk (/home/runner/workspace/server/services/documentChunking.ts:116:26)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:339:34),
  chunkIndex: 4,
  timestamp: '2025-03-18T00:07:47.573Z'
}
[Document Processing] Processing chunk: {
  fileId: 279,
  chunkIndex: 6,
  progress: '7/17',
  timestamp: '2025-03-18T00:07:47.639Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 6,
  contentLength: 3966,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:07:47.639Z'
}
[OpenAI Service] Document analysis error: {
  error: "Cannot read properties of null (reading 'field_key')",
  duration: 0,
  timestamp: '2025-03-18T00:07:47.639Z'
}
[DocumentChunking] Error processing chunk: {
  error: TypeError: Cannot read properties of null (reading 'field_key')
      at <anonymous> (/home/runner/workspace/server/services/openai.ts:790:36)
      at Array.map (<anonymous>)
      at analyzeDocument (/home/runner/workspace/server/services/openai.ts:790:25)
      at processChunk (/home/runner/workspace/server/services/documentChunking.ts:116:26)
      at <anonymous> (/home/runner/workspace/server/routes/files.ts:339:34),
  chunkIndex: 6,
  timestamp: '2025-03-18T00:07:47.669Z'
}