[SUBMIT FLOW] 3. Preparing server submission for task 520
[UniversalForm] SUBMISSION FLOW: Initiating server submission for task 520 
Object {taskId: 520, taskType: "kyb", timestamp: "2025-04-20T21:12:13.872Z"}
[SUBMIT FLOW] 4. Creating WebSocket confirmation listeners for task 520
[SUBMIT FLOW] 5. Setting 15-second timeout for server confirmation
[SUBMIT FLOW] 6. Adding WebSocket listener for 'submission_status' events
[SUBMIT FLOW] 7. Adding WebSocket listener for error events
[SUBMIT FLOW] 8. Calling onSubmit handler to submit data to server
[TaskPage] Submitting KYB form with filename: kyb_form_520_2025-04-20T211213.csv
[SUBMIT FLOW] 9. Waiting for server confirmation via WebSocket or HTTP...
[TaskPage] Form submission successful, invalidating task cache for task 520
[WebSocket] Emit called for event type: submission_status 
Object {taskId: 520, status: "submitted", timestamp: 1745183535134, source: "client-emit"}
[WebSocket] Prepared message payload: 
Object {type: "submission_status", payload: {…}}
[WebSocket] Message sent via socket: submission_status
[WebSocket] Setting up auto-success fallback for form submission
[TaskPage] Received submission_status update for task 520: 
Object {status: "submitted"}
[TaskPage] Invalidated task queries after submission for task 520
[UniversalForm] [WebSocket Handler] Processing update for task 520: Status=submitted, Source=client-emit
[SUBMIT FLOW] RECEIVED: WebSocket event: 
Object {taskId: 520, status: "submitted", timestamp: 1745183535134, source: "client-emit", isLocalFallback: true, …}
[SUBMIT FLOW] 9. SUCCESS: Server confirmed submission for task 520
[UniversalForm] SUBMISSION FLOW SUCCESS: Received server confirmation 
Object {taskId: 520, status: "submitted", source: "client-emit", timestamp: "2025-04-20T21:12:15.136Z"}
[UniversalForm] [WebSocket Handler] Processing update for task 520: Status=submitted, Source=client-emit
[SUBMIT FLOW] Confirmation successful via WebSocket
[SUBMIT FLOW] 10. SUCCESS: Server confirmed form submission for task 520
[UniversalForm] SUBMISSION FLOW SUCCESS: Server confirmed submission success 
Object {taskId: 520, timestamp: "2025-04-20T21:12:15.136Z"}
taskId: 520
timestamp: "2025-04-20T21:12:15.136Z"
[[Prototype]]: Object
[SUBMIT FLOW] 10a. Using FileVaultService to enable file vault tab
[DashboardLayout] Checking route access: 
Object {currentTab: "task-center", availableTabs: Array(1), isLoadingCompany: false}
[WelcomeModal] Not rendering modal because: 
Object {noUser: false, onboardingCompleted: true, modalHidden: true}
[SUBMIT FLOW] Found current user's company ID: 212
[SUBMIT FLOW] ⚠️ Using current user's company ID 212 instead of missing task company ID
[SUBMIT FLOW] Using companyId 212 to enable file vault tab
[SUBMIT FLOW] Calling enableFileVault() for company 212
[FileVaultService] Enabling file vault for company 212
[FileVaultService] File vault enabled successfully: 
Object {message: "File vault unlocked successfully", companyId: 212, availableTabs: Array(2), changes: true, timestamp: "2025-04-20T21:12:15.484Z"}
[FileVaultService] Cache updated with new available tabs: 
(2) ["task-center", "file-vault"]
[DashboardLayout] Received company-tabs-updated event: 
Object {companyId: 212, availableTabs: Array(2), cacheInvalidation: true, currentCompanyId: 212}
[DashboardLayout] Processing update for current company
[DashboardLayout] Critical update detected, forcing refetch
[FileVaultService] Dispatched company-tabs-updated event
[FileVaultService] Refreshing company data
[WelcomeModal] Not rendering modal because: 
Object {noUser: false, onboardingCompleted: true, modalHidden: true}
[Sidebar] Available tabs updated: 
Array ["task-center"]
[DashboardLayout] Waiting for company data...
[WelcomeModal] Not rendering modal because: 
Object {noUser: false, onboardingCompleted: true, modalHidden: true}
[Sidebar] Available tabs updated: 
Array ["task-center"]
[UniversalForm] [UniversalForm] Checking demo status for taskId: 520, type: number
DEBUG: Current isCompanyDemo state = true
[UniversalForm] [UniversalForm] Got company ID 212 from task metadata
[UniversalForm] [UniversalForm] Making API request with companyId: /api/companies/is-demo?companyId=212
[TaskPage] Processing task data: 
Object {id: 520, title: "1. KYB Form: DevTest6", description: "Complete KYB verification for DevTest6", task_type: "company_kyb", task_scope: "company", …}
[TaskPage] Setting company name to: DevTest6
[DashboardLayout] Checking route access: 
Object {currentTab: "task-center", availableTabs: Array(1), isLoadingCompany: false}
[WelcomeModal] Not rendering modal because: 
Object {noUser: false, onboardingCompleted: true, modalHidden: true}
[Sidebar] Available tabs updated: 
Array ["task-center"]
[UniversalForm] [UniversalForm] Failed to fetch company demo status: 400, Response: {"message":"Invalid company ID","code":"INVALID_ID"}
[UniversalForm] [UniversalForm] API failed, falling back to metadata check