> rest-express@1.0.0 dev
> tsx server/index.ts

Database migrations disabled - schema already applied
[EmailService] Initializing email service
[EmailService] Email service initialized successfully
[Auth] Setting up authentication...
[Auth] Authentication setup completed
[Routes] Routes setup completed
[WebSocket] Server initialized on path: /ws
4:56:21 AM [info] Setting up Vite development server
4:56:21 AM [express] Server running on port 5000
New WebSocket client connected
[Auth] Unauthenticated user session
WebSocket client disconnected with code 1001 and reason: 
[2025-04-09T04:57:00.792Z] New client connected to the pool (1/3)
[2025-04-09T04:57:01.119Z] New client connected to the pool (2/3)
[2025-04-09T04:57:01.454Z] New client connected to the pool (3/3)
[Auth] Unauthenticated user session
New WebSocket client connected
[Auth] Processing login request
[Auth] Login request body: {
  email: 'eva.n.cnava.r.r.o@gmail.com',
  hasPassword: true,
  passwordLength: 8
}
[Auth] Login attempt for: eva.n.cnava.r.r.o@gmail.com
[Auth] Password received (first 4 chars): pass
[Auth] Looking up user by email: eva.n.cnava.r.r.o@gmail.com
[Auth] User lookup result: {
  found: true,
  userId: 199,
  hasPassword: true,
  passwordLength: 60,
  passwordStart: '$2b$'
}
[Auth] Found user, checking password
[Auth] Comparing passwords:
[Auth] - Stored hash length: 60
[Auth] - Stored hash format check: true
[Auth] - Supplied password length: 8
[Auth] - Stored hash: $2b$10$u8nF9JUa.R7.oAQlbdpETOYA0PHmQvJTBIJasBV/4/dlPRp9SGAF.
[Auth] - Supplied password (first 4 chars): pass
[Auth] Starting to hash password
[Auth] Password hashed successfully: { hashLength: 60, startsWithBcrypt: true, rounds: 10 }
[Auth] - Test hash generated: $2b$10$W0ps7GI3bIEh7t5ci8iKEOjAmcJcsrgpLPIqDovb9xNzZfzJshLpS
[Auth] Password comparison result: true
[Auth] Password validation result: true
[Auth] Login successful for user: 199
[Auth] Serializing user: 199
[Auth] Login successful for user: 199
[Auth] Deserializing user: 199
[Auth] Deserializing user: 199
[Auth] Deserializing user: 199
[Current Company] Fetching company for user: { userId: 199, companyId: 160 }
[Network Visualization] Fetching network data for company: 160
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 199, company_id: 160, email: 'eva.n.cnava.r.r.o@gmail.com' }
[Current Company] Found company: { id: 160, name: 'Ramp', onboardingCompleted: false, riskScore: null }
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 199',
    condition2: 'tasks.created_by = 199',
    condition3: "tasks.company_id = 160 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('eva.n.cnava.r.r.o@gmail.com')"
  }
}
4:57:19 AM [info] GET /api/companies/current 304 in 62ms :: {"id":160,"name":"Ramp","description":"FinTech partner company Ramp","categor...
[Network Visualization] Found network relationships: { count: 2 }
[Network Visualization] Returning visualization data: { centerNode: 'Ramp', nodeCount: 2 }
[Tasks] Tasks found: { count: 4 }
4:57:19 AM [info] GET /api/network/visualization 304 in 107ms :: {"center":{"id":160,"name":"Ramp","riskScore":0,"riskBucket":"low","accredita...
4:57:19 AM [info] GET /api/tasks 304 in 118ms :: [{"id":310,"title":"1. KYB Form: Ramp","description":"Complete KYB verificati...
New WebSocket client connected
[Current Company] Using cached company data: 160
4:57:19 AM [info] GET /api/companies/current 304 in 30ms :: {"id":160,"name":"Ramp","description":"FinTech partner company Ramp","categor...
[Tasks] Using cached task data for user: 199
4:57:19 AM [info] GET /api/tasks 304 in 30ms :: [{"id":310,"title":"1. KYB Form: Ramp","description":"Complete KYB verificati...
[Auth] Using cached user data: 199
[Auth] Using cached user data: 199
[Auth] Using cached user data: 199
[Auth] Using cached user data: 199
[Auth] Using cached user data: 199
[Auth] Using cached user data: 199
[Auth] Using cached user data: 199
[Auth] Using cached user data: 199
[Auth] Using cached user data: 199
[Auth] Returning user session data
New WebSocket client connected
4:57:23 AM [info] GET /api/tasks 304 in 30ms :: [{"id":310,"title":"1. KYB Form: Ramp","description":"Complete KYB verificati...
4:57:23 AM [info] GET /api/network/visualization 304 in 30ms :: {"center":{"id":160,"name":"Ramp","riskScore":0,"riskBucket":"low","accredita...
4:57:23 AM [info] GET /api/companies/current 304 in 30ms :: {"id":160,"name":"Ramp","description":"FinTech partner company Ramp","categor...
4:57:23 AM [info] GET /api/tasks 304 in 30ms :: [{"id":310,"title":"1. KYB Form: Ramp","description":"Complete KYB verificati...
New WebSocket client connected
4:57:24 AM [info] GET /api/tasks 304 in 30ms :: [{"id":310,"title":"1. KYB Form: Ramp","description":"Complete KYB verificati...
4:57:24 AM [info] GET /api/companies/current 304 in 30ms :: {"id":160,"name":"Ramp","description":"FinTech partner company Ramp","categor...
4:57:28 AM [info] GET /api/tasks 304 in 29ms :: [{"id":310,"title":"1. KYB Form: Ramp","description":"Complete KYB verificati...
4:57:28 AM [info] GET /api/companies/current 304 in 30ms :: {"id":160,"name":"Ramp","description":"FinTech partner company Ramp","categor...
4:57:30 AM [info] GET /api/tasks 304 in 31ms :: [{"id":310,"title":"1. KYB Form: Ramp","description":"Complete KYB verificati...
[Current Company] Using cached company data: 160
4:57:30 AM [info] GET /api/companies/current 304 in 31ms :: {"id":160,"name":"Ramp","description":"FinTech partner company Ramp","categor...
4:57:33 AM [info] GET /api/companies/current 304 in 29ms :: {"id":160,"name":"Ramp","description":"FinTech partner company Ramp","categor...
4:57:33 AM [info] GET /api/tasks 304 in 31ms :: [{"id":310,"title":"1. KYB Form: Ramp","description":"Complete KYB verificati...
4:57:35 AM [info] GET /api/tasks 304 in 31ms :: [{"id":310,"title":"1. KYB Form: Ramp","description":"Complete KYB verificati...
4:57:35 AM [info] GET /api/companies/current 304 in 31ms :: {"id":160,"name":"Ramp","description":"FinTech partner company Ramp","categor...
4:57:38 AM [info] GET /api/companies/current 304 in 31ms :: {"id":160,"name":"Ramp","description":"FinTech partner company Ramp","categor...
4:57:38 AM [info] GET /api/tasks 304 in 32ms :: [{"id":310,"title":"1. KYB Form: Ramp","description":"Complete KYB verificati...
4:57:40 AM [info] GET /api/tasks 304 in 31ms :: [{"id":310,"title":"1. KYB Form: Ramp","description":"Complete KYB verificati...
4:57:40 AM [info] GET /api/companies/current 304 in 31ms :: {"id":160,"name":"Ramp","description":"FinTech partner company Ramp","categor...