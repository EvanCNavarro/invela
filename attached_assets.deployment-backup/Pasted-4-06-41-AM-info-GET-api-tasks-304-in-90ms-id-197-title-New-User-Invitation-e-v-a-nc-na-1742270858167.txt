4:06:41 AM [info] GET /api/tasks 304 in 90ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
New WebSocket client connected
WebSocket client disconnected with code 1005 and reason: 
[Auth] Deserializing user: 150
[2025-03-18T04:06:43.547Z] [INFO] [CardRoutes] Fetching CARD task {"companyName":"Vector","userId":150,"companyId":113}
[2025-03-18T04:06:43.580Z] [INFO] [CardRoutes] Task lookup result {"found":true,"taskId":196,"taskType":"company_card","taskStatus":"in_progress"}
4:06:43 AM [info] GET /api/tasks/card/Vector 304 in 64ms :: {"id":196,"title":"Company CARD: Vector","description":"Provide Compliance an...
New WebSocket client connected
[Auth] Deserializing user: 150
[Files] Processing file upload request
[WebSocket] Broadcasting upload progress: {
  type: 'UPLOAD_PROGRESS',
  fileId: null,
  fileName: 'soc2-type2 (1).pdf',
  status: 'uploading',
  progress: 0
}
[Files] File details: {
  originalname: 'soc2-type2 (1).pdf',
  mimetype: 'application/pdf',
  size: 760657,
  filename: '20250318040646.pdf'
}
[Files] Document category detection: {
  filename: 'soc2-type2 (1).pdf',
  lowerFilename: 'soc2-type2 (1).pdf',
  detectedCategory: 'soc2_audit',
  timestamp: '2025-03-18T04:06:47.123Z',
  matches: {
    isSoc2: true,
    isIso27001: false,
    isPentest: false,
    isBusinessContinuity: false,
    exactMatch: 'soc2-type2 (1).pdf'
  }
}
[Files] Detected category: soc2_audit
[Files] Created file record: {
  id: 399,
  name: 'soc2-type2 (1).pdf',
  status: 'uploaded',
  category: 'soc2_audit'
}
[WebSocket] Broadcasting upload progress: {
  type: 'UPLOAD_PROGRESS',
  fileId: 399,
  fileName: 'soc2-type2 (1).pdf',
  status: 'uploaded',
  progress: 100
}
[WebSocket] Broadcasting document count update: {
  type: 'COUNT_UPDATE',
  category: 'soc2_audit',
  count: 1,
  companyId: '113'
}
4:06:47 AM [info] POST /api/files 201 in 605ms :: {"id":399,"name":"soc2-type2 (1).pdf","size":760657,"type":"application/pdf",...
[Auth] Deserializing user: 150
[Auth] Deserializing user: 150
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
4:06:48 AM [info] GET /api/companies/current 304 in 58ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
4:06:48 AM [info] GET /api/tasks 304 in 89ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Files] Processing file upload request
[WebSocket] Broadcasting upload progress: {
  type: 'UPLOAD_PROGRESS',
  fileId: null,
  fileName: 'Anonymised-BlackBox-Penetration-Testing-Report.pdf',
  status: 'uploading',
  progress: 0
}
[Files] File details: {
  originalname: 'Anonymised-BlackBox-Penetration-Testing-Report.pdf',
  mimetype: 'application/pdf',
  size: 2328443,
  filename: '20250318040647.pdf'
}
[Files] Document category detection: {
  filename: 'Anonymised-BlackBox-Penetration-Testing-Report.pdf',
  lowerFilename: 'anonymised-blackbox-penetration-testing-report.pdf',
  detectedCategory: 'pentest_report',
  timestamp: '2025-03-18T04:06:49.410Z',
  matches: {
    isSoc2: false,
    isIso27001: false,
    isPentest: false,
    isBusinessContinuity: false,
    exactMatch: 'anonymised-blackbox-penetration-testing-report.pdf'
  }
}
[Files] Detected category: pentest_report
[Files] Created file record: {
  id: 400,
  name: 'Anonymised-BlackBox-Penetration-Testing-Report.pdf',
  status: 'uploaded',
  category: 'pentest_report'
}
[WebSocket] Broadcasting upload progress: {
  type: 'UPLOAD_PROGRESS',
  fileId: 400,
  fileName: 'Anonymised-BlackBox-Penetration-Testing-Report.pdf',
  status: 'uploaded',
  progress: 100
}
[WebSocket] Broadcasting document count update: {
  type: 'COUNT_UPDATE',
  category: 'pentest_report',
  count: 1,
  companyId: '113'
}
4:06:49 AM [info] POST /api/files 201 in 2161ms :: {"id":400,"name":"Anonymised-BlackBox-Penetration-Testing-Report.pdf","size":...
[Auth] Deserializing user: 150
[Files] Processing file upload request
[WebSocket] Broadcasting upload progress: {
  type: 'UPLOAD_PROGRESS',
  fileId: null,
  fileName: 'spg-business-continuity-plan.pdf',
  status: 'uploading',
  progress: 0
}
[Files] File details: {
  originalname: 'spg-business-continuity-plan.pdf',
  mimetype: 'application/pdf',
  size: 200021,
  filename: '20250318040649.pdf'
}
[Files] Document category detection: {
  filename: 'spg-business-continuity-plan.pdf',
  lowerFilename: 'spg-business-continuity-plan.pdf',
  detectedCategory: 'business_continuity',
  timestamp: '2025-03-18T04:06:49.674Z',
  matches: {
    isSoc2: false,
    isIso27001: false,
    isPentest: false,
    isBusinessContinuity: false,
    exactMatch: 'spg-business-continuity-plan.pdf'
  }
}
[Files] Detected category: business_continuity
[Files] Created file record: {
  id: 401,
  name: 'spg-business-continuity-plan.pdf',
  status: 'uploaded',
  category: 'business_continuity'
}
[WebSocket] Broadcasting upload progress: {
  type: 'UPLOAD_PROGRESS',
  fileId: 401,
  fileName: 'spg-business-continuity-plan.pdf',
  status: 'uploaded',
  progress: 100
}
[WebSocket] Broadcasting document count update: {
  type: 'COUNT_UPDATE',
  category: 'business_continuity',
  count: 1,
  companyId: '113'
}
4:06:49 AM [info] POST /api/files 201 in 138ms :: {"id":401,"name":"spg-business-continuity-plan.pdf","size":200021,"type":"app...
[Auth] Deserializing user: 150
[Files] Processing file upload request
[WebSocket] Broadcasting upload progress: {
  type: 'UPLOAD_PROGRESS',
  fileId: null,
  fileName: 'Anonymized-ISO-27001-Assessment-Report (1).pdf',
  status: 'uploading',
  progress: 0
}
[Files] File details: {
  originalname: 'Anonymized-ISO-27001-Assessment-Report (1).pdf',
  mimetype: 'application/pdf',
  size: 889081,
  filename: '20250318040649.pdf'
}
[Files] Document category detection: {
  filename: 'Anonymized-ISO-27001-Assessment-Report (1).pdf',
  lowerFilename: 'anonymized-iso-27001-assessment-report (1).pdf',
  detectedCategory: 'iso27001_cert',
  timestamp: '2025-03-18T04:06:50.433Z',
  matches: {
    isSoc2: false,
    isIso27001: false,
    isPentest: false,
    isBusinessContinuity: false,
    exactMatch: 'anonymized-iso-27001-assessment-report (1).pdf'
  }
}
[Files] Detected category: iso27001_cert
[Files] Created file record: {
  id: 402,
  name: 'Anonymized-ISO-27001-Assessment-Report (1).pdf',
  status: 'uploaded',
  category: 'iso27001_cert'
}
[WebSocket] Broadcasting upload progress: {
  type: 'UPLOAD_PROGRESS',
  fileId: 402,
  fileName: 'Anonymized-ISO-27001-Assessment-Report (1).pdf',
  status: 'uploaded',
  progress: 100
}
[WebSocket] Broadcasting document count update: {
  type: 'COUNT_UPDATE',
  category: 'iso27001_cert',
  count: 1,
  companyId: '113'
}
4:06:50 AM [info] POST /api/files 201 in 651ms :: {"id":402,"name":"Anonymized-ISO-27001-Assessment-Report (1).pdf","size":8890...
WebSocket client disconnected with code 1005 and reason: 
[Auth] Deserializing user: 150
[2025-03-18T04:06:52.013Z] [INFO] [CardRoutes] Fetching CARD fields
4:06:52 AM [info] GET /api/card/fields 304 in 116ms :: [{"id":1,"field_key":"security_access_control","wizard_section":"Security","q...
[Auth] Deserializing user: 150
[Document Processing] Creating chunks for file: {
  fileId: 399,
  fileName: 'soc2-type2 (1).pdf',
  mimeType: 'application/pdf',
  timestamp: '2025-03-18T04:06:52.319Z'
}
[PDF Service] Extraction complete: {
  fileName: '20250318040646.pdf',
  totalPages: 56,
  extractedPages: 56,
  totalContent: 137813,
  averageContentPerPage: 2461,
  invalidContentItems: 3331,
  timestamp: '2025-03-18T04:06:53.733Z'
}
[PDF Service] Extraction complete: {
  fileName: '20250318040646.pdf',
  totalPages: 22,
  extractedPages: 17,
  totalContent: 64000,
  averageContentPerPage: 3765,
  invalidContentItems: 0,
  timestamp: '2025-03-18T04:06:53.734Z'
}
[Document Processing] Processing chunk: {
  fileId: 399,
  chunkIndex: 0,
  progress: '1/17',
  timestamp: '2025-03-18T04:06:53.766Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4094,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:06:53.766Z'
}
[OpenAI Service] Sending request: { promptLength: 4894, timestamp: '2025-03-18T04:06:53.767Z' }
[Auth] Deserializing user: 150
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
4:06:53 AM [info] POST /api/documents/399/process 200 in 1522ms :: {"status":"processing","totalChunks":17}
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
4:06:53 AM [info] GET /api/companies/current 304 in 60ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
4:06:53 AM [info] GET /api/tasks 304 in 90ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Auth] Deserializing user: 150
4:06:54 AM [info] GET /api/documents/399/progress 200 in 60ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
New WebSocket client connected
[Auth] Deserializing user: 150
4:06:55 AM [info] GET /api/documents/399/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 2,
  duration: 1498,
  fieldsAnswered: [ 'all', 'all' ],
  timestamp: '2025-03-18T04:06:55.264Z'
}
[DocumentChunking] Answers found: {
  chunkIndex: 0,
  answerCount: 2,
  timestamp: '2025-03-18T04:06:55.296Z'
}
[Document Processing] Processing chunk: {
  fileId: 399,
  chunkIndex: 1,
  progress: '2/17',
  timestamp: '2025-03-18T04:06:55.397Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4055,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:06:55.397Z'
}
[OpenAI Service] Sending request: { promptLength: 4855, timestamp: '2025-03-18T04:06:55.397Z' }
[Auth] Deserializing user: 150
4:06:56 AM [info] GET /api/documents/399/progress 304 in 60ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 1304,
  fieldsAnswered: [ 'all' ],
  timestamp: '2025-03-18T04:06:56.701Z'
}
[DocumentChunking] Answers found: {
  chunkIndex: 1,
  answerCount: 1,
  timestamp: '2025-03-18T04:06:56.738Z'
}
[Document Processing] Processing chunk: {
  fileId: 399,
  chunkIndex: 2,
  progress: '3/17',
  timestamp: '2025-03-18T04:06:56.838Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3909,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:06:56.839Z'
}
[OpenAI Service] Sending request: { promptLength: 4709, timestamp: '2025-03-18T04:06:56.839Z' }
[Auth] Deserializing user: 150
4:06:57 AM [info] GET /api/documents/399/progress 304 in 60ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 2,
  duration: 1377,
  fieldsAnswered: [ 'all', 'all' ],
  timestamp: '2025-03-18T04:06:58.216Z'
}
[DocumentChunking] Answers found: {
  chunkIndex: 2,
  answerCount: 2,
  timestamp: '2025-03-18T04:06:58.247Z'
}
[Document Processing] Chunk processing error: {
  fileId: 399,
  chunkIndex: 2,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T04:06:58.306Z'
}
[Document Processing] Processing chunk: {
  fileId: 399,
  chunkIndex: 3,
  progress: '4/17',
  timestamp: '2025-03-18T04:06:58.306Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3901,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:06:58.306Z'
}
[OpenAI Service] Sending request: { promptLength: 4701, timestamp: '2025-03-18T04:06:58.306Z' }
[Auth] Deserializing user: 150
4:06:58 AM [info] GET /api/documents/399/progress 304 in 60ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Auth] Deserializing user: 150
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
4:06:59 AM [info] GET /api/companies/current 304 in 59ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
4:06:59 AM [info] GET /api/tasks 304 in 90ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Auth] Deserializing user: 150
4:06:59 AM [info] GET /api/documents/399/progress 304 in 60ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 2022,
  fieldsAnswered: [ 'all' ],
  timestamp: '2025-03-18T04:07:00.328Z'
}
[DocumentChunking] Answers found: {
  chunkIndex: 3,
  answerCount: 1,
  timestamp: '2025-03-18T04:07:00.359Z'
}
[Document Processing] Chunk processing error: {
  fileId: 399,
  chunkIndex: 3,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T04:07:00.417Z'
}
[Document Processing] Processing chunk: {
  fileId: 399,
  chunkIndex: 4,
  progress: '5/17',
  timestamp: '2025-03-18T04:07:00.417Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3981,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:07:00.417Z'
}
[OpenAI Service] Sending request: { promptLength: 4781, timestamp: '2025-03-18T04:07:00.417Z' }
[Auth] Deserializing user: 150
4:07:01 AM [info] GET /api/documents/399/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 1119,
  fieldsAnswered: [ 'all' ],
  timestamp: '2025-03-18T04:07:01.536Z'
}
[DocumentChunking] Answers found: {
  chunkIndex: 4,
  answerCount: 1,
  timestamp: '2025-03-18T04:07:01.567Z'
}
[Document Processing] Chunk processing error: {
  fileId: 399,
  chunkIndex: 4,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T04:07:01.625Z'
}
[Document Processing] Processing chunk: {
  fileId: 399,
  chunkIndex: 5,
  progress: '6/17',
  timestamp: '2025-03-18T04:07:01.625Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3919,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:07:01.626Z'
}
[OpenAI Service] Sending request: { promptLength: 4719, timestamp: '2025-03-18T04:07:01.626Z' }
[Auth] Deserializing user: 150
4:07:02 AM [info] GET /api/documents/399/progress 304 in 58ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 2,
  duration: 1660,
  fieldsAnswered: [ 'all', 'all' ],
  timestamp: '2025-03-18T04:07:03.286Z'
}
[DocumentChunking] Answers found: {
  chunkIndex: 5,
  answerCount: 2,
  timestamp: '2025-03-18T04:07:03.318Z'
}
[Document Processing] Chunk processing error: {
  fileId: 399,
  chunkIndex: 5,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T04:07:03.377Z'
}
[Document Processing] Processing chunk: {
  fileId: 399,
  chunkIndex: 6,
  progress: '7/17',
  timestamp: '2025-03-18T04:07:03.378Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3915,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:07:03.379Z'
}
[OpenAI Service] Sending request: { promptLength: 4715, timestamp: '2025-03-18T04:07:03.380Z' }
[Auth] Deserializing user: 150
4:07:03 AM [info] GET /api/documents/399/progress 304 in 60ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
4:07:04 AM [info] GET /api/companies/current 304 in 60ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[2025-03-18T04:07:04.332Z] New client connected to the pool
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
4:07:04 AM [info] GET /api/tasks 304 in 92ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Auth] Deserializing user: 150
4:07:04 AM [info] GET /api/documents/399/progress 304 in 61ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 1340,
  fieldsAnswered: [ 'all' ],
  timestamp: '2025-03-18T04:07:04.719Z'
}
[DocumentChunking] Answers found: {
  chunkIndex: 6,
  answerCount: 1,
  timestamp: '2025-03-18T04:07:04.750Z'
}
[Document Processing] Chunk processing error: {
  fileId: 399,
  chunkIndex: 6,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T04:07:04.809Z'
}
[Document Processing] Processing chunk: {
  fileId: 399,
  chunkIndex: 7,
  progress: '8/17',
  timestamp: '2025-03-18T04:07:04.809Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4002,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:07:04.809Z'
}
[OpenAI Service] Sending request: { promptLength: 4802, timestamp: '2025-03-18T04:07:04.809Z' }
[Auth] Deserializing user: 150
4:07:05 AM [info] GET /api/documents/399/progress 304 in 58ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 1097,
  fieldsAnswered: [ 'all' ],
  timestamp: '2025-03-18T04:07:05.906Z'
}
[DocumentChunking] Answers found: {
  chunkIndex: 7,
  answerCount: 1,
  timestamp: '2025-03-18T04:07:05.936Z'
}
[Document Processing] Chunk processing error: {
  fileId: 399,
  chunkIndex: 7,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T04:07:05.993Z'
}
[Document Processing] Processing chunk: {
  fileId: 399,
  chunkIndex: 8,
  progress: '9/17',
  timestamp: '2025-03-18T04:07:05.994Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3938,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:07:05.994Z'
}
[OpenAI Service] Sending request: { promptLength: 4738, timestamp: '2025-03-18T04:07:05.994Z' }
[2025-03-18T04:07:07.047Z] New client connected to the pool
[Auth] Deserializing user: 150
4:07:07 AM [info] GET /api/documents/399/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 2,
  duration: 2138,
  fieldsAnswered: [ 'all', 'all' ],
  timestamp: '2025-03-18T04:07:08.132Z'
}
[DocumentChunking] Answers found: {
  chunkIndex: 8,
  answerCount: 2,
  timestamp: '2025-03-18T04:07:08.163Z'
}
[Document Processing] Chunk processing error: {
  fileId: 399,
  chunkIndex: 8,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T04:07:08.222Z'
}
[Document Processing] Processing chunk: {
  fileId: 399,
  chunkIndex: 9,
  progress: '10/17',
  timestamp: '2025-03-18T04:07:08.222Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3981,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:07:08.222Z'
}
[OpenAI Service] Sending request: { promptLength: 4781, timestamp: '2025-03-18T04:07:08.222Z' }
[2025-03-18T04:07:08.342Z] New client connected to the pool
[Auth] Deserializing user: 150
4:07:08 AM [info] GET /api/documents/399/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
4:07:09 AM [info] GET /api/companies/current 304 in 59ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Auth] Deserializing user: 150
4:07:09 AM [info] GET /api/documents/399/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[2025-03-18T04:07:09.670Z] New client connected to the pool
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
4:07:09 AM [info] GET /api/tasks 304 in 90ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Auth] Deserializing user: 150
4:07:10 AM [info] GET /api/documents/399/progress 304 in 63ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 3,
  duration: 3211,
  fieldsAnswered: [ 'all', 'all', 'all' ],
  timestamp: '2025-03-18T04:07:11.433Z'
}
[DocumentChunking] Answers found: {
  chunkIndex: 9,
  answerCount: 3,
  timestamp: '2025-03-18T04:07:11.487Z'
}
[Document Processing] Chunk processing error: {
  fileId: 399,
  chunkIndex: 9,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T04:07:11.552Z'
}
[Document Processing] Processing chunk: {
  fileId: 399,
  chunkIndex: 10,
  progress: '11/17',
  timestamp: '2025-03-18T04:07:11.552Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3951,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:07:11.552Z'
}
[OpenAI Service] Sending request: { promptLength: 4751, timestamp: '2025-03-18T04:07:11.552Z' }
[Auth] Deserializing user: 150
4:07:12 AM [info] GET /api/documents/399/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
4:07:13 AM [info] GET /api/documents/399/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
4:07:14 AM [info] GET /api/documents/399/progress 304 in 61ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
4:07:14 AM [info] GET /api/companies/current 304 in 60ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
4:07:15 AM [info] GET /api/tasks 304 in 101ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Auth] Deserializing user: 150
4:07:15 AM [info] GET /api/documents/399/progress 304 in 60ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
4:07:16 AM [info] GET /api/documents/399/progress 304 in 61ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
4:07:17 AM [info] GET /api/documents/399/progress 304 in 60ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 10,
  duration: 6946,
  fieldsAnswered: [
    'all', 'all', 'all',
    'all', 'all', 'all',
    'all', 'all', 'all',
    'all'
  ],
  timestamp: '2025-03-18T04:07:18.498Z'
}
[DocumentChunking] Answers found: {
  chunkIndex: 10,
  answerCount: 10,
  timestamp: '2025-03-18T04:07:18.529Z'
}
[Document Processing] Chunk processing error: {
  fileId: 399,
  chunkIndex: 10,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T04:07:18.588Z'
}
[Document Processing] Processing chunk: {
  fileId: 399,
  chunkIndex: 11,
  progress: '12/17',
  timestamp: '2025-03-18T04:07:18.588Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3970,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:07:18.588Z'
}
[OpenAI Service] Sending request: { promptLength: 4770, timestamp: '2025-03-18T04:07:18.588Z' }
[2025-03-18T04:07:19.137Z] New client connected to the pool
[Auth] Deserializing user: 150
4:07:19 AM [info] GET /api/documents/399/progress 304 in 61ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
4:07:19 AM [info] GET /api/companies/current 304 in 66ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Auth] Deserializing user: 150
[OpenAI Service] Analysis completed: {
  answersFound: 2,
  duration: 1567,
  fieldsAnswered: [ 'all', 'all' ],
  timestamp: '2025-03-18T04:07:20.155Z'
}
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[2025-03-18T04:07:20.242Z] New client connected to the pool
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
4:07:20 AM [info] GET /api/tasks 304 in 101ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[DocumentChunking] Answers found: {
  chunkIndex: 11,
  answerCount: 2,
  timestamp: '2025-03-18T04:07:20.285Z'
}
[Document Processing] Chunk processing error: {
  fileId: 399,
  chunkIndex: 11,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T04:07:20.344Z'
}
[Document Processing] Processing chunk: {
  fileId: 399,
  chunkIndex: 12,
  progress: '13/17',
  timestamp: '2025-03-18T04:07:20.344Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3916,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:07:20.344Z'
}
[OpenAI Service] Sending request: { promptLength: 4716, timestamp: '2025-03-18T04:07:20.345Z' }
[Auth] Deserializing user: 150
4:07:20 AM [info] GET /api/documents/399/progress 304 in 62ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
4:07:21 AM [info] GET /api/documents/399/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
4:07:22 AM [info] GET /api/documents/399/progress 304 in 61ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
4:07:24 AM [info] GET /api/documents/399/progress 304 in 61ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 4,
  duration: 3758,
  fieldsAnswered: [ 'all', 'all', 'all', 'all' ],
  timestamp: '2025-03-18T04:07:24.102Z'
}
[DocumentChunking] Answers found: {
  chunkIndex: 12,
  answerCount: 4,
  timestamp: '2025-03-18T04:07:24.133Z'
}
[Document Processing] Chunk processing error: {
  fileId: 399,
  chunkIndex: 12,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T04:07:24.192Z'
}
[Document Processing] Processing chunk: {
  fileId: 399,
  chunkIndex: 13,
  progress: '14/17',
  timestamp: '2025-03-18T04:07:24.192Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3922,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:07:24.192Z'
}
[OpenAI Service] Sending request: { promptLength: 4722, timestamp: '2025-03-18T04:07:24.192Z' }
[WebSocket] Received pong
[2025-03-18T04:07:24.991Z] New client connected to the pool
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
4:07:25 AM [info] GET /api/companies/current 304 in 71ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[2025-03-18T04:07:25.196Z] New client connected to the pool
[Auth] Deserializing user: 150
4:07:25 AM [info] GET /api/documents/399/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 1136,
  fieldsAnswered: [ 'all' ],
  timestamp: '2025-03-18T04:07:25.328Z'
}
[DocumentChunking] Answers found: {
  chunkIndex: 13,
  answerCount: 1,
  timestamp: '2025-03-18T04:07:25.359Z'
}
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Document Processing] Chunk processing error: {
  fileId: 399,
  chunkIndex: 13,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T04:07:25.416Z'
}
[Document Processing] Processing chunk: {
  fileId: 399,
  chunkIndex: 14,
  progress: '15/17',
  timestamp: '2025-03-18T04:07:25.416Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4036,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:07:25.416Z'
}
[OpenAI Service] Sending request: { promptLength: 4836, timestamp: '2025-03-18T04:07:25.416Z' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
4:07:25 AM [info] GET /api/tasks 304 in 96ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Auth] Deserializing user: 150
4:07:26 AM [info] GET /api/documents/399/progress 304 in 62ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 2,
  duration: 1735,
  fieldsAnswered: [ 'all', 'all' ],
  timestamp: '2025-03-18T04:07:27.151Z'
}
[DocumentChunking] Answers found: {
  chunkIndex: 14,
  answerCount: 2,
  timestamp: '2025-03-18T04:07:27.184Z'
}
[Document Processing] Chunk processing error: {
  fileId: 399,
  chunkIndex: 14,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T04:07:27.245Z'
}
[Document Processing] Processing chunk: {
  fileId: 399,
  chunkIndex: 15,
  progress: '16/17',
  timestamp: '2025-03-18T04:07:27.245Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4030,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:07:27.245Z'
}
[OpenAI Service] Sending request: { promptLength: 4830, timestamp: '2025-03-18T04:07:27.245Z' }
[2025-03-18T04:07:27.676Z] New client connected to the pool
[Auth] Deserializing user: 150
4:07:27 AM [info] GET /api/documents/399/progress 304 in 62ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 1245,
  fieldsAnswered: [ 'all' ],
  timestamp: '2025-03-18T04:07:28.490Z'
}
[DocumentChunking] Answers found: {
  chunkIndex: 15,
  answerCount: 1,
  timestamp: '2025-03-18T04:07:28.522Z'
}
[Document Processing] Chunk processing error: {
  fileId: 399,
  chunkIndex: 15,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T04:07:28.581Z'
}
[Document Processing] Processing chunk: {
  fileId: 399,
  chunkIndex: 16,
  progress: '17/17',
  timestamp: '2025-03-18T04:07:28.581Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 462,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:07:28.581Z'
}
[OpenAI Service] Sending request: { promptLength: 1262, timestamp: '2025-03-18T04:07:28.581Z' }
[2025-03-18T04:07:28.958Z] New client connected to the pool
[Auth] Deserializing user: 150
4:07:29 AM [info] GET /api/documents/399/progress 304 in 60ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 1005,
  fieldsAnswered: [ 'all' ],
  timestamp: '2025-03-18T04:07:29.586Z'
}
[DocumentChunking] Answers found: {
  chunkIndex: 16,
  answerCount: 1,
  timestamp: '2025-03-18T04:07:29.617Z'
}
[Document Processing] Chunk processing error: {
  fileId: 399,
  chunkIndex: 16,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T04:07:29.675Z'
}
[2025-03-18T04:07:29.762Z] New client connected to the pool
[Auth] Deserializing user: 150
4:07:30 AM [info] GET /api/documents/399/progress 200 in 60ms :: {"status":"processed","progress":{"chunksProcessed":0,"totalChunks":1},"answe...
[2025-03-18T04:07:30.302Z] New client connected to the pool
[Auth] Deserializing user: 150
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Document Processing] Creating chunks for file: {
  fileId: 400,
  fileName: 'Anonymised-BlackBox-Penetration-Testing-Report.pdf',
  mimeType: 'application/pdf',
  timestamp: '2025-03-18T04:07:30.423Z'
}
[PDF Service] Extraction complete: {
  fileName: '20250318040647.pdf',
  totalPages: 60,
  extractedPages: 60,
  totalContent: 72286,
  averageContentPerPage: 1205,
  invalidContentItems: 497,
  timestamp: '2025-03-18T04:07:31.229Z'
}
[PDF Service] Extraction complete: {
  fileName: '20250318040647.pdf',
  totalPages: 22,
  extractedPages: 17,
  totalContent: 64000,
  averageContentPerPage: 3765,
  invalidContentItems: 0,
  timestamp: '2025-03-18T04:07:31.229Z'
}
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
[Document Processing] Processing chunk: {
  fileId: 400,
  chunkIndex: 0,
  progress: '1/17',
  timestamp: '2025-03-18T04:07:31.260Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3906,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:07:31.260Z'
}
[OpenAI Service] Sending request: { promptLength: 4706, timestamp: '2025-03-18T04:07:31.260Z' }
4:07:31 AM [info] GET /api/companies/current 304 in 894ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
4:07:31 AM [info] POST /api/documents/400/process 200 in 898ms :: {"status":"processing","totalChunks":17}
[2025-03-18T04:07:31.319Z] New client connected to the pool
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Auth] Deserializing user: 150
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
4:07:31 AM [info] GET /api/tasks 304 in 90ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
4:07:31 AM [info] GET /api/documents/400/progress 200 in 60ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
4:07:32 AM [info] GET /api/documents/400/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 2,
  duration: 1758,
  fieldsAnswered: [ 'all', 'all' ],
  timestamp: '2025-03-18T04:07:33.018Z'
}
[DocumentChunking] Answers found: {
  chunkIndex: 0,
  answerCount: 2,
  timestamp: '2025-03-18T04:07:33.050Z'
}
[Document Processing] Processing chunk: {
  fileId: 400,
  chunkIndex: 1,
  progress: '2/17',
  timestamp: '2025-03-18T04:07:33.150Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3978,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:07:33.150Z'
}
[OpenAI Service] Sending request: { promptLength: 4778, timestamp: '2025-03-18T04:07:33.150Z' }
[Auth] Deserializing user: 150
4:07:33 AM [info] GET /api/documents/400/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...