
> rest-express@1.0.0 dev
[2025-05-22T20:57:59.749Z] [INFO] [Database] Initializing database connection with optimized settings for Neon PostgreSQL {"module":"Database"}
Database migrations disabled - schema already applied
[EmailService] Initializing email service
[EmailService] Email service initialized successfully
[OpenAI] Service initialized with API key: API key is set
[2025-05-22T20:57:59.825Z] [INFO] [NeonConnectionService] Initializing Neon Connection Service {"module":"NeonConnectionService"}
[WebSocketService] Initialized in fallback mode (WebSocket server not available)
[2025-05-22T20:57:59.928Z] [INFO] [App] [KY3P-BATCH-UPDATE] Registering KY3P batch update routes 
[2025-05-22T20:57:59.928Z] [INFO] [App] Registering KY3P batch update routes 
[2025-05-22T20:57:59.929Z] [INFO] [App] [UnifiedKY3P] Registering unified KY3P update routes 
[Routes] Registered KY3P field key router
[2025-05-22T20:57:59.929Z] [INFO] [App] Registering KY3P field update routes 
[2025-05-22T20:57:59.930Z] [INFO] [App] [OpenBankingRoutes] Setting up routes... 
[Routes] Setting up transaction-based unified form submission router
[Routes] Successfully registered transaction-based unified form submission router
[Routes] Setting up unified form submission router
[Routes] Successfully registered unified form submission router
[Routes] Setting up transactional form submission router
[Routes] Successfully registered transactional form submission router
[Routes] Route registration completed: 12 modules initialized [CompanySearch, KYB, KY3P-SubmissionFix, TaskProgress, UnifiedFormUpdate, KY3P-Fixed, KY3P-DemoAutofill, KY3P-BatchUpdate, KY3P-UnifiedUpdate, KY3P-FieldKey, UnifiedClearFields, TaskBroadcast]
[2025-05-22T20:57:59.931Z] [INFO] [App] [WebSocket] Setting up unified WebSocket server on path /ws 
[2025-05-22T20:57:59.932Z] [INFO] [WebSocket] Unified WebSocket server initialized successfully {"module":"WebSocket","clients":0,"path":"/ws","id":"blurvc","timestamp":"2025-05-22T20:57:59.932Z"}
[2025-05-22T20:57:59.932Z] [INFO] [App] [WebSocket] Unified WebSocket server initialized successfully 
[2025-05-22T20:57:59.932Z] [INFO] [App] [WebSocket] Unified WebSocket server handles form submission broadcasting 
[2025-05-22T20:57:59.932Z] [INFO] [App] [WebSocket] Skipping redundant WebSocket server initialization for deployment compatibility 
[2025-05-22T20:57:59.932Z] [INFO] [App] [ServerStartup] WebSocket server initialized with unified implementation 
[2025-05-22T20:57:59.932Z] [INFO] [App] [TaskWebSocket] WebSocket server registered with unified implementation 
[2025-05-22T20:57:59.932Z] [INFO] [App] [ServerStartup] WebSocket server registered with task-update utility 
[2025-05-22T20:57:59.932Z] [INFO] [TaskBroadcast] WebSocket server reference established {"module":"TaskBroadcast"}
[2025-05-22T20:57:59.932Z] [INFO] [TaskBroadcast] WebSocket server initialized {"module":"TaskBroadcast","connectedClients":0,"status":"active"}
[2025-05-22T20:57:59.932Z] [INFO] [App] [ServerStartup] WebSocket server registered with task-broadcast utility 
[2025-05-22T20:57:59.932Z] [INFO] [App] Setting up Vite development server 
[2025-05-22T20:57:59.933Z] [INFO] [App] [ProductionConfig] Applying Replit-optimized production configuration... 
[2025-05-22T20:57:59.934Z] [INFO] [App] [ProductionConfig] Applied memory optimization: max-old-space-size=1024MB 
[2025-05-22T20:57:59.934Z] [INFO] [App] [ProductionConfig] Enabled package layer optimization for deployment size reduction 
[2025-05-22T20:57:59.934Z] [INFO] [App] [ProductionConfig] Environment explicitly set to production 
[2025-05-22T20:57:59.934Z] [INFO] [App] [ProductionConfig] Production configuration applied successfully 
[2025-05-22T20:57:59.934Z] [INFO] [App] [ProductionConfig] All Replit deployment optimizations applied successfully 
[2025-05-22T20:57:59.934Z] [INFO] [App] [ENV] Server will listen on PORT=8080 (forced production mode) 
[2025-05-22T20:57:59.934Z] [INFO] [App] [ENV] Environment=production (forced production) 
[2025-05-22T20:57:59.934Z] [INFO] [App] [ENV] Deployment approach: Replit forced configuration for consistent Cloud Run deployment 
[2025-05-22T20:57:59.945Z] [INFO] [App] Server running on 0.0.0.0:8080 
[2025-05-22T20:57:59.945Z] [INFO] [App] Environment: production 
[Deployment] Server running on 0.0.0.0:8080
[Deployment] Environment: production
[Deployment] Port forwarding: Using Autoscale standard port (8080)
[Deployment] Production mode: Optimized for deployment
[2025-05-22T20:57:59.945Z] [INFO] [App] Starting periodic task reconciliation system... 
[2025-05-22T20:57:59.945Z] [INFO] [PeriodicTaskReconciliation] Periodic reconciliation system stopped {"module":"PeriodicTaskReconciliation","status":"inactive"}
[2025-05-22T20:57:59.945Z] [INFO] [PeriodicTaskReconciliation] Periodic reconciliation system started {"module":"PeriodicTaskReconciliation","intervalMs":300000,"cacheCleanupIntervalMs":900000,"status":"active"}
[2025-05-22T20:57:59.946Z] [INFO] [App] Task reconciliation system initialized successfully 
[2025-05-22T20:58:00.933Z] [INFO] [App] [ServerStartup] WebSocket server active with 0 connected clients 
[2025-05-22T20:58:01.086Z] [INFO] [Database] New database connection established {"module":"Database"}
[2025-05-22T20:58:04.049Z] [INFO] [Database] New database connection established {"module":"Database"}
[2025-05-22T20:58:04.144Z] [INFO] [Database] New database connection established {"module":"Database"}
[2025-05-22T20:58:09.947Z] [INFO] [App] Running background health checks... 
[2025-05-22T20:58:09.947Z] [StartupChecks] Running application startup health checks... 
[2025-05-22T20:58:09.947Z] [StartupChecks] Database health check attempt 1/3 
[2025-05-22T20:58:09.948Z] [INFO] [NeonConnectionService] Creating minimal connection pool for Neon PostgreSQL {"module":"NeonConnectionService"}
[2025-05-22T20:58:10.136Z] [INFO] [NeonConnectionService] New client connected to the pool {"module":"NeonConnectionService"}
[2025-05-22T20:58:10.165Z] [INFO] [NeonConnectionService] Connection pool initialized successfully {"module":"NeonConnectionService"}
[2025-05-22T20:58:10.202Z] [DBConnectionService] Database connection check successful 
[2025-05-22T20:58:10.202Z] [StartupChecks] Database health check passed 
[2025-05-22T20:58:10.202Z] [StartupChecks] All startup health checks passed! 
[2025-05-22T20:58:10.202Z] [INFO] [App] All background health checks passed successfully. 
[Current Company] Fetching company for user: { userId: 8, companyId: 1 }
[2025-05-22T20:58:12.951Z] [INFO] [App] [TabTutorials] Status request for tab "dashboard" from authenticated user ID: 8 
[2025-05-22T20:58:12.951Z] [INFO] [App] [TabTutorials] Normalizing tab name from 'dashboard' to canonical form 
[2025-05-22T20:58:12.951Z] [INFO] [App] [TabTutorials] Tab name already in canonical form: 'dashboard' 
[2025-05-22T20:58:12.951Z] [INFO] [App] [TabTutorials] Checking tutorial status for tab: dashboard (raw: dashboard), user: 8 
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 8, company_id: 1, email: 'evan.navarro@invela.com' }
[2025-05-22T20:58:12.965Z] [INFO] [App] Performing dynamic task unlocking check for company {"companyId":1,"userId":8}
[Current Company] Found company: {
  id: 1,
  name: 'Invela',
  onboardingCompleted: true,
  riskScore: 0,
  chosenScore: 0,
  isDemo: null
}
[Current Company] Onboarding status check: {
  userId: 8,
  companyId: 1,
  userOnboardingStatus: true,
  companyOnboardingStatus: true,
  timestamp: '2025-05-22T20:58:12.979Z'
}
[2025-05-22T20:58:12.985Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747947492985-92kz2ch","clients":1}
[2025-05-22T20:58:13.000Z] [INFO] [App] No completed KYB tasks found, skipping security task unlock check {"companyId":1}
[Tasks] Automatically unlocking all tasks for company { userId: 8, companyId: 1, requestedBy: 'automatic_task_unlock' }
[2025-05-22T20:58:13.003Z] [INFO] [App] [TaskDependencies] Unlocking ALL tasks for company {"companyId":1}
[2025-05-22T20:58:13.028Z] [INFO] [App] GET /api/companies/current 304 in 83ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"me... 
[2025-05-22T20:58:13.030Z] [INFO] [App] [TabTutorials] Retrieved tutorial status for dashboard for user 8: completed=true, step=2 
[2025-05-22T20:58:13.041Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":121,"userEmail":"darek.nehrebecki@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-22T20:58:13.041Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":338,"userEmail":"nathanael.coffing@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-22T20:58:13.041Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":858,"userEmail":"marcin.figiel@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-22T20:58:13.041Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":123,"userEmail":"dev.kurbur@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-22T20:58:13.041Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":168,"userEmail":"preston.mcfarland@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-22T20:58:13.041Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":122,"userEmail":"gaby.sulbaran@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-22T20:58:13.041Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":188,"userEmail":"amin.swessi@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-22T20:58:13.041Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":251,"userEmail":"krzysztof.pniak@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-22T20:58:13.041Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":720,"userEmail":"jim.wadsworth@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-22T20:58:13.041Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":124,"userEmail":"amar.karvir@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-22T20:58:13.042Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":991,"userEmail":"e@e.com","currentStatus":"completed","currentProgress":100}
[2025-05-22T20:58:13.042Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":172,"userEmail":"krzysztof.pniak@proopro.com","currentStatus":"completed","currentProgress":100}
[2025-05-22T20:58:13.042Z] [INFO] [App] [TaskDependencies] Found tasks to unlock {"companyId":1,"count":12,"taskIds":[121,338,858,123,168,122,188,251,720,124,991,172],"taskTypes":["user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding"],"ky3pTaskCount":0,"ky3pTaskIds":[]}
[2025-05-22T20:58:13.042Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":121,"userEmail":"darek.nehrebecki@invela.com","timestamp":"2025-05-22T20:58:13.042Z"}
[2025-05-22T20:58:13.062Z] [INFO] [App] GET /api/user-tab-tutorials/dashboard/status 200 in 113ms :: {"exists":true,"completed":true,"currentStep":2,"lastSeenAt":"2025-05-22T20:4... 
[2025-05-22T20:58:13.072Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-22T20:58:13.072Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 1 clients {"module":"WebSocket","messageType":"task_updated","recipients":1,"totalClients":1,"filtered":false}
[2025-05-22T20:58:13.072Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":121,"status":"completed"}
[2025-05-22T20:58:13.072Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":338,"userEmail":"nathanael.coffing@invela.com","timestamp":"2025-05-22T20:58:13.072Z"}
[2025-05-22T20:58:13.103Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-22T20:58:13.104Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 1 clients {"module":"WebSocket","messageType":"task_updated","recipients":1,"totalClients":1,"filtered":false}
[2025-05-22T20:58:13.104Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":338,"status":"completed"}
[2025-05-22T20:58:13.104Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":858,"userEmail":"marcin.figiel@invela.com","timestamp":"2025-05-22T20:58:13.104Z"}
[2025-05-22T20:58:13.109Z] [INFO] [WebSocket] Received message from client client-1747947492985-92kz2ch {"module":"WebSocket","type":"authenticate","data":{"timestamp":"2025-05-22T20:58:12.981Z"}}
[2025-05-22T20:58:13.109Z] [INFO] [WebSocket] Authentication from client client-1747947492985-92kz2ch {"module":"WebSocket","hasToken":true}
[2025-05-22T20:58:13.135Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-22T20:58:13.135Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 1 clients {"module":"WebSocket","messageType":"task_updated","recipients":1,"totalClients":1,"filtered":false}
[2025-05-22T20:58:13.136Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":858,"status":"completed"}
[2025-05-22T20:58:13.136Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":123,"userEmail":"dev.kurbur@invela.com","timestamp":"2025-05-22T20:58:13.136Z"}
[2025-05-22T20:58:13.167Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-22T20:58:13.167Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 1 clients {"module":"WebSocket","messageType":"task_updated","recipients":1,"totalClients":1,"filtered":false}
[2025-05-22T20:58:13.168Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":123,"status":"completed"}
[2025-05-22T20:58:13.168Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":168,"userEmail":"preston.mcfarland@invela.com","timestamp":"2025-05-22T20:58:13.168Z"}
[2025-05-22T20:58:13.222Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-22T20:58:13.222Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 1 clients {"module":"WebSocket","messageType":"task_updated","recipients":1,"totalClients":1,"filtered":false}
[2025-05-22T20:58:13.222Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":168,"status":"completed"}
[2025-05-22T20:58:13.222Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":122,"userEmail":"gaby.sulbaran@invela.com","timestamp":"2025-05-22T20:58:13.222Z"}
[Network Visualization] Fetching network data for company: 1
[Relationships] Fetching network for company: 1
[Companies] Fetching companies for user: { userId: 8, company_id: 1 }
[2025-05-22T20:58:13.255Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-22T20:58:13.256Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 1 clients {"module":"WebSocket","messageType":"task_updated","recipients":1,"totalClients":1,"filtered":false}
[2025-05-22T20:58:13.256Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":122,"status":"completed"}
[2025-05-22T20:58:13.256Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":188,"userEmail":"amin.swessi@invela.com","timestamp":"2025-05-22T20:58:13.256Z"}
[Relationships] Found network members: { count: 67 }
[Companies] Query successful, found companies: {
  count: 60,
  companies: [
    { id: 33, name: 'Affinityx', hasLogo: true, hasRelationship: true },
    {
      id: 55,
      name: 'Alphapoint',
      hasLogo: true,
      hasRelationship: true
    },
    { id: 35, name: 'AscendIQ', hasLogo: true, hasRelationship: true },
    { id: 18, name: 'Axono', hasLogo: true, hasRelationship: true },
    { id: 30, name: 'Bankure', hasLogo: true, hasRelationship: true },
    { id: 39, name: 'Cachepath', hasLogo: true, hasRelationship: true },
    { id: 21, name: 'Clario', hasLogo: true, hasRelationship: true },
    {
      id: 154,
      name: 'ClarityBank',
      hasLogo: false,
      hasRelationship: true
    },
    { id: 49, name: 'Cleara', hasLogo: true, hasRelationship: true },
    { id: 32, name: 'Clyra', hasLogo: true, hasRelationship: true },
    { id: 7, name: 'Credora', hasLogo: true, hasRelationship: true },
    {
      id: 15,
      name: 'CryptoNest',
      hasLogo: true,
      hasRelationship: true
    },
    {
      id: 318,
      name: 'DemoTest1',
      hasLogo: false,
      hasRelationship: true
    },
    {
      id: 332,
      name: 'DemoTest10',
      hasLogo: false,
      hasRelationship: true
    },
    {
      id: 319,
      name: 'DemoTest2',
      hasLogo: false,
      hasRelationship: true
    },
    {
      id: 325,
      name: 'DemoTest3',
      hasLogo: false,
      hasRelationship: true
    },
    {
      id: 326,
      name: 'DemoTest4',
      hasLogo: false,
      hasRelationship: true
    },
    {
      id: 329,
      name: 'DemoTest7',
      hasLogo: false,
      hasRelationship: true
    },
    {
      id: 330,
      name: 'DemoTest8',
      hasLogo: false,
      hasRelationship: true
    },
    {
      id: 331,
      name: 'DemoTest9',
      hasLogo: false,
      hasRelationship: true
    },
    { id: 11, name: 'DriftPay', hasLogo: true, hasRelationship: true },
    { id: 17, name: 'Earnin', hasLogo: true, hasRelationship: true },
    { id: 14, name: 'EchoPay', hasLogo: true, hasRelationship: true },
    {
      id: 40,
      name: 'Equibridge',
      hasLogo: true,
      hasRelationship: true
    },
    { id: 9, name: 'Finloft', hasLogo: true, hasRelationship: true },
    { id: 38, name: 'Finsera', hasLogo: true, hasRelationship: true },
    { id: 51, name: 'Fundory', hasLogo: true, hasRelationship: true },
    { id: 47, name: 'Gravix', hasLogo: true, hasRelationship: true },
    { id: 1, name: 'Invela', hasLogo: true, hasRelationship: true },
    {
      id: 167,
      name: 'JimsAutoshop',
      hasLogo: false,
      hasRelationship: true
    },
    { id: 27, name: 'Lumora', hasLogo: true, hasRelationship: true },
    { id: 28, name: 'Modenex', hasLogo: true, hasRelationship: true },
    { id: 43, name: 'Nesture', hasLogo: true, hasRelationship: true },
    { id: 56, name: 'Nimblefi', hasLogo: true, hasRelationship: true },
    { id: 34, name: 'Nodura', hasLogo: true, hasRelationship: true },
    { id: 8, name: 'Novably', hasLogo: true, hasRelationship: true },
    { id: 37, name: 'Omnipay', hasLogo: true, hasRelationship: true },
    { id: 20, name: 'Orbipay', hasLogo: true, hasRelationship: true },
    { id: 41, name: 'Orosync', hasLogo: true, hasRelationship: true },
    { id: 5, name: 'PanAmerica', hasLogo: true, hasRelationship: true },
    { id: 45, name: 'Paydrift', hasLogo: true, hasRelationship: true },
    { id: 25, name: 'Paynest', hasLogo: true, hasRelationship: true },
    { id: 26, name: 'PetalSure', hasLogo: true, hasRelationship: true },
    { id: 13, name: 'Quantia', hasLogo: true, hasRelationship: true },
    { id: 48, name: 'Securent', hasLogo: true, hasRelationship: true },
    {
      id: 166,
      name: 'SkyToken',
      hasLogo: false,
      hasRelationship: true
    },
    {
      id: 165,
      name: 'StevesAuto',
      hasLogo: false,
      hasRelationship: true
    },
    { id: 31, name: 'Syntra', hasLogo: true, hasRelationship: true },
    {
      id: 168,
      name: 'TannersFeedback',
      hasLogo: false,
      hasRelationship: true
    },
    { id: 36, name: 'Tilvio', hasLogo: true, hasRelationship: true },
    { id: 46, name: 'Trustmint', hasLogo: true, hasRelationship: true },
    { id: 16, name: 'Trustwell', hasLogo: true, hasRelationship: true },
    { id: 44, name: 'ValoraPay', hasLogo: true, hasRelationship: true },
    { id: 6, name: 'Vaultara', hasLogo: true, hasRelationship: true },
    { id: 19, name: 'Veriark', hasLogo: true, hasRelationship: true },
    {
      id: 164,
      name: 'Wealthfront',
      hasLogo: false,
      hasRelationship: true
    },
    { id: 29, name: 'Zenflow', hasLogo: true, hasRelationship: true },
    { id: 24, name: 'Zentra', hasLogo: true, hasRelationship: true },
    { id: 50, name: 'Zentry', hasLogo: true, hasRelationship: true },
    { id: 12, name: 'Zyra', hasLogo: true, hasRelationship: true }
  ]
}
[2025-05-22T20:58:13.325Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-22T20:58:13.325Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 1 clients {"module":"WebSocket","messageType":"task_updated","recipients":1,"totalClients":1,"filtered":false}
[2025-05-22T20:58:13.325Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":188,"status":"completed"}
[2025-05-22T20:58:13.325Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":251,"userEmail":"krzysztof.pniak@invela.com","timestamp":"2025-05-22T20:58:13.325Z"}
[Network Visualization] Found network relationships: { count: 67 }
[Network Visualization] Returning visualization data: { centerNode: 'Invela', nodeCount: 67 }
[2025-05-22T20:58:13.345Z] [INFO] [App] GET /api/relationships 304 in 110ms :: [{"id":12,"companyId":1,"relatedCompanyId":33,"relationshipType":"network_mem... 
[2025-05-22T20:58:13.360Z] [INFO] [App] GET /api/companies 304 in 109ms :: [{"id":33,"name":"Affinityx","category":"FinTech","description":"Affinityx is... 
[2025-05-22T20:58:13.366Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-22T20:58:13.366Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 1 clients {"module":"WebSocket","messageType":"task_updated","recipients":1,"totalClients":1,"filtered":false}
[2025-05-22T20:58:13.366Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":251,"status":"completed"}
[2025-05-22T20:58:13.366Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":720,"userEmail":"jim.wadsworth@invela.com","timestamp":"2025-05-22T20:58:13.366Z"}
[2025-05-22T20:58:13.375Z] [INFO] [App] GET /api/network/visualization 304 in 150ms :: {"center":{"id":1,"name":"Invela","riskScore":0,"riskBucket":"none","accredit... 
[2025-05-22T20:58:13.399Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-22T20:58:13.400Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 1 clients {"module":"WebSocket","messageType":"task_updated","recipients":1,"totalClients":1,"filtered":false}
[2025-05-22T20:58:13.400Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":720,"status":"completed"}
[2025-05-22T20:58:13.400Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":124,"userEmail":"amar.karvir@invela.com","timestamp":"2025-05-22T20:58:13.400Z"}
[2025-05-22T20:58:13.429Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-22T20:58:13.430Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 1 clients {"module":"WebSocket","messageType":"task_updated","recipients":1,"totalClients":1,"filtered":false}
[2025-05-22T20:58:13.430Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":124,"status":"completed"}
[2025-05-22T20:58:13.430Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":991,"userEmail":"e@e.com","timestamp":"2025-05-22T20:58:13.430Z"}
[2025-05-22T20:58:13.460Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-22T20:58:13.460Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 1 clients {"module":"WebSocket","messageType":"task_updated","recipients":1,"totalClients":1,"filtered":false}
[2025-05-22T20:58:13.461Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":991,"status":"completed"}
[2025-05-22T20:58:13.461Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":172,"userEmail":"krzysztof.pniak@proopro.com","timestamp":"2025-05-22T20:58:13.461Z"}
[2025-05-22T20:58:13.492Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-22T20:58:13.492Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 1 clients {"module":"WebSocket","messageType":"task_updated","recipients":1,"totalClients":1,"filtered":false}
[2025-05-22T20:58:13.492Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":172,"status":"completed"}
[2025-05-22T20:58:13.492Z] [INFO] [App] [TaskDependencies] Successfully unlocked all tasks {"companyId":1,"count":12}
[Tasks] Successfully unlocked all tasks for company: 1
[2025-05-22T20:58:13.513Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747947493513-wdy1a28","clients":2}
[Tasks] KYB tasks found: { count: 0 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 8',
    condition2: 'tasks.created_by = 8',
    condition3: "tasks.company_id = 1 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('evan.navarro@invela.com')"
  }
}
[Tasks] Tasks found: { count: 44 }
[2025-05-22T20:58:13.594Z] [INFO] [App] GET /api/tasks 200 in 630ms :: [{"id":992,"title":"New User Invitation: 10@e.com","description":"Complete us... 
[2025-05-22T20:58:14.027Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747947494027-bm1an97","clients":3}
[2025-05-22T20:58:14.597Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747947494596-2q56e2a","clients":4}
[2025-05-22T20:58:15.108Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747947495108-iadfbcw","clients":5}
[2025-05-22T20:58:15.234Z] [INFO] [WebSocket] Received message from client client-1747947495108-iadfbcw {"module":"WebSocket","type":"authenticate","userId":null,"companyId":null,"clientId":"ws_1747947492245_mo2v7ruaf","timestamp":"2025-05-22T20:58:15.112Z"}
[2025-05-22T20:58:15.235Z] [INFO] [WebSocket] Authentication from client client-1747947495108-iadfbcw {"module":"WebSocket","userId":null,"companyId":null,"hasToken":true}
[2025-05-22T20:58:15.625Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747947495625-omch8vx","clients":6}
[2025-05-22T20:58:16.178Z] [INFO] [WebSocket] Received message from client client-1747947495625-omch8vx {"module":"WebSocket","type":"authenticate","userId":8,"companyId":1,"clientId":"ws_1747947493517_zwfgvgo4o","timestamp":"2025-05-22T20:58:16.054Z"}
[2025-05-22T20:58:16.178Z] [INFO] [WebSocket] Authentication from client client-1747947495625-omch8vx {"module":"WebSocket","userId":8,"companyId":1,"hasToken":true}
[2025-05-22T20:58:25.187Z] [INFO] [App] GET /api/tasks 304 in 33ms :: [{"id":992,"title":"New User Invitation: 10@e.com","description":"Complete us... 
[2025-05-22T20:58:25.403Z] [INFO] [App] GET /api/tasks 304 in 34ms :: [{"id":992,"title":"New User Invitation: 10@e.com","description":"Complete us... 
[Company Logo] Fetching logo for company ID: 33
[2025-05-22T20:58:25.749Z] [INFO] [App] [TabTutorials] Status request for tab "network" from authenticated user ID: 8 
[2025-05-22T20:58:25.749Z] [INFO] [App] [TabTutorials] Normalizing tab name from 'network' to canonical form 
[2025-05-22T20:58:25.749Z] [INFO] [App] [TabTutorials] Tab name already in canonical form: 'network' 
[2025-05-22T20:58:25.749Z] [INFO] [App] [TabTutorials] Checking tutorial status for tab: network (raw: network), user: 8 
[Company Logo] Fetching logo for company ID: 30
[Company Logo] Fetching logo for company ID: 18
[Company Logo] Fetching logo for company ID: 35
[Company Logo] Fetching logo for company ID: 55
[2025-05-22T20:58:25.871Z] [INFO] [App] [TabTutorials] Retrieved tutorial status for network for user 8: completed=true, step=2 
[Company Logo] Found logo record: {
  id: '0b1c7be9-8b7a-4d9b-89fa-36522bd4394f',
  company_id: 33,
  file_name: 'logo_paypal-paypal.svg',
  file_path: 'logo_paypal-paypal.svg',
  file_type: 'image/svg+xml',
  uploaded_at: 2025-02-09T04:46:37.203Z
}
[Company Logo] Attempting to serve logo from: /home/runner/workspace/uploads/logos/logo_paypal-paypal.svg
Logo file missing for company Affinityx (33): /home/runner/workspace/uploads/logos/logo_paypal-paypal.svg
[Company Logo] Found logo record: {
  id: 'c6e565fa-6526-4dac-a511-ddaa0cc8da20',
  company_id: 30,
  file_name: 'logo_nubank-nubank.svg',
  file_path: 'logo_nubank-nubank.svg',
  file_type: 'image/svg+xml',
  uploaded_at: 2025-02-09T04:42:29.824Z
}
[Company Logo] Attempting to serve logo from: /home/runner/workspace/uploads/logos/logo_nubank-nubank.svg
Logo file missing for company Bankure (30): /home/runner/workspace/uploads/logos/logo_nubank-nubank.svg
[Company Logo] Found logo record: {
  id: '55920c02-8404-4dff-9c1f-792ea7bf395d',
  company_id: 18,
  file_name: 'logo_foundry-group-foundry.svg',
  file_path: 'logo_foundry-group-foundry.svg',
  file_type: 'image/svg+xml',
  uploaded_at: 2025-02-09T03:33:03.261Z
}
[Company Logo] Attempting to serve logo from: /home/runner/workspace/uploads/logos/logo_foundry-group-foundry.svg
Logo file missing for company Axono (18): /home/runner/workspace/uploads/logos/logo_foundry-group-foundry.svg
[Company Logo] Found logo record: {
  id: '0e261bf2-8b92-419d-bb9c-9a384a6069ea',
  company_id: 35,
  file_name: 'logo_revolut-revolut.svg',
  file_path: 'logo_revolut-revolut.svg',
  file_type: 'image/svg+xml',
  uploaded_at: 2025-02-09T04:51:26.099Z
}
[Company Logo] Attempting to serve logo from: /home/runner/workspace/uploads/logos/logo_revolut-revolut.svg
Logo file missing for company AscendIQ (35): /home/runner/workspace/uploads/logos/logo_revolut-revolut.svg
[Company Logo] Found logo record: {
  id: '677b4096-5974-4d03-835c-701eb2f2940c',
  company_id: 55,
  file_name: 'logo_afterpay-afterpay.svg',
  file_path: 'logo_afterpay-afterpay.svg',
  file_type: 'svg',
  uploaded_at: 2025-02-09T01:28:54.847Z
}
[Company Logo] Attempting to serve logo from: /home/runner/workspace/uploads/logos/logo_afterpay-afterpay.svg
Logo file missing for company Alphapoint (55): /home/runner/workspace/uploads/logos/logo_afterpay-afterpay.svg
[2025-05-22T20:58:25.938Z] [WARN] [App] GET /api/companies/33/logo 404 in 195ms :: {"message":"Logo file not found on disk","code":"LOGO_FILE_MISSING"} 
[2025-05-22T20:58:25.963Z] [WARN] [App] GET /api/companies/30/logo 404 in 201ms :: {"message":"Logo file not found on disk","code":"LOGO_FILE_MISSING"} 
[2025-05-22T20:58:25.968Z] [WARN] [App] GET /api/companies/18/logo 404 in 197ms :: {"message":"Logo file not found on disk","code":"LOGO_FILE_MISSING"} 
[2025-05-22T20:58:25.996Z] [WARN] [App] GET /api/companies/55/logo 404 in 203ms :: {"message":"Logo file not found on disk","code":"LOGO_FILE_MISSING"} 
[2025-05-22T20:58:25.997Z] [WARN] [App] GET /api/companies/35/logo 404 in 218ms :: {"message":"Logo file not found on disk","code":"LOGO_FILE_MISSING"} 
[2025-05-22T20:58:26.011Z] [INFO] [App] GET /api/user-tab-tutorials/network/status 200 in 263ms :: {"exists":true,"completed":true,"currentStep":2,"lastSeenAt":"2025-05-22T14:3... 
[2025-05-22T20:58:26.232Z] [INFO] [App] [TabTutorials] Status request for tab "file-vault" from authenticated user ID: 8 
[2025-05-22T20:58:26.232Z] [INFO] [App] [TabTutorials] Normalizing tab name from 'file-vault' to canonical form 
[2025-05-22T20:58:26.232Z] [INFO] [App] [TabTutorials] Tab name already in canonical form: 'file-vault' 
[2025-05-22T20:58:26.232Z] [INFO] [App] [TabTutorials] Checking tutorial status for tab: file-vault (raw: file-vault), user: 8 
[2025-05-22T20:58:26.293Z] [INFO] [App] GET /api/auth/user 200 in 58ms 
[2025-05-22T20:58:26.298Z] [INFO] [App] [TabTutorials] Retrieved tutorial status for file-vault for user 8: completed=true, step=1 
[2025-05-22T20:58:26.329Z] [INFO] [App] GET /api/user-tab-tutorials/file-vault/status 200 in 97ms :: {"exists":true,"completed":true,"currentStep":1,"lastSeenAt":"2025-05-22T14:3... 
[2025-05-22T20:58:27.501Z] [INFO] [App] GET /api/tasks 304 in 31ms :: [{"id":992,"title":"New User Invitation: 10@e.com","description":"Complete us... 
[2025-05-22T20:58:28.181Z] [INFO] [App] GET /api/tasks 304 in 31ms :: [{"id":992,"title":"New User Invitation: 10@e.com","description":"Complete us... 
[2025-05-22T20:58:28.188Z] [INFO] [App] GET /api/companies/current 304 in 35ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"me... [sampled: request 11] 
[2025-05-22T20:58:29.063Z] [INFO] [App] GET /api/tasks 304 in 37ms :: [{"id":992,"title":"New User Invitation: 10@e.com","description":"Complete us... 
[2025-05-22T20:58:29.976Z] [INFO] [PeriodicTaskReconciliation] Reconciling batch of tasks {"module":"PeriodicTaskReconciliation","batchSize":10,"taskIds":[963,964,965,967,968,973,972,969,971,981]}
[Task Progress] Calculated progress for task 963 (company_kyb): 0/30 = 0%
[Task Progress] Calculated progress for task 964 (ky3p): 0/0 = 0%
[Task Progress] Calculated progress for task 965 (open_banking): 0/44 = 0%
[2025-05-22T20:58:30.420Z] [INFO] [App] [TabTutorials] Status request for tab "claims" from authenticated user ID: 8 
[2025-05-22T20:58:30.420Z] [INFO] [App] [TabTutorials] Normalizing tab name from 'claims' to canonical form 
[2025-05-22T20:58:30.420Z] [INFO] [App] [TabTutorials] Tab name already in canonical form: 'claims' 
[2025-05-22T20:58:30.420Z] [INFO] [App] [TabTutorials] Checking tutorial status for tab: claims (raw: claims), user: 8 
[Task Progress] Calculated progress for task 967 (company_kyb): 0/30 = 0%
[2025-05-22T20:58:30.480Z] [INFO] [App] GET /api/claims/active 304 in 33ms :: [{"id":1,"claim_id":"CLM-2025-001","bank_id":"BNK-12009","bank_name":"First N... 
[2025-05-22T20:58:30.508Z] [INFO] [App] [TabTutorials] Retrieved tutorial status for claims for user 8: completed=true, step=1 
[2025-05-22T20:58:30.538Z] [INFO] [App] GET /api/user-tab-tutorials/claims/status 200 in 119ms :: {"exists":true,"completed":true,"currentStep":1,"lastSeenAt":"2025-05-22T15:3... 
[Task Progress] Calculated progress for task 968 (ky3p): 0/0 = 0%
[Task Progress] Calculated progress for task 973 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 972 (ky3p): 0/0 = 0%
[Task Progress] Calculated progress for task 969 (open_banking): 0/44 = 0%
[2025-05-22T20:58:31.015Z] [INFO] [App] [TabTutorials] Status request for tab "insights" from authenticated user ID: 8 
[2025-05-22T20:58:31.015Z] [INFO] [App] [TabTutorials] Normalizing tab name from 'insights' to canonical form 
[2025-05-22T20:58:31.015Z] [INFO] [App] [TabTutorials] Tab name already in canonical form: 'insights' 
[2025-05-22T20:58:31.016Z] [INFO] [App] [TabTutorials] Checking tutorial status for tab: insights (raw: insights), user: 8 
[2025-05-22T20:58:31.080Z] [INFO] [App] [TabTutorials] Retrieved tutorial status for insights for user 8: completed=true, step=2 
[Task Progress] Calculated progress for task 971 (company_kyb): 30/30 = 100%
[2025-05-22T20:58:31.114Z] [INFO] [App] GET /api/user-tab-tutorials/insights/status 200 in 99ms :: {"exists":true,"completed":true,"currentStep":2,"lastSeenAt":"2025-05-22T15:3... 
[Task Progress] Calculated progress for task 981 (ky3p): 0/0 = 0%
[2025-05-22T20:58:31.469Z] [INFO] [App] [TabTutorials] Status request for tab "risk-score-configuration" from authenticated user ID: 8 
[2025-05-22T20:58:31.469Z] [INFO] [App] [TabTutorials] Normalizing tab name from 'risk-score-configuration' to canonical form 
[2025-05-22T20:58:31.469Z] [INFO] [App] [TabTutorials] Tab name already in canonical form: 'risk-score-configuration' 
[2025-05-22T20:58:31.469Z] [INFO] [App] [TabTutorials] Checking tutorial status for tab: risk-score-configuration (raw: risk-score-configuration), user: 8 
[OptionalAuth] Request to /priorities: authenticated=true, hasUser=true
[OptionalAuth] Request to /priorities: authenticated=true, hasUser=true
[RiskPriorities] GET request received
[RiskPriorities] Using company ID: 1 (authenticated)
[OptionalAuth] Request to /configuration: authenticated=true, hasUser=true
[OptionalAuth] Request to /configuration: authenticated=true, hasUser=true
[RiskConfiguration] Using company ID: 1 (authenticated)
[RiskPriorities] Retrieved company from DB: found
[RiskPriorities] risk_priorities in DB: present (object)
[RiskPriorities] Retrieved dimensions from DB type: Array
[RiskPriorities] First dimension in DB: {"id":"cyber_security","name":"Cyber Security","color":"#2196f3","value":50,"weight":30,"description":"Protection against digital threats and vulnerabilities"}
[RiskPriorities] Returning priorities from DB
[2025-05-22T20:58:31.557Z] [INFO] [App] [TabTutorials] Retrieved tutorial status for risk-score-configuration for user 8: completed=true, step=2 
[2025-05-22T20:58:31.560Z] [INFO] [App] GET /api/risk-score/priorities 304 in 86ms :: {"dimensions":[{"id":"cyber_security","name":"Cyber Security","color":"#2196f... 
[2025-05-22T20:58:31.567Z] [INFO] [App] GET /api/risk-score/configuration 304 in 75ms :: {"score":86,"riskLevel":"critical","dimensions":[{"id":"cyber_security","name... 
[2025-05-22T20:58:31.588Z] [INFO] [App] GET /api/user-tab-tutorials/risk-score-configuration/status 200 in 120ms :: {"exists":true,"completed":true,"currentStep":2,"lastSeenAt":"2025-05-22T15:3... 
[OptionalAuth] Request to /priorities: authenticated=true, hasUser=true
[OptionalAuth] Request to /priorities: authenticated=true, hasUser=true
[RiskPriorities] GET request received
[RiskPriorities] Using company ID: 1 (authenticated)
[RiskPriorities] Retrieved company from DB: found
[RiskPriorities] risk_priorities in DB: present (object)
[RiskPriorities] Retrieved dimensions from DB type: Array
[RiskPriorities] First dimension in DB: {"id":"cyber_security","name":"Cyber Security","color":"#2196f3","value":50,"weight":30,"description":"Protection against digital threats and vulnerabilities"}
[RiskPriorities] Returning priorities from DB
[2025-05-22T20:58:31.806Z] [INFO] [App] GET /api/risk-score/priorities 304 in 59ms :: {"dimensions":[{"id":"cyber_security","name":"Cyber Security","color":"#2196f... 
[2025-05-22T20:58:32.812Z] [INFO] [App] GET /api/tasks 304 in 34ms :: [{"id":992,"title":"New User Invitation: 10@e.com","description":"Complete us... 
[2025-05-22T20:58:33.197Z] [INFO] [App] GET /api/companies/current 304 in 33ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"me... [sampled: request 21] 
[OptionalAuth] Request to /configuration: authenticated=true, hasUser=true
[OptionalAuth] Request to /configuration: authenticated=true, hasUser=true
[RiskConfiguration] Using company ID: 1 (authenticated)
[OptionalAuth] Request to /priorities: authenticated=true, hasUser=true
[OptionalAuth] Request to /priorities: authenticated=true, hasUser=true
[RiskPriorities] GET request received
[RiskPriorities] Using company ID: 1 (authenticated)
[RiskPriorities] Retrieved company from DB: found
[RiskPriorities] risk_priorities in DB: present (object)
[RiskPriorities] Retrieved dimensions from DB type: Array
[RiskPriorities] First dimension in DB: {"id":"cyber_security","name":"Cyber Security","color":"#2196f3","value":50,"weight":30,"description":"Protection against digital threats and vulnerabilities"}
[RiskPriorities] Returning priorities from DB
[2025-05-22T20:58:35.551Z] [INFO] [App] GET /api/risk-score/configuration 304 in 60ms :: {"score":86,"riskLevel":"critical","dimensions":[{"id":"cyber_security","name... 
[2025-05-22T20:58:35.568Z] [INFO] [App] GET /api/risk-score/priorities 304 in 63ms :: {"dimensions":[{"id":"cyber_security","name":"Cyber Security","color":"#2196f... 
[2025-05-22T20:58:35.750Z] [INFO] [WebSocket] Received message from client client-1747947495625-omch8vx {"module":"WebSocket","type":"ping","timestamp":"2025-05-22T20:58:35.624Z","connectionId":"ws_1747947493517_zwfgvgo4o"}
[OptionalAuth] Request to /priorities: authenticated=true, hasUser=true
[OptionalAuth] Request to /priorities: authenticated=true, hasUser=true
[RiskPriorities] GET request received
[RiskPriorities] Using company ID: 1 (authenticated)
[RiskPriorities] Retrieved company from DB: found
[RiskPriorities] risk_priorities in DB: present (object)
[RiskPriorities] Retrieved dimensions from DB type: Array
[RiskPriorities] First dimension in DB: {"id":"cyber_security","name":"Cyber Security","color":"#2196f3","value":50,"weight":30,"description":"Protection against digital threats and vulnerabilities"}
[RiskPriorities] Returning priorities from DB
[2025-05-22T20:58:35.848Z] [INFO] [App] GET /api/risk-score/priorities 304 in 75ms :: {"dimensions":[{"id":"cyber_security","name":"Cyber Security","color":"#2196f... 
[2025-05-22T20:58:43.103Z] [INFO] [WebSocket] Received message from client client-1747947492985-92kz2ch {"module":"WebSocket","type":"ping"}
[2025-05-22T20:58:44.156Z] [INFO] [WebSocket] Received message from client client-1747947494027-bm1an97 {"module":"WebSocket","type":"ping","timestamp":"2025-05-22T20:58:44.031Z","connectionId":"ws_1747947494029_pv255cidg"}
[2025-05-22T20:58:44.716Z] [INFO] [WebSocket] Received message from client client-1747947494596-2q56e2a {"module":"WebSocket","type":"ping","timestamp":"2025-05-22T20:58:44.595Z","connectionId":"ws_1747947493514_qucbk3lsk"}
[2025-05-22T20:58:47.132Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"me... [sampled: request 31] 
[2025-05-22T20:58:55.749Z] [INFO] [WebSocket] Received message from client client-1747947495625-omch8vx {"module":"WebSocket","type":"ping","timestamp":"2025-05-22T20:58:55.625Z","connectionId":"ws_1747947493517_zwfgvgo4o"}