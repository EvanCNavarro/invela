[2025-05-27T08:53:33.416Z] [INFO] [WebSocket] Received message from client client-1748333613251-22hwzj5 {"module":"WebSocket","type":"ping","timestamp":"2025-05-27T08:53:33.270Z","connectionId":"ws_1748333612203_rpbx5ize9"}
[2025-05-27T08:53:33.973Z] [INFO] [WebSocket] Received message from client client-1748333613823-1h4axp5 {"module":"WebSocket","type":"ping","timestamp":"2025-05-27T08:53:33.839Z","connectionId":"ws_1748333612247_dwsx8816d"}
[2025-05-27T08:53:53.993Z] [INFO] [WebSocket] Received message from client client-1748333613823-1h4axp5 {"module":"WebSocket","type":"ping","timestamp":"2025-05-27T08:53:53.838Z","connectionId":"ws_1748333612247_dwsx8816d"}
[2025-05-27T08:54:01.882Z] [INFO] [WebSocket] Received message from client client-1748333611713-snzycan {"module":"WebSocket","type":"ping"}
[2025-05-27T08:54:02.909Z] [INFO] [WebSocket] Received message from client client-1748333612737-glzt1k6 {"module":"WebSocket","type":"ping","timestamp":"2025-05-27T08:54:02.756Z","connectionId":"ws_1748333612750_tig7pfaii"}
[2025-05-27T08:54:03.422Z] [INFO] [WebSocket] Received message from client client-1748333613251-22hwzj5 {"module":"WebSocket","type":"ping","timestamp":"2025-05-27T08:54:03.269Z","connectionId":"ws_1748333612203_rpbx5ize9"}
[2025-05-27T08:54:13.976Z] [INFO] [WebSocket] Received message from client client-1748333613823-1h4axp5 {"module":"WebSocket","type":"ping","timestamp":"2025-05-27T08:54:13.839Z","connectionId":"ws_1748333612247_dwsx8816d"}
[2025-05-27T08:54:31.841Z] [INFO] [WebSocket] Received message from client client-1748333611713-snzycan {"module":"WebSocket","type":"ping"}
[2025-05-27T08:54:32.893Z] [INFO] [WebSocket] Received message from client client-1748333612737-glzt1k6 {"module":"WebSocket","type":"ping","timestamp":"2025-05-27T08:54:32.756Z","connectionId":"ws_1748333612750_tig7pfaii"}
[2025-05-27T08:54:33.425Z] [INFO] [WebSocket] Received message from client client-1748333613251-22hwzj5 {"module":"WebSocket","type":"ping","timestamp":"2025-05-27T08:54:33.270Z","connectionId":"ws_1748333612203_rpbx5ize9"}
[2025-05-27T08:54:33.995Z] [INFO] [WebSocket] Received message from client client-1748333613823-1h4axp5 {"module":"WebSocket","type":"ping","timestamp":"2025-05-27T08:54:33.838Z","connectionId":"ws_1748333612247_dwsx8816d"}
[2025-05-27T08:54:53.979Z] [INFO] [WebSocket] Received message from client client-1748333613823-1h4axp5 {"module":"WebSocket","type":"ping","timestamp":"2025-05-27T08:54:53.838Z","connectionId":"ws_1748333612247_dwsx8816d"}
[2025-05-27T08:55:01.845Z] [INFO] [WebSocket] Received message from client client-1748333611713-snzycan {"module":"WebSocket","type":"ping"}
[2025-05-27T08:55:02.895Z] [INFO] [WebSocket] Received message from client client-1748333612737-glzt1k6 {"module":"WebSocket","type":"ping","timestamp":"2025-05-27T08:55:02.756Z","connectionId":"ws_1748333612750_tig7pfaii"}
[2025-05-27T08:55:03.989Z] [INFO] [WebSocket] Received message from client client-1748333613251-22hwzj5 {"module":"WebSocket","type":"ping","timestamp":"2025-05-27T08:55:03.816Z","connectionId":"ws_1748333612203_rpbx5ize9"}
[2025-05-27T08:55:14.956Z] [INFO] [WebSocket] Received message from client client-1748333613823-1h4axp5 {"module":"WebSocket","type":"ping","timestamp":"2025-05-27T08:55:14.817Z","connectionId":"ws_1748333612247_dwsx8816d"}
[2025-05-27T08:55:31.846Z] [INFO] [WebSocket] Received message from client client-1748333611713-snzycan {"module":"WebSocket","type":"ping"}
[2025-05-27T08:55:32.906Z] [INFO] [WebSocket] Received message from client client-1748333612737-glzt1k6 {"module":"WebSocket","type":"ping","timestamp":"2025-05-27T08:55:32.756Z","connectionId":"ws_1748333612750_tig7pfaii"}
[2025-05-27T08:55:33.409Z] [INFO] [WebSocket] Received message from client client-1748333613251-22hwzj5 {"module":"WebSocket","type":"ping","timestamp":"2025-05-27T08:55:33.270Z","connectionId":"ws_1748333612203_rpbx5ize9"}
[2025-05-27T08:55:33.410Z] [INFO] [WebSocket] Received message from client client-1748333733283-e116hcy {"module":"WebSocket","type":"ping"}
[2025-05-27T08:55:33.972Z] [INFO] [WebSocket] Received message from client client-1748333613823-1h4axp5 {"module":"WebSocket","type":"ping","timestamp":"2025-05-27T08:55:33.838Z","connectionId":"ws_1748333612247_dwsx8816d"}
[2025-05-27T08:55:37.563Z] [ERROR] [Database] Database client connection error {"module":"Database","message":"terminating connection due to administrator command","code":"57P01","timestamp":"2025-05-27T08:55:37.563Z"}
[2025-05-27T08:55:37.589Z] [ERROR] [Database] Database pool encountered an error {"module":"Database","message":"terminating connection due to administrator command","code":"57P01","stack":"error: terminating connection due to administrator command\n    at Parser.parseErrorMessage (/home/runner/workspace/node_modules/pg-protocol/src/parser.ts:369:69)\n    at Parser.handlePacket (/home/runner/workspace/node_modules/pg-protocol/src/parser.ts:187:21)\n    at Parser.parse (/home/runner/workspace/node_modules/pg-protocol/src/parser.ts:102:30)\n    at TLSSocket.<anonymous> (/home/runner/workspace/node_modules/pg-protocol/src/index.ts:7:48)\n    at TLSSocket.emit (node:events:518:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Readable.push (node:internal/streams/readable:392:5)\n    at TLSWrap.onStreamRead (node:internal/stream_base_commons:191:23)","timestamp":"2025-05-27T08:55:37.589Z"}
[2025-05-27T08:55:37.625Z] [ERROR] [Database] Database client connection error {"module":"Database","message":"terminating connection due to administrator command","code":"57P01","timestamp":"2025-05-27T08:55:37.625Z"}
[2025-05-27T08:55:37.626Z] [ERROR] [Database] Database pool encountered an error {"module":"Database","message":"terminating connection due to administrator command","code":"57P01","stack":"error: terminating connection due to administrator command\n    at Parser.parseErrorMessage (/home/runner/workspace/node_modules/pg-protocol/src/parser.ts:369:69)\n    at Parser.handlePacket (/home/runner/workspace/node_modules/pg-protocol/src/parser.ts:187:21)\n    at Parser.parse (/home/runner/workspace/node_modules/pg-protocol/src/parser.ts:102:30)\n    at TLSSocket.<anonymous> (/home/runner/workspace/node_modules/pg-protocol/src/index.ts:7:48)\n    at TLSSocket.emit (node:events:518:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Readable.push (node:internal/streams/readable:392:5)\n    at TLSWrap.onStreamRead (node:internal/stream_base_commons:191:23)","timestamp":"2025-05-27T08:55:37.626Z"}
[2025-05-27T08:55:37.626Z] [ERROR] [Database] Database client connection error {"module":"Database","message":"terminating connection due to administrator command","code":"57P01","timestamp":"2025-05-27T08:55:37.626Z"}
[2025-05-27T08:55:37.626Z] [ERROR] [Database] Database pool encountered an error {"module":"Database","message":"terminating connection due to administrator command","code":"57P01","stack":"error: terminating connection due to administrator command\n    at Parser.parseErrorMessage (/home/runner/workspace/node_modules/pg-protocol/src/parser.ts:369:69)\n    at Parser.handlePacket (/home/runner/workspace/node_modules/pg-protocol/src/parser.ts:187:21)\n    at Parser.parse (/home/runner/workspace/node_modules/pg-protocol/src/parser.ts:102:30)\n    at TLSSocket.<anonymous> (/home/runner/workspace/node_modules/pg-protocol/src/index.ts:7:48)\n    at TLSSocket.emit (node:events:518:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Readable.push (node:internal/streams/readable:392:5)\n    at TLSWrap.onStreamRead (node:internal/stream_base_commons:191:23)","timestamp":"2025-05-27T08:55:37.626Z"}
[2025-05-27T08:55:47.194Z] [INFO] [Database] Successfully established new database connection {"module":"Database"}
[DemoAPI] Company creation request received at: 2025-05-27T08:55:48.784Z
[DemoAPI] Request method: POST
[DemoAPI] Request headers: {
  'content-type': 'application/json',
  'content-length': '100',
  'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) Ap...',
  origin: 'https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev:8080'
}
[DemoAPI] Full request body received: {
  "name": "InnoData Technologies",
  "type": "demo",
  "persona": "new-data-recipient",
  "companySize": "medium"
}
[DemoAPI] Creating demo session for tracking...
[DemoSessionService] Creating new demo session: {
  sessionId: 'demo_736a7928-9453-46e1-86da-8d780462b409',
  personaType: 'new-data-recipient',
  expiresAt: '2025-05-30T08:55:49.888Z',
  userAgent: 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.',
  ipAddress: '10.81.8.17'
}
[DemoSessionService] ✅ Demo session created successfully: demo_736a7928-9453-46e1-86da-8d780462b409
[DemoAPI] ✅ Demo session created: demo_736a7928-9453-46e1-86da-8d780462b409
[DemoAPI] Validating input parameters...
[DemoAPI] Input validation passed successfully
[DemoAPI] Extracted and validated fields: {
  name: 'InnoData Technologies',
  type: 'demo',
  persona: 'new-data-recipient',
  companySize: 'medium',
  riskProfile: undefined
}
[WebSocket] Broadcast demo_action_start to 6 clients (0 errors) { messageId: 'msg_1748336151157_j25kn7dj1' }
[2025-05-27T08:55:51.252Z] [INFO] [App] Successfully broadcasted demo_action_start message 
[DemoAPI] Generating company data for: { persona: 'new-data-recipient', companySize: 'medium' }
[DemoAPI] IMPLEMENTING DIRECT FIX for size: medium
[DemoAPI] Configuring persona: new-data-recipient
[DemoAPI] Configured non-accredited FinTech with basic access
[DemoAPI] Processing company size: medium
[DemoAPI] Generated medium company: $52M revenue, 252 employees
[DemoAPI] Generated company data: {
  category: 'FinTech',
  accreditation_status: 'PENDING',
  is_demo: true,
  available_tabs: [ 'task-center' ],
  revenue: '$18M',
  num_employees: 209,
  revenue_tier: 'medium'
}
[DemoAPI] ⏳ Skipping risk data for PENDING persona new-data-recipient - awaiting accreditation
[DemoAPI] Generating comprehensive business details...
[DemoAPI] Business Details - Persona: new-data-recipient, Mapped Type: fintech
[DemoAPI] Generated business details: {
  website: 'https://www.securepay.com',
  hasAddress: true,
  hasLeadership: true,
  hasClients: true,
  hasInvestors: true,
  hasCertifications: true
}
[DemoAPI] Assembled complete company data for insertion
[DemoAPI] Business details verification: {
  websiteIncluded: true,
  addressIncluded: true,
  productsIncluded: true,
  leadershipIncluded: true,
  clientsIncluded: true,
  investorsIncluded: true,
  certificationsIncluded: true,
  riskClustersIncluded: false
}
[DemoAPI] Final insert values: {
  "name": "InnoData Technologies",
  "description": "Professional fintech company specializing in secure data management and compliance",
  "category": "FinTech",
  "accreditation_status": "PENDING",
  "is_demo": true,
  "available_tabs": [
    "task-center"
  ],
  "revenue": "$18M",
  "num_employees": 209,
  "revenue_tier": "medium",
  "risk_score": null,
  "risk_clusters": null,
  "onboarding_company_completed": false,
  "demo_persona_type": "new-data-recipient",
  "demo_session_id": "demo_736a7928-9453-46e1-86da-8d780462b409",
  "demo_created_at": "2025-05-27T08:55:51.360Z",
  "demo_expires_at": "2025-05-30T08:55:51.360Z",
  "demo_cleanup_eligible": true,
  "website_url": "https://www.securepay.com",
  "hq_address": "71 South Wacker Drive, Suite 4400, Chicago, IL 60606",
  "products_services": "API-driven financial services, secure data analytics, automated compliance workflows",
  "founders_and_leadership": "Amanda Foster (CEO, Former Morgan Stanley MD), James Liu (CTO, Ex-Amazon Senior Director), Maria Gonzalez (CFO, Former Wells Fargo VP)",
  "key_clients_partners": "JPMorgan Chase, Wells Fargo, American Express, Mastercard, Visa",
  "investors": "QED Investors, Nyca Partners, FinTech Collective, Commerce Ventures",
  "certifications_compliance": "HIPAA Compliant, SOC 1 Type II, ISO 22301, COBIT 5, COSO Framework",
  "legal_structure": "Corporation",
  "market_position": "Established Player",
  "incorporation_year": 2007,
  "funding_stage": "Series C"
}
[DemoAPI] Company creation strategy: {
  persona: 'new-data-recipient',
  shouldCreateTasks: true,
  strategy: 'Use task-enabled service (like FinTech invites)'
}
[DemoAPI] Attempting company creation with name: "InnoData Technologies" (attempt 1)
[DemoAPI] 🎯 Creating New Data Recipient company with standard tasks (KYB, KY3P, Open Banking)
[Company Service] Creating new company: InnoData Technologies {
  hasExistingTransaction: false,
  timestamp: '2025-05-27T08:55:54.840Z'
}
[Company Service] Creating new transaction for company creation
[2025-05-27T08:55:55.734Z] [INFO] [WebSocket] Received message from client client-1748333613823-1h4axp5 {"module":"WebSocket","type":"ping","timestamp":"2025-05-27T08:55:53.838Z","connectionId":"ws_1748333612247_dwsx8816d"}
[Company Service] Creating new company record in database
[Company Service] Created company record: { id: 423, name: 'InnoData Technologies', duration: 1085 }
[Company Service] Metadata received: {
  created_via: 'demo_new_data_recipient',
  created_by_id: 410,
  persona: 'new-data-recipient',
  demo_creation: true,
  task_assignment_enabled: true
}
[Company Service] Creator ID from metadata: 410
[Company Service] Creating tasks with creator ID: 410
[Company Service] Creating KYB task for company: 423
[Company Service] Created KYB task: { taskId: 1048, companyId: 423, duration: 1142 }
[Company Service] Creating S&P KY3P Security Assessment task for company: 423
[Company Service] Created S&P KY3P Security Assessment task: { taskId: 1049, companyId: 423, duration: 1171 }
[Company Service] Creating Open Banking Survey task for company: 423
[Company Service] Created Open Banking Survey task: { taskId: 1050, companyId: 423, duration: 1201 }
[Company Service] Creating relationship with Invela for company: 423
[Company Service] Created relationship with Invela: { relationshipId: 443, newCompanyId: 423, duration: 1260 }
[2025-05-27T08:55:56.117Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":1048,"status":"not_started"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1748336156117_alu5fiacl' }
[2025-05-27T08:55:56.118Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-27T08:55:56.118Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":1049,"status":"not_started"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1748336156118_g6b0xxvyg' }
[2025-05-27T08:55:56.118Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-27T08:55:56.119Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":1050,"status":"not_started"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1748336156119_sqmnqkg6s' }
[2025-05-27T08:55:56.119Z] [INFO] [App] Successfully broadcasted task_update message 
[Company Service] Checking if this is a demo company for file vault population
[2025-05-27T08:55:56.120Z] [INFO] [App] [Demo Hooks] Processing new company: InnoData Technologies (ID: 423) 
[2025-05-27T08:55:56.120Z] [INFO] [App] [Demo Hooks] Applying demo enhancements for company 423 (InnoData Technologies) 
[2025-05-27T08:55:56.120Z] [INFO] [App] [Demo Hooks] Populating file vault for company 423 (InnoData Technologies) 
[DemoAPI] ✅ New Data Recipient company created with tasks: {
  companyId: 423,
  companyName: 'InnoData Technologies',
  kybTaskId: 1048,
  ky3pTaskId: 1049,
  openBankingTaskId: 1050,
  tasksCreated: true
}
[DemoAPI] ✅ Company creation completed: "InnoData Technologies" with ID 423
[DemoAPI] 📊 Company creation summary: {
  companyId: 423,
  companyName: 'InnoData Technologies',
  persona: 'new-data-recipient',
  tasksCreated: true,
  taskTypes: [ 'KYB', 'KY3P', 'Open Banking' ],
  accreditationStatus: 'PENDING',
  availableTabs: [ 'task-center' ],
  isDemo: true,
  creationMethod: 'createCompanyWithTasks service',
  timestamp: '2025-05-27T08:55:56.423Z'
}
[WebSocket] Broadcast demo_action_complete to 6 clients (0 errors) { messageId: 'msg_1748336156423_gj6uyr45z' }
[2025-05-27T08:55:56.423Z] [INFO] [App] Successfully broadcasted demo_action_complete message 
[2025-05-27T08:55:56.474Z] [INFO] [App] POST /api/demo/company/create 200 in 7956ms :: {"success":true,"companyId":423,"companyData":{"name":"InnoData Technologies"... 
[2025-05-27T08:55:57.005Z] [INFO] [Database] Successfully established new database connection {"module":"Database"}
[2025-05-27T08:55:57.059Z] [INFO] [App] [Demo File Vault] Reading file content from /home/runner/workspace/attached_assets/1_SOC_2_Questions.csv 
[2025-05-27T08:55:57.101Z] [ERROR] [App] [Demo File Vault] Error reading file ../../attached_assets/1_SOC_2_Questions.csv: {"error":"File not found: /home/runner/workspace/attached_assets/1_SOC_2_Questions.csv","stack":"Error: File not found: /home/runner/workspace/attached_assets/1_SOC_2_Questions.csv\n    at readFileContent (file:///home/runner/workspace/server/hooks/demo-company-hooks.js:98:13)\n    at addDemoFileToVault (file:///home/runner/workspace/server/hooks/demo-company-hooks.js:209:31)\n    at populateFileVault (file:///home/runner/workspace/server/hooks/demo-company-hooks.js:333:28)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async processNewCompany (file:///home/runner/workspace/server/hooks/demo-company-hooks.js:281:29)\n    at async Timeout._onTimeout (/home/runner/workspace/server/services/company.ts:322:30)","resolvedPath":"/home/runner/workspace/attached_assets/1_SOC_2_Questions.csv","currentDir":"/home/runner/workspace","exists":false}
[2025-05-27T08:55:57.101Z] [ERROR] [App] [Demo File Vault] Error adding demo file to vault: {"companyId":423,"filePath":"../../attached_assets/1_SOC_2_Questions.csv","error":"File not found: /home/runner/workspace/attached_assets/1_SOC_2_Questions.csv"}
[2025-05-27T08:55:57.101Z] [ERROR] [App] [Demo Hooks] Error populating file vault: {"companyId":423,"error":"File not found: /home/runner/workspace/attached_assets/1_SOC_2_Questions.csv","stack":"Error: File not found: /home/runner/workspace/attached_assets/1_SOC_2_Questions.csv\n    at readFileContent (file:///home/runner/workspace/server/hooks/demo-company-hooks.js:98:13)\n    at addDemoFileToVault (file:///home/runner/workspace/server/hooks/demo-company-hooks.js:209:31)\n    at populateFileVault (file:///home/runner/workspace/server/hooks/demo-company-hooks.js:333:28)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async processNewCompany (file:///home/runner/workspace/server/hooks/demo-company-hooks.js:281:29)\n    at async Timeout._onTimeout (/home/runner/workspace/server/services/company.ts:322:30)"}
[Company Service] Demo company processing result: { companyId: 423, success: true, fileCount: 0 }
[DemoAPI] Creating user: {
  fullName: 'Alex Carter',
  email: 'acarter@innodatatechnologies.com',
  role: 'New Data Recipient',
  companyId: 423
}
[DemoAPI] Parsed company ID: 423
[DemoAPI] [UserCreate] Setting onboarding status based on role: {
  userRole: 'New Data Recipient',
  onboardingUserCompleted: true,
  expectedBehavior: 'Skip onboarding modal',
  timestamp: '2025-05-27T08:55:57.626Z'
}
[DemoAPI] [UserCreate] User created successfully with persona-based onboarding status: {
  userId: 456,
  userEmail: 'acarter@innodatatechnologies.com',
  companyId: 423,
  userRole: 'New Data Recipient',
  onboardingUserCompleted: true,
  expectedModalBehavior: '❌ Should NOT see onboarding modal',
  timestamp: '2025-05-27T08:55:57.695Z'
}
[2025-05-27T08:55:57.735Z] [INFO] [App] POST /api/demo/user/create 200 in 420ms :: {"success":true,"userId":456,"userData":{"fullName":"Alex Carter","email":"ac... 
[DemoAPI] Setting up authentication: { userId: 456, email: 'acarter@innodatatechnologies.com' }
[2025-05-27T08:55:58.657Z] [INFO] [App] POST /api/demo/auth/setup 200 in 63ms :: {"success":true,"credentials":{"loginUrl":"/login","email":"acarter@innodatat... 
[DemoAPI] [EmailInvite] Starting invitation process: {
  userEmail: 'acarter@innodatatechnologies.com',
  userName: 'Alex Carter',
  companyName: 'InnoData Technologies',
  hasLoginCredentials: true,
  timestamp: '2025-05-27T08:55:59.461Z'
}
[DemoAPI] [EmailInvite] Fetching user and company data...
[DemoAPI] [EmailInvite] User found: { userId: 456, companyId: 423, fullName: 'Alex Carter', duration: 326 }
[DemoAPI] [EmailInvite] Company verified: {
  companyId: 423,
  companyName: 'InnoData Technologies',
  isDemo: true,
  accreditationStatus: 'PENDING',
  demoPersona: undefined,
  duration: 428
}
[DemoAPI] [EmailInvite] Company task assignment evaluation: {
  companyId: 423,
  companyName: 'InnoData Technologies',
  isDemo: true,
  accreditationStatus: 'PENDING',
  demoPersona: undefined,
  availableTabs: [ 'task-center' ],
  isNewDataRecipient: true,
  willCreateTasks: true
}
[DemoAPI] [EmailInvite] 🎯 Creating company tasks for New Data Recipient directly
[DemoAPI] [EmailInvite] ✅ Successfully created 3 company tasks for New Data Recipient: {
  companyId: 423,
  companyName: 'InnoData Technologies',
  kybTaskId: 1051,
  ky3pTaskId: 1052,
  openBankingTaskId: 1053,
  taskCreationMethod: 'direct_database_insert',
  taskChain: 'KYB (unlocked) → KY3P (locked) → Open Banking (locked)',
  duration: 619
}
[DemoAPI] [EmailInvite] Generated invitation code: { codeLength: 6, codeFormat: 'hex-uppercase', duration: 707 }
[DemoAPI] [EmailInvite] Creating invitation record...
[DemoAPI] [EmailInvite] Invitation record created: {
  invitationId: 440,
  code: '3757C3',
  expiresAt: 2025-06-03T08:56:00.168Z,
  duration: 750
}
[DemoAPI] [EmailInvite] Creating onboarding task...
[DemoAPI] [EmailInvite] Onboarding task created: {
  taskId: 1054,
  status: 'email_sent',
  assignedTo: 456,
  dueDate: 2025-06-10T08:56:00.212Z,
  duration: 870
}
[DemoAPI] [EmailInvite] Preparing email content using emailService...
[DemoAPI] [EmailInvite] Built invitation URL: https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/login?code=3757C3&email=acarter%40innodatatechnologies.com
[EmailService] Starting to send template email
[EmailService] Template type: demo_invite
[EmailService] Recipient: acarter@innodatatechnologies.com
[EmailService] Template data (raw): {
  "recipientName": "Alex Carter",
  "recipientEmail": "acarter@innodatatechnologies.com",
  "senderName": "Invela Demo System",
  "senderCompany": "Invela",
  "targetCompany": "InnoData Technologies",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/login?code=3757C3&email=acarter%40innodatatechnologies.com",
  "code": "3757C3"
}
[EmailService] Starting email validation for: acarter@innodatatechnologies.com
[EmailService] Checking MX records for domain: innodatatechnologies.com
[EmailService] MX record check failed: Error: queryMx ENOTFOUND innodatatechnologies.com
    at QueryReqWrap.onresolve [as oncomplete] (node:internal/dns/callback_resolver:45:19) {
  errno: undefined,
  code: 'ENOTFOUND',
  syscall: 'queryMx',
  hostname: 'innodatatechnologies.com'
}
[EmailService] Continuing despite MX check failure
[EmailService] Email validation successful for: acarter@innodatatechnologies.com
[EmailService] Transforming template data
[EmailService] Starting template data transformation
[EmailService] Input template data: {
  "recipientName": "Alex Carter",
  "recipientEmail": "acarter@innodatatechnologies.com",
  "senderName": "Invela Demo System",
  "senderCompany": "Invela",
  "targetCompany": "InnoData Technologies",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/login?code=3757C3&email=acarter%40innodatatechnologies.com",
  "code": "3757C3"
}
[EmailService] Built invite URL: https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/login?code=3757C3&email=acarter%40innodatatechnologies.com
[EmailService] Transformed template data: {
  "recipientName": "Alex Carter",
  "recipientEmail": "acarter@innodatatechnologies.com",
  "senderName": "Invela Demo System",
  "senderCompany": "Invela",
  "targetCompany": "InnoData Technologies",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/login?code=3757C3&email=acarter%40innodatatechnologies.com",
  "code": "3757C3"
}
[EmailService] Getting email template: demo_invite
[EmailTemplate] Getting template: demo_invite
[EmailTemplate] Template data: {
  "recipientName": "Alex Carter",
  "recipientEmail": "acarter@innodatatechnologies.com",
  "senderName": "Invela Demo System",
  "senderCompany": "Invela",
  "targetCompany": "InnoData Technologies",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/login?code=3757C3&email=acarter%40innodatatechnologies.com",
  "code": "3757C3"
}
[Template:invitation] Received template data: {
  "recipientName": "Alex Carter",
  "recipientEmail": "acarter@innodatatechnologies.com",
  "senderName": "Invela Demo System",
  "senderCompany": "Invela",
  "targetCompany": "InnoData Technologies",
  "inviteUrl": "https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/login?code=3757C3&email=acarter%40innodatatechnologies.com",
  "code": "3757C3",
  "inviteType": "demo"
}
[EmailService] Template generated successfully
[EmailService] Preparing to send email with configuration: {
  from: 'EvanCNavarro@gmail.com',
  to: 'acarter@innodatatechnologies.com',
  subject: 'Invitation to join Invela',
  textLength: 718,
  htmlLength: 1800
}
[2025-05-27T08:56:01.845Z] [INFO] [WebSocket] Received message from client client-1748333611713-snzycan {"module":"WebSocket","type":"ping"}
[EmailService] Email sent successfully to: acarter@innodatatechnologies.com
[DemoAPI] [EmailInvite] Demo invitation email sent successfully
[DemoAPI] [EmailInvite] Email process completed: {
  recipientEmail: 'acarter@innodatatechnologies.com',
  invitationCode: '3757C3',
  messageId: 'demo_invite_1748336162358_440',
  emailSent: true,
  duration: 2928
}
[DemoAPI] [EmailInvite] Process completed successfully: {
  userId: 456,
  companyId: 423,
  invitationId: 440,
  taskId: 1054,
  invitationCode: '3757C3',
  totalDuration: 2954
}
[WebSocket] Broadcast demo_email_sent to 6 clients (0 errors) { messageId: 'msg_1748336162416_zfujzyk7s' }
[2025-05-27T08:56:02.416Z] [INFO] [App] Successfully broadcasted demo_email_sent message 
[2025-05-27T08:56:02.501Z] [INFO] [App] POST /api/demo/email/send-invitation 200 in 3040ms :: {"success":true,"emailSent":true,"messageId":"demo_invite_1748336162358_440",... 
[2025-05-27T08:56:02.907Z] [INFO] [WebSocket] Received message from client client-1748333612737-glzt1k6 {"module":"WebSocket","type":"ping","timestamp":"2025-05-27T08:56:02.756Z","connectionId":"ws_1748333612750_tig7pfaii"}
[DemoAPI] [Finalize] Starting demo environment finalization: {
  userId: 456,
  companyId: 423,
  demoType: 'new-data-recipient',
  timestamp: '2025-05-27T08:56:03.287Z'
}
[DemoAPI] [Finalize] Verifying user and company data...
[DemoAPI] [Finalize] Company validation check: {
  userId: 456,
  userCompanyId: 423,
  requestedCompanyId: 423,
  expectedCompanyId: 423,
  demoType: 'new-data-recipient',
  isInvelaAdmin: false
}
[DemoAPI] [Finalize] User verification successful: {
  userId: 456,
  email: 'acarter@innodatatechnologies.com',
  companyId: 423,
  fullName: 'Alex Carter',
  duration: 37
}
[DemoAPI] [Finalize] Setting up demo environment...
[DemoAPI] [Finalize] Environment configuration prepared: {
  environmentId: 'env_demo_1748336163324_456',
  config: {
    type: 'new-data-recipient',
    features: {
      demoDataAccess: true,
      tutorialMode: true,
      limitedFunctionality: false
    },
    permissions: {
      canInviteUsers: true,
      canModifySettings: true,
      canAccessAllTabs: true
    }
  },
  duration: 37
}
[DemoAPI] [Finalize] Initiating automatic user authentication...
[DemoAPI] [Finalize] Demo finalization completed successfully: {
  userId: 456,
  email: 'acarter@innodatatechnologies.com',
  companyId: 423,
  environmentId: 'env_demo_1748336163324_456',
  authenticated: true,
  totalDuration: 107,
  timestamp: '2025-05-27T08:56:03.394Z'
}
[WebSocket] Broadcast demo_completed to 6 clients (0 errors) { messageId: 'msg_1748336163394_s8u7e5zv9' }
[2025-05-27T08:56:03.395Z] [INFO] [App] Successfully broadcasted demo_completed message 
[2025-05-27T08:56:03.423Z] [INFO] [WebSocket] Received message from client client-1748333613251-22hwzj5 {"module":"WebSocket","type":"ping","timestamp":"2025-05-27T08:56:03.270Z","connectionId":"ws_1748333612203_rpbx5ize9"}
[2025-05-27T08:56:03.452Z] [INFO] [App] POST /api/demo/environment/finalize 200 in 166ms :: {"success":true,"demoReady":true,"authenticated":true,"loginRequired":false,"... 
[Current Company] Fetching company for user: { userId: 456, companyId: 423 }
[Current Company] Found company: {
  id: 423,
  name: 'InnoData Technologies',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
[Current Company] Onboarding status check: {
  userId: 456,
  companyId: 423,
  userOnboardingStatus: true,
  companyOnboardingStatus: false,
  timestamp: '2025-05-27T08:56:07.121Z'
}
[2025-05-27T08:56:07.153Z] [INFO] [App] GET /api/companies/current 200 in 112ms :: {"id":423,"name":"InnoData Technologies","category":"FinTech","is_demo":true,... [sampled: request 751] 
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 456, company_id: 423, email: 'acarter@innodatatechnologies.com' }
[2025-05-27T08:56:07.286Z] [INFO] [App] Performing dynamic task unlocking check for company {"companyId":423,"userId":456}
[2025-05-27T08:56:07.331Z] [INFO] [App] No completed KYB tasks found, skipping security task unlock check {"companyId":423}
[Tasks] Automatically unlocking all tasks for company { userId: 456, companyId: 423, requestedBy: 'automatic_task_unlock' }
[2025-05-27T08:56:07.336Z] [INFO] [App] [TaskDependencies] Unlocking ALL tasks for company {"companyId":423}
[2025-05-27T08:56:07.400Z] [INFO] [App] [TabTutorials] Status request for tab "dashboard" from authenticated user ID: 456 
[2025-05-27T08:56:07.400Z] [INFO] [App] [TabTutorials] Normalizing tab name from 'dashboard' to canonical form 
[2025-05-27T08:56:07.400Z] [INFO] [App] [TabTutorials] Tab name already in canonical form: 'dashboard' 
[2025-05-27T08:56:07.400Z] [INFO] [App] [TabTutorials] Checking tutorial status for tab: dashboard (raw: dashboard), user: 456 
[2025-05-27T08:56:07.406Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":1054,"userEmail":"acarter@innodatatechnologies.com","currentStatus":"email_sent","currentProgress":25}
[2025-05-27T08:56:07.406Z] [INFO] [App] [TaskDependencies] Found tasks to unlock {"companyId":423,"count":7,"taskIds":[1048,1049,1050,1051,1052,1053,1054],"taskTypes":["company_kyb","ky3p","open_banking","company_kyb","ky3p","open_banking","user_onboarding"],"ky3pTaskCount":2,"ky3pTaskIds":[1049,1052]}
[UnifiedProgress] Starting progress update for task 1048 (company_kyb) {
  taskId: 1048,
  taskType: 'company_kyb',
  diagnosticId: 'prog-1748336167409-605',
  metadata: [
    'locked',
    'prerequisite_completed',
    'prerequisite_completed_at',
    'dependencyUnlockOperation',
    'previousProgress',
    'previousStatus',
    'isKy3pTask',
    'isUserOnboardingTask'
  ]
}
[2025-05-27T08:56:07.437Z] [INFO] [App] [TabTutorials] No tutorial status found for dashboard for user 456 
[2025-05-27T08:56:07.467Z] [INFO] [App] GET /api/user-tab-tutorials/dashboard/status 304 in 117ms :: {"exists":false,"completed":false,"currentStep":0,"tabName":"dashboard"} 
[UnifiedProgressCalc] Calculating progress for task 1048 (company_kyb)
[UnifiedProgressCalc] Task 1048 (company_kyb) progress: 0/30 = 0%
[2025-05-27T08:56:07.579Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-27T08:56:07.579Z] [INFO] [WebSocket] Broadcast message of type 'task_update' sent to 6 clients {"module":"WebSocket","messageType":"task_update","recipients":6,"totalClients":6,"filtered":false}
[2025-05-27T08:56:07.579Z] [DEBUG] [App] [UnifiedProgressCalc] Successfully broadcast task update using unified implementation {"taskId":1048,"messageId":"msg_1748336167579_zhv081gz"}
[2025-05-27T08:56:07.580Z] [INFO] [App] [UnifiedProgressCalc] Successfully broadcast task update for task 1048 {"progress":0,"status":"not_started","messageId":"msg_1748336167579_zhv081gz"}
[2025-05-27T08:56:07.580Z] [INFO] [App] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":423,"taskId":1048,"taskType":"company_kyb","isKy3pTask":false,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[2025-05-27T08:56:07.580Z] [INFO] [App] [TaskDependencies] Processing KY3P task {"taskId":1049,"taskType":"ky3p","currentProgress":0,"currentStatus":"not_started","timestamp":"2025-05-27T08:56:07.580Z"}
[UnifiedProgress] Starting progress update for task 1049 (ky3p) {
  taskId: 1049,
  taskType: 'ky3p',
  diagnosticId: 'prog-1748336167580-414',
  metadata: [
    'locked',
    'prerequisite_completed',
    'prerequisite_completed_at',
    'dependencyUnlockOperation',
    'previousProgress',
    'previousStatus',
    'isKy3pTask',
    'isUserOnboardingTask'
  ]
}
[UnifiedProgressCalc] Calculating progress for task 1049 (ky3p)
[2025-05-27T08:56:07.974Z] [INFO] [Database] Successfully established new database connection {"module":"Database"}
[KY3P Progress] Calculated progress for task 1049: {
  taskId: 1049,
  taskType: 'ky3p',
  normalizedTaskType: 'ky3p',
  totalFields: 120,
  completedFields: 0,
  progress: 0,
  timeStamp: '2025-05-27T08:56:08.072Z'
}
[UnifiedProgressCalc] Task 1049 (ky3p) progress: 0/120 = 0%
[2025-05-27T08:56:08.107Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-27T08:56:08.108Z] [INFO] [WebSocket] Broadcast message of type 'task_update' sent to 6 clients {"module":"WebSocket","messageType":"task_update","recipients":6,"totalClients":6,"filtered":false}
[2025-05-27T08:56:08.108Z] [DEBUG] [App] [UnifiedProgressCalc] Successfully broadcast task update using unified implementation {"taskId":1049,"messageId":"msg_1748336168107_x263dptf"}
[2025-05-27T08:56:08.108Z] [INFO] [App] [UnifiedProgressCalc] Successfully broadcast task update for task 1049 {"progress":0,"status":"not_started","messageId":"msg_1748336168107_x263dptf"}
[2025-05-27T08:56:08.108Z] [INFO] [App] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":423,"taskId":1049,"taskType":"ky3p","isKy3pTask":true,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[UnifiedProgress] Starting progress update for task 1050 (open_banking) {
  taskId: 1050,
  taskType: 'open_banking',
  diagnosticId: 'prog-1748336168109-571',
  metadata: [
    'locked',
    'prerequisite_completed',
    'prerequisite_completed_at',
    'dependencyUnlockOperation',
    'previousProgress',
    'previousStatus',
    'isKy3pTask',
    'isUserOnboardingTask'
  ]
}
[UnifiedProgressCalc] Calculating progress for task 1050 (open_banking)
[UnifiedProgressCalc] Task 1050 (open_banking) progress: 0/44 = 0%
[2025-05-27T08:56:08.283Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-27T08:56:08.283Z] [INFO] [WebSocket] Broadcast message of type 'task_update' sent to 6 clients {"module":"WebSocket","messageType":"task_update","recipients":6,"totalClients":6,"filtered":false}
[2025-05-27T08:56:08.284Z] [DEBUG] [App] [UnifiedProgressCalc] Successfully broadcast task update using unified implementation {"taskId":1050,"messageId":"msg_1748336168283_zc5a190l"}
[2025-05-27T08:56:08.284Z] [INFO] [App] [UnifiedProgressCalc] Successfully broadcast task update for task 1050 {"progress":0,"status":"not_started","messageId":"msg_1748336168283_zc5a190l"}
[2025-05-27T08:56:08.284Z] [INFO] [App] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":423,"taskId":1050,"taskType":"open_banking","isKy3pTask":false,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[UnifiedProgress] Starting progress update for task 1051 (company_kyb) {
  taskId: 1051,
  taskType: 'company_kyb',
  diagnosticId: 'prog-1748336168284-848',
  metadata: [
    'locked',
    'prerequisite_completed',
    'prerequisite_completed_at',
    'dependencyUnlockOperation',
    'previousProgress',
    'previousStatus',
    'isKy3pTask',
    'isUserOnboardingTask'
  ]
}
[UnifiedProgressCalc] Calculating progress for task 1051 (company_kyb)
[UnifiedProgressCalc] Task 1051 (company_kyb) progress: 0/30 = 0%
[2025-05-27T08:56:08.453Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-27T08:56:08.453Z] [INFO] [WebSocket] Broadcast message of type 'task_update' sent to 6 clients {"module":"WebSocket","messageType":"task_update","recipients":6,"totalClients":6,"filtered":false}
[2025-05-27T08:56:08.453Z] [DEBUG] [App] [UnifiedProgressCalc] Successfully broadcast task update using unified implementation {"taskId":1051,"messageId":"msg_1748336168453_e5wn8oek"}
[2025-05-27T08:56:08.453Z] [INFO] [App] [UnifiedProgressCalc] Successfully broadcast task update for task 1051 {"progress":0,"status":"not_started","messageId":"msg_1748336168453_e5wn8oek"}
[2025-05-27T08:56:08.453Z] [INFO] [App] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":423,"taskId":1051,"taskType":"company_kyb","isKy3pTask":false,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[2025-05-27T08:56:08.453Z] [INFO] [App] [TaskDependencies] Processing KY3P task {"taskId":1052,"taskType":"ky3p","currentProgress":0,"currentStatus":"not_started","timestamp":"2025-05-27T08:56:08.453Z"}
[UnifiedProgress] Starting progress update for task 1052 (ky3p) {
  taskId: 1052,
  taskType: 'ky3p',
  diagnosticId: 'prog-1748336168454-153',
  metadata: [
    'locked',
    'prerequisite_completed',
    'prerequisite_completed_at',
    'dependencyUnlockOperation',
    'previousProgress',
    'previousStatus',
    'isKy3pTask',
    'isUserOnboardingTask'
  ]
}
[UnifiedProgressCalc] Calculating progress for task 1052 (ky3p)
[KY3P Progress] Calculated progress for task 1052: {
  taskId: 1052,
  taskType: 'ky3p',
  normalizedTaskType: 'ky3p',
  totalFields: 120,
  completedFields: 0,
  progress: 0,
  timeStamp: '2025-05-27T08:56:08.588Z'
}
[UnifiedProgressCalc] Task 1052 (ky3p) progress: 0/120 = 0%
[2025-05-27T08:56:08.617Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-27T08:56:08.618Z] [INFO] [WebSocket] Broadcast message of type 'task_update' sent to 6 clients {"module":"WebSocket","messageType":"task_update","recipients":6,"totalClients":6,"filtered":false}
[2025-05-27T08:56:08.618Z] [DEBUG] [App] [UnifiedProgressCalc] Successfully broadcast task update using unified implementation {"taskId":1052,"messageId":"msg_1748336168617_kemqlhee"}
[2025-05-27T08:56:08.618Z] [INFO] [App] [UnifiedProgressCalc] Successfully broadcast task update for task 1052 {"progress":0,"status":"not_started","messageId":"msg_1748336168617_kemqlhee"}
[2025-05-27T08:56:08.618Z] [INFO] [App] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":423,"taskId":1052,"taskType":"ky3p","isKy3pTask":true,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[UnifiedProgress] Starting progress update for task 1053 (open_banking) {
  taskId: 1053,
  taskType: 'open_banking',
  diagnosticId: 'prog-1748336168618-461',
  metadata: [
    'locked',
    'prerequisite_completed',
    'prerequisite_completed_at',
    'dependencyUnlockOperation',
    'previousProgress',
    'previousStatus',
    'isKy3pTask',
    'isUserOnboardingTask'
  ]
}
[UnifiedProgressCalc] Calculating progress for task 1053 (open_banking)
[UnifiedProgressCalc] Task 1053 (open_banking) progress: 0/44 = 0%
[2025-05-27T08:56:08.764Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-27T08:56:08.765Z] [INFO] [WebSocket] Broadcast message of type 'task_update' sent to 6 clients {"module":"WebSocket","messageType":"task_update","recipients":6,"totalClients":6,"filtered":false}
[2025-05-27T08:56:08.765Z] [DEBUG] [App] [UnifiedProgressCalc] Successfully broadcast task update using unified implementation {"taskId":1053,"messageId":"msg_1748336168764_2locx6g0"}
[2025-05-27T08:56:08.765Z] [INFO] [App] [UnifiedProgressCalc] Successfully broadcast task update for task 1053 {"progress":0,"status":"not_started","messageId":"msg_1748336168764_2locx6g0"}
[2025-05-27T08:56:08.765Z] [INFO] [App] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":423,"taskId":1053,"taskType":"open_banking","isKy3pTask":false,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[2025-05-27T08:56:08.765Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":1054,"userEmail":"acarter@innodatatechnologies.com","timestamp":"2025-05-27T08:56:08.765Z"}
[2025-05-27T08:56:08.798Z] [DEBUG] [App] Broadcasting task update with object format {"taskId":1054,"status":"completed"}
[WebSocket] Broadcast task_update to 6 clients (0 errors) { messageId: 'msg_1748336168798_t37agigt7' }
[2025-05-27T08:56:08.799Z] [INFO] [App] Successfully broadcasted task_update message 
[2025-05-27T08:56:08.799Z] [INFO] [App] [TaskDependencies] Successfully unlocked all tasks {"companyId":423,"count":7}
[Tasks] Successfully unlocked all tasks for company: 423
[Tasks] KYB tasks found: { count: 2 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 456',
    condition2: 'tasks.created_by = 456',
    condition3: "tasks.company_id = 423 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('acarter@innodatatechnologies.com')"
  }
}
[Tasks] Tasks found: { count: 7 }
[2025-05-27T08:56:08.890Z] [INFO] [App] GET /api/tasks 200 in 1604ms :: [{"id":1054,"title":"Demo Invitation: acarter@innodatatechnologies.com","desc... 
[2025-05-27T08:56:13.998Z] [INFO] [WebSocket] Received message from client client-1748333613823-1h4axp5 {"module":"WebSocket","type":"ping","timestamp":"2025-05-27T08:56:13.838Z","connectionId":"ws_1748333612247_dwsx8816d"}
[Tasks] Using cached task data for user: 456
[2025-05-27T08:56:24.110Z] [INFO] [App] GET /api/tasks 304 in 40ms :: [{"id":1054,"title":"Demo Invitation: acarter@innodatatechnologies.com","desc... 
[2025-05-27T08:56:31.842Z] [INFO] [WebSocket] Received message from client client-1748333611713-snzycan {"module":"WebSocket","type":"ping"}
[2025-05-27T08:56:32.901Z] [INFO] [WebSocket] Received message from client client-1748333612737-g