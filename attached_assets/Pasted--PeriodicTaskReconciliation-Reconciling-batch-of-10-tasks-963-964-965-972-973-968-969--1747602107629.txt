[PeriodicTaskReconciliation] Reconciling batch of 10 tasks: [
  963, 964, 965, 972,
  973, 968, 969, 967,
  971, 981
]
[Task Progress] Calculated progress for task 963 (company_kyb): 0/30 = 0%
[Task Progress] Calculated progress for task 964 (ky3p): 0/0 = 0%
[Task Progress] Calculated progress for task 965 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 972 (ky3p): 0/0 = 0%
[Task Progress] Calculated progress for task 973 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 968 (ky3p): 0/0 = 0%
[Task Progress] Calculated progress for task 969 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 967 (company_kyb): 0/30 = 0%
[Task Progress] Calculated progress for task 971 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 981 (ky3p): 0/0 = 0%
[2025-05-18T20:51:44.080Z] [ERROR] [Database] Client-specific error: {"module":"Database","message":"terminating connection due to administrator command","code":"57P01"}
[2025-05-18T20:51:44.080Z] [ERROR] [Database] Database pool error: {"module":"Database","message":"terminating connection due to administrator command","code":"57P01","stack":"error: terminating connection due to administrator command\n    at Parser.parseErrorMessage (/home/runner/workspace/node_modules/pg-protocol/src/parser.ts:369:69)\n    at Parser.handlePacket (/home/runner/workspace/node_modules/pg-protocol/src/parser.ts:187:21)\n    at Parser.parse (/home/runner/workspace/node_modules/pg-protocol/src/parser.ts:102:30)\n    at TLSSocket.<anonymous> (/home/runner/workspace/node_modules/pg-protocol/src/index.ts:7:48)\n    at TLSSocket.emit (node:events:518:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Readable.push (node:internal/streams/readable:392:5)\n    at TLSWrap.onStreamRead (node:internal/stream_base_commons:191:23)"}
[PeriodicTaskReconciliation] Cleaned up 10 expired entries from cache
[2025-05-18T20:55:27.826Z] [INFO] [Database] New database connection established {"module":"Database"}
[PeriodicTaskReconciliation] Reconciling batch of 10 tasks: [
  963, 964, 965, 969,
  972, 967, 973, 968,
  971, 981
]
[Task Progress] Calculated progress for task 963 (company_kyb): 0/30 = 0%
[Task Progress] Calculated progress for task 964 (ky3p): 0/0 = 0%
[Task Progress] Calculated progress for task 965 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 969 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 972 (ky3p): 0/0 = 0%
[Task Progress] Calculated progress for task 967 (company_kyb): 0/30 = 0%
[Task Progress] Calculated progress for task 973 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 968 (ky3p): 0/0 = 0%
[Task Progress] Calculated progress for task 971 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 981 (ky3p): 0/0 = 0%
[2025-05-18T20:58:06.688Z] [INFO] [WebSocket] Client disconnected {"module":"WebSocket","clientId":"client-1747594538473-iboowsm","code":1006,"reason":"","remainingClients":5}
[2025-05-18T20:58:09.096Z] [ERROR] [Database] Client-specific error: {"module":"Database","message":"terminating connection due to administrator command","code":"57P01"}
[2025-05-18T20:58:09.096Z] [ERROR] [Database] Database pool error: {"module":"Database","message":"terminating connection due to administrator command","code":"57P01","stack":"error: terminating connection due to administrator command\n    at Parser.parseErrorMessage (/home/runner/workspace/node_modules/pg-protocol/src/parser.ts:369:69)\n    at Parser.handlePacket (/home/runner/workspace/node_modules/pg-protocol/src/parser.ts:187:21)\n    at Parser.parse (/home/runner/workspace/node_modules/pg-protocol/src/parser.ts:102:30)\n    at TLSSocket.<anonymous> (/home/runner/workspace/node_modules/pg-protocol/src/index.ts:7:48)\n    at TLSSocket.emit (node:events:518:28)\n    at addChunk (node:internal/streams/readable:561:12)\n    at readableAddChunkPushByteMode (node:internal/streams/readable:512:3)\n    at Readable.push (node:internal/streams/readable:392:5)\n    at TLSWrap.onStreamRead (node:internal/stream_base_commons:191:23)"}
[2025-05-18T20:59:35.376Z] [INFO] [WebSocket] Received message from client client-1747594538980-50jh0ix {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T20:59:35.196Z","connectionId":"ws_1747594537450_fylgxwpfm"}
[2025-05-18T20:59:35.377Z] [INFO] [WebSocket] Received message from client client-1747594537981-6yrailp {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T20:59:35.196Z","connectionId":"ws_1747594537948_t52ndy0u3"}
[2025-05-18T20:59:35.377Z] [INFO] [WebSocket] Received message from client client-1747594844991-hmonwhd {"module":"WebSocket","type":"ping"}
[2025-05-18T20:59:35.377Z] [INFO] [WebSocket] Received message from client client-1747598077368-pz2yzsv {"module":"WebSocket","type":"ping"}
[2025-05-18T20:59:35.377Z] [INFO] [WebSocket] Client disconnected {"module":"WebSocket","clientId":"client-1747598077368-pz2yzsv","code":1005,"reason":"","remainingClients":4}
[2025-05-18T20:59:36.623Z] [INFO] [Database] New database connection established {"module":"Database"}
[2025-05-18T20:59:36.759Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747601976759-t76fidh","clients":5}
[Current Company] Fetching company for user: { userId: 206, companyId: 166 }
[Current Company] Found company: {
  id: 166,
  name: 'SkyToken',
  onboardingCompleted: true,
  riskScore: 29,
  chosenScore: null,
  isDemo: false
}
[Current Company] Onboarding status check: {
  userId: 206,
  companyId: 166,
  userOnboardingStatus: true,
  freshFromDatabase: true,
  companyOnboardingStatus: true,
  timestamp: '2025-05-18T20:59:36.891Z'
}
[2025-05-18T20:59:36.938Z] [INFO] [App] GET /api/companies/current 304 in 143ms :: {"id":166,"name":"SkyToken","category":"FinTech","is_demo":false,"revenue_tie... 
[2025-05-18T20:59:37.185Z] [INFO] [App] GET /api/companies/current 304 in 36ms :: {"id":166,"name":"SkyToken","category":"FinTech","is_demo":false,"revenue_tie... 
[2025-05-18T20:59:37.261Z] [INFO] [Database] New database connection established {"module":"Database"}
[2025-05-18T20:59:37.306Z] [INFO] [WebSocket] Client connected {"module":"WebSocket","clientId":"client-1747601977306-vv308lk","clients":6}
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 206, company_id: 166, email: 'user@fintech.com' }
[2025-05-18T20:59:37.328Z] [INFO] [App] Performing dynamic task unlocking check for company {"companyId":166,"userId":206}
[2025-05-18T20:59:37.397Z] [INFO] [App] No completed KYB tasks found, skipping security task unlock check {"companyId":166}
[Tasks] Automatically unlocking all tasks for company { userId: 206, companyId: 166, requestedBy: 'automatic_task_unlock' }
[2025-05-18T20:59:37.397Z] [INFO] [App] [TaskDependencies] Unlocking ALL tasks for company {"companyId":166}
[2025-05-18T20:59:37.422Z] [INFO] [WebSocket] Received message from client client-1747601977306-vv308lk {"module":"WebSocket","type":"authenticate","data":{"timestamp":"2025-05-18T20:59:37.241Z"}}
[2025-05-18T20:59:37.422Z] [INFO] [WebSocket] Authentication from client client-1747601977306-vv308lk {"module":"WebSocket","hasToken":true}
[2025-05-18T20:59:37.428Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":334,"userEmail":"user@fintech.com","currentStatus":"completed","currentProgress":100}
[TaskDependencies] Skipping task 335 with submission indicators {
  hasSubmissionDate: true,
  hasSubmittedFlag: false,
  hasFileId: false,
  status: 'submitted',
  progress: 100,
  isReadyForSubmission: false
}
[TaskDependencies] Skipping task 337 with submission indicators {
  hasSubmissionDate: true,
  hasSubmittedFlag: false,
  hasFileId: false,
  status: 'submitted',
  progress: 100,
  isReadyForSubmission: false
}
[TaskDependencies] Skipping task 336 with submission indicators {
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasFileId: false,
  status: 'ready_for_submission',
  progress: 100,
  isReadyForSubmission: true
}
[2025-05-18T20:59:37.429Z] [INFO] [App] [TaskDependencies] Found tasks to unlock {"companyId":166,"count":1,"taskIds":[334],"taskTypes":["user_onboarding"],"ky3pTaskCount":0,"ky3pTaskIds":[]}
[2025-05-18T20:59:37.429Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":334,"userEmail":"user@fintech.com","timestamp":"2025-05-18T20:59:37.429Z"}
[2025-05-18T20:59:37.475Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T20:59:37.475Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T20:59:37.475Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":334,"status":"completed"}
[2025-05-18T20:59:37.475Z] [INFO] [App] [TaskDependencies] Successfully unlocked all tasks {"companyId":166,"count":1}
[Tasks] Successfully unlocked all tasks for company: 166
[Tasks] KYB tasks found: { count: 0 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 206',
    condition2: 'tasks.created_by = 206',
    condition3: "tasks.company_id = 166 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('user@fintech.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
[2025-05-18T20:59:37.581Z] [INFO] [App] GET /api/tasks 200 in 254ms :: [{"id":334,"title":"New User Invitation: user@fintech.com","description":"Com... 
[2025-05-18T20:59:38.117Z] [INFO] [WebSocket] Received message from client client-1747594537981-6yrailp {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T20:59:37.936Z","connectionId":"ws_1747594537948_t52ndy0u3"}
[2025-05-18T20:59:38.533Z] [INFO] [App] GET /api/companies/current 304 in 29ms :: {"id":166,"name":"SkyToken","category":"FinTech","is_demo":false,"revenue_tie... 
[2025-05-18T20:59:39.122Z] [INFO] [WebSocket] Received message from client client-1747594538980-50jh0ix {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T20:59:38.941Z","connectionId":"ws_1747594537450_fylgxwpfm"}
[2025-05-18T20:59:41.527Z] [INFO] [App] GET /api/companies/current 304 in 28ms :: {"id":166,"name":"SkyToken","category":"FinTech","is_demo":false,"revenue_tie... 
[Current Company] Using cached company data: 166
[2025-05-18T20:59:44.523Z] [INFO] [App] GET /api/companies/current 304 in 29ms :: {"id":166,"name":"SkyToken","category":"FinTech","is_demo":false,"revenue_tie... 
[2025-05-18T20:59:47.558Z] [INFO] [App] GET /api/companies/current 304 in 40ms :: {"id":166,"name":"SkyToken","category":"FinTech","is_demo":false,"revenue_tie... 
[2025-05-18T20:59:59.121Z] [INFO] [WebSocket] Received message from client client-1747594538980-50jh0ix {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T20:59:58.940Z","connectionId":"ws_1747594537450_fylgxwpfm"}
[2025-05-18T21:00:06.900Z] [INFO] [WebSocket] Received message from client client-1747601976759-t76fidh {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T21:00:06.700Z","connectionId":"ws_1747594537453_40nojl8zl"}
[2025-05-18T21:00:07.424Z] [INFO] [WebSocket] Received message from client client-1747601977306-vv308lk {"module":"WebSocket","type":"ping"}
[2025-05-18T21:00:08.122Z] [INFO] [WebSocket] Received message from client client-1747594537981-6yrailp {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T21:00:07.937Z","connectionId":"ws_1747594537948_t52ndy0u3"}
[2025-05-18T21:00:19.122Z] [INFO] [WebSocket] Received message from client client-1747594538980-50jh0ix {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T21:00:18.941Z","connectionId":"ws_1747594537450_fylgxwpfm"}
[PeriodicTaskReconciliation] Reconciling batch of 10 tasks: [
  963, 964, 965, 968,
  967, 973, 969, 972,
  971, 981
]
[Task Progress] Calculated progress for task 963 (company_kyb): 0/30 = 0%
[Task Progress] Calculated progress for task 964 (ky3p): 0/0 = 0%
[Task Progress] Calculated progress for task 965 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 968 (ky3p): 0/0 = 0%
[Task Progress] Calculated progress for task 967 (company_kyb): 0/30 = 0%
[Task Progress] Calculated progress for task 973 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 969 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 972 (ky3p): 0/0 = 0%
[Task Progress] Calculated progress for task 971 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 981 (ky3p): 0/0 = 0%
[AuthService] Authentication attempt for email: evan.navarro@invela.com 
[AuthService:DEBUG] Password format identified as: bcrypt 
[AuthService] User authenticated successfully: evan.navarro@invela.com 
[AuthService] Login successful { id: 8, email: 'evan.navarro@invela.com' }
[Current Company] Fetching company for user: { userId: 8, companyId: 1 }
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 8, company_id: 1, email: 'evan.navarro@invela.com' }
[2025-05-18T21:00:34.980Z] [INFO] [App] Performing dynamic task unlocking check for company {"companyId":1,"userId":8}
[Current Company] Found company: {
  id: 1,
  name: 'Invela',
  onboardingCompleted: true,
  riskScore: 0,
  chosenScore: 0,
  isDemo: null
}
[2025-05-18T21:00:35.018Z] [INFO] [App] No completed KYB tasks found, skipping security task unlock check {"companyId":1}
[Tasks] Automatically unlocking all tasks for company { userId: 8, companyId: 1, requestedBy: 'automatic_task_unlock' }
[2025-05-18T21:00:35.019Z] [INFO] [App] [TaskDependencies] Unlocking ALL tasks for company {"companyId":1}
[Current Company] Onboarding status check: {
  userId: 8,
  companyId: 1,
  userOnboardingStatus: true,
  freshFromDatabase: true,
  companyOnboardingStatus: true,
  timestamp: '2025-05-18T21:00:35.036Z'
}
[2025-05-18T21:00:35.051Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":121,"userEmail":"darek.nehrebecki@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T21:00:35.051Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":858,"userEmail":"marcin.figiel@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T21:00:35.051Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":123,"userEmail":"dev.kurbur@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T21:00:35.051Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":168,"userEmail":"preston.mcfarland@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T21:00:35.051Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":338,"userEmail":"nathanael.coffing@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T21:00:35.051Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":188,"userEmail":"amin.swessi@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T21:00:35.051Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":122,"userEmail":"gaby.sulbaran@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T21:00:35.051Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":124,"userEmail":"amar.karvir@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T21:00:35.051Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":720,"userEmail":"jim.wadsworth@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T21:00:35.051Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":251,"userEmail":"krzysztof.pniak@invela.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T21:00:35.051Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":172,"userEmail":"krzysztof.pniak@proopro.com","currentStatus":"completed","currentProgress":100}
[2025-05-18T21:00:35.051Z] [INFO] [App] [TaskDependencies] Found tasks to unlock {"companyId":1,"count":11,"taskIds":[121,858,123,168,338,188,122,124,720,251,172],"taskTypes":["user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding","user_onboarding"],"ky3pTaskCount":0,"ky3pTaskIds":[]}
[2025-05-18T21:00:35.051Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":121,"userEmail":"darek.nehrebecki@invela.com","timestamp":"2025-05-18T21:00:35.051Z"}
[2025-05-18T21:00:35.083Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T21:00:35.083Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T21:00:35.083Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":121,"status":"completed"}
[2025-05-18T21:00:35.083Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":858,"userEmail":"marcin.figiel@invela.com","timestamp":"2025-05-18T21:00:35.083Z"}
[2025-05-18T21:00:35.114Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T21:00:35.115Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T21:00:35.115Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":858,"status":"completed"}
[2025-05-18T21:00:35.115Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":123,"userEmail":"dev.kurbur@invela.com","timestamp":"2025-05-18T21:00:35.115Z"}
[2025-05-18T21:00:35.146Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T21:00:35.146Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T21:00:35.146Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":123,"status":"completed"}
[2025-05-18T21:00:35.146Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":168,"userEmail":"preston.mcfarland@invela.com","timestamp":"2025-05-18T21:00:35.146Z"}
[2025-05-18T21:00:35.175Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T21:00:35.176Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T21:00:35.176Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":168,"status":"completed"}
[2025-05-18T21:00:35.176Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":338,"userEmail":"nathanael.coffing@invela.com","timestamp":"2025-05-18T21:00:35.176Z"}
[2025-05-18T21:00:35.189Z] [INFO] [App] GET /api/companies/current 200 in 220ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T21:00:35.206Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T21:00:35.206Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T21:00:35.206Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":338,"status":"completed"}
[2025-05-18T21:00:35.206Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":188,"userEmail":"amin.swessi@invela.com","timestamp":"2025-05-18T21:00:35.206Z"}
[2025-05-18T21:00:35.237Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T21:00:35.237Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T21:00:35.237Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":188,"status":"completed"}
[2025-05-18T21:00:35.237Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":122,"userEmail":"gaby.sulbaran@invela.com","timestamp":"2025-05-18T21:00:35.237Z"}
[2025-05-18T21:00:35.268Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T21:00:35.268Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T21:00:35.268Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":122,"status":"completed"}
[2025-05-18T21:00:35.268Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":124,"userEmail":"amar.karvir@invela.com","timestamp":"2025-05-18T21:00:35.268Z"}
[2025-05-18T21:00:35.299Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T21:00:35.299Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T21:00:35.299Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":124,"status":"completed"}
[2025-05-18T21:00:35.299Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":720,"userEmail":"jim.wadsworth@invela.com","timestamp":"2025-05-18T21:00:35.299Z"}
[2025-05-18T21:00:35.328Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T21:00:35.328Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T21:00:35.328Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":720,"status":"completed"}
[2025-05-18T21:00:35.329Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":251,"userEmail":"krzysztof.pniak@invela.com","timestamp":"2025-05-18T21:00:35.329Z"}
[2025-05-18T21:00:35.358Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T21:00:35.359Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T21:00:35.359Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":251,"status":"completed"}
[2025-05-18T21:00:35.359Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":172,"userEmail":"krzysztof.pniak@proopro.com","timestamp":"2025-05-18T21:00:35.359Z"}
[2025-05-18T21:00:35.372Z] [INFO] [App] [TabTutorials] Status request for tab "dashboard" from authenticated user ID: 8 
[2025-05-18T21:00:35.372Z] [INFO] [App] [TabTutorials] Normalizing tab name from 'dashboard' to canonical form 
[2025-05-18T21:00:35.372Z] [INFO] [App] [TabTutorials] Tab name already in canonical form: 'dashboard' 
[2025-05-18T21:00:35.372Z] [INFO] [App] [TabTutorials] Checking tutorial status for tab: dashboard (raw: dashboard), user: 8 
[2025-05-18T21:00:35.388Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-18T21:00:35.388Z] [INFO] [WebSocket] Broadcast message of type 'task_updated' sent to 6 clients {"module":"WebSocket","messageType":"task_updated","recipients":6,"totalClients":6,"filtered":false}
[2025-05-18T21:00:35.388Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":172,"status":"completed"}
[2025-05-18T21:00:35.388Z] [INFO] [App] [TaskDependencies] Successfully unlocked all tasks {"companyId":1,"count":11}
[Tasks] Successfully unlocked all tasks for company: 1
[Tasks] KYB tasks found: { count: 0 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 8',
    condition2: 'tasks.created_by = 8',
    condition3: "tasks.company_id = 1 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('evan.navarro@invela.com')"
  }
}
[2025-05-18T21:00:35.449Z] [INFO] [App] [TabTutorials] Retrieved tutorial status for dashboard for user 8: completed=true, step=2 
[Tasks] Tasks found: { count: 39 }
[2025-05-18T21:00:35.478Z] [INFO] [App] GET /api/user-tab-tutorials/dashboard/status 200 in 106ms :: {"exists":true,"completed":true,"currentStep":2,"lastSeenAt":"2025-05-18T19:0... 
[2025-05-18T21:00:35.504Z] [INFO] [App] GET /api/tasks 200 in 524ms :: [{"id":988,"title":"1. KYB Form: DemoTest9","description":"Complete KYB verif... 
[2025-05-18T21:00:35.523Z] [INFO] [Database] New database connection established {"module":"Database"}
[2025-05-18T21:00:35.610Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[Network Visualization] Fetching network data for company: 1
[Companies] Fetching companies for user: { userId: 8, company_id: 1 }
[Relationships] Fetching network for company: 1
[Relationships] Found network members: { count: 65 }
[Companies] Query successful, found companies: {
  count: 59,
  companies: [
    { id: 33, name: 'Affinityx', hasLogo: true, hasRelationship: true },
    {
      id: 55,
      name: 'Alphapoint',
      hasLogo: true,
      hasRelationship: true
    },
    { id: 35, name: 'AscendIQ', hasLogo: true, hasRelationship: true },
    { id: 18, name: 'Axono', hasLogo: true, hasRelationship: true },
    { id: 30, name: 'Bankure', hasLogo: true, hasRelationship: true },
    { id: 39, name: 'Cachepath', hasLogo: true, hasRelationship: true },
    { id: 21, name: 'Clario', hasLogo: true, hasRelationship: true },
    {
      id: 154,
      name: 'ClarityBank',
      hasLogo: false,
      hasRelationship: true
    },
    { id: 49, name: 'Cleara', hasLogo: true, hasRelationship: true },
    { id: 32, name: 'Clyra', hasLogo: true, hasRelationship: true },
    { id: 7, name: 'Credora', hasLogo: true, hasRelationship: true },
    {
      id: 15,
      name: 'CryptoNest',
      hasLogo: true,
      hasRelationship: true
    },
    {
      id: 318,
      name: 'DemoTest1',
      hasLogo: false,
      hasRelationship: true
    },
    {
      id: 319,
      name: 'DemoTest2',
      hasLogo: false,
      hasRelationship: true
    },
    {
      id: 325,
      name: 'DemoTest3',
      hasLogo: false,
      hasRelationship: true
    },
    {
      id: 326,
      name: 'DemoTest4',
      hasLogo: false,
      hasRelationship: true
    },
    {
      id: 329,
      name: 'DemoTest7',
      hasLogo: false,
      hasRelationship: true
    },
    {
      id: 330,
      name: 'DemoTest8',
      hasLogo: false,
      hasRelationship: true
    },
    {
      id: 331,
      name: 'DemoTest9',
      hasLogo: false,
      hasRelationship: true
    },
    { id: 11, name: 'DriftPay', hasLogo: true, hasRelationship: true },
    { id: 17, name: 'Earnin', hasLogo: true, hasRelationship: true },
    { id: 14, name: 'EchoPay', hasLogo: true, hasRelationship: true },
    {
      id: 40,
      name: 'Equibridge',
      hasLogo: true,
      hasRelationship: true
    },
    { id: 9, name: 'Finloft', hasLogo: true, hasRelationship: true },
    { id: 38, name: 'Finsera', hasLogo: true, hasRelationship: true },
    { id: 51, name: 'Fundory', hasLogo: true, hasRelationship: true },
    { id: 47, name: 'Gravix', hasLogo: true, hasRelationship: true },
    { id: 1, name: 'Invela', hasLogo: true, hasRelationship: true },
    {
      id: 167,
      name: 'JimsAutoshop',
      hasLogo: false,
      hasRelationship: true
    },
    { id: 27, name: 'Lumora', hasLogo: true, hasRelationship: true },
    { id: 28, name: 'Modenex', hasLogo: true, hasRelationship: true },
    { id: 43, name: 'Nesture', hasLogo: true, hasRelationship: true },
    { id: 56, name: 'Nimblefi', hasLogo: true, hasRelationship: true },
    { id: 34, name: 'Nodura', hasLogo: true, hasRelationship: true },
    { id: 8, name: 'Novably', hasLogo: true, hasRelationship: true },
    { id: 37, name: 'Omnipay', hasLogo: true, hasRelationship: true },
    { id: 20, name: 'Orbipay', hasLogo: true, hasRelationship: true },
    { id: 41, name: 'Orosync', hasLogo: true, hasRelationship: true },
    { id: 5, name: 'PanAmerica', hasLogo: true, hasRelationship: true },
    { id: 45, name: 'Paydrift', hasLogo: true, hasRelationship: true },
    { id: 25, name: 'Paynest', hasLogo: true, hasRelationship: true },
    { id: 26, name: 'PetalSure', hasLogo: true, hasRelationship: true },
    { id: 13, name: 'Quantia', hasLogo: true, hasRelationship: true },
    { id: 48, name: 'Securent', hasLogo: true, hasRelationship: true },
    {
      id: 166,
      name: 'SkyToken',
      hasLogo: false,
      hasRelationship: true
    },
    {
      id: 165,
      name: 'StevesAuto',
      hasLogo: false,
      hasRelationship: true
    },
    { id: 31, name: 'Syntra', hasLogo: true, hasRelationship: true },
    {
      id: 168,
      name: 'TannersFeedback',
      hasLogo: false,
      hasRelationship: true
    },
    { id: 36, name: 'Tilvio', hasLogo: true, hasRelationship: true },
    { id: 46, name: 'Trustmint', hasLogo: true, hasRelationship: true },
    { id: 16, name: 'Trustwell', hasLogo: true, hasRelationship: true },
    { id: 44, name: 'ValoraPay', hasLogo: true, hasRelationship: true },
    { id: 6, name: 'Vaultara', hasLogo: true, hasRelationship: true },
    { id: 19, name: 'Veriark', hasLogo: true, hasRelationship: true },
    {
      id: 164,
      name: 'Wealthfront',
      hasLogo: false,
      hasRelationship: true
    },
    { id: 29, name: 'Zenflow', hasLogo: true, hasRelationship: true },
    { id: 24, name: 'Zentra', hasLogo: true, hasRelationship: true },
    { id: 50, name: 'Zentry', hasLogo: true, hasRelationship: true },
    { id: 12, name: 'Zyra', hasLogo: true, hasRelationship: true }
  ]
}
[Network Visualization] Found network relationships: { count: 65 }
[Network Visualization] Returning visualization data: { centerNode: 'Invela', nodeCount: 65 }
[2025-05-18T21:00:35.940Z] [INFO] [App] GET /api/relationships 200 in 110ms :: [{"id":12,"companyId":1,"relatedCompanyId":33,"relationshipType":"network_mem... 
[2025-05-18T21:00:35.942Z] [INFO] [App] GET /api/companies 200 in 113ms :: [{"id":33,"name":"Affinityx","category":"FinTech","description":"Affinityx is... 
[2025-05-18T21:00:35.948Z] [INFO] [App] GET /api/network/visualization 200 in 125ms :: {"center":{"id":1,"name":"Invela","riskScore":0,"riskBucket":"none","accredit... 
[2025-05-18T21:00:36.884Z] [INFO] [WebSocket] Received message from client client-1747601976759-t76fidh {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T21:00:36.700Z","connectionId":"ws_1747594537453_40nojl8zl"}
[2025-05-18T21:00:37.426Z] [INFO] [WebSocket] Received message from client client-1747601977306-vv308lk {"module":"WebSocket","type":"ping"}
[2025-05-18T21:00:38.116Z] [INFO] [WebSocket] Received message from client client-1747594537981-6yrailp {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T21:00:37.935Z","connectionId":"ws_1747594537948_t52ndy0u3"}
[2025-05-18T21:00:38.839Z] [INFO] [App] GET /api/companies/current 304 in 32ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T21:00:39.123Z] [INFO] [WebSocket] Received message from client client-1747594538980-50jh0ix {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T21:00:38.941Z","connectionId":"ws_1747594537450_fylgxwpfm"}
[2025-05-18T21:00:41.831Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T21:00:44.845Z] [INFO] [App] GET /api/companies/current 304 in 29ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T21:00:45.123Z] [INFO] [WebSocket] Received message from client client-1747594844991-hmonwhd {"module":"WebSocket","type":"ping"}
[2025-05-18T21:00:47.835Z] [INFO] [App] GET /api/companies/current 304 in 35ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T21:00:49.395Z] [INFO] [App] GET /api/companies/current 304 in 34ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T21:00:49.413Z] [INFO] [App] GET /api/companies/1 304 in 59ms :: {"id":1,"name":"Invela","description":"A stealth startup revolutionizing open... 
[2025-05-18T21:00:49.600Z] [INFO] [App] [TabTutorials] Status request for tab "company-profile" from authenticated user ID: 8 
[2025-05-18T21:00:49.600Z] [INFO] [App] [TabTutorials] Normalizing tab name from 'company-profile' to canonical form 
[2025-05-18T21:00:49.600Z] [INFO] [App] [TabTutorials] Tab name already in canonical form: 'company-profile' 
[2025-05-18T21:00:49.600Z] [INFO] [App] [TabTutorials] Checking tutorial status for tab: company-profile (raw: company-profile), user: 8 
[Company Logo] Fetching logo for company ID: 1
[2025-05-18T21:00:49.658Z] [INFO] [App] [TabTutorials] Retrieved tutorial status for company-profile for user 8: completed=false, step=0 
[Company Logo] Found logo record: {
  id: '60b86cd5-0176-43f9-a8fa-eeb2307039f8',
  company_id: 1,
  file_name: 'logo_invela-blue.svg',
  file_path: 'logo_invela-blue.svg',
  file_type: 'image/svg+xml',
  uploaded_at: 2025-02-09T01:46:59.248Z
}
[Company Logo] Attempting to serve logo from: /home/runner/workspace/uploads/logos/logo_invela-blue.svg
[Company Logo] Successfully served logo for company Invela (1)
[2025-05-18T21:00:49.691Z] [INFO] [App] GET /api/user-tab-tutorials/company-profile/status 200 in 91ms :: {"exists":true,"completed":false,"currentStep":0,"lastSeenAt":"2025-05-18T17:... 
[2025-05-18T21:00:49.828Z] [INFO] [App] GET /api/companies/1/logo 200 in 225ms 
[2025-05-18T21:00:50.662Z] [INFO] [App] GET /api/companies/1/files 200 in 38ms 
[2025-05-18T21:00:51.992Z] [INFO] [App] GET /api/companies/1/files 200 in 45ms 
[2025-05-18T21:00:52.385Z] [INFO] [App] GET /api/companies/current 304 in 32ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T21:00:55.409Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T21:00:58.386Z] [INFO] [App] GET /api/companies/current 304 in 34ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T21:00:59.122Z] [INFO] [WebSocket] Received message from client client-1747594538980-50jh0ix {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T21:00:58.941Z","connectionId":"ws_1747594537450_fylgxwpfm"}
[2025-05-18T21:01:01.394Z] [INFO] [App] GET /api/companies/current 304 in 35ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[Current Company] Using cached company data: 1
[2025-05-18T21:01:04.385Z] [INFO] [App] GET /api/companies/current 304 in 34ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T21:01:06.882Z] [INFO] [WebSocket] Received message from client client-1747601976759-t76fidh {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T21:01:06.701Z","connectionId":"ws_1747594537453_40nojl8zl"}
[2025-05-18T21:01:07.391Z] [INFO] [App] GET /api/companies/current 304 in 34ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T21:01:07.425Z] [INFO] [WebSocket] Received message from client client-1747601977306-vv308lk {"module":"WebSocket","type":"ping"}
[2025-05-18T21:01:08.117Z] [INFO] [WebSocket] Received message from client client-1747594537981-6yrailp {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T21:01:07.936Z","connectionId":"ws_1747594537948_t52ndy0u3"}
[2025-05-18T21:01:10.387Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T21:01:13.412Z] [INFO] [App] GET /api/companies/current 304 in 33ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T21:01:16.382Z] [INFO] [App] GET /api/companies/current 304 in 36ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T21:01:19.123Z] [INFO] [WebSocket] Received message from client client-1747594538980-50jh0ix {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T21:01:18.941Z","connectionId":"ws_1747594537450_fylgxwpfm"}
[Current Company] Using cached company data: 1
[2025-05-18T21:01:19.396Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T21:01:22.383Z] [INFO] [App] GET /api/companies/current 304 in 34ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T21:01:25.409Z] [INFO] [App] GET /api/companies/current 304 in 37ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T21:01:28.385Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T21:01:31.398Z] [INFO] [App] GET /api/companies/current 304 in 37ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T21:01:34.393Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T21:01:36.881Z] [INFO] [WebSocket] Received message from client client-1747601976759-t76fidh {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T21:01:36.700Z","connectionId":"ws_1747594537453_40nojl8zl"}
[Current Company] Fetching company for user: { userId: 8, companyId: 1 }
[Current Company] Found company: {
  id: 1,
  name: 'Invela',
  onboardingCompleted: true,
  riskScore: 0,
  chosenScore: 0,
  isDemo: null
}
[Current Company] Onboarding status check: {
  userId: 8,
  companyId: 1,
  userOnboardingStatus: true,
  freshFromDatabase: true,
  companyOnboardingStatus: true,
  timestamp: '2025-05-18T21:01:37.421Z'
}
[2025-05-18T21:01:37.423Z] [INFO] [WebSocket] Received message from client client-1747601977306-vv308lk {"module":"WebSocket","type":"ping"}
[2025-05-18T21:01:37.452Z] [INFO] [App] GET /api/companies/current 304 in 97ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 
[2025-05-18T21:01:38.119Z] [INFO] [WebSocket] Received message from client client-1747594537981-6yrailp {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T21:01:37.936Z","connectionId":"ws_1747594537948_t52ndy0u3"}
[2025-05-18T21:01:39.121Z] [INFO] [WebSocket] Received message from client client-1747594538980-50jh0ix {"module":"WebSocket","type":"ping","timestamp":"2025-05-18T21:01:38.940Z","connectionId":"ws_1747594537450_fylgxwpfm"}
[2025-05-18T21:01:40.383Z] [INFO] [App] GET /api/companies/current 304 in 30ms :: {"id":1,"name":"Invela","category":"Invela","is_demo":null,"revenue_tier":"sm... 