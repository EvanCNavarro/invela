4:32:02 AM [info] GET /api/tasks 304 in 91ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
WebSocket client disconnected with code 1005 and reason: 
New WebSocket client connected
WebSocket client disconnected with code 1005 and reason: 
[Auth] Deserializing user: 150
[2025-03-18T04:32:03.903Z] [INFO] [CardRoutes] Fetching CARD task {"companyName":"Vector","userId":150,"companyId":113}
[2025-03-18T04:32:03.935Z] [INFO] [CardRoutes] Task lookup result {"found":true,"taskId":196,"taskType":"company_card","taskStatus":"in_progress"}
4:32:03 AM [info] GET /api/tasks/card/Vector 304 in 63ms :: {"id":196,"title":"Company CARD: Vector","description":"Provide Compliance an...
New WebSocket client connected
[Auth] Deserializing user: 150
[Files] Processing file upload request
[Files] File details: {
  originalname: 'soc2-type2 (1).pdf',
  mimetype: 'application/pdf',
  size: 760657,
  filename: '20250318043208.pdf'
}
[Files] Document category detection: {
  filename: 'soc2-type2 (1).pdf',
  lowerFilename: 'soc2-type2 (1).pdf',
  detectedCategory: 'soc2_audit',
  timestamp: '2025-03-18T04:32:08.631Z',
  matches: {
    isSoc2: true,
    isIso27001: false,
    isPentest: false,
    isBusinessContinuity: false,
    exactMatch: 'soc2-type2 (1).pdf'
  }
}
[Files] Detected category: soc2_audit
[Files] Created file record: {
  id: 411,
  name: 'soc2-type2 (1).pdf',
  status: 'uploaded',
  category: 'soc2_audit'
}
[WebSocket] Broadcasting document count update: {
  type: 'COUNT_UPDATE',
  category: 'soc2_audit',
  count: 1,
  companyId: '113'
}
4:32:08 AM [info] POST /api/files 201 in 638ms :: {"id":411,"name":"soc2-type2 (1).pdf","size":760657,"type":"application/pdf",...
[Auth] Deserializing user: 150
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
[2025-03-18T04:32:09.255Z] New client connected to the pool
4:32:09 AM [info] GET /api/tasks 304 in 101ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
4:32:09 AM [info] GET /api/companies/current 304 in 62ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Files] Processing file upload request
[Files] File details: {
  originalname: 'Anonymised-BlackBox-Penetration-Testing-Report.pdf',
  mimetype: 'application/pdf',
  size: 2328443,
  filename: '20250318043208.pdf'
}
[Files] Document category detection: {
  filename: 'Anonymised-BlackBox-Penetration-Testing-Report.pdf',
  lowerFilename: 'anonymised-blackbox-penetration-testing-report.pdf',
  detectedCategory: 'pentest_report',
  timestamp: '2025-03-18T04:32:10.894Z',
  matches: {
    isSoc2: false,
    isIso27001: false,
    isPentest: false,
    isBusinessContinuity: false,
    exactMatch: 'anonymised-blackbox-penetration-testing-report.pdf'
  }
}
[Files] Detected category: pentest_report
[Files] Created file record: {
  id: 412,
  name: 'Anonymised-BlackBox-Penetration-Testing-Report.pdf',
  status: 'uploaded',
  category: 'pentest_report'
}
[WebSocket] Broadcasting document count update: {
  type: 'COUNT_UPDATE',
  category: 'pentest_report',
  count: 1,
  companyId: '113'
}
4:32:10 AM [info] POST /api/files 201 in 2141ms :: {"id":412,"name":"Anonymised-BlackBox-Penetration-Testing-Report.pdf","size":...
[Auth] Deserializing user: 150
[Files] Processing file upload request
[Files] File details: {
  originalname: 'spg-business-continuity-plan.pdf',
  mimetype: 'application/pdf',
  size: 200021,
  filename: '20250318043211.pdf'
}
[Files] Document category detection: {
  filename: 'spg-business-continuity-plan.pdf',
  lowerFilename: 'spg-business-continuity-plan.pdf',
  detectedCategory: 'business_continuity',
  timestamp: '2025-03-18T04:32:11.183Z',
  matches: {
    isSoc2: false,
    isIso27001: false,
    isPentest: false,
    isBusinessContinuity: false,
    exactMatch: 'spg-business-continuity-plan.pdf'
  }
}
[Files] Detected category: business_continuity
[Files] Created file record: {
  id: 413,
  name: 'spg-business-continuity-plan.pdf',
  status: 'uploaded',
  category: 'business_continuity'
}
[WebSocket] Broadcasting document count update: {
  type: 'COUNT_UPDATE',
  category: 'business_continuity',
  count: 1,
  companyId: '113'
}
4:32:11 AM [info] POST /api/files 201 in 151ms :: {"id":413,"name":"spg-business-continuity-plan.pdf","size":200021,"type":"app...
[Auth] Deserializing user: 150
[Files] Processing file upload request
[Files] File details: {
  originalname: 'Anonymized-ISO-27001-Assessment-Report (1).pdf',
  mimetype: 'application/pdf',
  size: 889081,
  filename: '20250318043211.pdf'
}
[Files] Document category detection: {
  filename: 'Anonymized-ISO-27001-Assessment-Report (1).pdf',
  lowerFilename: 'anonymized-iso-27001-assessment-report (1).pdf',
  detectedCategory: 'iso27001_cert',
  timestamp: '2025-03-18T04:32:12.147Z',
  matches: {
    isSoc2: false,
    isIso27001: false,
    isPentest: false,
    isBusinessContinuity: false,
    exactMatch: 'anonymized-iso-27001-assessment-report (1).pdf'
  }
}
[Files] Detected category: iso27001_cert
[Files] Created file record: {
  id: 414,
  name: 'Anonymized-ISO-27001-Assessment-Report (1).pdf',
  status: 'uploaded',
  category: 'iso27001_cert'
}
[WebSocket] Broadcasting document count update: {
  type: 'COUNT_UPDATE',
  category: 'iso27001_cert',
  count: 1,
  companyId: '113'
}
4:32:12 AM [info] POST /api/files 201 in 840ms :: {"id":414,"name":"Anonymized-ISO-27001-Assessment-Report (1).pdf","size":8890...
WebSocket client disconnected with code 1005 and reason: 
[Auth] Deserializing user: 150
[2025-03-18T04:32:13.971Z] [INFO] [CardRoutes] Fetching CARD fields
4:32:14 AM [info] GET /api/card/fields 304 in 117ms :: [{"id":1,"field_key":"security_access_control","wizard_section":"Security","q...
[Auth] Deserializing user: 150
[PDF Service] Extraction complete: {
  fileName: '20250318043208.pdf',
  totalPages: 60,
  extractedPages: 60,
  totalContent: 72286,
  averageContentPerPage: 1205,
  invalidContentItems: 497,
  timestamp: '2025-03-18T04:32:15.317Z'
}
[DocumentChunking] Document prepared: {
  fileName: '20250318043208.pdf',
  totalChunks: 17,
  totalContent: 64000,
  averageChunkSize: 3765,
  invalidChunks: 0,
  timestamp: '2025-03-18T04:32:15.318Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3906,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:32:15.350Z'
}
[OpenAI Service] Sending request: { promptLength: 5240, timestamp: '2025-03-18T04:32:15.350Z' }
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
4:32:15 AM [info] POST /api/documents/411/process 200 in 1151ms :: {"status":"processing","totalChunks":17}
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
[2025-03-18T04:32:15.419Z] New client connected to the pool
4:32:15 AM [info] GET /api/companies/current 304 in 60ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Auth] Deserializing user: 150
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
4:32:15 AM [info] GET /api/documents/411/progress 200 in 61ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
4:32:15 AM [info] GET /api/tasks 304 in 87ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
New WebSocket client connected
[Auth] Deserializing user: 150
4:32:16 AM [info] GET /api/documents/411/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 3,
  duration: 1988,
  fieldsAnswered: [ 'all', 'all', 'all' ],
  timestamp: '2025-03-18T04:32:17.338Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 0,
  batchProgress: '1-1',
  answersFound: 3,
  timestamp: '2025-03-18T04:32:17.370Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3978,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:32:17.470Z'
}
[OpenAI Service] Sending request: { promptLength: 5312, timestamp: '2025-03-18T04:32:17.470Z' }
[Auth] Deserializing user: 150
4:32:17 AM [info] GET /api/documents/411/progress 304 in 58ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
4:32:19 AM [info] GET /api/documents/411/progress 304 in 58ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
4:32:20 AM [info] GET /api/documents/411/progress 304 in 58ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
4:32:20 AM [info] GET /api/companies/current 304 in 58ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
4:32:20 AM [info] GET /api/tasks 304 in 111ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Auth] Deserializing user: 150
4:32:21 AM [info] GET /api/documents/411/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 6,
  duration: 4095,
  fieldsAnswered: [ 'all', 'all', 'all', 'all', 'all', 'all' ],
  timestamp: '2025-03-18T04:32:21.565Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 1,
  batchProgress: '2-2',
  answersFound: 6,
  timestamp: '2025-03-18T04:32:21.594Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4000,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:32:21.623Z'
}
[OpenAI Service] Sending request: { promptLength: 5334, timestamp: '2025-03-18T04:32:21.623Z' }
[WebSocket] Received pong
[Auth] Deserializing user: 150
4:32:22 AM [info] GET /api/documents/411/progress 304 in 58ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
4:32:23 AM [info] GET /api/documents/411/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
4:32:25 AM [info] GET /api/documents/411/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
4:32:25 AM [info] GET /api/companies/current 304 in 59ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
4:32:26 AM [info] GET /api/tasks 304 in 88ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Auth] Deserializing user: 150
4:32:26 AM [info] GET /api/documents/411/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
4:32:27 AM [info] GET /api/documents/411/progress 304 in 61ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
4:32:28 AM [info] GET /api/documents/411/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 17,
  duration: 7489,
  fieldsAnswered: [
    'all', 'all', 'all',
    'all', 'all', 'all',
    'all', 'all', 'all',
    'all', 'all', 'all',
    'all', 'all', 'all',
    'all', 'all'
  ],
  timestamp: '2025-03-18T04:32:29.112Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 2,
  batchProgress: '3-3',
  answersFound: 17,
  timestamp: '2025-03-18T04:32:29.143Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3980,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:32:29.173Z'
}
[OpenAI Service] Sending request: { promptLength: 5314, timestamp: '2025-03-18T04:32:29.173Z' }
[Auth] Deserializing user: 150
4:32:29 AM [info] GET /api/documents/411/progress 304 in 58ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
4:32:30 AM [info] GET /api/documents/411/progress 304 in 58ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
4:32:31 AM [info] GET /api/companies/current 304 in 60ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
4:32:31 AM [info] GET /api/tasks 304 in 91ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 2315,
  fieldsAnswered: [ 'all' ],
  timestamp: '2025-03-18T04:32:31.488Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 3,
  batchProgress: '4-4',
  answersFound: 1,
  timestamp: '2025-03-18T04:32:31.542Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4000,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:32:31.573Z'
}
[OpenAI Service] Sending request: { promptLength: 5334, timestamp: '2025-03-18T04:32:31.573Z' }
[Auth] Deserializing user: 150
4:32:32 AM [info] GET /api/documents/411/progress 304 in 60ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 1350,
  fieldsAnswered: [ 'all' ],
  timestamp: '2025-03-18T04:32:32.923Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 4,
  batchProgress: '5-5',
  answersFound: 1,
  timestamp: '2025-03-18T04:32:32.955Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4000,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:32:32.985Z'
}
[OpenAI Service] Sending request: { promptLength: 5334, timestamp: '2025-03-18T04:32:32.985Z' }
[Auth] Deserializing user: 150
4:32:33 AM [info] GET /api/documents/411/progress 304 in 61ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 1067,
  fieldsAnswered: [ 'all' ],
  timestamp: '2025-03-18T04:32:34.052Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 5,
  batchProgress: '6-6',
  answersFound: 1,
  timestamp: '2025-03-18T04:32:34.083Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3929,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:32:34.113Z'
}
[OpenAI Service] Sending request: { promptLength: 5263, timestamp: '2025-03-18T04:32:34.113Z' }
[Auth] Deserializing user: 150
4:32:34 AM [info] GET /api/documents/411/progress 304 in 61ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 983,
  fieldsAnswered: [ 'all' ],
  timestamp: '2025-03-18T04:32:35.096Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 6,
  batchProgress: '7-7',
  answersFound: 1,
  timestamp: '2025-03-18T04:32:35.129Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3945,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:32:35.159Z'
}
[OpenAI Service] Sending request: { promptLength: 5279, timestamp: '2025-03-18T04:32:35.159Z' }
[Auth] Deserializing user: 150
4:32:35 AM [info] GET /api/documents/411/progress 304 in 62ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
4:32:36 AM [info] GET /api/companies/current 304 in 61ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
4:32:36 AM [info] GET /api/tasks 304 in 92ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Auth] Deserializing user: 150
4:32:36 AM [info] GET /api/documents/411/progress 304 in 61ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
4:32:38 AM [info] GET /api/documents/411/progress 304 in 60ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
4:32:39 AM [info] GET /api/documents/411/progress 304 in 63ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 5,
  duration: 4521,
  fieldsAnswered: [ 'all', 'all', 'all', 'all', 'all' ],
  timestamp: '2025-03-18T04:32:39.680Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 7,
  batchProgress: '8-8',
  answersFound: 5,
  timestamp: '2025-03-18T04:32:39.712Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4000,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:32:39.742Z'
}
[OpenAI Service] Sending request: { promptLength: 5334, timestamp: '2025-03-18T04:32:39.742Z' }
[Auth] Deserializing user: 150
4:32:40 AM [info] GET /api/documents/411/progress 304 in 61ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
4:32:41 AM [info] GET /api/companies/current 304 in 60ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Auth] Deserializing user: 150
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
4:32:41 AM [info] GET /api/tasks 304 in 89ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
4:32:41 AM [info] GET /api/documents/411/progress 304 in 58ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
4:32:42 AM [info] GET /api/documents/411/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 5,
  duration: 3321,
  fieldsAnswered: [ 'all', 'all', 'all', 'all', 'all' ],
  timestamp: '2025-03-18T04:32:43.063Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 8,
  batchProgress: '9-9',
  answersFound: 5,
  timestamp: '2025-03-18T04:32:43.094Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4059,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:32:43.126Z'
}
[OpenAI Service] Sending request: { promptLength: 5393, timestamp: '2025-03-18T04:32:43.126Z' }
[Auth] Deserializing user: 150
4:32:44 AM [info] GET /api/documents/411/progress 304 in 58ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 991,
  fieldsAnswered: [ 'all' ],
  timestamp: '2025-03-18T04:32:44.117Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 9,
  batchProgress: '10-10',
  answersFound: 1,
  timestamp: '2025-03-18T04:32:44.147Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4000,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:32:44.176Z'
}
[OpenAI Service] Sending request: { promptLength: 5334, timestamp: '2025-03-18T04:32:44.176Z' }
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 881,
  fieldsAnswered: [ 'all' ],
  timestamp: '2025-03-18T04:32:45.058Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 10,
  batchProgress: '11-11',
  answersFound: 1,
  timestamp: '2025-03-18T04:32:45.088Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3953,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:32:45.117Z'
}
[OpenAI Service] Sending request: { promptLength: 5287, timestamp: '2025-03-18T04:32:45.117Z' }
[Auth] Deserializing user: 150
4:32:45 AM [info] GET /api/documents/411/progress 304 in 58ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
4:32:46 AM [info] GET /api/documents/411/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
4:32:46 AM [info] GET /api/companies/current 304 in 60ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
4:32:46 AM [info] GET /api/tasks 304 in 88ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Auth] Deserializing user: 150
4:32:47 AM [info] GET /api/documents/411/progress 304 in 58ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
4:32:48 AM [info] GET /api/documents/411/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
4:32:49 AM [info] GET /api/documents/411/progress 304 in 73ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 4902,
  fieldsAnswered: [ 'all' ],
  timestamp: '2025-03-18T04:32:50.019Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 11,
  batchProgress: '12-12',
  answersFound: 1,
  timestamp: '2025-03-18T04:32:50.049Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4049,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:32:50.078Z'
}
[OpenAI Service] Sending request: { promptLength: 5383, timestamp: '2025-03-18T04:32:50.078Z' }
[Auth] Deserializing user: 150
4:32:51 AM [info] GET /api/documents/411/progress 304 in 60ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
4:32:51 AM [info] GET /api/companies/current 304 in 59ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
4:32:52 AM [info] GET /api/tasks 304 in 88ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Auth] Deserializing user: 150
4:32:52 AM [info] GET /api/documents/411/progress 304 in 58ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
4:32:53 AM [info] GET /api/documents/411/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 4,
  duration: 3991,
  fieldsAnswered: [ 'all', 'all', 'all', 'all' ],
  timestamp: '2025-03-18T04:32:54.069Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 12,
  batchProgress: '13-13',
  answersFound: 4,
  timestamp: '2025-03-18T04:32:54.100Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4000,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:32:54.130Z'
}
[OpenAI Service] Sending request: { promptLength: 5334, timestamp: '2025-03-18T04:32:54.130Z' }
[Auth] Deserializing user: 150
4:32:54 AM [info] GET /api/documents/411/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 1058,
  fieldsAnswered: [ 'all' ],
  timestamp: '2025-03-18T04:32:55.188Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 13,
  batchProgress: '14-14',
  answersFound: 1,
  timestamp: '2025-03-18T04:32:55.218Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3999,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:32:55.247Z'
}
[OpenAI Service] Sending request: { promptLength: 5333, timestamp: '2025-03-18T04:32:55.247Z' }
[Auth] Deserializing user: 150
4:32:55 AM [info] GET /api/documents/411/progress 304 in 58ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
4:32:57 AM [info] GET /api/companies/current 304 in 60ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Auth] Deserializing user: 150
4:32:57 AM [info] GET /api/documents/411/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 1952,
  fieldsAnswered: [ 'all' ],
  timestamp: '2025-03-18T04:32:57.199Z'
}
[Auth] Deserializing user: 150
[DocumentChunking] Processing status: {
  chunkIndex: 14,
  batchProgress: '15-15',
  answersFound: 1,
  timestamp: '2025-03-18T04:32:57.230Z'
}
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[OpenAI Service] Starting document analysis: {
  textLength: 4074,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:32:57.260Z'
}
[OpenAI Service] Sending request: { promptLength: 5408, timestamp: '2025-03-18T04:32:57.260Z' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
4:32:57 AM [info] GET /api/tasks 304 in 88ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 912,
  fieldsAnswered: [ 'all' ],
  timestamp: '2025-03-18T04:32:58.172Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 15,
  batchProgress: '16-16',
  answersFound: 1,
  timestamp: '2025-03-18T04:32:58.203Z'
}
[Auth] Deserializing user: 150
[OpenAI Service] Starting document analysis: {
  textLength: 114,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:32:58.232Z'
}
[OpenAI Service] Sending request: { promptLength: 1448, timestamp: '2025-03-18T04:32:58.232Z' }
4:32:58 AM [info] GET /api/documents/411/progress 304 in 60ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 696,
  fieldsAnswered: [ 'all' ],
  timestamp: '2025-03-18T04:32:58.928Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 16,
  batchProgress: '17-17',
  answersFound: 1,
  timestamp: '2025-03-18T04:32:58.959Z'
}
[Auth] Deserializing user: 150
4:32:59 AM [info] GET /api/documents/411/progress 200 in 61ms :: {"status":"processed","progress":{"chunksProcessed":0,"totalChunks":1},"answe...
[Auth] Deserializing user: 150
[PDF Service] Extraction complete: {
  fileName: '20250318043208.pdf',
  totalPages: 60,
  extractedPages: 60,
  totalContent: 72286,
  averageContentPerPage: 1205,
  invalidContentItems: 497,
  timestamp: '2025-03-18T04:33:00.358Z'
}
[DocumentChunking] Document prepared: {
  fileName: '20250318043208.pdf',
  totalChunks: 17,
  totalContent: 64000,
  averageChunkSize: 3765,
  invalidChunks: 0,
  timestamp: '2025-03-18T04:33:00.358Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3906,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:33:00.389Z'
}
[OpenAI Service] Sending request: { promptLength: 5240, timestamp: '2025-03-18T04:33:00.389Z' }
4:33:00 AM [info] POST /api/documents/412/process 200 in 798ms :: {"status":"processing","totalChunks":17}
[Auth] Deserializing user: 150
4:33:00 AM [info] GET /api/documents/412/progress 200 in 61ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[WebSocket] Received pong
[Auth] Deserializing user: 150
4:33:01 AM [info] GET /api/documents/412/progress 304 in 61ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
4:33:02 AM [info] GET /api/companies/current 304 in 61ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
4:33:02 AM [info] GET /api/tasks 304 in 92ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Auth] Deserializing user: 150
4:33:03 AM [info] GET /api/documents/412/progress 304 in 70ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 6,
  duration: 2640,
  fieldsAnswered: [ 'all', 'all', 'all', 'all', 'all', 'all' ],
  timestamp: '2025-03-18T04:33:03.029Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 0,
  batchProgress: '1-1',
  answersFound: 6,
  timestamp: '2025-03-18T04:33:03.060Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3978,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T04:33:03.091Z'
}