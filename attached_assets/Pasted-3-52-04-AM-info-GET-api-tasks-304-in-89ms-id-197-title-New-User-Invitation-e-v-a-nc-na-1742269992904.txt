3:52:04 AM [info] GET /api/tasks 304 in 89ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
New WebSocket client connected
WebSocket client disconnected with code 1005 and reason: 
[Auth] Deserializing user: 150
[2025-03-18T03:52:05.521Z] [INFO] [CardRoutes] Fetching CARD task {"companyName":"Vector","userId":150,"companyId":113}
[2025-03-18T03:52:05.555Z] [INFO] [CardRoutes] Task lookup result {"found":true,"taskId":196,"taskType":"company_card","taskStatus":"in_progress"}
3:52:05 AM [info] GET /api/tasks/card/Vector 304 in 65ms :: {"id":196,"title":"Company CARD: Vector","description":"Provide Compliance an...
New WebSocket client connected
[Auth] Deserializing user: 150
[Files] Processing file upload request
[WebSocket] Broadcasting upload progress: {
  type: 'UPLOAD_PROGRESS',
  fileId: null,
  fileName: 'soc2-type2 (1).pdf',
  status: 'uploading',
  progress: 0
}
[Files] File details: {
  originalname: 'soc2-type2 (1).pdf',
  mimetype: 'application/pdf',
  size: 760657,
  filename: '20250318035209.pdf'
}
[Files] Document category detection: {
  filename: 'soc2-type2 (1).pdf',
  lowerFilename: 'soc2-type2 (1).pdf',
  detectedCategory: 'soc2_audit',
  timestamp: '2025-03-18T03:52:09.652Z',
  matches: {
    isSoc2: true,
    isIso27001: false,
    isPentest: false,
    isBusinessContinuity: false,
    exactMatch: 'soc2-type2 (1).pdf'
  }
}
[Files] Detected category: soc2_audit
[Files] Created file record: {
  id: 395,
  name: 'soc2-type2 (1).pdf',
  status: 'uploaded',
  category: 'soc2_audit'
}
[WebSocket] Broadcasting upload progress: {
  type: 'UPLOAD_PROGRESS',
  fileId: 395,
  fileName: 'soc2-type2 (1).pdf',
  status: 'uploaded',
  progress: 100
}
[WebSocket] Broadcasting document count update: {
  type: 'COUNT_UPDATE',
  category: 'soc2_audit',
  count: 1,
  companyId: '113'
}
3:52:09 AM [info] POST /api/files 201 in 638ms :: {"id":395,"name":"soc2-type2 (1).pdf","size":760657,"type":"application/pdf",...
[Auth] Deserializing user: 150
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
[2025-03-18T03:52:10.632Z] New client connected to the pool
3:52:10 AM [info] GET /api/companies/current 304 in 59ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
3:52:10 AM [info] GET /api/tasks 304 in 89ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Files] Processing file upload request
[WebSocket] Broadcasting upload progress: {
  type: 'UPLOAD_PROGRESS',
  fileId: null,
  fileName: 'Anonymised-BlackBox-Penetration-Testing-Report.pdf',
  status: 'uploading',
  progress: 0
}
[Files] File details: {
  originalname: 'Anonymised-BlackBox-Penetration-Testing-Report.pdf',
  mimetype: 'application/pdf',
  size: 2328443,
  filename: '20250318035209.pdf'
}
[Files] Document category detection: {
  filename: 'Anonymised-BlackBox-Penetration-Testing-Report.pdf',
  lowerFilename: 'anonymised-blackbox-penetration-testing-report.pdf',
  detectedCategory: 'pentest_report',
  timestamp: '2025-03-18T03:52:11.835Z',
  matches: {
    isSoc2: false,
    isIso27001: false,
    isPentest: false,
    isBusinessContinuity: false,
    exactMatch: 'anonymised-blackbox-penetration-testing-report.pdf'
  }
}
[Files] Detected category: pentest_report
[Files] Created file record: {
  id: 396,
  name: 'Anonymised-BlackBox-Penetration-Testing-Report.pdf',
  status: 'uploaded',
  category: 'pentest_report'
}
[WebSocket] Broadcasting upload progress: {
  type: 'UPLOAD_PROGRESS',
  fileId: 396,
  fileName: 'Anonymised-BlackBox-Penetration-Testing-Report.pdf',
  status: 'uploaded',
  progress: 100
}
[WebSocket] Broadcasting document count update: {
  type: 'COUNT_UPDATE',
  category: 'pentest_report',
  count: 1,
  companyId: '113'
}
3:52:11 AM [info] POST /api/files 201 in 2044ms :: {"id":396,"name":"Anonymised-BlackBox-Penetration-Testing-Report.pdf","size":...
[Auth] Deserializing user: 150
[Files] Processing file upload request
[WebSocket] Broadcasting upload progress: {
  type: 'UPLOAD_PROGRESS',
  fileId: null,
  fileName: 'spg-business-continuity-plan.pdf',
  status: 'uploading',
  progress: 0
}
[Files] File details: {
  originalname: 'spg-business-continuity-plan.pdf',
  mimetype: 'application/pdf',
  size: 200021,
  filename: '20250318035212.pdf'
}
[Files] Document category detection: {
  filename: 'spg-business-continuity-plan.pdf',
  lowerFilename: 'spg-business-continuity-plan.pdf',
  detectedCategory: 'business_continuity',
  timestamp: '2025-03-18T03:52:12.106Z',
  matches: {
    isSoc2: false,
    isIso27001: false,
    isPentest: false,
    isBusinessContinuity: false,
    exactMatch: 'spg-business-continuity-plan.pdf'
  }
}
[Files] Detected category: business_continuity
[Files] Created file record: {
  id: 397,
  name: 'spg-business-continuity-plan.pdf',
  status: 'uploaded',
  category: 'business_continuity'
}
[WebSocket] Broadcasting upload progress: {
  type: 'UPLOAD_PROGRESS',
  fileId: 397,
  fileName: 'spg-business-continuity-plan.pdf',
  status: 'uploaded',
  progress: 100
}
[WebSocket] Broadcasting document count update: {
  type: 'COUNT_UPDATE',
  category: 'business_continuity',
  count: 1,
  companyId: '113'
}
3:52:12 AM [info] POST /api/files 201 in 149ms :: {"id":397,"name":"spg-business-continuity-plan.pdf","size":200021,"type":"app...
[Auth] Deserializing user: 150
[WebSocket] Received pong
[Files] Processing file upload request
[WebSocket] Broadcasting upload progress: {
  type: 'UPLOAD_PROGRESS',
  fileId: null,
  fileName: 'Anonymized-ISO-27001-Assessment-Report (1).pdf',
  status: 'uploading',
  progress: 0
}
[Files] File details: {
  originalname: 'Anonymized-ISO-27001-Assessment-Report (1).pdf',
  mimetype: 'application/pdf',
  size: 889081,
  filename: '20250318035212.pdf'
}
[Files] Document category detection: {
  filename: 'Anonymized-ISO-27001-Assessment-Report (1).pdf',
  lowerFilename: 'anonymized-iso-27001-assessment-report (1).pdf',
  detectedCategory: 'iso27001_cert',
  timestamp: '2025-03-18T03:52:12.865Z',
  matches: {
    isSoc2: false,
    isIso27001: false,
    isPentest: false,
    isBusinessContinuity: false,
    exactMatch: 'anonymized-iso-27001-assessment-report (1).pdf'
  }
}
[Files] Detected category: iso27001_cert
[Files] Created file record: {
  id: 398,
  name: 'Anonymized-ISO-27001-Assessment-Report (1).pdf',
  status: 'uploaded',
  category: 'iso27001_cert'
}
[WebSocket] Broadcasting upload progress: {
  type: 'UPLOAD_PROGRESS',
  fileId: 398,
  fileName: 'Anonymized-ISO-27001-Assessment-Report (1).pdf',
  status: 'uploaded',
  progress: 100
}
[WebSocket] Broadcasting document count update: {
  type: 'COUNT_UPDATE',
  category: 'iso27001_cert',
  count: 1,
  companyId: '113'
}
3:52:12 AM [info] POST /api/files 201 in 602ms :: {"id":398,"name":"Anonymized-ISO-27001-Assessment-Report (1).pdf","size":8890...
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
3:52:15 AM [info] GET /api/companies/current 304 in 61ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
WebSocket client disconnected with code 1005 and reason: 
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
[Auth] Deserializing user: 150
3:52:16 AM [info] GET /api/tasks 304 in 89ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[2025-03-18T03:52:16.025Z] [INFO] [CardRoutes] Fetching CARD fields
3:52:16 AM [info] GET /api/card/fields 304 in 146ms :: [{"id":1,"field_key":"security_access_control","wizard_section":"Security","q...
[Auth] Deserializing user: 150
[Document Processing] Creating chunks for file: {
  fileId: 395,
  fileName: 'soc2-type2 (1).pdf',
  mimeType: 'application/pdf',
  timestamp: '2025-03-18T03:52:16.347Z'
}
[DocumentChunking] Starting document chunking: {
  filePath: '/home/runner/workspace/uploads/documents/20250318035209.pdf',
  mimeType: 'application/pdf',
  chunkSize: 4000,
  timestamp: '2025-03-18T03:52:16.347Z'
}
[PDF Service] Extraction complete: {
  fileName: '20250318035209.pdf',
  totalPages: 60,
  extractedPages: 60,
  totalContent: 72286,
  averageContentPerPage: 1205,
  invalidContentItems: 497,
  timestamp: '2025-03-18T03:52:17.580Z'
}
[DocumentChunking] Content extracted: {
  contentLength: 64000,
  mimeType: 'application/pdf',
  timestamp: '2025-03-18T03:52:17.580Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 0,
  chunkSize: 3906,
  startsWithWord: 'Penetration Testing ',
  endsWithWord: 'Solidity based code.',
  timestamp: '2025-03-18T03:52:17.580Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 1,
  chunkSize: 3978,
  startsWithWord: 'More details about f',
  endsWithWord: 'pany Web application',
  timestamp: '2025-03-18T03:52:17.581Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 2,
  chunkSize: 4000,
  startsWithWord: 'High-Level Recommend',
  endsWithWord: 'An administrator use',
  timestamp: '2025-03-18T03:52:17.581Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 3,
  chunkSize: 3980,
  startsWithWord: 's a weak and guessab',
  endsWithWord: 'e “ aaaaaaaa ” page.',
  timestamp: '2025-03-18T03:52:17.581Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 4,
  chunkSize: 4000,
  startsWithWord: 'The scenario for thi',
  endsWithWord: 'AAAAAAAAAAAAAAAAAAAA',
  timestamp: '2025-03-18T03:52:17.581Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 5,
  chunkSize: 4000,
  startsWithWord: 'AAAAAAAAAAAAAA AAAAA',
  endsWithWord: 'ime_sec: AAAAAA aof_',
  timestamp: '2025-03-18T03:52:17.581Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 6,
  chunkSize: 3929,
  startsWithWord: 'current_rewrite_time',
  endsWithWord: 'pany Web application',
  timestamp: '2025-03-18T03:52:17.581Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 7,
  chunkSize: 3945,
  startsWithWord: 'PROOF OF VULNERABILI',
  endsWithWord: 'emplate expressions.',
  timestamp: '2025-03-18T03:52:17.581Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 8,
  chunkSize: 4000,
  startsWithWord: 'For more detailed in',
  endsWithWord: 'set on a cookie, the',
  timestamp: '2025-03-18T03:52:17.581Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 9,
  chunkSize: 4059,
  startsWithWord: 'n browsers will not ',
  endsWithWord: 'n client and server.',
  timestamp: '2025-03-18T03:52:17.581Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 10,
  chunkSize: 4000,
  startsWithWord: 'UnderDefense LLC Pag',
  endsWithWord: 'aaaaaaaaAaaaaaaaaaaa',
  timestamp: '2025-03-18T03:52:17.582Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 11,
  chunkSize: 3953,
  startsWithWord: 'AaaaaaaaaaaaAaaaaaaa',
  endsWithWord: 'ent to prevent this.',
  timestamp: '2025-03-18T03:52:17.582Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 12,
  chunkSize: 4049,
  startsWithWord: 'An attacker situated',
  endsWithWord: 'pany Web application',
  timestamp: '2025-03-18T03:52:17.582Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 13,
  chunkSize: 4000,
  startsWithWord: 'APPENDIX A. Performe',
  endsWithWord: 'ad of Malicious File',
  timestamp: '2025-03-18T03:52:17.582Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 14,
  chunkSize: 3999,
  startsWithWord: 's SAFE Client Side T',
  endsWithWord: 'aaaaaaaaaa Contract:',
  timestamp: '2025-03-18T03:52:17.582Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 15,
  chunkSize: 4074,
  startsWithWord: 'aaaaaaaaaaaaaaaa Fun',
  endsWithWord: 'pany Web application',
  timestamp: '2025-03-18T03:52:17.582Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 16,
  chunkSize: 114,
  startsWithWord: 'aaaaaaaaaaaaaaaa ---',
  endsWithWord: 'ct: aaaaaaaaaaaaaaaa',
  timestamp: '2025-03-18T03:52:17.582Z'
}
[DocumentChunking] Chunks created: {
  totalChunks: 17,
  averageChunkSize: 3763.8823529411766,
  timestamp: '2025-03-18T03:52:17.582Z'
}
[Document Processing] Processing chunk: {
  fileId: 395,
  chunkIndex: 0,
  progress: '1/17',
  timestamp: '2025-03-18T03:52:17.613Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 0,
  contentLength: 3906,
  fieldsCount: 1,
  timestamp: '2025-03-18T03:52:17.613Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3906,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T03:52:17.613Z'
}
[OpenAI Service] Sending request: { promptLength: 4706, timestamp: '2025-03-18T03:52:17.613Z' }
3:52:17 AM [info] POST /api/documents/395/process 200 in 1335ms :: {"status":"processing","totalChunks":17}
[Auth] Deserializing user: 150
3:52:17 AM [info] GET /api/documents/395/progress 200 in 60ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
New WebSocket client connected
[Auth] Deserializing user: 150
3:52:19 AM [info] GET /api/documents/395/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 3,
  duration: 2275,
  fieldsAnswered: [ 'all', 'all', 'all' ],
  timestamp: '2025-03-18T03:52:19.888Z'
}
[DocumentChunking] Chunk processed: {
  chunkIndex: 0,
  answersFound: 3,
  timestamp: '2025-03-18T03:52:19.935Z'
}
[Document Processing] Processing chunk: {
  fileId: 395,
  chunkIndex: 1,
  progress: '2/17',
  timestamp: '2025-03-18T03:52:20.036Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 1,
  contentLength: 3978,
  fieldsCount: 1,
  timestamp: '2025-03-18T03:52:20.036Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3978,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T03:52:20.036Z'
}
[OpenAI Service] Sending request: { promptLength: 4778, timestamp: '2025-03-18T03:52:20.036Z' }
[Auth] Deserializing user: 150
3:52:20 AM [info] GET /api/documents/395/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
3:52:21 AM [info] GET /api/companies/current 304 in 59ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
3:52:21 AM [info] GET /api/tasks 304 in 87ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Auth] Deserializing user: 150
3:52:21 AM [info] GET /api/documents/395/progress 304 in 60ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 2,
  duration: 1997,
  fieldsAnswered: [ 'all', 'all' ],
  timestamp: '2025-03-18T03:52:22.033Z'
}
[DocumentChunking] Chunk processed: {
  chunkIndex: 1,
  answersFound: 2,
  timestamp: '2025-03-18T03:52:22.064Z'
}
[Document Processing] Chunk processing error: {
  fileId: 395,
  chunkIndex: 1,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T03:52:22.122Z'
}
[Document Processing] Processing chunk: {
  fileId: 395,
  chunkIndex: 2,
  progress: '3/17',
  timestamp: '2025-03-18T03:52:22.122Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 2,
  contentLength: 4000,
  fieldsCount: 1,
  timestamp: '2025-03-18T03:52:22.122Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4000,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T03:52:22.122Z'
}
[OpenAI Service] Sending request: { promptLength: 4800, timestamp: '2025-03-18T03:52:22.122Z' }
[Auth] Deserializing user: 150
3:52:22 AM [info] GET /api/documents/395/progress 304 in 60ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 2,
  duration: 1412,
  fieldsAnswered: [ 'all', 'all' ],
  timestamp: '2025-03-18T03:52:23.534Z'
}
[DocumentChunking] Chunk processed: {
  chunkIndex: 2,
  answersFound: 2,
  timestamp: '2025-03-18T03:52:23.569Z'
}
[Document Processing] Chunk processing error: {
  fileId: 395,
  chunkIndex: 2,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T03:52:23.628Z'
}
[Document Processing] Processing chunk: {
  fileId: 395,
  chunkIndex: 3,
  progress: '4/17',
  timestamp: '2025-03-18T03:52:23.628Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 3,
  contentLength: 3980,
  fieldsCount: 1,
  timestamp: '2025-03-18T03:52:23.628Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3980,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T03:52:23.628Z'
}
[OpenAI Service] Sending request: { promptLength: 4780, timestamp: '2025-03-18T03:52:23.629Z' }
[2025-03-18T03:52:23.715Z] New client connected to the pool
[Auth] Deserializing user: 150
3:52:23 AM [info] GET /api/documents/395/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 635,
  fieldsAnswered: [ 'all' ],
  timestamp: '2025-03-18T03:52:24.264Z'
}
[DocumentChunking] Chunk processed: {
  chunkIndex: 3,
  answersFound: 1,
  timestamp: '2025-03-18T03:52:24.295Z'
}
[Document Processing] Chunk processing error: {
  fileId: 395,
  chunkIndex: 3,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T03:52:24.353Z'
}
[Document Processing] Processing chunk: {
  fileId: 395,
  chunkIndex: 4,
  progress: '5/17',
  timestamp: '2025-03-18T03:52:24.353Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 4,
  contentLength: 4000,
  fieldsCount: 1,
  timestamp: '2025-03-18T03:52:24.353Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4000,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T03:52:24.353Z'
}
[OpenAI Service] Sending request: { promptLength: 4800, timestamp: '2025-03-18T03:52:24.353Z' }
[2025-03-18T03:52:25.002Z] New client connected to the pool
[Auth] Deserializing user: 150
3:52:25 AM [info] GET /api/documents/395/progress 304 in 61ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 938,
  fieldsAnswered: [ 'all' ],
  timestamp: '2025-03-18T03:52:25.291Z'
}
[DocumentChunking] Chunk processed: {
  chunkIndex: 4,
  answersFound: 1,
  timestamp: '2025-03-18T03:52:25.323Z'
}
[Document Processing] Chunk processing error: {
  fileId: 395,
  chunkIndex: 4,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T03:52:25.382Z'
}
[Document Processing] Processing chunk: {
  fileId: 395,
  chunkIndex: 5,
  progress: '6/17',
  timestamp: '2025-03-18T03:52:25.382Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 5,
  contentLength: 4000,
  fieldsCount: 1,
  timestamp: '2025-03-18T03:52:25.382Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4000,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T03:52:25.382Z'
}
[OpenAI Service] Sending request: { promptLength: 4800, timestamp: '2025-03-18T03:52:25.382Z' }
[2025-03-18T03:52:26.203Z] New client connected to the pool
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[2025-03-18T03:52:26.284Z] New client connected to the pool
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
[Auth] Deserializing user: 150
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 940,
  fieldsAnswered: [ 'all' ],
  timestamp: '2025-03-18T03:52:26.322Z'
}
3:52:26 AM [info] GET /api/companies/current 304 in 59ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[2025-03-18T03:52:26.406Z] New client connected to the pool
[2025-03-18T03:52:26.407Z] New client connected to the pool
3:52:26 AM [info] GET /api/documents/395/progress 304 in 60ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
[DocumentChunking] Chunk processed: {
  chunkIndex: 5,
  answersFound: 1,
  timestamp: '2025-03-18T03:52:26.463Z'
}
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Document Processing] Chunk processing error: {
  fileId: 395,
  chunkIndex: 5,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T03:52:26.522Z'
}
[Document Processing] Processing chunk: {
  fileId: 395,
  chunkIndex: 6,
  progress: '7/17',
  timestamp: '2025-03-18T03:52:26.522Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 6,
  contentLength: 3929,
  fieldsCount: 1,
  timestamp: '2025-03-18T03:52:26.522Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3929,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T03:52:26.522Z'
}
[OpenAI Service] Sending request: { promptLength: 4729, timestamp: '2025-03-18T03:52:26.522Z' }
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
3:52:26 AM [info] GET /api/tasks 304 in 91ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Auth] Deserializing user: 150
3:52:27 AM [info] GET /api/documents/395/progress 304 in 61ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 2151,
  fieldsAnswered: [ 'all' ],
  timestamp: '2025-03-18T03:52:28.673Z'
}
[DocumentChunking] Chunk processed: {
  chunkIndex: 6,
  answersFound: 1,
  timestamp: '2025-03-18T03:52:28.702Z'
}
[Auth] Deserializing user: 150
[Document Processing] Chunk processing error: {
  fileId: 395,
  chunkIndex: 6,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T03:52:28.760Z'
}
[Document Processing] Processing chunk: {
  fileId: 395,
  chunkIndex: 7,
  progress: '8/17',
  timestamp: '2025-03-18T03:52:28.760Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 7,
  contentLength: 3945,
  fieldsCount: 1,
  timestamp: '2025-03-18T03:52:28.760Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3945,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T03:52:28.760Z'
}
[OpenAI Service] Sending request: { promptLength: 4745, timestamp: '2025-03-18T03:52:28.760Z' }
3:52:28 AM [info] GET /api/documents/395/progress 304 in 63ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
3:52:29 AM [info] GET /api/documents/395/progress 304 in 60ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 3,
  duration: 2247,
  fieldsAnswered: [ 'all', 'all', 'all' ],
  timestamp: '2025-03-18T03:52:31.007Z'
}
[DocumentChunking] Chunk processed: {
  chunkIndex: 7,
  answersFound: 3,
  timestamp: '2025-03-18T03:52:31.042Z'
}
[Auth] Deserializing user: 150
[Document Processing] Chunk processing error: {
  fileId: 395,
  chunkIndex: 7,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T03:52:31.101Z'
}
[Document Processing] Processing chunk: {
  fileId: 395,
  chunkIndex: 8,
  progress: '9/17',
  timestamp: '2025-03-18T03:52:31.101Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 8,
  contentLength: 4000,
  fieldsCount: 1,
  timestamp: '2025-03-18T03:52:31.101Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4000,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T03:52:31.101Z'
}
[OpenAI Service] Sending request: { promptLength: 4800, timestamp: '2025-03-18T03:52:31.101Z' }
3:52:31 AM [info] GET /api/documents/395/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
3:52:31 AM [info] GET /api/companies/current 304 in 59ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
3:52:31 AM [info] GET /api/tasks 304 in 88ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Auth] Deserializing user: 150
3:52:32 AM [info] GET /api/documents/395/progress 304 in 58ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 2106,
  fieldsAnswered: [ 'all' ],
  timestamp: '2025-03-18T03:52:33.207Z'
}
[DocumentChunking] Chunk processed: {
  chunkIndex: 8,
  answersFound: 1,
  timestamp: '2025-03-18T03:52:33.237Z'
}
[Document Processing] Chunk processing error: {
  fileId: 395,
  chunkIndex: 8,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T03:52:33.298Z'
}
[Document Processing] Processing chunk: {
  fileId: 395,
  chunkIndex: 9,
  progress: '10/17',
  timestamp: '2025-03-18T03:52:33.299Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 9,
  contentLength: 4059,
  fieldsCount: 1,
  timestamp: '2025-03-18T03:52:33.299Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4059,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T03:52:33.299Z'
}
[OpenAI Service] Sending request: { promptLength: 4859, timestamp: '2025-03-18T03:52:33.299Z' }
[2025-03-18T03:52:33.510Z] New client connected to the pool
[Auth] Deserializing user: 150
3:52:33 AM [info] GET /api/documents/395/progress 304 in 60ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
3:52:34 AM [info] GET /api/documents/395/progress 304 in 66ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 3,
  duration: 2041,
  fieldsAnswered: [ 'all', 'all', 'all' ],
  timestamp: '2025-03-18T03:52:35.340Z'
}
[DocumentChunking] Chunk processed: {
  chunkIndex: 9,
  answersFound: 3,
  timestamp: '2025-03-18T03:52:35.371Z'
}
[Document Processing] Chunk processing error: {
  fileId: 395,
  chunkIndex: 9,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T03:52:35.430Z'
}
[Document Processing] Processing chunk: {
  fileId: 395,
  chunkIndex: 10,
  progress: '11/17',
  timestamp: '2025-03-18T03:52:35.430Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 10,
  contentLength: 4000,
  fieldsCount: 1,
  timestamp: '2025-03-18T03:52:35.430Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4000,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T03:52:35.430Z'
}
[OpenAI Service] Sending request: { promptLength: 4800, timestamp: '2025-03-18T03:52:35.430Z' }
[2025-03-18T03:52:35.996Z] New client connected to the pool
[Auth] Deserializing user: 150
3:52:36 AM [info] GET /api/documents/395/progress 304 in 61ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
3:52:36 AM [info] GET /api/companies/current 304 in 66ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
3:52:37 AM [info] GET /api/tasks 304 in 90ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Auth] Deserializing user: 150
3:52:37 AM [info] GET /api/documents/395/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 2,
  duration: 2902,
  fieldsAnswered: [ 'all', 'all' ],
  timestamp: '2025-03-18T03:52:38.332Z'
}
[DocumentChunking] Chunk processed: {
  chunkIndex: 10,
  answersFound: 2,
  timestamp: '2025-03-18T03:52:38.364Z'
}
[Document Processing] Chunk processing error: {
  fileId: 395,
  chunkIndex: 10,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T03:52:38.432Z'
}
[Document Processing] Processing chunk: {
  fileId: 395,
  chunkIndex: 11,
  progress: '12/17',
  timestamp: '2025-03-18T03:52:38.432Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 11,
  contentLength: 3953,
  fieldsCount: 1,
  timestamp: '2025-03-18T03:52:38.432Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3953,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T03:52:38.432Z'
}
[OpenAI Service] Sending request: { promptLength: 4753, timestamp: '2025-03-18T03:52:38.432Z' }
[2025-03-18T03:52:38.501Z] New client connected to the pool
[Auth] Deserializing user: 150
3:52:38 AM [info] GET /api/documents/395/progress 304 in 63ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 1249,
  fieldsAnswered: [ 'all' ],
  timestamp: '2025-03-18T03:52:39.681Z'
}
[DocumentChunking] Chunk processed: {
  chunkIndex: 11,
  answersFound: 1,
  timestamp: '2025-03-18T03:52:39.713Z'
}
[Document Processing] Chunk processing error: {
  fileId: 395,
  chunkIndex: 11,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T03:52:39.772Z'
}
[Document Processing] Processing chunk: {
  fileId: 395,
  chunkIndex: 12,
  progress: '13/17',
  timestamp: '2025-03-18T03:52:39.772Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 12,
  contentLength: 4049,
  fieldsCount: 1,
  timestamp: '2025-03-18T03:52:39.772Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4049,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T03:52:39.772Z'
}
[OpenAI Service] Sending request: { promptLength: 4849, timestamp: '2025-03-18T03:52:39.772Z' }
[2025-03-18T03:52:39.797Z] New client connected to the pool
[Auth] Deserializing user: 150
3:52:39 AM [info] GET /api/documents/395/progress 304 in 60ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
3:52:41 AM [info] GET /api/documents/395/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 1816,
  fieldsAnswered: [ 'all' ],
  timestamp: '2025-03-18T03:52:41.588Z'
}
[DocumentChunking] Chunk processed: {
  chunkIndex: 12,
  answersFound: 1,
  timestamp: '2025-03-18T03:52:41.618Z'
}
[Document Processing] Chunk processing error: {
  fileId: 395,
  chunkIndex: 12,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T03:52:41.675Z'
}
[Document Processing] Processing chunk: {
  fileId: 395,
  chunkIndex: 13,
  progress: '14/17',
  timestamp: '2025-03-18T03:52:41.676Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 13,
  contentLength: 4000,
  fieldsCount: 1,
  timestamp: '2025-03-18T03:52:41.676Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4000,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T03:52:41.676Z'
}
[OpenAI Service] Sending request: { promptLength: 4800, timestamp: '2025-03-18T03:52:41.676Z' }
[2025-03-18T03:52:41.858Z] New client connected to the pool
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
3:52:41 AM [info] GET /api/companies/current 304 in 62ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
3:52:42 AM [info] GET /api/tasks 304 in 99ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[2025-03-18T03:52:42.302Z] New client connected to the pool
[Auth] Deserializing user: 150
3:52:42 AM [info] GET /api/documents/395/progress 304 in 62ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 1120,
  fieldsAnswered: [ 'all' ],
  timestamp: '2025-03-18T03:52:42.796Z'
}
[DocumentChunking] Chunk processed: {
  chunkIndex: 13,
  answersFound: 1,
  timestamp: '2025-03-18T03:52:42.828Z'
}
[Document Processing] Chunk processing error: {
  fileId: 395,
  chunkIndex: 13,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T03:52:42.888Z'
}
[Document Processing] Processing chunk: {
  fileId: 395,
  chunkIndex: 14,
  progress: '15/17',
  timestamp: '2025-03-18T03:52:42.888Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 14,
  contentLength: 3999,
  fieldsCount: 1,
  timestamp: '2025-03-18T03:52:42.888Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3999,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T03:52:42.888Z'
}
[OpenAI Service] Sending request: { promptLength: 4799, timestamp: '2025-03-18T03:52:42.888Z' }
[Auth] Deserializing user: 150
3:52:43 AM [info] GET /api/documents/395/progress 304 in 62ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 1339,
  fieldsAnswered: [ 'all' ],
  timestamp: '2025-03-18T03:52:44.227Z'
}
[DocumentChunking] Chunk processed: {
  chunkIndex: 14,
  answersFound: 1,
  timestamp: '2025-03-18T03:52:44.268Z'
}
[Document Processing] Chunk processing error: {
  fileId: 395,
  chunkIndex: 14,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T03:52:44.328Z'
}
[Document Processing] Processing chunk: {
  fileId: 395,
  chunkIndex: 15,
  progress: '16/17',
  timestamp: '2025-03-18T03:52:44.329Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 15,
  contentLength: 4074,
  fieldsCount: 1,
  timestamp: '2025-03-18T03:52:44.329Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4074,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T03:52:44.329Z'
}
[OpenAI Service] Sending request: { promptLength: 4874, timestamp: '2025-03-18T03:52:44.329Z' }
[2025-03-18T03:52:44.780Z] New client connected to the pool
[Auth] Deserializing user: 150
3:52:44 AM [info] GET /api/documents/395/progress 304 in 60ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 1228,
  fieldsAnswered: [ 'all' ],
  timestamp: '2025-03-18T03:52:45.557Z'
}
[DocumentChunking] Chunk processed: {
  chunkIndex: 15,
  answersFound: 1,
  timestamp: '2025-03-18T03:52:45.589Z'
}
[Document Processing] Chunk processing error: {
  fileId: 395,
  chunkIndex: 15,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T03:52:45.647Z'
}
[Document Processing] Processing chunk: {
  fileId: 395,
  chunkIndex: 16,
  progress: '17/17',
  timestamp: '2025-03-18T03:52:45.647Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 16,
  contentLength: 114,
  fieldsCount: 1,
  timestamp: '2025-03-18T03:52:45.647Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 114,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T03:52:45.647Z'
}
[OpenAI Service] Sending request: { promptLength: 914, timestamp: '2025-03-18T03:52:45.648Z' }
[2025-03-18T03:52:46.091Z] New client connected to the pool
[Auth] Deserializing user: 150
3:52:46 AM [info] GET /api/documents/395/progress 304 in 61ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 588,
  fieldsAnswered: [ 'all' ],
  timestamp: '2025-03-18T03:52:46.235Z'
}
[DocumentChunking] Chunk processed: {
  chunkIndex: 16,
  answersFound: 1,
  timestamp: '2025-03-18T03:52:46.265Z'
}
[Document Processing] Chunk processing error: {
  fileId: 395,
  chunkIndex: 16,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T03:52:46.325Z'
}
[2025-03-18T03:52:46.411Z] New client connected to the pool
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
3:52:47 AM [info] GET /api/companies/current 304 in 59ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Auth] Deserializing user: 150
[2025-03-18T03:52:47.395Z] New client connected to the pool
3:52:47 AM [info] GET /api/documents/395/progress 200 in 59ms :: {"status":"processed","progress":{"chunksProcessed":0,"totalChunks":1},"answe...
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Auth] Deserializing user: 150
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
3:52:47 AM [info] GET /api/tasks 304 in 89ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Document Processing] Creating chunks for file: {
  fileId: 396,
  fileName: 'Anonymised-BlackBox-Penetration-Testing-Report.pdf',
  mimeType: 'application/pdf',
  timestamp: '2025-03-18T03:52:47.556Z'
}
[DocumentChunking] Starting document chunking: {
  filePath: '/home/runner/workspace/uploads/documents/20250318035209.pdf',
  mimeType: 'application/pdf',
  chunkSize: 4000,
  timestamp: '2025-03-18T03:52:47.557Z'
}
[PDF Service] Extraction complete: {
  fileName: '20250318035209.pdf',
  totalPages: 60,
  extractedPages: 60,
  totalContent: 72286,
  averageContentPerPage: 1205,
  invalidContentItems: 497,
  timestamp: '2025-03-18T03:52:48.492Z'
}
[DocumentChunking] Content extracted: {
  contentLength: 64000,
  mimeType: 'application/pdf',
  timestamp: '2025-03-18T03:52:48.492Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 0,
  chunkSize: 3906,
  startsWithWord: 'Penetration Testing ',
  endsWithWord: 'Solidity based code.',
  timestamp: '2025-03-18T03:52:48.492Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 1,
  chunkSize: 3978,
  startsWithWord: 'More details about f',
  endsWithWord: 'pany Web application',
  timestamp: '2025-03-18T03:52:48.492Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 2,
  chunkSize: 4000,
  startsWithWord: 'High-Level Recommend',
  endsWithWord: 'An administrator use',
  timestamp: '2025-03-18T03:52:48.492Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 3,
  chunkSize: 3980,
  startsWithWord: 's a weak and guessab',
  endsWithWord: 'e “ aaaaaaaa ” page.',
  timestamp: '2025-03-18T03:52:48.492Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 4,
  chunkSize: 4000,
  startsWithWord: 'The scenario for thi',
  endsWithWord: 'AAAAAAAAAAAAAAAAAAAA',
  timestamp: '2025-03-18T03:52:48.492Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 5,
  chunkSize: 4000,
  startsWithWord: 'AAAAAAAAAAAAAA AAAAA',
  endsWithWord: 'ime_sec: AAAAAA aof_',
  timestamp: '2025-03-18T03:52:48.492Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 6,
  chunkSize: 3929,
  startsWithWord: 'current_rewrite_time',
  endsWithWord: 'pany Web application',
  timestamp: '2025-03-18T03:52:48.493Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 7,
  chunkSize: 3945,
  startsWithWord: 'PROOF OF VULNERABILI',
  endsWithWord: 'emplate expressions.',
  timestamp: '2025-03-18T03:52:48.493Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 8,
  chunkSize: 4000,
  startsWithWord: 'For more detailed in',
  endsWithWord: 'set on a cookie, the',
  timestamp: '2025-03-18T03:52:48.493Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 9,
  chunkSize: 4059,
  startsWithWord: 'n browsers will not ',
  endsWithWord: 'n client and server.',
  timestamp: '2025-03-18T03:52:48.493Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 10,
  chunkSize: 4000,
  startsWithWord: 'UnderDefense LLC Pag',
  endsWithWord: 'aaaaaaaaAaaaaaaaaaaa',
  timestamp: '2025-03-18T03:52:48.493Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 11,
  chunkSize: 3953,
  startsWithWord: 'AaaaaaaaaaaaAaaaaaaa',
  endsWithWord: 'ent to prevent this.',
  timestamp: '2025-03-18T03:52:48.493Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 12,
  chunkSize: 4049,
  startsWithWord: 'An attacker situated',
  endsWithWord: 'pany Web application',
  timestamp: '2025-03-18T03:52:48.493Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 13,
  chunkSize: 4000,
  startsWithWord: 'APPENDIX A. Performe',
  endsWithWord: 'ad of Malicious File',
  timestamp: '2025-03-18T03:52:48.493Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 14,
  chunkSize: 3999,
  startsWithWord: 's SAFE Client Side T',
  endsWithWord: 'aaaaaaaaaa Contract:',
  timestamp: '2025-03-18T03:52:48.493Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 15,
  chunkSize: 4074,
  startsWithWord: 'aaaaaaaaaaaaaaaa Fun',
  endsWithWord: 'pany Web application',
  timestamp: '2025-03-18T03:52:48.493Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 16,
  chunkSize: 114,
  startsWithWord: 'aaaaaaaaaaaaaaaa ---',
  endsWithWord: 'ct: aaaaaaaaaaaaaaaa',
  timestamp: '2025-03-18T03:52:48.493Z'
}
[DocumentChunking] Chunks created: {
  totalChunks: 17,
  averageChunkSize: 3763.8823529411766,
  timestamp: '2025-03-18T03:52:48.493Z'
}
[Document Processing] Processing chunk: {
  fileId: 396,
  chunkIndex: 0,
  progress: '1/17',
  timestamp: '2025-03-18T03:52:48.532Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 0,
  contentLength: 3906,
  fieldsCount: 1,
  timestamp: '2025-03-18T03:52:48.532Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3906,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T03:52:48.532Z'
}
[OpenAI Service] Sending request: { promptLength: 4706, timestamp: '2025-03-18T03:52:48.532Z' }
3:52:48 AM [info] POST /api/documents/396/process 200 in 1036ms :: {"status":"processing","totalChunks":17}
[Auth] Deserializing user: 150
3:52:48 AM [info] GET /api/documents/396/progress 200 in 60ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
3:52:49 AM [info] GET /api/documents/396/progress 304 in 58ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 3,
  duration: 2042,
  fieldsAnswered: [ 'all', 'all', 'all' ],
  timestamp: '2025-03-18T03:52:50.574Z'
}
[DocumentChunking] Chunk processed: {
  chunkIndex: 0,
  answersFound: 3,
  timestamp: '2025-03-18T03:52:50.606Z'
}
[Document Processing] Processing chunk: {
  fileId: 396,
  chunkIndex: 1,
  progress: '2/17',
  timestamp: '2025-03-18T03:52:50.706Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 1,
  contentLength: 3978,
  fieldsCount: 1,
  timestamp: '2025-03-18T03:52:50.706Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3978,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T03:52:50.706Z'
}
[OpenAI Service] Sending request: { promptLength: 4778, timestamp: '2025-03-18T03:52:50.707Z' }
[Auth] Deserializing user: 150
3:52:51 AM [info] GET /api/documents/396/progress 304 in 58ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
[Auth] Deserializing user: 150
3:52:52 AM [info] GET /api/documents/396/progress 304 in 60ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
3:52:52 AM [info] GET /api/companies/current 304 in 58ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }