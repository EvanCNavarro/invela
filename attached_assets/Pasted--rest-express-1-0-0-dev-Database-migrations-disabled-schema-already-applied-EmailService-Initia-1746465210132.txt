> rest-express@1.0.0 dev
Database migrations disabled - schema already applied
[EmailService] Initializing email service
[EmailService] Email service initialized successfully
[OpenAI] Service initialized with API key: API key is set
Database module not found, creating a mock implementation
Database module not found, creating a mock implementation
[Auth] Setting up authentication...
[Auth] Setting up PostgreSQL session store
[Auth] PostgreSQL session store initialized successfully
[Auth] Authentication setup completed
[2025-05-05T17:04:39.939Z] [INFO] [KY3P-BATCH-UPDATE] Registering KY3P batch update routes
[2025-05-05T17:04:39.939Z] [INFO] Registering KY3P batch update routes
[2025-05-05T17:04:39.939Z] [INFO] [UnifiedKY3P] Registering unified KY3P update routes
[Routes] Registered KY3P field key router
[Routes] Registered KY3P field key router
[2025-05-05T17:04:39.940Z] [INFO] Registering KY3P field update routes
[2025-05-05T17:04:39.941Z] [INFO] [OpenBankingRoutes] Setting up routes...
[Routes] Setting up unified form submission router
[Routes] Successfully registered unified form submission router
[Routes] Setting up transactional form submission router
[Routes] Successfully registered transactional form submission router
[Routes] Routes setup completed
[INFO] Unified WebSocket server initialized successfully with details: {
  clients: 0,
  path: '/ws',
  id: 'chsimz',
  timestamp: '2025-05-05T17:04:39.943Z'
}
5:04:39 PM [info] [ServerStartup] WebSocket server initialized with unified implementation
[2025-05-05T17:04:39.959Z] [INFO] [TaskWebSocket] WebSocket server registered with unified implementation
5:04:39 PM [info] [ServerStartup] WebSocket server registered with task-update utility
[TaskBroadcast] WebSocket server reference set up
[TaskBroadcast] WebSocket server active with 0 connected clients
5:04:39 PM [info] [ServerStartup] WebSocket server registered with task-broadcast utility
5:04:39 PM [info] Setting up Vite development server
[ENV] Using PORT=5000 from environment (override: yes)
[ENV] Environment=development (production: no)
5:04:39 PM [express] Server running on 0.0.0.0:5000
5:04:39 PM [express] Environment: development
[Deployment] Server running on 0.0.0.0:5000
[Deployment] Environment: development
[Deployment] Port forwarding: Custom port: 5000
[Deployment] Development mode: Hot reloading enabled
5:04:39 PM [express] Starting periodic task reconciliation system...
[PeriodicTaskReconciliation] Stopped periodic reconciliation system
[PeriodicTaskReconciliation] Starting periodic reconciliation system (interval: 300000ms)
5:04:39 PM [express] Task reconciliation system initialized successfully
[INFO] [WebSocket] Client connected: client-1746464680010-tjzep2q
[INFO] [WebSocket] Received message from client client-1746464680010-tjzep2q: {
  type: 'authenticate',
  userId: null,
  companyId: null,
  clientId: 'ws_1746463878682_xchej8n7j',
  timestamp: '2025-05-05T17:04:40.008Z'
}
[INFO] [WebSocket] Authentication from client client-1746464680010-tjzep2q: { userId: null, companyId: null, hasToken: true }
5:04:41 PM [info] [ServerStartup] WebSocket server active with 1 connected clients
[2025-05-05T17:04:41.376Z] New client connected to the pool (1/3)
[INFO] [WebSocket] Client connected: client-1746464683856-zc5pfkk
[Current Company] Fetching company for user: { userId: 311, companyId: 268 }
[Current Company] Found company: {
  id: 268,
  name: 'DevTest13',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
[INFO] [WebSocket] Client connected: client-1746464684734-7188fh6
5:04:44 PM [info] GET /api/companies/current 200 in 507ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746464684734-7188fh6: {
  type: 'authenticate',
  data: { timestamp: '2025-05-05T17:04:44.737Z' }
}
[INFO] [WebSocket] Authentication from client client-1746464684734-7188fh6: { userId: undefined, companyId: undefined, hasToken: true }
5:04:45 PM [info] GET /api/companies/current 304 in 100ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Client connected: client-1746464686015-gcan2qc
[Auth] Unauthenticated user session
[INFO] [WebSocket] Received message from client client-1746464686015-gcan2qc: {
  type: 'authenticate',
  data: { timestamp: '2025-05-05T17:04:46.149Z' }
}
[INFO] [WebSocket] Authentication from client client-1746464686015-gcan2qc: { userId: undefined, companyId: undefined, hasToken: false }
5:04:46 PM [info] GET /api/companies/current 304 in 38ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Client disconnected: client-1746464686015-gcan2qc
5:04:49 PM [info] GET /api/companies/current 304 in 33ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:04:52 PM [info] GET /api/companies/current 304 in 38ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:04:55 PM [info] GET /api/companies/current 304 in 33ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:04:58 PM [info] GET /api/companies/current 304 in 32ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746464683856-zc5pfkk: {
  type: 'ping',
  timestamp: '2025-05-05T17:05:04.308Z',
  connectionId: 'ws_1746464681314_gpgdb51wf'
}
[PeriodicTaskReconciliation] Reconciling batch of 10 tasks: [
  685, 679, 699, 691,
  697, 703, 702, 705,
  701, 710
]
[Task Progress] Calculated progress for task 685 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 679 (open_banking): 44/44 = 100%
[Task Progress] Calculated progress for task 699 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 691 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 697 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 703 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 702 (ky3p): 0/0 = 0%
[Task Progress] Calculated progress for task 705 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 701 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 710 (ky3p): 0/120 = 0%
[INFO] [WebSocket] Received message from client client-1746464684734-7188fh6: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746464683856-zc5pfkk: {
  type: 'ping',
  timestamp: '2025-05-05T17:05:24.306Z',
  connectionId: 'ws_1746464681314_gpgdb51wf'
}
[INFO] [WebSocket] Received message from client client-1746464683856-zc5pfkk: {
  type: 'ping',
  timestamp: '2025-05-05T17:05:44.307Z',
  connectionId: 'ws_1746464681314_gpgdb51wf'
}
[INFO] [WebSocket] Received message from client client-1746464684734-7188fh6: { type: 'ping' }
[Current Company] Fetching company for user: { userId: 311, companyId: 268 }
[Current Company] Found company: {
  id: 268,
  name: 'DevTest13',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
5:05:52 PM [info] GET /api/companies/current 304 in 69ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746464683856-zc5pfkk: {
  type: 'ping',
  timestamp: '2025-05-05T17:06:04.307Z',
  connectionId: 'ws_1746464681314_gpgdb51wf'
}
[INFO] [WebSocket] Received message from client client-1746464684734-7188fh6: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746464680010-tjzep2q: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746464684734-7188fh6: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746464683856-zc5pfkk: {
  type: 'ping',
  timestamp: '2025-05-05T17:06:52.308Z',
  connectionId: 'ws_1746464681314_gpgdb51wf'
}
[Current Company] Fetching company for user: { userId: 311, companyId: 268 }
[Current Company] Found company: {
  id: 268,
  name: 'DevTest13',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
5:06:52 PM [info] GET /api/companies/current 304 in 62ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:07:01 PM [info] GET /api/companies/current 304 in 34ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-05T17:07:01.832Z] New client connected to the pool (2/3)
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 311, company_id: 268, email: '13@e.com' }
[2025-05-05T17:07:01.877Z] [INFO] Performing dynamic task unlocking check for company {"companyId":268,"userId":311}
[2025-05-05T17:07:01.906Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":268}
[Tasks] Automatically unlocking all tasks for company { userId: 311, companyId: 268, requestedBy: 'automatic_task_unlock' }
[2025-05-05T17:07:01.907Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":268}
[2025-05-05T17:07:01.944Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":268,"count":3,"taskIds":[742,744,743],"taskTypes":["company_kyb","open_banking","ky3p"],"ky3pTaskCount":1,"ky3pTaskIds":[743]}
[2025-05-05T17:07:01.974Z] [INFO] [UnifiedProgressCalc] Preserving existing progress for task 742 (company_kyb): 100% {"taskId":742,"taskType":"company_kyb","existingProgress":100,"operation":"preserve-existing"}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: true,
  timestamp: '2025-05-05T17:07:02.009Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
5:07:02 PM [info] GET /api/companies/current 304 in 54ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-05T17:07:02.088Z] [INFO] [ProgressUpdate] Updated task 742 progress to 100% and status to ready_for_submission {"taskId":742,"taskType":"company_kyb","progress":100,"status":"ready_for_submission","previousStatus":"ready_for_submission"}
[2025-05-05T17:07:02.089Z] [INFO] Successfully retrieved unified WebSocket server for broadcast
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746464822089_s7293yght' }
[2025-05-05T17:07:02.090Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:07:02.090Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 742 {"taskId":742,"progress":100,"status":"ready_for_submission"}
[2025-05-05T17:07:02.090Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":742,"taskType":"company_kyb","isKy3pTask":false,"calculatedProgress":100,"previousProgress":100,"wasPreserved":true}
[2025-05-05T17:07:02.124Z] [INFO] [UnifiedProgressCalc] Preserving existing progress for task 744 (open_banking): 14% {"taskId":744,"taskType":"open_banking","existingProgress":14,"operation":"preserve-existing"}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 14,
  currentStatus: 'in_progress',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: true,
  timestamp: '2025-05-05T17:07:02.153Z'
}
[STATUS DETERMINATION] Task has partial progress or responses, setting to IN_PROGRESS
[2025-05-05T17:07:02.187Z] [INFO] [ProgressUpdate] Updated task 744 progress to 14% and status to in_progress {"taskId":744,"taskType":"open_banking","progress":14,"status":"in_progress","previousStatus":"in_progress"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746464822188_02dwo5ygo' }
[2025-05-05T17:07:02.188Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:07:02.188Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 744 {"taskId":744,"progress":14,"status":"in_progress"}
[2025-05-05T17:07:02.188Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":744,"taskType":"open_banking","isKy3pTask":false,"calculatedProgress":14,"previousProgress":14,"wasPreserved":true}
[2025-05-05T17:07:02.188Z] [INFO] [TaskDependencies] Processing KY3P task {"taskId":743,"taskType":"ky3p","currentProgress":0,"currentStatus":"not_started","timestamp":"2025-05-05T17:07:02.188Z"}
[2025-05-05T17:07:02.287Z] [INFO] [UnifiedProgressCalc] Calculated progress for task 743 (ky3p): 0/120 = 0% {"taskId":743,"taskType":"ky3p","totalFields":120,"completedFields":"0","progress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: false,
  timestamp: '2025-05-05T17:07:02.321Z'
}
[STATUS DETERMINATION] Task has 0% progress and no responses, setting to NOT_STARTED
[2025-05-05T17:07:02.357Z] [INFO] [ProgressUpdate] Updated task 743 progress to 0% and status to not_started {"taskId":743,"taskType":"ky3p","progress":0,"status":"not_started","previousStatus":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746464822358_3alqqoxjc' }
[2025-05-05T17:07:02.358Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:07:02.358Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 743 {"taskId":743,"progress":0,"status":"not_started"}
[2025-05-05T17:07:02.358Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":743,"taskType":"ky3p","isKy3pTask":true,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[2025-05-05T17:07:02.359Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":268,"count":3}
[Tasks] Successfully unlocked all tasks for company: 268
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 311',
    condition2: 'tasks.created_by = 311',
    condition3: "tasks.company_id = 268 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('13@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
5:07:02 PM [info] GET /api/tasks 200 in 601ms :: [{"id":742,"title":"1. KYB Form: DevTest13","description":"Complete KYB verif...
[INFO] [WebSocket] Received message from client client-1746464683856-zc5pfkk: {
  type: 'ping',
  timestamp: '2025-05-05T17:07:03.853Z',
  connectionId: 'ws_1746464681314_gpgdb51wf'
}
5:07:04 PM [info] GET /api/companies/current 304 in 47ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Client disconnected: client-1746464683856-zc5pfkk
[INFO] [WebSocket] Client disconnected: client-1746464680010-tjzep2q
[INFO] [WebSocket] Client disconnected: client-1746464684734-7188fh6
[2025-05-05T17:07:06.834Z] New client connected to the pool (3/3)
[Auth] Returning user session data
5:07:16 PM [info] GET /api/tasks 304 in 31ms :: [{"id":742,"title":"1. KYB Form: DevTest13","description":"Complete KYB verif...
5:07:16 PM [info] GET /api/companies/current 304 in 42ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Client connected: client-1746464836233-u7jx6ia
5:07:16 PM [info] GET /api/tasks 304 in 36ms :: [{"id":742,"title":"1. KYB Form: DevTest13","description":"Complete KYB verif...
[INFO] [WebSocket] Received message from client client-1746464836233-u7jx6ia: {
  type: 'authenticate',
  data: { timestamp: '2025-05-05T17:07:16.232Z' }
}
[INFO] [WebSocket] Authentication from client client-1746464836233-u7jx6ia: { userId: undefined, companyId: undefined, hasToken: true }
[INFO] [WebSocket] Client connected: client-1746464836727-hx036z7
[INFO] [WebSocket] Received message from client client-1746464836727-hx036z7: {
  type: 'authenticate',
  userId: null,
  companyId: null,
  clientId: 'ws_1746464835694_mzek301q4',
  timestamp: '2025-05-05T17:07:16.724Z'
}
[INFO] [WebSocket] Authentication from client client-1746464836727-hx036z7: { userId: null, companyId: null, hasToken: true }
[INFO] [WebSocket] Client connected: client-1746464837263-5dhl8nu
[Auth] Returning user session data
5:07:17 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746464837263-5dhl8nu: {
  type: 'authenticate',
  userId: 311,
  companyId: 268,
  clientId: 'ws_1746464836753_ldbcfsj4w',
  timestamp: '2025-05-05T17:07:17.639Z'
}
[INFO] [WebSocket] Authentication from client client-1746464837263-5dhl8nu: { userId: 311, companyId: 268, hasToken: true }
5:07:19 PM [info] GET /api/companies/current 304 in 32ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:07:22 PM [info] GET /api/companies/current 304 in 29ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:07:25 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:07:28 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:07:31 PM [info] GET /api/tasks 304 in 45ms :: [{"id":742,"title":"1. KYB Form: DevTest13","description":"Complete KYB verif...
5:07:31 PM [info] GET /api/companies/current 304 in 39ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Using cached company data: 268
5:07:34 PM [info] GET /api/companies/current 304 in 37ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:07:37 PM [info] GET /api/companies/current 304 in 31ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746464837263-5dhl8nu: {
  type: 'ping',
  timestamp: '2025-05-05T17:07:37.272Z',
  connectionId: 'ws_1746464836753_ldbcfsj4w'
}
5:07:40 PM [info] GET /api/companies/current 304 in 31ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:07:43 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746464836233-u7jx6ia: { type: 'ping' }
5:07:46 PM [info] GET /api/companies/current 304 in 32ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 311, company_id: 268, email: '13@e.com' }
[2025-05-05T17:07:46.604Z] [INFO] Performing dynamic task unlocking check for company {"companyId":268,"userId":311}
[2025-05-05T17:07:46.637Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":268}
[Tasks] Automatically unlocking all tasks for company { userId: 311, companyId: 268, requestedBy: 'automatic_task_unlock' }
[2025-05-05T17:07:46.638Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":268}
[2025-05-05T17:07:46.681Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":268,"count":3,"taskIds":[742,744,743],"taskTypes":["company_kyb","open_banking","ky3p"],"ky3pTaskCount":1,"ky3pTaskIds":[743]}
[2025-05-05T17:07:46.717Z] [INFO] [UnifiedProgressCalc] Preserving existing progress for task 742 (company_kyb): 100% {"taskId":742,"taskType":"company_kyb","existingProgress":100,"operation":"preserve-existing"}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: true,
  timestamp: '2025-05-05T17:07:46.746Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-05T17:07:46.778Z] [INFO] [ProgressUpdate] Updated task 742 progress to 100% and status to ready_for_submission {"taskId":742,"taskType":"company_kyb","progress":100,"status":"ready_for_submission","previousStatus":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746464866779_kebc25o6i' }
[2025-05-05T17:07:46.779Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:07:46.780Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 742 {"taskId":742,"progress":100,"status":"ready_for_submission"}
[2025-05-05T17:07:46.780Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":742,"taskType":"company_kyb","isKy3pTask":false,"calculatedProgress":100,"previousProgress":100,"wasPreserved":true}
[2025-05-05T17:07:46.812Z] [INFO] [UnifiedProgressCalc] Preserving existing progress for task 744 (open_banking): 14% {"taskId":744,"taskType":"open_banking","existingProgress":14,"operation":"preserve-existing"}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 14,
  currentStatus: 'in_progress',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: true,
  timestamp: '2025-05-05T17:07:46.851Z'
}
[STATUS DETERMINATION] Task has partial progress or responses, setting to IN_PROGRESS
[2025-05-05T17:07:46.889Z] [INFO] [ProgressUpdate] Updated task 744 progress to 14% and status to in_progress {"taskId":744,"taskType":"open_banking","progress":14,"status":"in_progress","previousStatus":"in_progress"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746464866890_d1g6901ef' }
[2025-05-05T17:07:46.890Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:07:46.890Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 744 {"taskId":744,"progress":14,"status":"in_progress"}
[2025-05-05T17:07:46.890Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":744,"taskType":"open_banking","isKy3pTask":false,"calculatedProgress":14,"previousProgress":14,"wasPreserved":true}
[2025-05-05T17:07:46.890Z] [INFO] [TaskDependencies] Processing KY3P task {"taskId":743,"taskType":"ky3p","currentProgress":0,"currentStatus":"not_started","timestamp":"2025-05-05T17:07:46.890Z"}
[2025-05-05T17:07:46.984Z] [INFO] [UnifiedProgressCalc] Calculated progress for task 743 (ky3p): 0/120 = 0% {"taskId":743,"taskType":"ky3p","totalFields":120,"completedFields":"0","progress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: false,
  timestamp: '2025-05-05T17:07:47.025Z'
}
[STATUS DETERMINATION] Task has 0% progress and no responses, setting to NOT_STARTED
[2025-05-05T17:07:47.063Z] [INFO] [ProgressUpdate] Updated task 743 progress to 0% and status to not_started {"taskId":743,"taskType":"ky3p","progress":0,"status":"not_started","previousStatus":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746464867064_g57cifpq7' }
[2025-05-05T17:07:47.064Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:07:47.064Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 743 {"taskId":743,"progress":0,"status":"not_started"}
[2025-05-05T17:07:47.064Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":743,"taskType":"ky3p","isKy3pTask":true,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[2025-05-05T17:07:47.064Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":268,"count":3}
[Tasks] Successfully unlocked all tasks for company: 268
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 311',
    condition2: 'tasks.created_by = 311',
    condition3: "tasks.company_id = 268 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('13@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
5:07:47 PM [info] GET /api/tasks 200 in 562ms :: [{"id":742,"title":"1. KYB Form: DevTest13","description":"Complete KYB verif...
5:07:49 PM [info] GET /api/companies/current 304 in 38ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:07:52 PM [info] GET /api/companies/current 304 in 34ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Fetching company for user: { userId: 311, companyId: 268 }
[Current Company] Found company: {
  id: 268,
  name: 'DevTest13',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
5:07:55 PM [info] GET /api/companies/current 304 in 68ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746464837263-5dhl8nu: {
  type: 'ping',
  timestamp: '2025-05-05T17:07:57.271Z',
  connectionId: 'ws_1746464836753_ldbcfsj4w'
}
5:07:58 PM [info] GET /api/companies/current 304 in 29ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:08:01 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:08:02 PM [info] GET /api/tasks 304 in 30ms :: [{"id":742,"title":"1. KYB Form: DevTest13","description":"Complete KYB verif...
5:08:04 PM [info] GET /api/companies/current 304 in 31ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:08:07 PM [info] GET /api/companies/current 304 in 33ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:08:10 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:08:13 PM [info] GET /api/companies/current 304 in 32ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746464836233-u7jx6ia: { type: 'ping' }
5:08:16 PM [info] GET /api/companies/current 304 in 38ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746464837263-5dhl8nu: {
  type: 'ping',
  timestamp: '2025-05-05T17:08:17.272Z',
  connectionId: 'ws_1746464836753_ldbcfsj4w'
}
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 311, company_id: 268, email: '13@e.com' }
[2025-05-05T17:08:17.531Z] [INFO] Performing dynamic task unlocking check for company {"companyId":268,"userId":311}
[2025-05-05T17:08:17.560Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":268}
[Tasks] Automatically unlocking all tasks for company { userId: 311, companyId: 268, requestedBy: 'automatic_task_unlock' }
[2025-05-05T17:08:17.561Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":268}
[2025-05-05T17:08:17.589Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":268,"count":3,"taskIds":[742,744,743],"taskTypes":["company_kyb","open_banking","ky3p"],"ky3pTaskCount":1,"ky3pTaskIds":[743]}
[2025-05-05T17:08:17.617Z] [INFO] [UnifiedProgressCalc] Preserving existing progress for task 742 (company_kyb): 100% {"taskId":742,"taskType":"company_kyb","existingProgress":100,"operation":"preserve-existing"}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: true,
  timestamp: '2025-05-05T17:08:17.647Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-05T17:08:17.676Z] [INFO] [ProgressUpdate] Updated task 742 progress to 100% and status to ready_for_submission {"taskId":742,"taskType":"company_kyb","progress":100,"status":"ready_for_submission","previousStatus":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746464897677_9klfdhyt0' }
[2025-05-05T17:08:17.677Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:08:17.677Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 742 {"taskId":742,"progress":100,"status":"ready_for_submission"}
[2025-05-05T17:08:17.677Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":742,"taskType":"company_kyb","isKy3pTask":false,"calculatedProgress":100,"previousProgress":100,"wasPreserved":true}
[2025-05-05T17:08:17.705Z] [INFO] [UnifiedProgressCalc] Preserving existing progress for task 744 (open_banking): 14% {"taskId":744,"taskType":"open_banking","existingProgress":14,"operation":"preserve-existing"}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 14,
  currentStatus: 'in_progress',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: true,
  timestamp: '2025-05-05T17:08:17.735Z'
}
[STATUS DETERMINATION] Task has partial progress or responses, setting to IN_PROGRESS
[2025-05-05T17:08:17.764Z] [INFO] [ProgressUpdate] Updated task 744 progress to 14% and status to in_progress {"taskId":744,"taskType":"open_banking","progress":14,"status":"in_progress","previousStatus":"in_progress"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746464897765_0wq1vihhf' }
[2025-05-05T17:08:17.765Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:08:17.765Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 744 {"taskId":744,"progress":14,"status":"in_progress"}
[2025-05-05T17:08:17.765Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":744,"taskType":"open_banking","isKy3pTask":false,"calculatedProgress":14,"previousProgress":14,"wasPreserved":true}
[2025-05-05T17:08:17.765Z] [INFO] [TaskDependencies] Processing KY3P task {"taskId":743,"taskType":"ky3p","currentProgress":0,"currentStatus":"not_started","timestamp":"2025-05-05T17:08:17.765Z"}
[2025-05-05T17:08:17.851Z] [INFO] [UnifiedProgressCalc] Calculated progress for task 743 (ky3p): 0/120 = 0% {"taskId":743,"taskType":"ky3p","totalFields":120,"completedFields":"0","progress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: false,
  timestamp: '2025-05-05T17:08:17.880Z'
}
[STATUS DETERMINATION] Task has 0% progress and no responses, setting to NOT_STARTED
[2025-05-05T17:08:17.912Z] [INFO] [ProgressUpdate] Updated task 743 progress to 0% and status to not_started {"taskId":743,"taskType":"ky3p","progress":0,"status":"not_started","previousStatus":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746464897912_fwb6ehv4f' }
[2025-05-05T17:08:17.913Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:08:17.913Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 743 {"taskId":743,"progress":0,"status":"not_started"}
[2025-05-05T17:08:17.913Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":743,"taskType":"ky3p","isKy3pTask":true,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[2025-05-05T17:08:17.913Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":268,"count":3}
[Tasks] Successfully unlocked all tasks for company: 268
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 311',
    condition2: 'tasks.created_by = 311',
    condition3: "tasks.company_id = 268 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('13@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
5:08:18 PM [info] GET /api/tasks 200 in 471ms :: [{"id":742,"title":"1. KYB Form: DevTest13","description":"Complete KYB verif...
5:08:19 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:08:22 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:08:25 PM [info] GET /api/companies/current 304 in 29ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:08:28 PM [info] GET /api/companies/current 304 in 31ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:08:31 PM [info] GET /api/companies/current 304 in 29ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:08:33 PM [info] GET /api/tasks 304 in 30ms :: [{"id":742,"title":"1. KYB Form: DevTest13","description":"Complete KYB verif...
5:08:34 PM [info] GET /api/companies/current 304 in 29ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Using cached company data: 268
5:08:37 PM [info] GET /api/companies/current 304 in 31ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746464837263-5dhl8nu: {
  type: 'ping',
  timestamp: '2025-05-05T17:08:37.272Z',
  connectionId: 'ws_1746464836753_ldbcfsj4w'
}
5:08:40 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:08:40 PM [vite] hmr update /src/App.tsx?v=MJaY_EXMWDvKdUVOqo35H, /src/index.css?v=MJaY_EXMWDvKdUVOqo35H
5:08:43 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746464836233-u7jx6ia: { type: 'ping' }
5:08:46 PM [info] GET /api/companies/current 304 in 53ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 311, company_id: 268, email: '13@e.com' }
[2025-05-05T17:08:48.362Z] [INFO] Performing dynamic task unlocking check for company {"companyId":268,"userId":311}
[2025-05-05T17:08:48.398Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":268}
[Tasks] Automatically unlocking all tasks for company { userId: 311, companyId: 268, requestedBy: 'automatic_task_unlock' }
[2025-05-05T17:08:48.399Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":268}
[2025-05-05T17:08:48.438Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":268,"count":3,"taskIds":[742,744,743],"taskTypes":["company_kyb","open_banking","ky3p"],"ky3pTaskCount":1,"ky3pTaskIds":[743]}
[2025-05-05T17:08:48.468Z] [INFO] [UnifiedProgressCalc] Preserving existing progress for task 742 (company_kyb): 100% {"taskId":742,"taskType":"company_kyb","existingProgress":100,"operation":"preserve-existing"}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: true,
  timestamp: '2025-05-05T17:08:48.503Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-05T17:08:48.535Z] [INFO] [ProgressUpdate] Updated task 742 progress to 100% and status to ready_for_submission {"taskId":742,"taskType":"company_kyb","progress":100,"status":"ready_for_submission","previousStatus":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746464928535_ttvzctez3' }
[2025-05-05T17:08:48.536Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:08:48.536Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 742 {"taskId":742,"progress":100,"status":"ready_for_submission"}
[2025-05-05T17:08:48.536Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":742,"taskType":"company_kyb","isKy3pTask":false,"calculatedProgress":100,"previousProgress":100,"wasPreserved":true}
[2025-05-05T17:08:48.570Z] [INFO] [UnifiedProgressCalc] Preserving existing progress for task 744 (open_banking): 14% {"taskId":744,"taskType":"open_banking","existingProgress":14,"operation":"preserve-existing"}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 14,
  currentStatus: 'in_progress',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: true,
  timestamp: '2025-05-05T17:08:48.600Z'
}
[STATUS DETERMINATION] Task has partial progress or responses, setting to IN_PROGRESS
[2025-05-05T17:08:48.633Z] [INFO] [ProgressUpdate] Updated task 744 progress to 14% and status to in_progress {"taskId":744,"taskType":"open_banking","progress":14,"status":"in_progress","previousStatus":"in_progress"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746464928633_o5mu8sm7j' }
[2025-05-05T17:08:48.634Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:08:48.634Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 744 {"taskId":744,"progress":14,"status":"in_progress"}
[2025-05-05T17:08:48.634Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":744,"taskType":"open_banking","isKy3pTask":false,"calculatedProgress":14,"previousProgress":14,"wasPreserved":true}
[2025-05-05T17:08:48.634Z] [INFO] [TaskDependencies] Processing KY3P task {"taskId":743,"taskType":"ky3p","currentProgress":0,"currentStatus":"not_started","timestamp":"2025-05-05T17:08:48.634Z"}
[2025-05-05T17:08:48.742Z] [INFO] [UnifiedProgressCalc] Calculated progress for task 743 (ky3p): 0/120 = 0% {"taskId":743,"taskType":"ky3p","totalFields":120,"completedFields":"0","progress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: false,
  timestamp: '2025-05-05T17:08:48.779Z'
}
[STATUS DETERMINATION] Task has 0% progress and no responses, setting to NOT_STARTED
[2025-05-05T17:08:48.822Z] [INFO] [ProgressUpdate] Updated task 743 progress to 0% and status to not_started {"taskId":743,"taskType":"ky3p","progress":0,"status":"not_started","previousStatus":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746464928823_b2mqj2fq6' }
[2025-05-05T17:08:48.823Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:08:48.823Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 743 {"taskId":743,"progress":0,"status":"not_started"}
[2025-05-05T17:08:48.823Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":743,"taskType":"ky3p","isKy3pTask":true,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[2025-05-05T17:08:48.823Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":268,"count":3}
[Tasks] Successfully unlocked all tasks for company: 268
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 311',
    condition2: 'tasks.created_by = 311',
    condition3: "tasks.company_id = 268 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('13@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
5:08:48 PM [info] GET /api/tasks 200 in 580ms :: [{"id":742,"title":"1. KYB Form: DevTest13","description":"Complete KYB verif...
5:08:49 PM [info] GET /api/companies/current 304 in 33ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:08:52 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:08:52 PM [vite] hmr update /src/App.tsx?v=MJaY_EXMWDvKdUVOqo35H, /src/index.css?v=MJaY_EXMWDvKdUVOqo35H (x2)
[Current Company] Fetching company for user: { userId: 311, companyId: 268 }
[Current Company] Found company: {
  id: 268,
  name: 'DevTest13',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
5:08:55 PM [info] GET /api/companies/current 304 in 61ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746464837263-5dhl8nu: {
  type: 'ping',
  timestamp: '2025-05-05T17:08:57.272Z',
  connectionId: 'ws_1746464836753_ldbcfsj4w'
}
5:08:58 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:09:01 PM [info] GET /api/companies/current 304 in 41ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:09:04 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:09:04 PM [info] GET /api/tasks 304 in 30ms :: [{"id":742,"title":"1. KYB Form: DevTest13","description":"Complete KYB verif...
5:09:07 PM [info] GET /api/companies/current 304 in 33ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:09:10 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:09:13 PM [info] GET /api/companies/current 304 in 34ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746464836233-u7jx6ia: { type: 'ping' }
5:09:16 PM [info] GET /api/companies/current 304 in 48ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746464836727-hx036z7: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746464837263-5dhl8nu: {
  type: 'ping',
  timestamp: '2025-05-05T17:09:17.272Z',
  connectionId: 'ws_1746464836753_ldbcfsj4w'
}
5:09:19 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 311, company_id: 268, email: '13@e.com' }
[2025-05-05T17:09:19.651Z] [INFO] Performing dynamic task unlocking check for company {"companyId":268,"userId":311}
[2025-05-05T17:09:19.680Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":268}
[Tasks] Automatically unlocking all tasks for company { userId: 311, companyId: 268, requestedBy: 'automatic_task_unlock' }
[2025-05-05T17:09:19.681Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":268}
[2025-05-05T17:09:19.710Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":268,"count":3,"taskIds":[742,744,743],"taskTypes":["company_kyb","open_banking","ky3p"],"ky3pTaskCount":1,"ky3pTaskIds":[743]}
[2025-05-05T17:09:19.738Z] [INFO] [UnifiedProgressCalc] Preserving existing progress for task 742 (company_kyb): 100% {"taskId":742,"taskType":"company_kyb","existingProgress":100,"operation":"preserve-existing"}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: true,
  timestamp: '2025-05-05T17:09:19.768Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-05T17:09:19.797Z] [INFO] [ProgressUpdate] Updated task 742 progress to 100% and status to ready_for_submission {"taskId":742,"taskType":"company_kyb","progress":100,"status":"ready_for_submission","previousStatus":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746464959798_0kz6624hc' }
[2025-05-05T17:09:19.798Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:09:19.798Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 742 {"taskId":742,"progress":100,"status":"ready_for_submission"}
[2025-05-05T17:09:19.798Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":742,"taskType":"company_kyb","isKy3pTask":false,"calculatedProgress":100,"previousProgress":100,"wasPreserved":true}
[2025-05-05T17:09:19.827Z] [INFO] [UnifiedProgressCalc] Preserving existing progress for task 744 (open_banking): 14% {"taskId":744,"taskType":"open_banking","existingProgress":14,"operation":"preserve-existing"}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 14,
  currentStatus: 'in_progress',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: true,
  timestamp: '2025-05-05T17:09:19.859Z'
}
[STATUS DETERMINATION] Task has partial progress or responses, setting to IN_PROGRESS
[2025-05-05T17:09:19.889Z] [INFO] [ProgressUpdate] Updated task 744 progress to 14% and status to in_progress {"taskId":744,"taskType":"open_banking","progress":14,"status":"in_progress","previousStatus":"in_progress"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746464959889_wajnqxddm' }
[2025-05-05T17:09:19.890Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:09:19.890Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 744 {"taskId":744,"progress":14,"status":"in_progress"}
[2025-05-05T17:09:19.890Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":744,"taskType":"open_banking","isKy3pTask":false,"calculatedProgress":14,"previousProgress":14,"wasPreserved":true}
[2025-05-05T17:09:19.890Z] [INFO] [TaskDependencies] Processing KY3P task {"taskId":743,"taskType":"ky3p","currentProgress":0,"currentStatus":"not_started","timestamp":"2025-05-05T17:09:19.890Z"}
[2025-05-05T17:09:19.985Z] [INFO] [UnifiedProgressCalc] Calculated progress for task 743 (ky3p): 0/120 = 0% {"taskId":743,"taskType":"ky3p","totalFields":120,"completedFields":"0","progress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: false,
  timestamp: '2025-05-05T17:09:20.020Z'
}
[STATUS DETERMINATION] Task has 0% progress and no responses, setting to NOT_STARTED
[2025-05-05T17:09:20.050Z] [INFO] [ProgressUpdate] Updated task 743 progress to 0% and status to not_started {"taskId":743,"taskType":"ky3p","progress":0,"status":"not_started","previousStatus":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746464960051_xxx2iy3b6' }
[2025-05-05T17:09:20.051Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:09:20.051Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 743 {"taskId":743,"progress":0,"status":"not_started"}
[2025-05-05T17:09:20.051Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":743,"taskType":"ky3p","isKy3pTask":true,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[2025-05-05T17:09:20.051Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":268,"count":3}
[Tasks] Successfully unlocked all tasks for company: 268
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 311',
    condition2: 'tasks.created_by = 311',
    condition3: "tasks.company_id = 268 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('13@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
5:09:20 PM [info] GET /api/tasks 200 in 487ms :: [{"id":742,"title":"1. KYB Form: DevTest13","description":"Complete KYB verif...
5:09:22 PM [info] GET /api/companies/current 304 in 33ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:09:25 PM [info] GET /api/companies/current 304 in 32ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:09:28 PM [info] GET /api/companies/current 304 in 32ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:09:31 PM [info] GET /api/companies/current 304 in 41ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:09:34 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:09:35 PM [info] GET /api/tasks 304 in 30ms :: [{"id":742,"title":"1. KYB Form: DevTest13","description":"Complete KYB verif...
5:09:37 PM [info] GET /api/companies/current 304 in 32ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746464837263-5dhl8nu: {
  type: 'ping',
  timestamp: '2025-05-05T17:09:37.272Z',
  connectionId: 'ws_1746464836753_ldbcfsj4w'
}
[PeriodicTaskReconciliation] Reconciling batch of 10 tasks: [
  685, 679, 691, 697,
  699, 702, 705, 701,
  703, 710
]
[Task Progress] Calculated progress for task 685 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 679 (open_banking): 44/44 = 100%
[Task Progress] Calculated progress for task 691 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 697 (company_kyb): 30/30 = 100%
Suppressing further connection logs. Pool size: 3
5:09:40 PM [info] GET /api/companies/current 304 in 33ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[Task Progress] Calculated progress for task 699 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 702 (ky3p): 0/0 = 0%
[Task Progress] Calculated progress for task 705 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 701 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 703 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 710 (ky3p): 0/120 = 0%
5:09:43 PM [info] GET /api/companies/current 304 in 31ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746464836233-u7jx6ia: { type: 'ping' }
5:09:46 PM [info] GET /api/companies/current 304 in 52ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Using cached company data: 268
5:09:49 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 311, company_id: 268, email: '13@e.com' }
[2025-05-05T17:09:50.508Z] [INFO] Performing dynamic task unlocking check for company {"companyId":268,"userId":311}
[2025-05-05T17:09:50.537Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":268}
[Tasks] Automatically unlocking all tasks for company { userId: 311, companyId: 268, requestedBy: 'automatic_task_unlock' }
[2025-05-05T17:09:50.538Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":268}
[2025-05-05T17:09:50.567Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":268,"count":3,"taskIds":[742,744,743],"taskTypes":["company_kyb","open_banking","ky3p"],"ky3pTaskCount":1,"ky3pTaskIds":[743]}
[2025-05-05T17:09:50.596Z] [INFO] [UnifiedProgressCalc] Preserving existing progress for task 742 (company_kyb): 100% {"taskId":742,"taskType":"company_kyb","existingProgress":100,"operation":"preserve-existing"}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: true,
  timestamp: '2025-05-05T17:09:50.626Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-05T17:09:50.655Z] [INFO] [ProgressUpdate] Updated task 742 progress to 100% and status to ready_for_submission {"taskId":742,"taskType":"company_kyb","progress":100,"status":"ready_for_submission","previousStatus":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746464990656_bvebugp3x' }
[2025-05-05T17:09:50.657Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:09:50.657Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 742 {"taskId":742,"progress":100,"status":"ready_for_submission"}
[2025-05-05T17:09:50.657Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":742,"taskType":"company_kyb","isKy3pTask":false,"calculatedProgress":100,"previousProgress":100,"wasPreserved":true}
[2025-05-05T17:09:50.696Z] [INFO] [UnifiedProgressCalc] Preserving existing progress for task 744 (open_banking): 14% {"taskId":744,"taskType":"open_banking","existingProgress":14,"operation":"preserve-existing"}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 14,
  currentStatus: 'in_progress',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: true,
  timestamp: '2025-05-05T17:09:50.726Z'
}
[STATUS DETERMINATION] Task has partial progress or responses, setting to IN_PROGRESS
[2025-05-05T17:09:50.756Z] [INFO] [ProgressUpdate] Updated task 744 progress to 14% and status to in_progress {"taskId":744,"taskType":"open_banking","progress":14,"status":"in_progress","previousStatus":"in_progress"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746464990757_8fexlb5ir' }
[2025-05-05T17:09:50.757Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:09:50.757Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 744 {"taskId":744,"progress":14,"status":"in_progress"}
[2025-05-05T17:09:50.757Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":744,"taskType":"open_banking","isKy3pTask":false,"calculatedProgress":14,"previousProgress":14,"wasPreserved":true}
[2025-05-05T17:09:50.757Z] [INFO] [TaskDependencies] Processing KY3P task {"taskId":743,"taskType":"ky3p","currentProgress":0,"currentStatus":"not_started","timestamp":"2025-05-05T17:09:50.757Z"}
[2025-05-05T17:09:50.895Z] [INFO] [UnifiedProgressCalc] Calculated progress for task 743 (ky3p): 0/120 = 0% {"taskId":743,"taskType":"ky3p","totalFields":120,"completedFields":"0","progress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: false,
  timestamp: '2025-05-05T17:09:50.926Z'
}
[STATUS DETERMINATION] Task has 0% progress and no responses, setting to NOT_STARTED
[2025-05-05T17:09:50.957Z] [INFO] [ProgressUpdate] Updated task 743 progress to 0% and status to not_started {"taskId":743,"taskType":"ky3p","progress":0,"status":"not_started","previousStatus":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746464990957_brszj9ixi' }
[2025-05-05T17:09:50.958Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:09:50.958Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 743 {"taskId":743,"progress":0,"status":"not_started"}
[2025-05-05T17:09:50.958Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":743,"taskType":"ky3p","isKy3pTask":true,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[2025-05-05T17:09:50.958Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":268,"count":3}
[Tasks] Successfully unlocked all tasks for company: 268
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 311',
    condition2: 'tasks.created_by = 311',
    condition3: "tasks.company_id = 268 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('13@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
5:09:51 PM [info] GET /api/tasks 200 in 540ms :: [{"id":742,"title":"1. KYB Form: DevTest13","description":"Complete KYB verif...
[Current Company] Using cached company data: 268
5:09:52 PM [info] GET /api/companies/current 304 in 32ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Fetching company for user: { userId: 311, companyId: 268 }
[Current Company] Found company: {
  id: 268,
  name: 'DevTest13',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
5:09:55 PM [info] GET /api/companies/current 304 in 60ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746464837263-5dhl8nu: {
  type: 'ping',
  timestamp: '2025-05-05T17:09:57.273Z',
  connectionId: 'ws_1746464836753_ldbcfsj4w'
}
5:09:58 PM [info] GET /api/companies/current 304 in 31ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:10:01 PM [info] GET /api/companies/current 304 in 34ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Using cached company data: 268
5:10:04 PM [info] GET /api/companies/current 304 in 29ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:10:06 PM [info] GET /api/tasks 304 in 30ms :: [{"id":742,"title":"1. KYB Form: DevTest13","description":"Complete KYB verif...
5:10:07 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:10:10 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:10:13 PM [info] GET /api/companies/current 304 in 33ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746464836233-u7jx6ia: { type: 'ping' }
5:10:16 PM [info] GET /api/companies/current 304 in 36ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746464837263-5dhl8nu: {
  type: 'ping',
  timestamp: '2025-05-05T17:10:17.272Z',
  connectionId: 'ws_1746464836753_ldbcfsj4w'
}
5:10:19 PM [info] GET /api/companies/current 304 in 32ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 311, company_id: 268, email: '13@e.com' }
[2025-05-05T17:10:21.417Z] [INFO] Performing dynamic task unlocking check for company {"companyId":268,"userId":311}
[2025-05-05T17:10:21.447Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":268}
[Tasks] Automatically unlocking all tasks for company { userId: 311, companyId: 268, requestedBy: 'automatic_task_unlock' }
[2025-05-05T17:10:21.447Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":268}
[2025-05-05T17:10:21.475Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":268,"count":3,"taskIds":[742,744,743],"taskTypes":["company_kyb","open_banking","ky3p"],"ky3pTaskCount":1,"ky3pTaskIds":[743]}
[2025-05-05T17:10:21.504Z] [INFO] [UnifiedProgressCalc] Preserving existing progress for task 742 (company_kyb): 100% {"taskId":742,"taskType":"company_kyb","existingProgress":100,"operation":"preserve-existing"}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: true,
  timestamp: '2025-05-05T17:10:21.536Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-05T17:10:21.569Z] [INFO] [ProgressUpdate] Updated task 742 progress to 100% and status to ready_for_submission {"taskId":742,"taskType":"company_kyb","progress":100,"status":"ready_for_submission","previousStatus":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746465021569_thq6o11fu' }
[2025-05-05T17:10:21.570Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:10:21.570Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 742 {"taskId":742,"progress":100,"status":"ready_for_submission"}
[2025-05-05T17:10:21.570Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":742,"taskType":"company_kyb","isKy3pTask":false,"calculatedProgress":100,"previousProgress":100,"wasPreserved":true}
[2025-05-05T17:10:21.599Z] [INFO] [UnifiedProgressCalc] Preserving existing progress for task 744 (open_banking): 14% {"taskId":744,"taskType":"open_banking","existingProgress":14,"operation":"preserve-existing"}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 14,
  currentStatus: 'in_progress',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: true,
  timestamp: '2025-05-05T17:10:21.628Z'
}
[STATUS DETERMINATION] Task has partial progress or responses, setting to IN_PROGRESS
[2025-05-05T17:10:21.657Z] [INFO] [ProgressUpdate] Updated task 744 progress to 14% and status to in_progress {"taskId":744,"taskType":"open_banking","progress":14,"status":"in_progress","previousStatus":"in_progress"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746465021658_q121aypj6' }
[2025-05-05T17:10:21.658Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:10:21.658Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 744 {"taskId":744,"progress":14,"status":"in_progress"}
[2025-05-05T17:10:21.658Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":744,"taskType":"open_banking","isKy3pTask":false,"calculatedProgress":14,"previousProgress":14,"wasPreserved":true}
[2025-05-05T17:10:21.658Z] [INFO] [TaskDependencies] Processing KY3P task {"taskId":743,"taskType":"ky3p","currentProgress":0,"currentStatus":"not_started","timestamp":"2025-05-05T17:10:21.658Z"}
[2025-05-05T17:10:21.745Z] [INFO] [UnifiedProgressCalc] Calculated progress for task 743 (ky3p): 0/120 = 0% {"taskId":743,"taskType":"ky3p","totalFields":120,"completedFields":"0","progress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: false,
  timestamp: '2025-05-05T17:10:21.776Z'
}
[STATUS DETERMINATION] Task has 0% progress and no responses, setting to NOT_STARTED
[2025-05-05T17:10:21.807Z] [INFO] [ProgressUpdate] Updated task 743 progress to 0% and status to not_started {"taskId":743,"taskType":"ky3p","progress":0,"status":"not_started","previousStatus":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746465021807_ffagacqyy' }
[2025-05-05T17:10:21.808Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:10:21.808Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 743 {"taskId":743,"progress":0,"status":"not_started"}
[2025-05-05T17:10:21.808Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":743,"taskType":"ky3p","isKy3pTask":true,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[2025-05-05T17:10:21.808Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":268,"count":3}
[Tasks] Successfully unlocked all tasks for company: 268
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 311',
    condition2: 'tasks.created_by = 311',
    condition3: "tasks.company_id = 268 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('13@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
5:10:21 PM [info] GET /api/tasks 200 in 482ms :: [{"id":742,"title":"1. KYB Form: DevTest13","description":"Complete KYB verif...
[Current Company] Using cached company data: 268
5:10:22 PM [info] GET /api/companies/current 304 in 31ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:10:25 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:10:28 PM [info] GET /api/companies/current 304 in 37ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:10:31 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:10:34 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:10:37 PM [info] GET /api/tasks 304 in 30ms :: [{"id":742,"title":"1. KYB Form: DevTest13","description":"Complete KYB verif...
5:10:37 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746464837263-5dhl8nu: {
  type: 'ping',
  timestamp: '2025-05-05T17:10:37.271Z',
  connectionId: 'ws_1746464836753_ldbcfsj4w'
}
5:10:40 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:10:43 PM [info] GET /api/companies/current 304 in 31ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746464836233-u7jx6ia: { type: 'ping' }
5:10:46 PM [info] GET /api/companies/current 304 in 37ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:10:49 PM [info] GET /api/companies/current 304 in 31ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 311, company_id: 268, email: '13@e.com' }
[2025-05-05T17:10:52.266Z] [INFO] Performing dynamic task unlocking check for company {"companyId":268,"userId":311}
[2025-05-05T17:10:52.294Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":268}
[Tasks] Automatically unlocking all tasks for company { userId: 311, companyId: 268, requestedBy: 'automatic_task_unlock' }
[2025-05-05T17:10:52.295Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":268}
[2025-05-05T17:10:52.325Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":268,"count":3,"taskIds":[742,744,743],"taskTypes":["company_kyb","open_banking","ky3p"],"ky3pTaskCount":1,"ky3pTaskIds":[743]}
[2025-05-05T17:10:52.358Z] [INFO] [UnifiedProgressCalc] Preserving existing progress for task 742 (company_kyb): 100% {"taskId":742,"taskType":"company_kyb","existingProgress":100,"operation":"preserve-existing"}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: true,
  timestamp: '2025-05-05T17:10:52.391Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-05T17:10:52.432Z] [INFO] [ProgressUpdate] Updated task 742 progress to 100% and status to ready_for_submission {"taskId":742,"taskType":"company_kyb","progress":100,"status":"ready_for_submission","previousStatus":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746465052432_vq0pget09' }
[2025-05-05T17:10:52.432Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:10:52.432Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 742 {"taskId":742,"progress":100,"status":"ready_for_submission"}
[2025-05-05T17:10:52.432Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":742,"taskType":"company_kyb","isKy3pTask":false,"calculatedProgress":100,"previousProgress":100,"wasPreserved":true}
[2025-05-05T17:10:52.461Z] [INFO] [UnifiedProgressCalc] Preserving existing progress for task 744 (open_banking): 14% {"taskId":744,"taskType":"open_banking","existingProgress":14,"operation":"preserve-existing"}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 14,
  currentStatus: 'in_progress',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: true,
  timestamp: '2025-05-05T17:10:52.489Z'
}
[STATUS DETERMINATION] Task has partial progress or responses, setting to IN_PROGRESS
5:10:52 PM [info] GET /api/companies/current 304 in 29ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-05T17:10:52.518Z] [INFO] [ProgressUpdate] Updated task 744 progress to 14% and status to in_progress {"taskId":744,"taskType":"open_banking","progress":14,"status":"in_progress","previousStatus":"in_progress"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746465052518_kkso2t7hg' }
[2025-05-05T17:10:52.518Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:10:52.518Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 744 {"taskId":744,"progress":14,"status":"in_progress"}
[2025-05-05T17:10:52.518Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":744,"taskType":"open_banking","isKy3pTask":false,"calculatedProgress":14,"previousProgress":14,"wasPreserved":true}
[2025-05-05T17:10:52.518Z] [INFO] [TaskDependencies] Processing KY3P task {"taskId":743,"taskType":"ky3p","currentProgress":0,"currentStatus":"not_started","timestamp":"2025-05-05T17:10:52.518Z"}
[2025-05-05T17:10:52.604Z] [INFO] [UnifiedProgressCalc] Calculated progress for task 743 (ky3p): 0/120 = 0% {"taskId":743,"taskType":"ky3p","totalFields":120,"completedFields":"0","progress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: false,
  timestamp: '2025-05-05T17:10:52.633Z'
}
[STATUS DETERMINATION] Task has 0% progress and no responses, setting to NOT_STARTED
[2025-05-05T17:10:52.663Z] [INFO] [ProgressUpdate] Updated task 743 progress to 0% and status to not_started {"taskId":743,"taskType":"ky3p","progress":0,"status":"not_started","previousStatus":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746465052663_3akwwj1o1' }
[2025-05-05T17:10:52.663Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:10:52.663Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 743 {"taskId":743,"progress":0,"status":"not_started"}
[2025-05-05T17:10:52.663Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":743,"taskType":"ky3p","isKy3pTask":true,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[2025-05-05T17:10:52.663Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":268,"count":3}
[Tasks] Successfully unlocked all tasks for company: 268
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 311',
    condition2: 'tasks.created_by = 311',
    condition3: "tasks.company_id = 268 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('13@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
5:10:52 PM [info] GET /api/tasks 200 in 485ms :: [{"id":742,"title":"1. KYB Form: DevTest13","description":"Complete KYB verif...
5:10:55 PM [info] GET /api/companies/current 304 in 34ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746464837263-5dhl8nu: {
  type: 'ping',
  timestamp: '2025-05-05T17:10:57.273Z',
  connectionId: 'ws_1746464836753_ldbcfsj4w'
}
[Current Company] Fetching company for user: { userId: 311, companyId: 268 }
[Current Company] Found company: {
  id: 268,
  name: 'DevTest13',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
5:10:58 PM [info] GET /api/companies/current 304 in 59ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:11:01 PM [info] GET /api/companies/current 304 in 35ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:11:04 PM [info] GET /api/companies/current 304 in 32ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:11:07 PM [info] GET /api/companies/current 304 in 31ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:11:07 PM [info] GET /api/tasks 304 in 31ms :: [{"id":742,"title":"1. KYB Form: DevTest13","description":"Complete KYB verif...
5:11:10 PM [info] GET /api/companies/current 304 in 35ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:11:13 PM [info] GET /api/companies/current 304 in 29ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746464836233-u7jx6ia: { type: 'ping' }
5:11:16 PM [info] GET /api/companies/current 304 in 31ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746464836727-hx036z7: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746464837263-5dhl8nu: {
  type: 'ping',
  timestamp: '2025-05-05T17:11:17.273Z',
  connectionId: 'ws_1746464836753_ldbcfsj4w'
}
5:11:19 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:11:22 PM [info] GET /api/companies/current 304 in 36ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 311, company_id: 268, email: '13@e.com' }
[2025-05-05T17:11:23.102Z] [INFO] Performing dynamic task unlocking check for company {"companyId":268,"userId":311}
[2025-05-05T17:11:23.131Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":268}
[Tasks] Automatically unlocking all tasks for company { userId: 311, companyId: 268, requestedBy: 'automatic_task_unlock' }
[2025-05-05T17:11:23.132Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":268}
[2025-05-05T17:11:23.160Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":268,"count":3,"taskIds":[742,744,743],"taskTypes":["company_kyb","open_banking","ky3p"],"ky3pTaskCount":1,"ky3pTaskIds":[743]}
[2025-05-05T17:11:23.188Z] [INFO] [UnifiedProgressCalc] Preserving existing progress for task 742 (company_kyb): 100% {"taskId":742,"taskType":"company_kyb","existingProgress":100,"operation":"preserve-existing"}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: true,
  timestamp: '2025-05-05T17:11:23.218Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-05T17:11:23.248Z] [INFO] [ProgressUpdate] Updated task 742 progress to 100% and status to ready_for_submission {"taskId":742,"taskType":"company_kyb","progress":100,"status":"ready_for_submission","previousStatus":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746465083249_uxww579px' }
[2025-05-05T17:11:23.249Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:11:23.249Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 742 {"taskId":742,"progress":100,"status":"ready_for_submission"}
[2025-05-05T17:11:23.249Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":742,"taskType":"company_kyb","isKy3pTask":false,"calculatedProgress":100,"previousProgress":100,"wasPreserved":true}
[2025-05-05T17:11:23.278Z] [INFO] [UnifiedProgressCalc] Preserving existing progress for task 744 (open_banking): 14% {"taskId":744,"taskType":"open_banking","existingProgress":14,"operation":"preserve-existing"}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 14,
  currentStatus: 'in_progress',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: true,
  timestamp: '2025-05-05T17:11:23.307Z'
}
[STATUS DETERMINATION] Task has partial progress or responses, setting to IN_PROGRESS
[2025-05-05T17:11:23.337Z] [INFO] [ProgressUpdate] Updated task 744 progress to 14% and status to in_progress {"taskId":744,"taskType":"open_banking","progress":14,"status":"in_progress","previousStatus":"in_progress"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746465083337_v5jhxwt8j' }
[2025-05-05T17:11:23.338Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:11:23.338Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 744 {"taskId":744,"progress":14,"status":"in_progress"}
[2025-05-05T17:11:23.338Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":744,"taskType":"open_banking","isKy3pTask":false,"calculatedProgress":14,"previousProgress":14,"wasPreserved":true}
[2025-05-05T17:11:23.338Z] [INFO] [TaskDependencies] Processing KY3P task {"taskId":743,"taskType":"ky3p","currentProgress":0,"currentStatus":"not_started","timestamp":"2025-05-05T17:11:23.338Z"}
[2025-05-05T17:11:23.425Z] [INFO] [UnifiedProgressCalc] Calculated progress for task 743 (ky3p): 0/120 = 0% {"taskId":743,"taskType":"ky3p","totalFields":120,"completedFields":"0","progress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: false,
  timestamp: '2025-05-05T17:11:23.458Z'
}
[STATUS DETERMINATION] Task has 0% progress and no responses, setting to NOT_STARTED
[2025-05-05T17:11:23.488Z] [INFO] [ProgressUpdate] Updated task 743 progress to 0% and status to not_started {"taskId":743,"taskType":"ky3p","progress":0,"status":"not_started","previousStatus":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746465083488_2gt2834oj' }
[2025-05-05T17:11:23.489Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:11:23.489Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 743 {"taskId":743,"progress":0,"status":"not_started"}
[2025-05-05T17:11:23.489Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":743,"taskType":"ky3p","isKy3pTask":true,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[2025-05-05T17:11:23.489Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":268,"count":3}
[Tasks] Successfully unlocked all tasks for company: 268
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 311',
    condition2: 'tasks.created_by = 311',
    condition3: "tasks.company_id = 268 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('13@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
5:11:23 PM [info] GET /api/tasks 200 in 475ms :: [{"id":742,"title":"1. KYB Form: DevTest13","description":"Complete KYB verif...
5:11:25 PM [info] GET /api/companies/current 304 in 32ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:11:28 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:11:31 PM [info] GET /api/companies/current 304 in 37ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:11:34 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Using cached company data: 268
[INFO] [WebSocket] Received message from client client-1746464837263-5dhl8nu: {
  type: 'ping',
  timestamp: '2025-05-05T17:11:37.272Z',
  connectionId: 'ws_1746464836753_ldbcfsj4w'
}
5:11:37 PM [info] GET /api/companies/current 304 in 82ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:11:38 PM [info] GET /api/tasks 304 in 30ms :: [{"id":742,"title":"1. KYB Form: DevTest13","description":"Complete KYB verif...
5:11:40 PM [info] GET /api/companies/current 304 in 33ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:11:43 PM [info] GET /api/companies/current 304 in 29ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746464836233-u7jx6ia: { type: 'ping' }
5:11:46 PM [info] GET /api/companies/current 304 in 51ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Using cached company data: 268
5:11:49 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Using cached company data: 268
5:11:52 PM [info] GET /api/companies/current 304 in 33ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 311, company_id: 268, email: '13@e.com' }
[2025-05-05T17:11:53.933Z] [INFO] Performing dynamic task unlocking check for company {"companyId":268,"userId":311}
[2025-05-05T17:11:53.961Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":268}
[Tasks] Automatically unlocking all tasks for company { userId: 311, companyId: 268, requestedBy: 'automatic_task_unlock' }
[2025-05-05T17:11:53.962Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":268}
[2025-05-05T17:11:53.991Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":268,"count":3,"taskIds":[742,744,743],"taskTypes":["company_kyb","open_banking","ky3p"],"ky3pTaskCount":1,"ky3pTaskIds":[743]}
[2025-05-05T17:11:54.020Z] [INFO] [UnifiedProgressCalc] Preserving existing progress for task 742 (company_kyb): 100% {"taskId":742,"taskType":"company_kyb","existingProgress":100,"operation":"preserve-existing"}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: true,
  timestamp: '2025-05-05T17:11:54.048Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-05T17:11:54.078Z] [INFO] [ProgressUpdate] Updated task 742 progress to 100% and status to ready_for_submission {"taskId":742,"taskType":"company_kyb","progress":100,"status":"ready_for_submission","previousStatus":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746465114079_82r0ub7pk' }
[2025-05-05T17:11:54.079Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:11:54.079Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 742 {"taskId":742,"progress":100,"status":"ready_for_submission"}
[2025-05-05T17:11:54.079Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":742,"taskType":"company_kyb","isKy3pTask":false,"calculatedProgress":100,"previousProgress":100,"wasPreserved":true}
[2025-05-05T17:11:54.108Z] [INFO] [UnifiedProgressCalc] Preserving existing progress for task 744 (open_banking): 14% {"taskId":744,"taskType":"open_banking","existingProgress":14,"operation":"preserve-existing"}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 14,
  currentStatus: 'in_progress',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: true,
  timestamp: '2025-05-05T17:11:54.139Z'
}
[STATUS DETERMINATION] Task has partial progress or responses, setting to IN_PROGRESS
[2025-05-05T17:11:54.168Z] [INFO] [ProgressUpdate] Updated task 744 progress to 14% and status to in_progress {"taskId":744,"taskType":"open_banking","progress":14,"status":"in_progress","previousStatus":"in_progress"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746465114169_yvm3iub4i' }
[2025-05-05T17:11:54.169Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:11:54.169Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 744 {"taskId":744,"progress":14,"status":"in_progress"}
[2025-05-05T17:11:54.169Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":744,"taskType":"open_banking","isKy3pTask":false,"calculatedProgress":14,"previousProgress":14,"wasPreserved":true}
[2025-05-05T17:11:54.169Z] [INFO] [TaskDependencies] Processing KY3P task {"taskId":743,"taskType":"ky3p","currentProgress":0,"currentStatus":"not_started","timestamp":"2025-05-05T17:11:54.169Z"}
[2025-05-05T17:11:54.257Z] [INFO] [UnifiedProgressCalc] Calculated progress for task 743 (ky3p): 0/120 = 0% {"taskId":743,"taskType":"ky3p","totalFields":120,"completedFields":"0","progress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: false,
  timestamp: '2025-05-05T17:11:54.286Z'
}
[STATUS DETERMINATION] Task has 0% progress and no responses, setting to NOT_STARTED
[2025-05-05T17:11:54.316Z] [INFO] [ProgressUpdate] Updated task 743 progress to 0% and status to not_started {"taskId":743,"taskType":"ky3p","progress":0,"status":"not_started","previousStatus":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746465114316_5xtvjmfu9' }
[2025-05-05T17:11:54.317Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:11:54.317Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 743 {"taskId":743,"progress":0,"status":"not_started"}
[2025-05-05T17:11:54.317Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":743,"taskType":"ky3p","isKy3pTask":true,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[2025-05-05T17:11:54.317Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":268,"count":3}
[Tasks] Successfully unlocked all tasks for company: 268
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 311',
    condition2: 'tasks.created_by = 311',
    condition3: "tasks.company_id = 268 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('13@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
5:11:54 PM [info] GET /api/tasks 200 in 474ms :: [{"id":742,"title":"1. KYB Form: DevTest13","description":"Complete KYB verif...
5:11:55 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746464837263-5dhl8nu: {
  type: 'ping',
  timestamp: '2025-05-05T17:11:57.271Z',
  connectionId: 'ws_1746464836753_ldbcfsj4w'
}
5:11:58 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Fetching company for user: { userId: 311, companyId: 268 }
[Current Company] Found company: {
  id: 268,
  name: 'DevTest13',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
5:12:01 PM [info] GET /api/companies/current 304 in 60ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:12:04 PM [info] GET /api/companies/current 304 in 34ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:12:07 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:12:09 PM [info] GET /api/tasks 304 in 30ms :: [{"id":742,"title":"1. KYB Form: DevTest13","description":"Complete KYB verif...
5:12:10 PM [info] GET /api/companies/current 304 in 32ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:12:13 PM [info] GET /api/companies/current 304 in 34ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746464836233-u7jx6ia: { type: 'ping' }
5:12:16 PM [info] GET /api/companies/current 304 in 35ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746464837263-5dhl8nu: {
  type: 'ping',
  timestamp: '2025-05-05T17:12:17.273Z',
  connectionId: 'ws_1746464836753_ldbcfsj4w'
}
5:12:19 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:12:22 PM [info] GET /api/companies/current 304 in 31ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 311, company_id: 268, email: '13@e.com' }
[2025-05-05T17:12:24.770Z] [INFO] Performing dynamic task unlocking check for company {"companyId":268,"userId":311}
[2025-05-05T17:12:24.800Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":268}
[Tasks] Automatically unlocking all tasks for company { userId: 311, companyId: 268, requestedBy: 'automatic_task_unlock' }
[2025-05-05T17:12:24.801Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":268}
[2025-05-05T17:12:24.830Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":268,"count":3,"taskIds":[742,744,743],"taskTypes":["company_kyb","open_banking","ky3p"],"ky3pTaskCount":1,"ky3pTaskIds":[743]}
[2025-05-05T17:12:24.859Z] [INFO] [UnifiedProgressCalc] Preserving existing progress for task 742 (company_kyb): 100% {"taskId":742,"taskType":"company_kyb","existingProgress":100,"operation":"preserve-existing"}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: true,
  timestamp: '2025-05-05T17:12:24.889Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-05T17:12:24.924Z] [INFO] [ProgressUpdate] Updated task 742 progress to 100% and status to ready_for_submission {"taskId":742,"taskType":"company_kyb","progress":100,"status":"ready_for_submission","previousStatus":"ready_for_submission"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746465144925_soalswb5o' }
[2025-05-05T17:12:24.925Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:12:24.925Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 742 {"taskId":742,"progress":100,"status":"ready_for_submission"}
[2025-05-05T17:12:24.925Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":742,"taskType":"company_kyb","isKy3pTask":false,"calculatedProgress":100,"previousProgress":100,"wasPreserved":true}
[2025-05-05T17:12:24.954Z] [INFO] [UnifiedProgressCalc] Preserving existing progress for task 744 (open_banking): 14% {"taskId":744,"taskType":"open_banking","existingProgress":14,"operation":"preserve-existing"}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 14,
  currentStatus: 'in_progress',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: true,
  timestamp: '2025-05-05T17:12:24.985Z'
}
[STATUS DETERMINATION] Task has partial progress or responses, setting to IN_PROGRESS
[2025-05-05T17:12:25.014Z] [INFO] [ProgressUpdate] Updated task 744 progress to 14% and status to in_progress {"taskId":744,"taskType":"open_banking","progress":14,"status":"in_progress","previousStatus":"in_progress"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746465145015_mo1wqqvez' }
[2025-05-05T17:12:25.015Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:12:25.016Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 744 {"taskId":744,"progress":14,"status":"in_progress"}
[2025-05-05T17:12:25.016Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":744,"taskType":"open_banking","isKy3pTask":false,"calculatedProgress":14,"previousProgress":14,"wasPreserved":true}
[2025-05-05T17:12:25.016Z] [INFO] [TaskDependencies] Processing KY3P task {"taskId":743,"taskType":"ky3p","currentProgress":0,"currentStatus":"not_started","timestamp":"2025-05-05T17:12:25.016Z"}
[2025-05-05T17:12:25.103Z] [INFO] [UnifiedProgressCalc] Calculated progress for task 743 (ky3p): 0/120 = 0% {"taskId":743,"taskType":"ky3p","totalFields":120,"completedFields":"0","progress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: false,
  timestamp: '2025-05-05T17:12:25.133Z'
}
[STATUS DETERMINATION] Task has 0% progress and no responses, setting to NOT_STARTED
[2025-05-05T17:12:25.164Z] [INFO] [ProgressUpdate] Updated task 743 progress to 0% and status to not_started {"taskId":743,"taskType":"ky3p","progress":0,"status":"not_started","previousStatus":"not_started"}
[WebSocket] Broadcast task_update to 3 clients (0 errors) { messageId: 'msg_1746465145165_x11dr1jo0' }
[2025-05-05T17:12:25.166Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:12:25.166Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 743 {"taskId":743,"progress":0,"status":"not_started"}
[2025-05-05T17:12:25.166Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":743,"taskType":"ky3p","isKy3pTask":true,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[2025-05-05T17:12:25.166Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":268,"count":3}
[Tasks] Successfully unlocked all tasks for company: 268
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 311',
    condition2: 'tasks.created_by = 311',
    condition3: "tasks.company_id = 268 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('13@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
5:12:25 PM [info] GET /api/tasks 200 in 487ms :: [{"id":742,"title":"1. KYB Form: DevTest13","description":"Complete KYB verif...
5:12:25 PM [info] GET /api/companies/current 304 in 31ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Using cached company data: 268
5:12:28 PM [info] GET /api/companies/current 304 in 29ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:12:31 PM [info] GET /api/companies/current 304 in 31ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:12:34 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:12:37 PM [info] GET /api/companies/current 304 in 31ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746464837263-5dhl8nu: {
  type: 'ping',
  timestamp: '2025-05-05T17:12:37.273Z',
  connectionId: 'ws_1746464836753_ldbcfsj4w'
}
5:12:40 PM [info] GET /api/companies/current 304 in 31ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] Using cached task data for user: 311
5:12:40 PM [info] GET /api/tasks 304 in 31ms :: [{"id":742,"title":"1. KYB Form: DevTest13","description":"Complete KYB verif...
5:12:43 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746464836233-u7jx6ia: { type: 'ping' }
5:12:46 PM [info] GET /api/companies/current 304 in 36ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:12:49 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:12:52 PM [info] GET /api/companies/current 304 in 31ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Client disconnected: client-1746464836233-u7jx6ia
[INFO] [WebSocket] Client disconnected: client-1746464836727-hx036z7
[INFO] [WebSocket] Client disconnected: client-1746464837263-5dhl8nu
[Auth] Returning user session data
[Current Company] Fetching company for user: { userId: 311, companyId: 268 }
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 311, company_id: 268, email: '13@e.com' }
[2025-05-05T17:13:03.235Z] [INFO] Performing dynamic task unlocking check for company {"companyId":268,"userId":311}
[Current Company] Found company: {
  id: 268,
  name: 'DevTest13',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
[2025-05-05T17:13:03.266Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":268}
[Tasks] Automatically unlocking all tasks for company { userId: 311, companyId: 268, requestedBy: 'automatic_task_unlock' }
[2025-05-05T17:13:03.267Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":268}
5:13:03 PM [info] GET /api/companies/current 304 in 61ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-05T17:13:03.298Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":268,"count":3,"taskIds":[742,744,743],"taskTypes":["company_kyb","open_banking","ky3p"],"ky3pTaskCount":1,"ky3pTaskIds":[743]}
[2025-05-05T17:13:03.330Z] [INFO] [UnifiedProgressCalc] Preserving existing progress for task 742 (company_kyb): 100% {"taskId":742,"taskType":"company_kyb","existingProgress":100,"operation":"preserve-existing"}
[INFO] [WebSocket] Client connected: client-1746465183362-8gj3dpe
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: true,
  timestamp: '2025-05-05T17:13:03.367Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[2025-05-05T17:13:03.397Z] [INFO] [ProgressUpdate] Updated task 742 progress to 100% and status to ready_for_submission {"taskId":742,"taskType":"company_kyb","progress":100,"status":"ready_for_submission","previousStatus":"ready_for_submission"}
[WebSocket] Broadcast task_update to 1 clients (0 errors) { messageId: 'msg_1746465183398_58jnpobdz' }
[2025-05-05T17:13:03.398Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:13:03.398Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 742 {"taskId":742,"progress":100,"status":"ready_for_submission"}
[2025-05-05T17:13:03.398Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":742,"taskType":"company_kyb","isKy3pTask":false,"calculatedProgress":100,"previousProgress":100,"wasPreserved":true}
[2025-05-05T17:13:03.426Z] [INFO] [UnifiedProgressCalc] Preserving existing progress for task 744 (open_banking): 14% {"taskId":744,"taskType":"open_banking","existingProgress":14,"operation":"preserve-existing"}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 14,
  currentStatus: 'in_progress',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: true,
  timestamp: '2025-05-05T17:13:03.458Z'
}
[STATUS DETERMINATION] Task has partial progress or responses, setting to IN_PROGRESS
[INFO] [WebSocket] Received message from client client-1746465183362-8gj3dpe: {
  type: 'authenticate',
  data: { timestamp: '2025-05-05T17:13:03.364Z' }
}
[INFO] [WebSocket] Authentication from client client-1746465183362-8gj3dpe: { userId: undefined, companyId: undefined, hasToken: true }
[2025-05-05T17:13:03.492Z] [INFO] [ProgressUpdate] Updated task 744 progress to 14% and status to in_progress {"taskId":744,"taskType":"open_banking","progress":14,"status":"in_progress","previousStatus":"in_progress"}
[WebSocket] Broadcast task_update to 1 clients (0 errors) { messageId: 'msg_1746465183493_d04l4nmcq' }
[2025-05-05T17:13:03.493Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:13:03.493Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 744 {"taskId":744,"progress":14,"status":"in_progress"}
[2025-05-05T17:13:03.493Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":744,"taskType":"open_banking","isKy3pTask":false,"calculatedProgress":14,"previousProgress":14,"wasPreserved":true}
[2025-05-05T17:13:03.493Z] [INFO] [TaskDependencies] Processing KY3P task {"taskId":743,"taskType":"ky3p","currentProgress":0,"currentStatus":"not_started","timestamp":"2025-05-05T17:13:03.493Z"}
[2025-05-05T17:13:03.590Z] [INFO] [UnifiedProgressCalc] Calculated progress for task 743 (ky3p): 0/120 = 0% {"taskId":743,"taskType":"ky3p","totalFields":120,"completedFields":"0","progress":0}
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  effectiveHasResponses: false,
  timestamp: '2025-05-05T17:13:03.628Z'
}
[STATUS DETERMINATION] Task has 0% progress and no responses, setting to NOT_STARTED
[2025-05-05T17:13:03.664Z] [INFO] [ProgressUpdate] Updated task 743 progress to 0% and status to not_started {"taskId":743,"taskType":"ky3p","progress":0,"status":"not_started","previousStatus":"not_started"}
[WebSocket] Broadcast task_update to 1 clients (0 errors) { messageId: 'msg_1746465183664_gaq38non4' }
[2025-05-05T17:13:03.664Z] [INFO] Successfully broadcasted task_update message
[2025-05-05T17:13:03.664Z] [INFO] [ProgressUpdate] Broadcasted progress update for task 743 {"taskId":743,"progress":0,"status":"not_started"}
[2025-05-05T17:13:03.665Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":268,"taskId":743,"taskType":"ky3p","isKy3pTask":true,"calculatedProgress":0,"previousProgress":0,"wasPreserved":false}
[2025-05-05T17:13:03.665Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":268,"count":3}
[Tasks] Successfully unlocked all tasks for company: 268
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 311',
    condition2: 'tasks.created_by = 311',
    condition3: "tasks.company_id = 268 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('13@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
5:13:03 PM [info] GET /api/tasks 200 in 549ms :: [{"id":742,"title":"1. KYB Form: DevTest13","description":"Complete KYB verif...
[INFO] [WebSocket] Client connected: client-1746465183894-2omah7w
5:13:03 PM [info] GET /api/tasks 304 in 32ms :: [{"id":742,"title":"1. KYB Form: DevTest13","description":"Complete KYB verif...
[INFO] [WebSocket] Received message from client client-1746465183894-2omah7w: {
  type: 'authenticate',
  userId: null,
  companyId: null,
  clientId: 'ws_1746465182841_cysidkymn',
  timestamp: '2025-05-05T17:13:03.894Z'
}
[INFO] [WebSocket] Authentication from client client-1746465183894-2omah7w: { userId: null, companyId: null, hasToken: true }
[INFO] [WebSocket] Client connected: client-1746465184394-32fbnfw
[Auth] Returning user session data
5:13:04 PM [info] GET /api/companies/current 304 in 31ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746465184394-32fbnfw: {
  type: 'authenticate',
  userId: 311,
  companyId: 268,
  clientId: 'ws_1746465183889_nkyy50jfg',
  timestamp: '2025-05-05T17:13:04.790Z'
}
[INFO] [WebSocket] Authentication from client client-1746465184394-32fbnfw: { userId: 311, companyId: 268, hasToken: true }
5:13:06 PM [info] GET /api/companies/current 304 in 31ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Using cached company data: 268
5:13:09 PM [info] GET /api/companies/current 304 in 32ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:13:12 PM [info] GET /api/companies/current 304 in 32ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:13:15 PM [info] GET /api/companies/current 304 in 36ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:13:18 PM [info] GET /api/companies/current 304 in 30ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[Tasks] Using cached task data for user: 311
5:13:18 PM [info] GET /api/tasks 304 in 32ms :: [{"id":742,"title":"1. KYB Form: DevTest13","description":"Complete KYB verif...
5:13:21 PM [info] GET /api/companies/current 304 in 36ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
5:13:24 PM [info] GET /api/companies/current 304 in 31ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746465184394-32fbnfw: {
  type: 'ping',
  timestamp: '2025-05-05T17:13:24.392Z',
  connectionId: 'ws_1746465183889_nkyy50jfg'
}
5:13:27 PM [info] GET /api/companies/current 304 in 31ms :: {"id":268,"name":"DevTest13","category":"FinTech","is_demo":true,"revenue_tie...