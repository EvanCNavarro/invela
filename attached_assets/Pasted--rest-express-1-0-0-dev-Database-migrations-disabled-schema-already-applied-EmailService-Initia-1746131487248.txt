> rest-express@1.0.0 dev
Database migrations disabled - schema already applied
[EmailService] Initializing email service
[EmailService] Email service initialized successfully
[OpenAI] Service initialized with API key: API key is set
Database module not found, creating a mock implementation
Database module not found, creating a mock implementation
Database module not found, creating a mock implementation
[Auth] Setting up authentication...
[Auth] Authentication setup completed
[KY3P-BATCH-UPDATE] Registering KY3P batch update routes
Registering KY3P batch update routes
[KY3P-BATCH-UPDATE] Registering KY3P batch update routes
Registering KY3P batch update routes
[2025-05-01T20:26:54.494Z] [INFO] Registering KY3P field update routes 
[2025-05-01T20:26:54.495Z] [INFO] [OpenBankingRoutes] Setting up routes... 
[Routes] Setting up unified form submission router
[Routes] Successfully registered unified form submission router
[Routes] Setting up transactional form submission router
[Routes] Successfully registered transactional form submission router
[Routes] Routes setup completed
[2025-05-01T20:26:54.497Z] [INFO] Setting up WebSocket server... 
[2025-05-01T20:26:54.497Z] [INFO] Initializing WebSocket server 
[2025-05-01T20:26:54.497Z] [INFO] WebSocket server initialized successfully 
[2025-05-01T20:26:54.497Z] [INFO] WebSocket server initialized successfully 
8:26:54 PM [info] Setting up Vite development server
8:26:54 PM [express] Server running on 0.0.0.0:5000
8:26:54 PM [express] Environment: development
[Deployment] Server running on 0.0.0.0:5000
[Deployment] Environment: development
[Deployment] Port forwarding: Custom port: 5000
[Deployment] Development mode: Hot reloading enabled
[2025-05-01T20:27:09.463Z] New client connected to the pool (1/3)
[2025-05-01T20:27:13.183Z] New client connected to the pool (2/3)
[Auth] Unauthenticated user session
[2025-05-01T20:27:27.801Z] New client connected to the pool (3/3)
[Auth] Returning user session data
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 304, company_id: 262, email: 'e@e.com' }
[2025-05-01T20:27:31.064Z] [INFO] Performing dynamic task unlocking check for company {"companyId":262,"userId":304}
[Current Company] Fetching company for user: { userId: 304, companyId: 262 }
[Tasks Routes] Fetching task by ID: {
  taskId: 718,
  userCompanyId: 262,
  timestamp: '2025-05-01T20:27:31.070Z'
}
[Current Company] Found company: {
  id: 262,
  name: 'DemoTest',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
[2025-05-01T20:27:31.104Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":262}
[Tasks] Automatically unlocking all tasks for company { userId: 304, companyId: 262, requestedBy: 'automatic_task_unlock' }
[2025-05-01T20:27:31.105Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":262}
[Tasks Routes] Task found by ID: {
  taskId: 718,
  title: '2. S&P KY3P Security Assessment: DemoTest',
  type: 'ky3p',
  formDataFields: 0,
  timestamp: '2025-05-01T20:27:31.131Z'
}
8:27:31 PM [info] GET /api/companies/current 304 in 66ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[2025-05-01T20:27:31.162Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":262,"count":2,"taskIds":[719,718],"taskTypes":["open_banking","ky3p"]}
8:27:31 PM [info] GET /api/tasks/718 304 in 95ms :: {"id":718,"title":"2. S&P KY3P Security Assessment: DemoTest","description":"...
[2025-05-01T20:27:31.194Z] [INFO] [TaskDependencies] Unlocked task {"companyId":262,"taskId":719,"taskType":"open_banking"}
[2025-05-01T20:27:31.194Z] [DEBUG] Broadcasting task update with object format {"taskId":719,"status":"not_started"}
[2025-05-01T20:27:31.195Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[2025-05-01T20:27:31.229Z] [INFO] [TaskDependencies] Unlocked task {"companyId":262,"taskId":718,"taskType":"ky3p"}
[2025-05-01T20:27:31.229Z] [DEBUG] Broadcasting task update with object format {"taskId":718,"status":"not_started"}
[2025-05-01T20:27:31.229Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[2025-05-01T20:27:31.229Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":262,"count":2}
[Tasks] Successfully unlocked all tasks for company: 262
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 304',
    condition2: 'tasks.created_by = 304',
    condition3: "tasks.company_id = 262 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
[Tasks Routes] Fetching task by ID: {
  taskId: 718,
  userCompanyId: 262,
  timestamp: '2025-05-01T20:27:31.326Z'
}
[Task Templates API] Fetching template for task type: ky3p, user: 304
8:27:31 PM [info] GET /api/tasks 200 in 275ms :: [{"id":716,"title":"New User Invitation: e@e.com","description":"Complete use...
[Tasks Routes] Task found by ID: {
  taskId: 718,
  title: '2. S&P KY3P Security Assessment: DemoTest',
  type: 'ky3p',
  formDataFields: 0,
  timestamp: '2025-05-01T20:27:31.359Z'
}
[Task Templates API] Found template: 48 (S&P KY3P Security Assessment) for task type: ky3p
8:27:31 PM [info] GET /api/tasks/718 200 in 64ms :: {"id":718,"title":"2. S&P KY3P Security Assessment: DemoTest","description":"...
[Task Templates API] Retrieved 10 configuration items for template ID: 48
8:27:31 PM [info] GET /api/task-templates/by-type/ky3p 304 in 101ms :: {"id":48,"name":"S&P KY3P Security Assessment","description":"S&P KY3P Securi...
8:27:31 PM [info] GET /api/companies/current 304 in 30ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:27:31 PM [info] GET /api/tasks 304 in 33ms :: [{"id":716,"title":"New User Invitation: e@e.com","description":"Complete use...
[2025-05-01T20:27:31.598Z] [INFO] Fetching all KY3P fields 
[2025-05-01T20:27:31.698Z] [INFO] Successfully retrieved 120 KY3P fields 
8:27:31 PM [info] GET /api/ky3p-fields 304 in 136ms :: [{"id":1,"order":1,"field_key":"externalSystems","display_name":"External Sys...
[2025-05-01T20:27:31.892Z] [INFO] Fetching KY3P progress for task 718 
[2025-05-01T20:27:31.955Z] [INFO] Retrieved 120 responses for task 718 
8:27:32 PM [info] GET /api/ky3p/progress/718 304 in 137ms :: {"success":true,"taskId":718,"status":"not_started","responses":[{"id":8124,"...
[2025-05-01T20:27:32.178Z] [INFO] Fetching KY3P progress for task 718 
[Tasks Routes] Fetching task by ID: {
  taskId: 718,
  userCompanyId: 262,
  timestamp: '2025-05-01T20:27:32.188Z'
}
[Tasks Routes] Task found by ID: {
  taskId: 718,
  title: '2. S&P KY3P Security Assessment: DemoTest',
  type: 'ky3p',
  formDataFields: 0,
  timestamp: '2025-05-01T20:27:32.220Z'
}
[2025-05-01T20:27:32.241Z] [INFO] Retrieved 120 responses for task 718 
8:27:32 PM [info] GET /api/tasks/718 304 in 67ms :: {"id":718,"title":"2. S&P KY3P Security Assessment: DemoTest","description":"...
8:27:32 PM [info] GET /api/ky3p/progress/718 304 in 125ms :: {"success":true,"taskId":718,"status":"not_started","responses":[{"id":8124,"...
[2025-05-01T20:27:32.414Z] [INFO] Fetching KY3P responses for task 718 
[Tasks Routes] Fetching task by ID: {
  taskId: 718,
  userCompanyId: 262,
  timestamp: '2025-05-01T20:27:32.465Z'
}
[2025-05-01T20:27:32.480Z] [INFO] Retrieved 120 responses for task 718 
[Tasks Routes] Task found by ID: {
  taskId: 718,
  title: '2. S&P KY3P Security Assessment: DemoTest',
  type: 'ky3p',
  formDataFields: 0,
  timestamp: '2025-05-01T20:27:32.499Z'
}
8:27:32 PM [info] GET /api/tasks/718/ky3p-responses 304 in 96ms :: {"success":true,"taskId":718,"status":"not_started","responses":[{"id":8124,"...
8:27:32 PM [info] GET /api/tasks/718 304 in 66ms :: {"id":718,"title":"2. S&P KY3P Security Assessment: DemoTest","description":"...
[2025-05-01T20:27:32.666Z] [INFO] Fetching KY3P progress for task 718 
[2025-05-01T20:27:32.691Z] [INFO] Fetching KY3P responses for task 718 
[2025-05-01T20:27:32.757Z] [INFO] Retrieved 120 responses for task 718 
[2025-05-01T20:27:32.760Z] [INFO] Retrieved 120 responses for task 718 
8:27:32 PM [info] GET /api/tasks/718/ky3p-responses 304 in 98ms :: {"success":true,"taskId":718,"status":"not_started","responses":[{"id":8124,"...
8:27:32 PM [info] GET /api/ky3p/progress/718 304 in 183ms :: {"success":true,"taskId":718,"status":"not_started","responses":[{"id":8124,"...
[2025-05-01T20:27:33.002Z] [INFO] Fetching KY3P progress for task 718 
[2025-05-01T20:27:33.076Z] [INFO] Retrieved 120 responses for task 718 
8:27:33 PM [info] GET /api/ky3p/progress/718 304 in 146ms :: {"success":true,"taskId":718,"status":"not_started","responses":[{"id":8124,"...
8:27:34 PM [info] GET /api/companies/current 304 in 38ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:27:37 PM [info] GET /api/companies/current 304 in 31ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[KY3P API] Clear all fields requested for task 718
[KY3P] Task 718 progress updated: 0%
8:27:38 PM [info] POST /api/ky3p/clear-fields/718 200 in 163ms :: {"success":true,"message":"Successfully cleared all fields for task 718","pro...
8:27:38 PM [warn] POST /api/ky3p/batch-update/718 400 in 32ms :: {"success":false,"message":"Invalid request: responses is required and must b...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:27:39 PM [info] POST /api/ky3p/batch-update/718 200 in 362ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[KY3P API] Received batch update for task 718 with 120 fields
8:27:40 PM [info] GET /api/tasks 304 in 32ms :: [{"id":716,"title":"New User Invitation: e@e.com","description":"Complete use...
8:27:40 PM [info] GET /api/companies/current 304 in 36ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[KY3P] Task 718 progress updated: 0%
8:27:40 PM [info] POST /api/ky3p/batch-update/718 200 in 446ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:27:40 PM [info] POST /api/ky3p/batch-update/718 200 in 286ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[Tasks Routes] Fetching task by ID: {
  taskId: 717,
  userCompanyId: 262,
  timestamp: '2025-05-01T20:27:41.154Z'
}
8:27:41 PM [info] GET /api/companies/current 304 in 34ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[Tasks Routes] Fetching latest KYB form data for task: 717
[Tasks Routes] Found 30 KYB responses for task 717
[Tasks Routes] Constructed form data with 30 fields
[Tasks Routes] Task found by ID: {
  taskId: 717,
  title: '1. KYB Form: DemoTest',
  type: 'company_kyb',
  formDataFields: 30,
  timestamp: '2025-05-01T20:27:41.248Z'
}
8:27:41 PM [info] GET /api/tasks/717 200 in 127ms :: {"id":717,"title":"1. KYB Form: DemoTest","description":"Complete KYB verific...
[Tasks Routes] Fetching task by ID: {
  taskId: 717,
  userCompanyId: 262,
  timestamp: '2025-05-01T20:27:41.443Z'
}
[Task Templates API] Fetching template for task type: company_kyb, user: 304
[Tasks Routes] Fetching latest KYB form data for task: 717
8:27:41 PM [info] GET /api/companies/current 304 in 31ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[Task Templates API] Found template: 1 (KYB Form) for task type: company_kyb
[Task Templates API] Retrieved 9 configuration items for template ID: 1
[Tasks Routes] Found 30 KYB responses for task 717
[Tasks Routes] Constructed form data with 30 fields
[Tasks Routes] Task found by ID: {
  taskId: 717,
  title: '1. KYB Form: DemoTest',
  type: 'company_kyb',
  formDataFields: 30,
  timestamp: '2025-05-01T20:27:41.533Z'
}
8:27:41 PM [info] GET /api/task-templates/by-type/company_kyb 304 in 89ms :: {"id":1,"name":"KYB Form","description":"Know Your Business form for company ...
8:27:41 PM [info] GET /api/tasks/717 304 in 121ms :: {"id":717,"title":"1. KYB Form: DemoTest","description":"Complete KYB verific...
[2025-05-01T20:27:41.708Z] [INFO] Fetching KYB fields 
[2025-05-01T20:27:41.738Z] [INFO] KYB fields retrieved successfully {"fieldCount":30,"groups":["companyProfile","financialProfile","governanceLeadership","operationsCompliance"]}
8:27:41 PM [info] GET /api/kyb/fields 304 in 64ms :: [{"id":1,"field_key":"legalEntityName","display_name":"Legal Entity Name","fi...
[KYB API Debug] Loading progress for task: 717
[Task Reconciliation] Found 30 responses for task 717 (type: company_kyb)
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: true,
  timestamp: '2025-05-01T20:27:41.994Z'
}
[STATUS DETERMINATION] Task has 100% progress, setting to READY_FOR_SUBMISSION
[Task Reconciliation] Progress calculation: {
  taskId: 717,
  currentProgress: 100,
  calculatedProgress: 100,
  currentStatus: 'ready_for_submission',
  calculatedStatus: 'ready_for_submission',
  responseCount: 30,
  completeCount: 30
}
[Task Reconciliation] No updates needed for task 717
[KYB API Debug] Retrieved task: {
  taskId: 717,
  status: 'ready_for_submission',
  progress: 100,
  metadata: [
    'locked',
    'company_id',
    'created_at',
    'statusFlow',
    'created_via',
    'lastUpdated',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for',
    'prerequisite_completed',
    'prerequisite_completed_at',
    'lastProgressReconciliation'
  ],
  timestamp: '2025-05-01T20:27:42.025Z'
}
[KYB API Debug] Retrieved responses: {
  responseCount: 30,
  fields: [
    { field: 'dueDiligence', status: 'COMPLETE', hasValue: true },
    { field: 'regulatoryActions', status: 'COMPLETE', hasValue: true },
    { field: 'externalAudit', status: 'COMPLETE', hasValue: true },
    { field: 'businessType', status: 'COMPLETE', hasValue: true },
    { field: 'dataTypes', status: 'COMPLETE', hasValue: true },
    { field: 'jurisdiction', status: 'COMPLETE', hasValue: true },
    { field: 'contactEmail', status: 'COMPLETE', hasValue: true },
    {
      field: 'marketCapitalization',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'lifetimeCustomerValue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'annualRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'monthlyRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'financialStatements',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'operationalPolicies',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'dataVolume', status: 'COMPLETE', hasValue: true },
    { field: 'sanctionsCheck', status: 'COMPLETE', hasValue: true },
    {
      field: 'directorsAndOfficers',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'corporateRegistration',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'licenses', status: 'COMPLETE', hasValue: true },
    {
      field: 'investigationsIncidents',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'controlEnvironment', status: 'COMPLETE', hasValue: true },
    { field: 'authorizedSigners', status: 'COMPLETE', hasValue: true },
    {
      field: 'ultimateBeneficialOwners',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'registeredAddress', status: 'COMPLETE', hasValue: true },
    { field: 'companyPhone', status: 'COMPLETE', hasValue: true },
    { field: 'priorNames', status: 'COMPLETE', hasValue: true },
    { field: 'goodStanding', status: 'COMPLETE', hasValue: true },
    { field: 'incorporationDate', status: 'COMPLETE', hasValue: true },
    {
      field: 'governmentOwnership',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'legalEntityName', status: 'COMPLETE', hasValue: true },
    { field: 'registrationNumber', status: 'COMPLETE', hasValue: true }
  ],
  timestamp: '2025-05-01T20:27:42.056Z'
}
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 717,
  responseCount: 30,
  progress: 100,
  status: 'ready_for_submission',
  formDataKeys: [
    'dueDiligence',
    'regulatoryActions',
    'externalAudit',
    'businessType',
    'dataTypes',
    'jurisdiction',
    'contactEmail',
    'marketCapitalization',
    'lifetimeCustomerValue',
    'annualRecurringRevenue',
    'monthlyRecurringRevenue',
    'financialStatements',
    'operationalPolicies',
    'dataVolume',
    'sanctionsCheck',
    'directorsAndOfficers',
    'corporateRegistration',
    'licenses',
    'investigationsIncidents',
    'controlEnvironment',
    'authorizedSigners',
    'ultimateBeneficialOwners',
    'registeredAddress',
    'companyPhone',
    'priorNames',
    'goodStanding',
    'incorporationDate',
    'governmentOwnership',
    'legalEntityName',
    'registrationNumber'
  ]
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-05-01T20:27:42.057Z
[SERVER DEBUG] Task ID: 717, Found 30 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010"
[SERVER DEBUG] Checking field goodStanding in retrieved data: "Yes"
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: "Yes"
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: "No significant incidents in the past 3 years"
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 30 fields, status: ready_for_submission, progress: 100%
===============================================
8:27:42 PM [info] GET /api/kyb/progress/717 200 in 156ms :: {"formData":{"dueDiligence":"Yes","regulatoryActions":"Yes","externalAudit":"...
[KYB API Debug] Loading progress for task: 717
[TimestampHandler] Retrieved 31 timestamps for task 717
[TimestampAPI] Returning 31 timestamps for task 717
[Task Reconciliation] Found 30 responses for task 717 (type: company_kyb)
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: true,
  timestamp: '2025-05-01T20:27:42.295Z'
}
[STATUS DETERMINATION] Task has 100% progress, setting to READY_FOR_SUBMISSION
[Task Reconciliation] Progress calculation: {
  taskId: 717,
  currentProgress: 100,
  calculatedProgress: 100,
  currentStatus: 'ready_for_submission',
  calculatedStatus: 'ready_for_submission',
  responseCount: 30,
  completeCount: 30
}
[Task Reconciliation] No updates needed for task 717
8:27:42 PM [info] GET /api/kyb/timestamps/717 200 in 65ms :: {"legalEntityName":1746130669180,"registrationNumber":1746130669180,"incorpor...
[KYB API Debug] Retrieved task: {
  taskId: 717,
  status: 'ready_for_submission',
  progress: 100,
  metadata: [
    'locked',
    'company_id',
    'created_at',
    'statusFlow',
    'created_via',
    'lastUpdated',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for',
    'prerequisite_completed',
    'prerequisite_completed_at',
    'lastProgressReconciliation'
  ],
  timestamp: '2025-05-01T20:27:42.325Z'
}
[KYB API Debug] Retrieved responses: {
  responseCount: 30,
  fields: [
    { field: 'dueDiligence', status: 'COMPLETE', hasValue: true },
    { field: 'regulatoryActions', status: 'COMPLETE', hasValue: true },
    { field: 'externalAudit', status: 'COMPLETE', hasValue: true },
    { field: 'businessType', status: 'COMPLETE', hasValue: true },
    { field: 'dataTypes', status: 'COMPLETE', hasValue: true },
    { field: 'jurisdiction', status: 'COMPLETE', hasValue: true },
    { field: 'contactEmail', status: 'COMPLETE', hasValue: true },
    {
      field: 'marketCapitalization',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'lifetimeCustomerValue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'annualRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'monthlyRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'financialStatements',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'operationalPolicies',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'dataVolume', status: 'COMPLETE', hasValue: true },
    { field: 'sanctionsCheck', status: 'COMPLETE', hasValue: true },
    {
      field: 'directorsAndOfficers',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'corporateRegistration',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'licenses', status: 'COMPLETE', hasValue: true },
    {
      field: 'investigationsIncidents',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'controlEnvironment', status: 'COMPLETE', hasValue: true },
    { field: 'authorizedSigners', status: 'COMPLETE', hasValue: true },
    {
      field: 'ultimateBeneficialOwners',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'registeredAddress', status: 'COMPLETE', hasValue: true },
    { field: 'companyPhone', status: 'COMPLETE', hasValue: true },
    { field: 'priorNames', status: 'COMPLETE', hasValue: true },
    { field: 'goodStanding', status: 'COMPLETE', hasValue: true },
    { field: 'incorporationDate', status: 'COMPLETE', hasValue: true },
    {
      field: 'governmentOwnership',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'legalEntityName', status: 'COMPLETE', hasValue: true },
    { field: 'registrationNumber', status: 'COMPLETE', hasValue: true }
  ],
  timestamp: '2025-05-01T20:27:42.355Z'
}
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 717,
  responseCount: 30,
  progress: 100,
  status: 'ready_for_submission',
  formDataKeys: [
    'dueDiligence',
    'regulatoryActions',
    'externalAudit',
    'businessType',
    'dataTypes',
    'jurisdiction',
    'contactEmail',
    'marketCapitalization',
    'lifetimeCustomerValue',
    'annualRecurringRevenue',
    'monthlyRecurringRevenue',
    'financialStatements',
    'operationalPolicies',
    'dataVolume',
    'sanctionsCheck',
    'directorsAndOfficers',
    'corporateRegistration',
    'licenses',
    'investigationsIncidents',
    'controlEnvironment',
    'authorizedSigners',
    'ultimateBeneficialOwners',
    'registeredAddress',
    'companyPhone',
    'priorNames',
    'goodStanding',
    'incorporationDate',
    'governmentOwnership',
    'legalEntityName',
    'registrationNumber'
  ]
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-05-01T20:27:42.356Z
[SERVER DEBUG] Task ID: 717, Found 30 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010"
[SERVER DEBUG] Checking field goodStanding in retrieved data: "Yes"
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: "Yes"
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: "No significant incidents in the past 3 years"
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 30 fields, status: ready_for_submission, progress: 100%
===============================================
8:27:42 PM [info] GET /api/kyb/progress/717 304 in 152ms :: {"formData":{"dueDiligence":"Yes","regulatoryActions":"Yes","externalAudit":"...
[TimestampHandler] Retrieved 31 timestamps for task 717
[TimestampAPI] Returning 31 timestamps for task 717
8:27:42 PM [info] GET /api/kyb/timestamps/717 304 in 64ms :: {"legalEntityName":1746130669180,"registrationNumber":1746130669180,"incorpor...
[KYB Clear] Clearing fields for task { taskId: 717, userId: 304, companyId: 262 }
[KYB Clear] Deleted responses { taskId: 717, count: 30 }
[KYB Clear] Updated task status { taskId: 717, status: 'not_started', progress: 0 }
[2025-05-01T20:27:43.903Z] [DEBUG] Broadcasting task update with object format {"taskId":717,"status":"not_started"}
[2025-05-01T20:27:43.903Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
8:27:43 PM [info] POST /api/kyb/clear/717 200 in 179ms :: {"success":true,"message":"KYB fields cleared successfully","taskId":717}
8:27:44 PM [info] GET /api/companies/current 304 in 31ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[TimestampHandler] Saving 30 timestamps for task 717
[TimestampHandler] Successfully saved timestamps for task 717
[TimestampAPI] Saved 30 timestamps for task 717
8:27:44 PM [info] POST /api/kyb/timestamps/717 200 in 63ms :: {"message":"Timestamps saved successfully","count":30}
===============================================
[SERVER DEBUG] KYB PROGRESS SAVE REQUEST RECEIVED at 2025-05-01T20:27:44.846Z
===============================================
Task ID: 717
Progress: 0
Status: not_started
Field count: 30
Sample form data values:
- dueDiligence: "" (string)
- regulatoryActions: "" (string)
- externalAudit: "" (string)
- businessType: "" (string)
- dataTypes: "" (string)
Request details:
- Method: POST
- Content-Type: application/json
- Content-Length: 1740
===============================================
===============================================
[SERVER DEBUG] PROCESSING FORM DATA FIELDS AT 2025-05-01T20:27:44.907Z
[SERVER DEBUG] Task ID: 717, Field count: 30
===============================================
[SERVER DEBUG] COMPLETE FORM DATA DUMP:
[SERVER DEBUG] dueDiligence: "" (string)
[SERVER DEBUG] regulatoryActions: "" (string)
[SERVER DEBUG] externalAudit: "" (string)
[SERVER DEBUG] businessType: "" (string)
[SERVER DEBUG] dataTypes: "" (string)
[SERVER DEBUG] jurisdiction: "" (string)
[SERVER DEBUG] contactEmail: "" (string)
[SERVER DEBUG] marketCapitalization: "" (string)
[SERVER DEBUG] lifetimeCustomerValue: "" (string)
[SERVER DEBUG] annualRecurringRevenue: "" (string)
[SERVER DEBUG] monthlyRecurringRevenue: "" (string)
[SERVER DEBUG] financialStatements: "" (string)
[SERVER DEBUG] operationalPolicies: "" (string)
[SERVER DEBUG] dataVolume: "" (string)
[SERVER DEBUG] sanctionsCheck: "" (string)
[SERVER DEBUG] directorsAndOfficers: "" (string)
[SERVER DEBUG] corporateRegistration: "" (string)
[SERVER DEBUG] licenses: "" (string)
[SERVER DEBUG] investigationsIncidents: "" (string)
[SERVER DEBUG] controlEnvironment: "" (string)
[SERVER DEBUG] authorizedSigners: "" (string)
[SERVER DEBUG] ultimateBeneficialOwners: "" (string)
[SERVER DEBUG] registeredAddress: "" (string)
[SERVER DEBUG] companyPhone: "" (string)
[SERVER DEBUG] priorNames: "" (string)
[SERVER DEBUG] goodStanding: "" (string)
[SERVER DEBUG] incorporationDate: "" (string)
[SERVER DEBUG] governmentOwnership: "" (string)
[SERVER DEBUG] legalEntityName: "" (string)
[SERVER DEBUG] registrationNumber: "" (string)
[SERVER DEBUG] END OF FORM DATA DUMP
[SERVER DEBUG] No fields with value "asdf" found in incoming data
[SERVER DEBUG] Processing field: "dueDiligence" (ID: 29)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "dueDiligence"
[SERVER DEBUG] - Value: "" (string)
[SERVER DEBUG] - Status: EMPTY
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "dueDiligence":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "dueDiligence"
[SERVER DEBUG] --- Finished processing field "dueDiligence" ---

[SERVER DEBUG] Processing field: "regulatoryActions" (ID: 30)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "regulatoryActions"
[SERVER DEBUG] - Value: "" (string)
[SERVER DEBUG] - Status: EMPTY
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "regulatoryActions":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "regulatoryActions"
[SERVER DEBUG] --- Finished processing field "regulatoryActions" ---

[SERVER DEBUG] Processing field: "externalAudit" (ID: 12)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "externalAudit"
[SERVER DEBUG] - Value: "" (string)
[SERVER DEBUG] - Status: EMPTY
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "externalAudit":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "externalAudit"
[SERVER DEBUG] --- Finished processing field "externalAudit" ---

[SERVER DEBUG] Processing field: "businessType" (ID: 4)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "businessType"
[SERVER DEBUG] - Value: "" (string)
[SERVER DEBUG] - Status: EMPTY
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "businessType":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "businessType"
[SERVER DEBUG] --- Finished processing field "businessType" ---

[SERVER DEBUG] Processing field: "dataTypes" (ID: 27)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "dataTypes"
[SERVER DEBUG] - Value: "" (string)
[SERVER DEBUG] - Status: EMPTY
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "dataTypes":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "dataTypes"
[SERVER DEBUG] --- Finished processing field "dataTypes" ---

[SERVER DEBUG] Processing field: "jurisdiction" (ID: 5)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[Tasks Routes] Updating task progress: { taskId: 717, timestamp: '2025-05-01T20:27:45.378Z' }
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "jurisdiction"
[SERVER DEBUG] - Value: "" (string)
[SERVER DEBUG] - Status: EMPTY
8:27:45 PM [info] GET /api/companies/current 304 in 35ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:27:45 PM [info] GET /api/tasks 304 in 50ms :: [{"id":716,"title":"New User Invitation: e@e.com","description":"Complete use...
[Task Reconciliation] Found 6 responses for task 717 (type: company_kyb)
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: true,
  timestamp: '2025-05-01T20:27:45.448Z'
}
[STATUS DETERMINATION] Task has incomplete required fields, setting to IN_PROGRESS
[Task Reconciliation] Progress calculation: {
  taskId: 717,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'in_progress',
  responseCount: 6,
  completeCount: 0
}
[Task Reconciliation] Correcting task 717: {
  progressFrom: 0,
  progressTo: 0,
  statusFrom: 'not_started',
  statusTo: 'in_progress',
  forceUpdate: true
}
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "jurisdiction":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "jurisdiction"
[SERVER DEBUG] --- Finished processing field "jurisdiction" ---

[SERVER DEBUG] Processing field: "contactEmail" (ID: 18)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[Progress Utils] Broadcasting task progress update: {
  taskId: 717,
  progress: 0,
  requestedStatus: 'in_progress',
  finalStatus: 'in_progress',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  timestamp: '2025-05-01T20:27:45.479Z'
}
[2025-05-01T20:27:45.479Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "contactEmail"
[SERVER DEBUG] - Value: "" (string)
[SERVER DEBUG] - Status: EMPTY
[Tasks Routes] Task progress reconciled: {
  taskId: 717,
  progress: 0,
  status: 'in_progress',
  timestamp: '2025-05-01T20:27:45.509Z'
}
8:27:45 PM [info] POST /api/tasks/717/update-progress 200 in 162ms :: {"success":true,"progress":0,"status":"in_progress","taskId":717}
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "contactEmail":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "contactEmail"
[SERVER DEBUG] --- Finished processing field "contactEmail" ---

[SERVER DEBUG] Processing field: "marketCapitalization" (ID: 19)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "marketCapitalization"
[SERVER DEBUG] - Value: "" (string)
[SERVER DEBUG] - Status: EMPTY
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "marketCapitalization":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "marketCapitalization"
[SERVER DEBUG] --- Finished processing field "marketCapitalization" ---

[SERVER DEBUG] Processing field: "lifetimeCustomerValue" (ID: 20)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "lifetimeCustomerValue"
[SERVER DEBUG] - Value: "" (string)
[SERVER DEBUG] - Status: EMPTY
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "lifetimeCustomerValue":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "lifetimeCustomerValue"
[SERVER DEBUG] --- Finished processing field "lifetimeCustomerValue" ---

[SERVER DEBUG] Processing field: "annualRecurringRevenue" (ID: 21)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "annualRecurringRevenue"
[SERVER DEBUG] - Value: "" (string)
[SERVER DEBUG] - Status: EMPTY
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "annualRecurringRevenue":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "annualRecurringRevenue"
[SERVER DEBUG] --- Finished processing field "annualRecurringRevenue" ---

[SERVER DEBUG] Processing field: "monthlyRecurringRevenue" (ID: 22)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "monthlyRecurringRevenue"
[SERVER DEBUG] - Value: "" (string)
[SERVER DEBUG] - Status: EMPTY
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "monthlyRecurringRevenue":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "monthlyRecurringRevenue"
[SERVER DEBUG] --- Finished processing field "monthlyRecurringRevenue" ---

[SERVER DEBUG] Processing field: "financialStatements" (ID: 24)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "financialStatements"
[SERVER DEBUG] - Value: "" (string)
[SERVER DEBUG] - Status: EMPTY
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "financialStatements":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "financialStatements"
[SERVER DEBUG] --- Finished processing field "financialStatements" ---

[SERVER DEBUG] Processing field: "operationalPolicies" (ID: 25)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "operationalPolicies"
[SERVER DEBUG] - Value: "" (string)
[SERVER DEBUG] - Status: EMPTY
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "operationalPolicies":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "operationalPolicies"
[SERVER DEBUG] --- Finished processing field "operationalPolicies" ---

[SERVER DEBUG] Processing field: "dataVolume" (ID: 26)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "dataVolume"
[SERVER DEBUG] - Value: "" (string)
[SERVER DEBUG] - Status: EMPTY
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "dataVolume":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "dataVolume"
[SERVER DEBUG] --- Finished processing field "dataVolume" ---

[SERVER DEBUG] Processing field: "sanctionsCheck" (ID: 28)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "sanctionsCheck"
[SERVER DEBUG] - Value: "" (string)
[SERVER DEBUG] - Status: EMPTY
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "sanctionsCheck":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "sanctionsCheck"
[SERVER DEBUG] --- Finished processing field "sanctionsCheck" ---

[SERVER DEBUG] Processing field: "directorsAndOfficers" (ID: 17)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "directorsAndOfficers"
[SERVER DEBUG] - Value: "" (string)
[SERVER DEBUG] - Status: EMPTY
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "directorsAndOfficers":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "directorsAndOfficers"
[SERVER DEBUG] --- Finished processing field "directorsAndOfficers" ---

[SERVER DEBUG] Processing field: "corporateRegistration" (ID: 11)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "corporateRegistration"
[SERVER DEBUG] - Value: "" (string)
[SERVER DEBUG] - Status: EMPTY
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "corporateRegistration":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "corporateRegistration"
[SERVER DEBUG] --- Finished processing field "corporateRegistration" ---

[SERVER DEBUG] Processing field: "licenses" (ID: 9)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "licenses"
[SERVER DEBUG] - Value: "" (string)
[SERVER DEBUG] - Status: EMPTY
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "licenses":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "licenses"
[SERVER DEBUG] --- Finished processing field "licenses" ---

[SERVER DEBUG] Processing field: "investigationsIncidents" (ID: 23)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "investigationsIncidents"
[SERVER DEBUG] - Value: "" (string)
[SERVER DEBUG] - Status: EMPTY
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "investigationsIncidents":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "investigationsIncidents"
[SERVER DEBUG] --- Finished processing field "investigationsIncidents" ---

[SERVER DEBUG] Processing field: "controlEnvironment" (ID: 13)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "controlEnvironment"
[SERVER DEBUG] - Value: "" (string)
[SERVER DEBUG] - Status: EMPTY
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "controlEnvironment":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "controlEnvironment"
[SERVER DEBUG] --- Finished processing field "controlEnvironment" ---

[SERVER DEBUG] Processing field: "authorizedSigners" (ID: 14)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "authorizedSigners"
[SERVER DEBUG] - Value: "" (string)
[SERVER DEBUG] - Status: EMPTY
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "authorizedSigners":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "authorizedSigners"
[SERVER DEBUG] --- Finished processing field "authorizedSigners" ---

[SERVER DEBUG] Processing field: "ultimateBeneficialOwners" (ID: 16)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "ultimateBeneficialOwners"
[SERVER DEBUG] - Value: "" (string)
[SERVER DEBUG] - Status: EMPTY
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "ultimateBeneficialOwners":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "ultimateBeneficialOwners"
[SERVER DEBUG] --- Finished processing field "ultimateBeneficialOwners" ---

[SERVER DEBUG] Processing field: "registeredAddress" (ID: 6)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "registeredAddress"
[SERVER DEBUG] - Value: "" (string)
[SERVER DEBUG] - Status: EMPTY
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "registeredAddress":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "registeredAddress"
[SERVER DEBUG] --- Finished processing field "registeredAddress" ---

[SERVER DEBUG] Processing field: "companyPhone" (ID: 7)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "companyPhone"
[SERVER DEBUG] - Value: "" (string)
[SERVER DEBUG] - Status: EMPTY
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "companyPhone":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "companyPhone"
[SERVER DEBUG] --- Finished processing field "companyPhone" ---

[SERVER DEBUG] Processing field: "priorNames" (ID: 8)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "priorNames"
[SERVER DEBUG] - Value: "" (string)
[SERVER DEBUG] - Status: EMPTY
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "priorNames":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "priorNames"
[SERVER DEBUG] --- Finished processing field "priorNames" ---

[SERVER DEBUG] Processing field: "goodStanding" (ID: 10)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "goodStanding"
[SERVER DEBUG] - Value: "" (string)
[SERVER DEBUG] - Status: EMPTY
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "goodStanding":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "goodStanding"
[SERVER DEBUG] --- Finished processing field "goodStanding" ---

[SERVER DEBUG] Processing field: "incorporationDate" (ID: 3)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "incorporationDate"
[SERVER DEBUG] - Value: "" (string)
[SERVER DEBUG] - Status: EMPTY
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "incorporationDate":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "incorporationDate"
[SERVER DEBUG] --- Finished processing field "incorporationDate" ---

[SERVER DEBUG] Processing field: "governmentOwnership" (ID: 15)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "governmentOwnership"
[SERVER DEBUG] - Value: "" (string)
[SERVER DEBUG] - Status: EMPTY
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "governmentOwnership":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "governmentOwnership"
[SERVER DEBUG] --- Finished processing field "governmentOwnership" ---

[SERVER DEBUG] Processing field: "legalEntityName" (ID: 1)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "legalEntityName"
[SERVER DEBUG] - Value: "" (string)
[SERVER DEBUG] - Status: EMPTY
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "legalEntityName":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "legalEntityName"
[SERVER DEBUG] Broadcasting legalEntityName insert via WebSocket: ""
[SERVER DEBUG] Error broadcasting field update: TypeError: broadcastFieldUpdate is not a function
    at <anonymous> (/home/runner/workspace/server/routes/kyb.ts:996:19)
[SERVER DEBUG] --- Finished processing field "legalEntityName" ---

[SERVER DEBUG] Processing field: "registrationNumber" (ID: 2)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "registrationNumber"
[SERVER DEBUG] - Value: "" (string)
[SERVER DEBUG] - Status: EMPTY
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "registrationNumber":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "registrationNumber"
[SERVER DEBUG] --- Finished processing field "registrationNumber" ---

[KYB API Debug] Using client-provided status: not_started
[WebSocket] Broadcasting task update for task 717: progress=0, status=not_started
[2025-05-01T20:27:47.786Z] [DEBUG] Broadcasting task update with object format {"taskId":717,"status":"not_started"}
[2025-05-01T20:27:47.786Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
===============================================
[SERVER DEBUG] PREPARING RESPONSE at 2025-05-01T20:27:47.815Z
[SERVER DEBUG] Found 30 fields in database after update
===============================================
[SERVER DEBUG] Checking field corporateRegistration in updated data: ""
[SERVER DEBUG] Checking field goodStanding in updated data: ""
[SERVER DEBUG] Checking field regulatoryActions in updated data: ""
[SERVER DEBUG] Checking field investigationsIncidents in updated data: ""
[SERVER DEBUG] No fields with value "asdf" found in response data
[SERVER DEBUG] Sending response with 30 fields, status: not_started, progress: 0%
[SERVER DEBUG] Updating task.savedFormData to ensure persistence across navigation
[SERVER DEBUG] ✅ Successfully updated task.savedFormData with latest form data
===============================================
8:27:47 PM [info] POST /api/kyb/progress 200 in 3038ms :: {"success":true,"savedData":{"progress":0,"status":"not_started","formData":{...
8:27:48 PM [info] GET /api/companies/current 304 in 31ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[TimestampHandler] Saving 31 timestamps for task 717
[TimestampHandler] Successfully saved timestamps for task 717
[TimestampAPI] Saved 31 timestamps for task 717
8:27:48 PM [info] POST /api/kyb/timestamps/717 200 in 74ms :: {"message":"Timestamps saved successfully","count":31}
===============================================
[SERVER DEBUG] KYB PROGRESS SAVE REQUEST RECEIVED at 2025-05-01T20:27:48.762Z
===============================================
Task ID: 717
Progress: 0
Status: not_started
Field count: 31
Sample form data values:
- dueDiligence: "" (string)
- regulatoryActions: "" (string)
- externalAudit: "" (string)
- businessType: "" (string)
- dataTypes: "" (string)
Request details:
- Method: POST
- Content-Type: application/json
- Content-Length: 1776
===============================================
===============================================
[SERVER DEBUG] PROCESSING FORM DATA FIELDS AT 2025-05-01T20:27:48.824Z
[SERVER DEBUG] Task ID: 717, Field count: 31
===============================================
[SERVER DEBUG] COMPLETE FORM DATA DUMP:
[SERVER DEBUG] dueDiligence: "" (string)
[SERVER DEBUG] regulatoryActions: "" (string)
[SERVER DEBUG] externalAudit: "" (string)
[SERVER DEBUG] businessType: "" (string)
[SERVER DEBUG] dataTypes: "" (string)
[SERVER DEBUG] jurisdiction: "" (string)
[SERVER DEBUG] contactEmail: "" (string)
[SERVER DEBUG] marketCapitalization: "" (string)
[SERVER DEBUG] lifetimeCustomerValue: "" (string)
[SERVER DEBUG] annualRecurringRevenue: "" (string)
[SERVER DEBUG] monthlyRecurringRevenue: "" (string)
[SERVER DEBUG] financialStatements: "" (string)
[SERVER DEBUG] operationalPolicies: "" (string)
[SERVER DEBUG] dataVolume: "" (string)
[SERVER DEBUG] sanctionsCheck: "" (string)
[SERVER DEBUG] directorsAndOfficers: "" (string)
[SERVER DEBUG] corporateRegistration: "" (string)
[SERVER DEBUG] licenses: "" (string)
[SERVER DEBUG] investigationsIncidents: "" (string)
[SERVER DEBUG] controlEnvironment: "" (string)
[SERVER DEBUG] authorizedSigners: "" (string)
[SERVER DEBUG] ultimateBeneficialOwners: "" (string)
[SERVER DEBUG] registeredAddress: "" (string)
[SERVER DEBUG] companyPhone: "" (string)
[SERVER DEBUG] priorNames: "" (string)
[SERVER DEBUG] goodStanding: "" (string)
[SERVER DEBUG] incorporationDate: "" (string)
[SERVER DEBUG] governmentOwnership: "" (string)
[SERVER DEBUG] legalEntityName: "" (string)
[SERVER DEBUG] registrationNumber: "" (string)
[SERVER DEBUG] taskId: "717" (number)
[SERVER DEBUG] END OF FORM DATA DUMP
[SERVER DEBUG] No fields with value "asdf" found in incoming data
[SERVER DEBUG] Processing field: "dueDiligence" (ID: 29)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "dueDiligence" in database
[SERVER DEBUG] - Old value: "" (string)
[SERVER DEBUG] - New value: "" (string)
[SERVER DEBUG] - Old status: EMPTY, New status: EMPTY
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: dueDiligence
[SERVER DEBUG] - field_id: 29
[SERVER DEBUG] - response_value: ""
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "dueDiligence":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "dueDiligence" (ID: 5893)
[SERVER DEBUG] --- Finished processing field "dueDiligence" ---

[SERVER DEBUG] Processing field: "regulatoryActions" (ID: 30)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "regulatoryActions" in database
[SERVER DEBUG] - Old value: "" (string)
[SERVER DEBUG] - New value: "" (string)
[SERVER DEBUG] - Old status: EMPTY, New status: EMPTY
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: regulatoryActions
[SERVER DEBUG] - field_id: 30
[SERVER DEBUG] - response_value: ""
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "regulatoryActions":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "regulatoryActions" (ID: 5894)
[SERVER DEBUG] --- Finished processing field "regulatoryActions" ---

[SERVER DEBUG] Processing field: "externalAudit" (ID: 12)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "externalAudit" in database
[SERVER DEBUG] - Old value: "" (string)
[SERVER DEBUG] - New value: "" (string)
[SERVER DEBUG] - Old status: EMPTY, New status: EMPTY
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: externalAudit
[SERVER DEBUG] - field_id: 12
[SERVER DEBUG] - response_value: ""
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "externalAudit":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "externalAudit" (ID: 5895)
[SERVER DEBUG] --- Finished processing field "externalAudit" ---

[SERVER DEBUG] Processing field: "businessType" (ID: 4)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "businessType" in database
[SERVER DEBUG] - Old value: "" (string)
[SERVER DEBUG] - New value: "" (string)
[SERVER DEBUG] - Old status: EMPTY, New status: EMPTY
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: businessType
[SERVER DEBUG] - field_id: 4
[SERVER DEBUG] - response_value: ""
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "businessType":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "businessType" (ID: 5896)
[SERVER DEBUG] --- Finished processing field "businessType" ---

[SERVER DEBUG] Processing field: "dataTypes" (ID: 27)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "dataTypes" in database
[SERVER DEBUG] - Old value: "" (string)
[SERVER DEBUG] - New value: "" (string)
[SERVER DEBUG] - Old status: EMPTY, New status: EMPTY
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: dataTypes
[SERVER DEBUG] - field_id: 27
[SERVER DEBUG] - response_value: ""
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "dataTypes":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "dataTypes" (ID: 5897)
[SERVER DEBUG] --- Finished processing field "dataTypes" ---

[SERVER DEBUG] Processing field: "jurisdiction" (ID: 5)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "jurisdiction" in database
[SERVER DEBUG] - Old value: "" (string)
[SERVER DEBUG] - New value: "" (string)
[SERVER DEBUG] - Old status: EMPTY, New status: EMPTY
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: jurisdiction
[SERVER DEBUG] - field_id: 5
[SERVER DEBUG] - response_value: ""
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "jurisdiction":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "jurisdiction" (ID: 5898)
[SERVER DEBUG] --- Finished processing field "jurisdiction" ---

[SERVER DEBUG] Processing field: "contactEmail" (ID: 18)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "contactEmail" in database
[SERVER DEBUG] - Old value: "" (string)
[SERVER DEBUG] - New value: "" (string)
[SERVER DEBUG] - Old status: EMPTY, New status: EMPTY
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: contactEmail
[SERVER DEBUG] - field_id: 18
[SERVER DEBUG] - response_value: ""
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "contactEmail":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "contactEmail" (ID: 5899)
[SERVER DEBUG] --- Finished processing field "contactEmail" ---

[SERVER DEBUG] Processing field: "marketCapitalization" (ID: 19)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "marketCapitalization" in database
[SERVER DEBUG] - Old value: "" (string)
[SERVER DEBUG] - New value: "" (string)
[SERVER DEBUG] - Old status: EMPTY, New status: EMPTY
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: marketCapitalization
[SERVER DEBUG] - field_id: 19
[SERVER DEBUG] - response_value: ""
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "marketCapitalization":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "marketCapitalization" (ID: 5900)
[SERVER DEBUG] --- Finished processing field "marketCapitalization" ---

[SERVER DEBUG] Processing field: "lifetimeCustomerValue" (ID: 20)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "lifetimeCustomerValue" in database
[SERVER DEBUG] - Old value: "" (string)
[SERVER DEBUG] - New value: "" (string)
[SERVER DEBUG] - Old status: EMPTY, New status: EMPTY
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: lifetimeCustomerValue
[SERVER DEBUG] - field_id: 20
[SERVER DEBUG] - response_value: ""
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "lifetimeCustomerValue":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "lifetimeCustomerValue" (ID: 5901)
[SERVER DEBUG] --- Finished processing field "lifetimeCustomerValue" ---

[SERVER DEBUG] Processing field: "annualRecurringRevenue" (ID: 21)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "annualRecurringRevenue" in database
[SERVER DEBUG] - Old value: "" (string)
[SERVER DEBUG] - New value: "" (string)
[SERVER DEBUG] - Old status: EMPTY, New status: EMPTY
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: annualRecurringRevenue
[SERVER DEBUG] - field_id: 21
[SERVER DEBUG] - response_value: ""
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "annualRecurringRevenue":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "annualRecurringRevenue" (ID: 5902)
[SERVER DEBUG] --- Finished processing field "annualRecurringRevenue" ---

[SERVER DEBUG] Processing field: "monthlyRecurringRevenue" (ID: 22)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "monthlyRecurringRevenue" in database
[SERVER DEBUG] - Old value: "" (string)
[SERVER DEBUG] - New value: "" (string)
[SERVER DEBUG] - Old status: EMPTY, New status: EMPTY
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: monthlyRecurringRevenue
[SERVER DEBUG] - field_id: 22
[SERVER DEBUG] - response_value: ""
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "monthlyRecurringRevenue":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "monthlyRecurringRevenue" (ID: 5903)
[SERVER DEBUG] --- Finished processing field "monthlyRecurringRevenue" ---

[SERVER DEBUG] Processing field: "financialStatements" (ID: 24)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "financialStatements" in database
[SERVER DEBUG] - Old value: "" (string)
[SERVER DEBUG] - New value: "" (string)
[SERVER DEBUG] - Old status: EMPTY, New status: EMPTY
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: financialStatements
[SERVER DEBUG] - field_id: 24
[SERVER DEBUG] - response_value: ""
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "financialStatements":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "financialStatements" (ID: 5904)
[SERVER DEBUG] --- Finished processing field "financialStatements" ---

[SERVER DEBUG] Processing field: "operationalPolicies" (ID: 25)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "operationalPolicies" in database
[SERVER DEBUG] - Old value: "" (string)
[SERVER DEBUG] - New value: "" (string)
[SERVER DEBUG] - Old status: EMPTY, New status: EMPTY
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: operationalPolicies
[SERVER DEBUG] - field_id: 25
[SERVER DEBUG] - response_value: ""
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "operationalPolicies":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "operationalPolicies" (ID: 5905)
[SERVER DEBUG] --- Finished processing field "operationalPolicies" ---

[SERVER DEBUG] Processing field: "dataVolume" (ID: 26)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "dataVolume" in database
[SERVER DEBUG] - Old value: "" (string)
[SERVER DEBUG] - New value: "" (string)
[SERVER DEBUG] - Old status: EMPTY, New status: EMPTY
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: dataVolume
[SERVER DEBUG] - field_id: 26
[SERVER DEBUG] - response_value: ""
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "dataVolume":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "dataVolume" (ID: 5906)
[SERVER DEBUG] --- Finished processing field "dataVolume" ---

[SERVER DEBUG] Processing field: "sanctionsCheck" (ID: 28)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "sanctionsCheck" in database
[SERVER DEBUG] - Old value: "" (string)
[SERVER DEBUG] - New value: "" (string)
[SERVER DEBUG] - Old status: EMPTY, New status: EMPTY
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: sanctionsCheck
[SERVER DEBUG] - field_id: 28
[SERVER DEBUG] - response_value: ""
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "sanctionsCheck":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "sanctionsCheck" (ID: 5907)
[SERVER DEBUG] --- Finished processing field "sanctionsCheck" ---

[SERVER DEBUG] Processing field: "directorsAndOfficers" (ID: 17)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "directorsAndOfficers" in database
[SERVER DEBUG] - Old value: "" (string)
[SERVER DEBUG] - New value: "" (string)
[SERVER DEBUG] - Old status: EMPTY, New status: EMPTY
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: directorsAndOfficers
[SERVER DEBUG] - field_id: 17
[SERVER DEBUG] - response_value: ""
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "directorsAndOfficers":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "directorsAndOfficers" (ID: 5908)
[SERVER DEBUG] --- Finished processing field "directorsAndOfficers" ---

[SERVER DEBUG] Processing field: "corporateRegistration" (ID: 11)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "corporateRegistration" in database
[SERVER DEBUG] - Old value: "" (string)
[SERVER DEBUG] - New value: "" (string)
[SERVER DEBUG] - Old status: EMPTY, New status: EMPTY
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: corporateRegistration
[SERVER DEBUG] - field_id: 11
[SERVER DEBUG] - response_value: ""
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "corporateRegistration":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "corporateRegistration" (ID: 5909)
[SERVER DEBUG] --- Finished processing field "corporateRegistration" ---

[SERVER DEBUG] Processing field: "licenses" (ID: 9)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "licenses" in database
[SERVER DEBUG] - Old value: "" (string)
[SERVER DEBUG] - New value: "" (string)
[SERVER DEBUG] - Old status: EMPTY, New status: EMPTY
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: licenses
[SERVER DEBUG] - field_id: 9
[SERVER DEBUG] - response_value: ""
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "licenses":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "licenses" (ID: 5910)
[SERVER DEBUG] --- Finished processing field "licenses" ---

[SERVER DEBUG] Processing field: "investigationsIncidents" (ID: 23)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "investigationsIncidents" in database
[SERVER DEBUG] - Old value: "" (string)
[SERVER DEBUG] - New value: "" (string)
[SERVER DEBUG] - Old status: EMPTY, New status: EMPTY
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: investigationsIncidents
[SERVER DEBUG] - field_id: 23
[SERVER DEBUG] - response_value: ""
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "investigationsIncidents":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "investigationsIncidents" (ID: 5911)
[SERVER DEBUG] --- Finished processing field "investigationsIncidents" ---

[SERVER DEBUG] Processing field: "controlEnvironment" (ID: 13)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "controlEnvironment" in database
[SERVER DEBUG] - Old value: "" (string)
[SERVER DEBUG] - New value: "" (string)
[SERVER DEBUG] - Old status: EMPTY, New status: EMPTY
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: controlEnvironment
[SERVER DEBUG] - field_id: 13
[SERVER DEBUG] - response_value: ""
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "controlEnvironment":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "controlEnvironment" (ID: 5912)
[SERVER DEBUG] --- Finished processing field "controlEnvironment" ---

[SERVER DEBUG] Processing field: "authorizedSigners" (ID: 14)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "authorizedSigners" in database
[SERVER DEBUG] - Old value: "" (string)
[SERVER DEBUG] - New value: "" (string)
[SERVER DEBUG] - Old status: EMPTY, New status: EMPTY
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: authorizedSigners
[SERVER DEBUG] - field_id: 14
[SERVER DEBUG] - response_value: ""
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "authorizedSigners":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "authorizedSigners" (ID: 5913)
[SERVER DEBUG] --- Finished processing field "authorizedSigners" ---

[SERVER DEBUG] Processing field: "ultimateBeneficialOwners" (ID: 16)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "ultimateBeneficialOwners" in database
[SERVER DEBUG] - Old value: "" (string)
[SERVER DEBUG] - New value: "" (string)
[SERVER DEBUG] - Old status: EMPTY, New status: EMPTY
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: ultimateBeneficialOwners
[SERVER DEBUG] - field_id: 16
[SERVER DEBUG] - response_value: ""
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "ultimateBeneficialOwners":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "ultimateBeneficialOwners" (ID: 5914)
[SERVER DEBUG] --- Finished processing field "ultimateBeneficialOwners" ---

[SERVER DEBUG] Processing field: "registeredAddress" (ID: 6)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "registeredAddress" in database
[SERVER DEBUG] - Old value: "" (string)
[SERVER DEBUG] - New value: "" (string)
[SERVER DEBUG] - Old status: EMPTY, New status: EMPTY
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: registeredAddress
[SERVER DEBUG] - field_id: 6
[SERVER DEBUG] - response_value: ""
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "registeredAddress":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "registeredAddress" (ID: 5915)
[SERVER DEBUG] --- Finished processing field "registeredAddress" ---

[SERVER DEBUG] Processing field: "companyPhone" (ID: 7)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "companyPhone" in database
[SERVER DEBUG] - Old value: "" (string)
[SERVER DEBUG] - New value: "" (string)
[SERVER DEBUG] - Old status: EMPTY, New status: EMPTY
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: companyPhone
[SERVER DEBUG] - field_id: 7
[SERVER DEBUG] - response_value: ""
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "companyPhone":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "companyPhone" (ID: 5916)
[SERVER DEBUG] --- Finished processing field "companyPhone" ---

[SERVER DEBUG] Processing field: "priorNames" (ID: 8)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "priorNames" in database
[SERVER DEBUG] - Old value: "" (string)
[SERVER DEBUG] - New value: "" (string)
[SERVER DEBUG] - Old status: EMPTY, New status: EMPTY
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: priorNames
[SERVER DEBUG] - field_id: 8
[SERVER DEBUG] - response_value: ""
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "priorNames":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "priorNames" (ID: 5917)
[SERVER DEBUG] --- Finished processing field "priorNames" ---

[SERVER DEBUG] Processing field: "goodStanding" (ID: 10)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "goodStanding" in database
[SERVER DEBUG] - Old value: "" (string)
[SERVER DEBUG] - New value: "" (string)
[SERVER DEBUG] - Old status: EMPTY, New status: EMPTY
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: goodStanding
[SERVER DEBUG] - field_id: 10
[SERVER DEBUG] - response_value: ""
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "goodStanding":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "goodStanding" (ID: 5918)
[SERVER DEBUG] --- Finished processing field "goodStanding" ---

[SERVER DEBUG] Processing field: "incorporationDate" (ID: 3)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "incorporationDate" in database
[SERVER DEBUG] - Old value: "" (string)
[SERVER DEBUG] - New value: "" (string)
[SERVER DEBUG] - Old status: EMPTY, New status: EMPTY
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: incorporationDate
[SERVER DEBUG] - field_id: 3
[SERVER DEBUG] - response_value: ""
8:27:51 PM [info] GET /api/companies/current 304 in 32ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "incorporationDate":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "incorporationDate" (ID: 5919)
[SERVER DEBUG] --- Finished processing field "incorporationDate" ---

[SERVER DEBUG] Processing field: "governmentOwnership" (ID: 15)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "governmentOwnership" in database
[SERVER DEBUG] - Old value: "" (string)
[SERVER DEBUG] - New value: "" (string)
[SERVER DEBUG] - Old status: EMPTY, New status: EMPTY
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: governmentOwnership
[SERVER DEBUG] - field_id: 15
[SERVER DEBUG] - response_value: ""
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "governmentOwnership":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "governmentOwnership" (ID: 5920)
[SERVER DEBUG] --- Finished processing field "governmentOwnership" ---

[SERVER DEBUG] Processing field: "legalEntityName" (ID: 1)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "legalEntityName" in database
[SERVER DEBUG] - Old value: "" (string)
[SERVER DEBUG] - New value: "" (string)
[SERVER DEBUG] - Old status: EMPTY, New status: EMPTY
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: legalEntityName
[SERVER DEBUG] - field_id: 1
[SERVER DEBUG] - response_value: ""
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "legalEntityName":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "legalEntityName" (ID: 5921)
[SERVER DEBUG] Broadcasting legalEntityName update via WebSocket: ""
[SERVER DEBUG] Error broadcasting field update: TypeError: broadcastFieldUpdate is not a function
    at <anonymous> (/home/runner/workspace/server/routes/kyb.ts:942:19)
[SERVER DEBUG] --- Finished processing field "legalEntityName" ---

[SERVER DEBUG] Processing field: "registrationNumber" (ID: 2)
[SERVER DEBUG] Original value: (empty string)
[SERVER DEBUG] Normalized value: "" (string)
[SERVER DEBUG] Field status: EMPTY
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "registrationNumber" in database
[SERVER DEBUG] - Old value: "" (string)
[SERVER DEBUG] - New value: "" (string)
[SERVER DEBUG] - Old status: EMPTY, New status: EMPTY
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: registrationNumber
[SERVER DEBUG] - field_id: 2
[SERVER DEBUG] - response_value: ""
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "registrationNumber":
[SERVER DEBUG] - Expected: ""
[SERVER DEBUG] - Actual: ""
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "registrationNumber" (ID: 5922)
[SERVER DEBUG] --- Finished processing field "registrationNumber" ---

[SERVER DEBUG] ERROR: Field not found in database schema: "taskId"
[KYB API Debug] Using client-provided status: not_started
[WebSocket] Broadcasting task update for task 717: progress=0, status=not_started
[2025-05-01T20:27:51.814Z] [DEBUG] Broadcasting task update with object format {"taskId":717,"status":"not_started"}
[2025-05-01T20:27:51.814Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
===============================================
[SERVER DEBUG] PREPARING RESPONSE at 2025-05-01T20:27:51.846Z
[SERVER DEBUG] Found 30 fields in database after update
===============================================
[SERVER DEBUG] Checking field corporateRegistration in updated data: ""
[SERVER DEBUG] Checking field goodStanding in updated data: ""
[SERVER DEBUG] Checking field regulatoryActions in updated data: ""
[SERVER DEBUG] Checking field investigationsIncidents in updated data: ""
[SERVER DEBUG] No fields with value "asdf" found in response data
[SERVER DEBUG] Sending response with 30 fields, status: not_started, progress: 0%
[SERVER DEBUG] Updating task.savedFormData to ensure persistence across navigation
[SERVER DEBUG] ✅ Successfully updated task.savedFormData with latest form data
===============================================
8:27:51 PM [info] POST /api/kyb/progress 200 in 3146ms :: {"success":true,"savedData":{"progress":0,"status":"not_started","formData":{...
8:27:54 PM [info] GET /api/companies/current 304 in 30ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:27:57 PM [info] GET /api/companies/current 304 in 35ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[Tasks Routes] Fetching task by ID: {
  taskId: 717,
  userCompanyId: 262,
  timestamp: '2025-05-01T20:27:59.755Z'
}
[Tasks Routes] Fetching latest KYB form data for task: 717
8:27:59 PM [info] GET /api/companies/current 304 in 34ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[Tasks Routes] Found 30 KYB responses for task 717
[Tasks Routes] Constructed form data with 30 fields
[Tasks Routes] Task found by ID: {
  taskId: 717,
  title: '1. KYB Form: DemoTest',
  type: 'company_kyb',
  formDataFields: 30,
  timestamp: '2025-05-01T20:27:59.846Z'
}
8:27:59 PM [info] GET /api/tasks/717 200 in 122ms :: {"id":717,"title":"1. KYB Form: DemoTest","description":"Complete KYB verific...
[Task Templates API] Fetching template for task type: company_kyb, user: 304
8:28:00 PM [info] GET /api/companies/current 304 in 31ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[Task Templates API] Found template: 1 (KYB Form) for task type: company_kyb
[Task Templates API] Retrieved 9 configuration items for template ID: 1
8:28:00 PM [info] GET /api/task-templates/by-type/company_kyb 304 in 93ms :: {"id":1,"name":"KYB Form","description":"Know Your Business form for company ...
[KYB API Debug] Loading progress for task: 717
[Task Reconciliation] Found 30 responses for task 717 (type: company_kyb)
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: true,
  timestamp: '2025-05-01T20:28:00.410Z'
}
[STATUS DETERMINATION] Task has incomplete required fields, setting to IN_PROGRESS
[Task Reconciliation] Progress calculation: {
  taskId: 717,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'in_progress',
  responseCount: 30,
  completeCount: 0
}
[Task Reconciliation] Correcting task 717: {
  progressFrom: 0,
  progressTo: 0,
  statusFrom: 'not_started',
  statusTo: 'in_progress',
  forceUpdate: false
}
[Progress Utils] Broadcasting task progress update: {
  taskId: 717,
  progress: 0,
  requestedStatus: 'in_progress',
  finalStatus: 'in_progress',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  timestamp: '2025-05-01T20:28:00.443Z'
}
[2025-05-01T20:28:00.443Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[KYB API Debug] Retrieved task: {
  taskId: 717,
  status: 'in_progress',
  progress: 0,
  metadata: [
    'locked',
    'company_id',
    'created_at',
    'statusFlow',
    'created_via',
    'lastUpdated',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for',
    'prerequisite_completed',
    'prerequisite_completed_at',
    'lastProgressReconciliation'
  ],
  timestamp: '2025-05-01T20:28:00.474Z'
}
[KYB API Debug] Retrieved responses: {
  responseCount: 30,
  fields: [
    { field: 'externalAudit', status: 'EMPTY', hasValue: false },
    { field: 'businessType', status: 'EMPTY', hasValue: false },
    { field: 'dataTypes', status: 'EMPTY', hasValue: false },
    { field: 'jurisdiction', status: 'EMPTY', hasValue: false },
    { field: 'contactEmail', status: 'EMPTY', hasValue: false },
    { field: 'marketCapitalization', status: 'EMPTY', hasValue: false },
    {
      field: 'lifetimeCustomerValue',
      status: 'EMPTY',
      hasValue: false
    },
    {
      field: 'annualRecurringRevenue',
      status: 'EMPTY',
      hasValue: false
    },
    {
      field: 'monthlyRecurringRevenue',
      status: 'EMPTY',
      hasValue: false
    },
    { field: 'financialStatements', status: 'EMPTY', hasValue: false },
    { field: 'operationalPolicies', status: 'EMPTY', hasValue: false },
    { field: 'dataVolume', status: 'EMPTY', hasValue: false },
    { field: 'sanctionsCheck', status: 'EMPTY', hasValue: false },
    { field: 'directorsAndOfficers', status: 'EMPTY', hasValue: false },
    {
      field: 'corporateRegistration',
      status: 'EMPTY',
      hasValue: false
    },
    { field: 'licenses', status: 'EMPTY', hasValue: false },
    {
      field: 'investigationsIncidents',
      status: 'EMPTY',
      hasValue: false
    },
    { field: 'controlEnvironment', status: 'EMPTY', hasValue: false },
    { field: 'authorizedSigners', status: 'EMPTY', hasValue: false },
    {
      field: 'ultimateBeneficialOwners',
      status: 'EMPTY',
      hasValue: false
    },
    { field: 'registeredAddress', status: 'EMPTY', hasValue: false },
    { field: 'companyPhone', status: 'EMPTY', hasValue: false },
    { field: 'priorNames', status: 'EMPTY', hasValue: false },
    { field: 'goodStanding', status: 'EMPTY', hasValue: false },
    { field: 'incorporationDate', status: 'EMPTY', hasValue: false },
    { field: 'governmentOwnership', status: 'EMPTY', hasValue: false },
    { field: 'legalEntityName', status: 'EMPTY', hasValue: false },
    { field: 'registrationNumber', status: 'EMPTY', hasValue: false },
    { field: 'dueDiligence', status: 'EMPTY', hasValue: false },
    { field: 'regulatoryActions', status: 'EMPTY', hasValue: false }
  ],
  timestamp: '2025-05-01T20:28:00.506Z'
}
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 717,
  responseCount: 30,
  progress: 0,
  status: 'in_progress',
  formDataKeys: [
    'externalAudit',
    'businessType',
    'dataTypes',
    'jurisdiction',
    'contactEmail',
    'marketCapitalization',
    'lifetimeCustomerValue',
    'annualRecurringRevenue',
    'monthlyRecurringRevenue',
    'financialStatements',
    'operationalPolicies',
    'dataVolume',
    'sanctionsCheck',
    'directorsAndOfficers',
    'corporateRegistration',
    'licenses',
    'investigationsIncidents',
    'controlEnvironment',
    'authorizedSigners',
    'ultimateBeneficialOwners',
    'registeredAddress',
    'companyPhone',
    'priorNames',
    'goodStanding',
    'incorporationDate',
    'governmentOwnership',
    'legalEntityName',
    'registrationNumber',
    'dueDiligence',
    'regulatoryActions'
  ]
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-05-01T20:28:00.507Z
[SERVER DEBUG] Task ID: 717, Found 30 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: ""
[SERVER DEBUG] Checking field goodStanding in retrieved data: ""
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: ""
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: ""
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 30 fields, status: in_progress, progress: 0%
===============================================
8:28:00 PM [info] GET /api/kyb/progress/717 200 in 205ms :: {"formData":{"externalAudit":"","businessType":"","dataTypes":"","jurisdictio...
[KYB API Debug] Loading progress for task: 717
[TimestampHandler] Retrieved 31 timestamps for task 717
[TimestampAPI] Returning 31 timestamps for task 717
[Task Reconciliation] Found 30 responses for task 717 (type: company_kyb)
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'in_progress',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: true,
  timestamp: '2025-05-01T20:28:00.765Z'
}
[STATUS DETERMINATION] Task has incomplete required fields, setting to IN_PROGRESS
[Task Reconciliation] Progress calculation: {
  taskId: 717,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'in_progress',
  calculatedStatus: 'in_progress',
  responseCount: 30,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 717
8:28:00 PM [info] GET /api/kyb/timestamps/717 200 in 69ms :: {"legalEntityName":1746131266901,"registrationNumber":1746131266901,"incorpor...
[KYB API Debug] Retrieved task: {
  taskId: 717,
  status: 'in_progress',
  progress: 0,
  metadata: [
    'locked',
    'company_id',
    'created_at',
    'statusFlow',
    'created_via',
    'lastUpdated',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for',
    'prerequisite_completed',
    'prerequisite_completed_at',
    'lastProgressReconciliation'
  ],
  timestamp: '2025-05-01T20:28:00.800Z'
}
[KYB API Debug] Retrieved responses: {
  responseCount: 30,
  fields: [
    { field: 'externalAudit', status: 'EMPTY', hasValue: false },
    { field: 'businessType', status: 'EMPTY', hasValue: false },
    { field: 'dataTypes', status: 'EMPTY', hasValue: false },
    { field: 'jurisdiction', status: 'EMPTY', hasValue: false },
    { field: 'contactEmail', status: 'EMPTY', hasValue: false },
    { field: 'marketCapitalization', status: 'EMPTY', hasValue: false },
    {
      field: 'lifetimeCustomerValue',
      status: 'EMPTY',
      hasValue: false
    },
    {
      field: 'annualRecurringRevenue',
      status: 'EMPTY',
      hasValue: false
    },
    {
      field: 'monthlyRecurringRevenue',
      status: 'EMPTY',
      hasValue: false
    },
    { field: 'financialStatements', status: 'EMPTY', hasValue: false },
    { field: 'operationalPolicies', status: 'EMPTY', hasValue: false },
    { field: 'dataVolume', status: 'EMPTY', hasValue: false },
    { field: 'sanctionsCheck', status: 'EMPTY', hasValue: false },
    { field: 'directorsAndOfficers', status: 'EMPTY', hasValue: false },
    {
      field: 'corporateRegistration',
      status: 'EMPTY',
      hasValue: false
    },
    { field: 'licenses', status: 'EMPTY', hasValue: false },
    {
      field: 'investigationsIncidents',
      status: 'EMPTY',
      hasValue: false
    },
    { field: 'controlEnvironment', status: 'EMPTY', hasValue: false },
    { field: 'authorizedSigners', status: 'EMPTY', hasValue: false },
    {
      field: 'ultimateBeneficialOwners',
      status: 'EMPTY',
      hasValue: false
    },
    { field: 'registeredAddress', status: 'EMPTY', hasValue: false },
    { field: 'companyPhone', status: 'EMPTY', hasValue: false },
    { field: 'priorNames', status: 'EMPTY', hasValue: false },
    { field: 'goodStanding', status: 'EMPTY', hasValue: false },
    { field: 'incorporationDate', status: 'EMPTY', hasValue: false },
    { field: 'governmentOwnership', status: 'EMPTY', hasValue: false },
    { field: 'legalEntityName', status: 'EMPTY', hasValue: false },
    { field: 'registrationNumber', status: 'EMPTY', hasValue: false },
    { field: 'dueDiligence', status: 'EMPTY', hasValue: false },
    { field: 'regulatoryActions', status: 'EMPTY', hasValue: false }
  ],
  timestamp: '2025-05-01T20:28:00.833Z'
}
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 717,
  responseCount: 30,
  progress: 0,
  status: 'in_progress',
  formDataKeys: [
    'externalAudit',
    'businessType',
    'dataTypes',
    'jurisdiction',
    'contactEmail',
    'marketCapitalization',
    'lifetimeCustomerValue',
    'annualRecurringRevenue',
    'monthlyRecurringRevenue',
    'financialStatements',
    'operationalPolicies',
    'dataVolume',
    'sanctionsCheck',
    'directorsAndOfficers',
    'corporateRegistration',
    'licenses',
    'investigationsIncidents',
    'controlEnvironment',
    'authorizedSigners',
    'ultimateBeneficialOwners',
    'registeredAddress',
    'companyPhone',
    'priorNames',
    'goodStanding',
    'incorporationDate',
    'governmentOwnership',
    'legalEntityName',
    'registrationNumber',
    'dueDiligence',
    'regulatoryActions'
  ]
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-05-01T20:28:00.833Z
[SERVER DEBUG] Task ID: 717, Found 30 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: ""
[SERVER DEBUG] Checking field goodStanding in retrieved data: ""
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: ""
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: ""
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 30 fields, status: in_progress, progress: 0%
===============================================
8:28:00 PM [info] GET /api/kyb/progress/717 304 in 171ms :: {"formData":{"externalAudit":"","businessType":"","dataTypes":"","jurisdictio...
[TimestampHandler] Retrieved 31 timestamps for task 717
[TimestampAPI] Returning 31 timestamps for task 717
8:28:01 PM [info] GET /api/kyb/timestamps/717 304 in 69ms :: {"legalEntityName":1746131266901,"registrationNumber":1746131266901,"incorpor...
8:28:03 PM [info] GET /api/companies/current 304 in 33ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 304, company_id: 262, email: 'e@e.com' }
[2025-05-01T20:28:03.566Z] [INFO] Performing dynamic task unlocking check for company {"companyId":262,"userId":304}
[2025-05-01T20:28:03.596Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":262}
[Tasks] Automatically unlocking all tasks for company { userId: 304, companyId: 262, requestedBy: 'automatic_task_unlock' }
[2025-05-01T20:28:03.596Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":262}
8:28:03 PM [info] GET /api/companies/current 304 in 32ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[2025-05-01T20:28:03.627Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":262,"count":2,"taskIds":[719,718],"taskTypes":["open_banking","ky3p"]}
[2025-05-01T20:28:03.658Z] [INFO] [TaskDependencies] Unlocked task {"companyId":262,"taskId":719,"taskType":"open_banking"}
[2025-05-01T20:28:03.658Z] [DEBUG] Broadcasting task update with object format {"taskId":719,"status":"not_started"}
[2025-05-01T20:28:03.658Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[2025-05-01T20:28:03.689Z] [INFO] [TaskDependencies] Unlocked task {"companyId":262,"taskId":718,"taskType":"ky3p"}
[2025-05-01T20:28:03.689Z] [DEBUG] Broadcasting task update with object format {"taskId":718,"status":"not_started"}
[2025-05-01T20:28:03.690Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[2025-05-01T20:28:03.690Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":262,"count":2}
[Tasks] Successfully unlocked all tasks for company: 262
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 304',
    condition2: 'tasks.created_by = 304',
    condition3: "tasks.company_id = 262 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
8:28:03 PM [info] GET /api/tasks 200 in 221ms :: [{"id":716,"title":"New User Invitation: e@e.com","description":"Complete use...
8:28:04 PM [info] GET /api/tasks 304 in 34ms :: [{"id":716,"title":"New User Invitation: e@e.com","description":"Complete use...
8:28:06 PM [info] GET /api/companies/current 304 in 31ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:28:09 PM [info] GET /api/companies/current 304 in 33ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:28:12 PM [info] GET /api/companies/current 304 in 32ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:28:15 PM [info] GET /api/companies/current 304 in 31ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:28:18 PM [info] GET /api/companies/current 304 in 30ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:28:19 PM [info] GET /api/tasks 304 in 32ms :: [{"id":716,"title":"New User Invitation: e@e.com","description":"Complete use...
8:28:21 PM [info] GET /api/companies/current 304 in 39ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:28:24 PM [info] GET /api/companies/current 304 in 33ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:28:27 PM [info] GET /api/companies/current 304 in 31ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:28:30 PM [info] GET /api/companies/current 304 in 32ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[Current Company] Fetching company for user: { userId: 304, companyId: 262 }
[Current Company] Found company: {
  id: 262,
  name: 'DemoTest',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
8:28:33 PM [info] GET /api/companies/current 304 in 62ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 304, company_id: 262, email: 'e@e.com' }
[2025-05-01T20:28:34.342Z] [INFO] Performing dynamic task unlocking check for company {"companyId":262,"userId":304}
[2025-05-01T20:28:34.372Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":262}
[Tasks] Automatically unlocking all tasks for company { userId: 304, companyId: 262, requestedBy: 'automatic_task_unlock' }
[2025-05-01T20:28:34.372Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":262}
[2025-05-01T20:28:34.402Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":262,"count":2,"taskIds":[719,718],"taskTypes":["open_banking","ky3p"]}
[2025-05-01T20:28:34.436Z] [INFO] [TaskDependencies] Unlocked task {"companyId":262,"taskId":719,"taskType":"open_banking"}
[2025-05-01T20:28:34.436Z] [DEBUG] Broadcasting task update with object format {"taskId":719,"status":"not_started"}
[2025-05-01T20:28:34.436Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[2025-05-01T20:28:34.467Z] [INFO] [TaskDependencies] Unlocked task {"companyId":262,"taskId":718,"taskType":"ky3p"}
[2025-05-01T20:28:34.467Z] [DEBUG] Broadcasting task update with object format {"taskId":718,"status":"not_started"}
[2025-05-01T20:28:34.467Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[2025-05-01T20:28:34.467Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":262,"count":2}
[Tasks] Successfully unlocked all tasks for company: 262
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 304',
    condition2: 'tasks.created_by = 304',
    condition3: "tasks.company_id = 262 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
8:28:34 PM [info] GET /api/tasks 200 in 221ms :: [{"id":716,"title":"New User Invitation: e@e.com","description":"Complete use...
8:28:36 PM [info] GET /api/companies/current 304 in 35ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:28:39 PM [info] GET /api/companies/current 304 in 38ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:28:42 PM [info] GET /api/companies/current 304 in 36ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:28:45 PM [info] GET /api/companies/current 304 in 32ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:28:48 PM [info] GET /api/companies/current 304 in 31ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:28:49 PM [info] GET /api/tasks 304 in 31ms :: [{"id":716,"title":"New User Invitation: e@e.com","description":"Complete use...
8:28:51 PM [info] GET /api/companies/current 304 in 32ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:28:54 PM [info] GET /api/companies/current 304 in 32ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:28:57 PM [info] GET /api/companies/current 304 in 41ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:29:00 PM [info] GET /api/companies/current 304 in 32ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:29:03 PM [info] GET /api/companies/current 304 in 33ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 304, company_id: 262, email: 'e@e.com' }
[2025-05-01T20:29:04.939Z] [INFO] Performing dynamic task unlocking check for company {"companyId":262,"userId":304}
[2025-05-01T20:29:04.969Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":262}
[Tasks] Automatically unlocking all tasks for company { userId: 304, companyId: 262, requestedBy: 'automatic_task_unlock' }
[2025-05-01T20:29:04.974Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":262}
[2025-05-01T20:29:05.005Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":262,"count":2,"taskIds":[719,718],"taskTypes":["open_banking","ky3p"]}
[2025-05-01T20:29:05.036Z] [INFO] [TaskDependencies] Unlocked task {"companyId":262,"taskId":719,"taskType":"open_banking"}
[2025-05-01T20:29:05.036Z] [DEBUG] Broadcasting task update with object format {"taskId":719,"status":"not_started"}
[2025-05-01T20:29:05.036Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[2025-05-01T20:29:05.092Z] [INFO] [TaskDependencies] Unlocked task {"companyId":262,"taskId":718,"taskType":"ky3p"}
[2025-05-01T20:29:05.092Z] [DEBUG] Broadcasting task update with object format {"taskId":718,"status":"not_started"}
[2025-05-01T20:29:05.092Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[2025-05-01T20:29:05.092Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":262,"count":2}
[Tasks] Successfully unlocked all tasks for company: 262
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 304',
    condition2: 'tasks.created_by = 304',
    condition3: "tasks.company_id = 262 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
8:29:05 PM [info] GET /api/tasks 200 in 249ms :: [{"id":716,"title":"New User Invitation: e@e.com","description":"Complete use...
8:29:06 PM [info] GET /api/companies/current 304 in 31ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:29:09 PM [info] GET /api/companies/current 304 in 32ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:29:12 PM [info] GET /api/companies/current 304 in 30ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:29:15 PM [info] GET /api/companies/current 304 in 32ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:29:18 PM [info] GET /api/companies/current 304 in 31ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:29:20 PM [info] GET /api/tasks 304 in 31ms :: [{"id":716,"title":"New User Invitation: e@e.com","description":"Complete use...
8:29:21 PM [info] GET /api/companies/current 304 in 31ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:29:24 PM [info] GET /api/companies/current 304 in 33ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:29:27 PM [info] GET /api/companies/current 304 in 37ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:29:30 PM [info] GET /api/companies/current 304 in 32ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:29:33 PM [info] GET /api/companies/current 304 in 36ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 304, company_id: 262, email: 'e@e.com' }
[2025-05-01T20:29:35.552Z] [INFO] Performing dynamic task unlocking check for company {"companyId":262,"userId":304}
[2025-05-01T20:29:35.595Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":262}
[Tasks] Automatically unlocking all tasks for company { userId: 304, companyId: 262, requestedBy: 'automatic_task_unlock' }
[2025-05-01T20:29:35.596Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":262}
[2025-05-01T20:29:35.627Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":262,"count":2,"taskIds":[719,718],"taskTypes":["open_banking","ky3p"]}
[2025-05-01T20:29:35.658Z] [INFO] [TaskDependencies] Unlocked task {"companyId":262,"taskId":719,"taskType":"open_banking"}
[2025-05-01T20:29:35.658Z] [DEBUG] Broadcasting task update with object format {"taskId":719,"status":"not_started"}
[2025-05-01T20:29:35.658Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[2025-05-01T20:29:35.689Z] [INFO] [TaskDependencies] Unlocked task {"companyId":262,"taskId":718,"taskType":"ky3p"}
[2025-05-01T20:29:35.689Z] [DEBUG] Broadcasting task update with object format {"taskId":718,"status":"not_started"}
[2025-05-01T20:29:35.689Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[2025-05-01T20:29:35.689Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":262,"count":2}
[Tasks] Successfully unlocked all tasks for company: 262
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 304',
    condition2: 'tasks.created_by = 304',
    condition3: "tasks.company_id = 262 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
8:29:35 PM [info] GET /api/tasks 200 in 234ms :: [{"id":716,"title":"New User Invitation: e@e.com","description":"Complete use...
[Current Company] Fetching company for user: { userId: 304, companyId: 262 }
[Current Company] Found company: {
  id: 262,
  name: 'DemoTest',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
8:29:36 PM [info] GET /api/companies/current 304 in 65ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:29:39 PM [info] GET /api/companies/current 304 in 31ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:29:42 PM [info] GET /api/companies/current 304 in 31ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:29:45 PM [info] GET /api/companies/current 304 in 32ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:29:48 PM [info] GET /api/companies/current 304 in 32ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:29:51 PM [info] GET /api/tasks 304 in 40ms :: [{"id":716,"title":"New User Invitation: e@e.com","description":"Complete use...
8:29:51 PM [info] GET /api/companies/current 304 in 40ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:29:54 PM [info] GET /api/companies/current 304 in 40ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[Current Company] Using cached company data: 262
8:29:57 PM [info] GET /api/companies/current 304 in 43ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:30:00 PM [info] GET /api/companies/current 304 in 32ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:30:03 PM [info] GET /api/companies/current 304 in 34ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 304, company_id: 262, email: 'e@e.com' }
[2025-05-01T20:30:06.166Z] [INFO] Performing dynamic task unlocking check for company {"companyId":262,"userId":304}
[2025-05-01T20:30:06.198Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":262}
[Tasks] Automatically unlocking all tasks for company { userId: 304, companyId: 262, requestedBy: 'automatic_task_unlock' }
[2025-05-01T20:30:06.199Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":262}
[2025-05-01T20:30:06.231Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":262,"count":2,"taskIds":[719,718],"taskTypes":["open_banking","ky3p"]}
[2025-05-01T20:30:06.265Z] [INFO] [TaskDependencies] Unlocked task {"companyId":262,"taskId":719,"taskType":"open_banking"}
[2025-05-01T20:30:06.265Z] [DEBUG] Broadcasting task update with object format {"taskId":719,"status":"not_started"}
[2025-05-01T20:30:06.265Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[2025-05-01T20:30:06.298Z] [INFO] [TaskDependencies] Unlocked task {"companyId":262,"taskId":718,"taskType":"ky3p"}
[2025-05-01T20:30:06.298Z] [DEBUG] Broadcasting task update with object format {"taskId":718,"status":"not_started"}
[2025-05-01T20:30:06.298Z] [INFO] No active WebSocket clients, skipping broadcast {"messageType":"task_update"}
[2025-05-01T20:30:06.298Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":262,"count":2}
[Tasks] Successfully unlocked all tasks for company: 262
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 304',
    condition2: 'tasks.created_by = 304',
    condition3: "tasks.company_id = 262 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
8:30:06 PM [info] GET /api/tasks 200 in 227ms :: [{"id":716,"title":"New User Invitation: e@e.com","description":"Complete use...
8:30:06 PM [info] GET /api/companies/current 304 in 37ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:30:09 PM [info] GET /api/companies/current 304 in 35ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:30:12 PM [info] GET /api/companies/current 304 in 31ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:30:15 PM [info] GET /api/companies/current 304 in 31ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:30:18 PM [info] GET /api/companies/current 304 in 31ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:30:21 PM [info] GET /api/tasks 304 in 31ms :: [{"id":716,"title":"New User Invitation: e@e.com","description":"Complete use...
Suppressing further connection logs. Pool size: 3
8:30:21 PM [info] GET /api/companies/current 304 in 33ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
8:30:24 PM [info] GET /api/companies/current 304 in 32ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[Tasks] Using cached task data for user: 304
8:30:26 PM [info] GET /api/tasks 304 in 30ms :: [{"id":716,"title":"New User Invitation: e@e.com","description":"Complete use...
8:30:26 PM [info] GET /api/companies/current 304 in 31ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[Tasks Routes] Fetching task by ID: {
  taskId: 718,
  userCompanyId: 262,
  timestamp: '2025-05-01T20:30:26.287Z'
}
[Tasks Routes] Task found by ID: {
  taskId: 718,
  title: '2. S&P KY3P Security Assessment: DemoTest',
  type: 'ky3p',
  formDataFields: 0,
  timestamp: '2025-05-01T20:30:26.318Z'
}
8:30:26 PM [info] GET /api/tasks/718 200 in 66ms :: {"id":718,"title":"2. S&P KY3P Security Assessment: DemoTest","description":"...
[Task Templates API] Fetching template for task type: ky3p, user: 304
[Tasks Routes] Fetching task by ID: {
  taskId: 718,
  userCompanyId: 262,
  timestamp: '2025-05-01T20:30:26.535Z'
}
[Auth] Returning user session data
[Task Templates API] Found template: 48 (S&P KY3P Security Assessment) for task type: ky3p
8:30:26 PM [info] GET /api/companies/current 304 in 35ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[Tasks Routes] Task found by ID: {
  taskId: 718,
  title: '2. S&P KY3P Security Assessment: DemoTest',
  type: 'ky3p',
  formDataFields: 0,
  timestamp: '2025-05-01T20:30:26.595Z'
}
[Task Templates API] Retrieved 10 configuration items for template ID: 48
8:30:26 PM [info] GET /api/tasks/718 304 in 94ms :: {"id":718,"title":"2. S&P KY3P Security Assessment: DemoTest","description":"...
8:30:26 PM [info] GET /api/task-templates/by-type/ky3p 304 in 98ms :: {"id":48,"name":"S&P KY3P Security Assessment","description":"S&P KY3P Securi...
[2025-05-01T20:30:26.796Z] [INFO] Fetching KY3P progress for task 718 
[2025-05-01T20:30:26.859Z] [INFO] Retrieved 120 responses for task 718 
8:30:26 PM [info] GET /api/ky3p/progress/718 200 in 182ms :: {"success":true,"taskId":718,"status":"not_started","responses":[{"id":8484,"...
[2025-05-01T20:30:27.107Z] [INFO] Fetching KY3P progress for task 718 
[2025-05-01T20:30:27.169Z] [INFO] Retrieved 120 responses for task 718 
8:30:27 PM [info] GET /api/ky3p/progress/718 304 in 131ms :: {"success":true,"taskId":718,"status":"not_started","responses":[{"id":8484,"...
[Tasks Routes] Fetching task by ID: {
  taskId: 718,
  userCompanyId: 262,
  timestamp: '2025-05-01T20:30:27.244Z'
}
[Tasks Routes] Task found by ID: {
  taskId: 718,
  title: '2. S&P KY3P Security Assessment: DemoTest',
  type: 'ky3p',
  formDataFields: 0,
  timestamp: '2025-05-01T20:30:27.273Z'
}
8:30:27 PM [info] GET /api/tasks/718 304 in 59ms :: {"id":718,"title":"2. S&P KY3P Security Assessment: DemoTest","description":"...
[Tasks Routes] Fetching task by ID: {
  taskId: 718,
  userCompanyId: 262,
  timestamp: '2025-05-01T20:30:27.451Z'
}
[2025-05-01T20:30:27.454Z] [INFO] Fetching KY3P responses for task 718 
[Tasks Routes] Task found by ID: {
  taskId: 718,
  title: '2. S&P KY3P Security Assessment: DemoTest',
  type: 'ky3p',
  formDataFields: 0,
  timestamp: '2025-05-01T20:30:27.482Z'
}
8:30:27 PM [info] GET /api/tasks/718 304 in 68ms :: {"id":718,"title":"2. S&P KY3P Security Assessment: DemoTest","description":"...
[2025-05-01T20:30:27.526Z] [INFO] Retrieved 120 responses for task 718 
8:30:27 PM [info] GET /api/tasks/718/ky3p-responses 200 in 111ms :: {"success":true,"taskId":718,"status":"not_started","responses":[{"id":8484,"...
[2025-05-01T20:30:27.688Z] [INFO] Fetching KY3P responses for task 718 
[2025-05-01T20:30:27.753Z] [INFO] Retrieved 120 responses for task 718 
8:30:27 PM [info] GET /api/tasks/718/ky3p-responses 304 in 99ms :: {"success":true,"taskId":718,"status":"not_started","responses":[{"id":8484,"...
[2025-05-01T20:30:27.856Z] [INFO] Fetching KY3P progress for task 718 
[2025-05-01T20:30:27.927Z] [INFO] Retrieved 120 responses for task 718 
8:30:28 PM [info] GET /api/ky3p/progress/718 304 in 149ms :: {"success":true,"taskId":718,"status":"not_started","responses":[{"id":8484,"...
[2025-05-01T20:30:28.166Z] [INFO] Fetching KY3P progress for task 718 
[2025-05-01T20:30:28.230Z] [INFO] Retrieved 120 responses for task 718 
8:30:28 PM [info] GET /api/ky3p/progress/718 304 in 129ms :: {"success":true,"taskId":718,"status":"not_started","responses":[{"id":8484,"...
[KY3P Demo Auto-Fill] [KY3P Demo Auto-Fill] Standardized demo auto-fill GET requested for task 718
[KY3P Demo Auto-Fill] [KY3P Demo Auto-Fill] Generating demo data for task 718
8:30:29 PM [info] GET /api/companies/current 304 in 30ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[KY3P Demo Auto-Fill] Found 120 KY3P fields
[KY3P Demo Auto-Fill] [KY3P Demo Auto-Fill] Generated demo data with 120 fields
[KY3P Demo Auto-Fill] [KY3P Demo Auto-Fill] Saving 120 demo responses for task 718
[KY3P Demo Auto-Fill] [KY3P Demo Auto-Fill] Successfully saved 120 demo responses
8:30:29 PM [info] GET /api/ky3p/demo-autofill/718 200 in 262ms :: {"success":true,"fieldCount":120,"formData":{"dataLocationTracking":"This is ...
8:30:30 PM [warn] POST /api/ky3p/batch-update/718 400 in 32ms :: {"success":false,"message":"Invalid request: responses is required and must b...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P API] Field not found in batch update: 0
[KY3P API] Field not found in batch update: 1
[KY3P API] Field not found in batch update: 2
[KY3P API] Field not found in batch update: 3
[KY3P API] Field not found in batch update: 4
[KY3P API] Field not found in batch update: 5
[KY3P API] Field not found in batch update: 6
[KY3P API] Field not found in batch update: 7
[KY3P API] Field not found in batch update: 8
[KY3P API] Field not found in batch update: 9
[KY3P API] Field not found in batch update: 10
[KY3P API] Field not found in batch update: 11
[KY3P API] Field not found in batch update: 12
[KY3P API] Field not found in batch update: 13
[KY3P API] Field not found in batch update: 14
[KY3P API] Field not found in batch update: 15
[KY3P API] Field not found in batch update: 16
[KY3P API] Field not found in batch update: 17
[KY3P API] Field not found in batch update: 18
[KY3P API] Field not found in batch update: 19
[KY3P API] Field not found in batch update: 20
[KY3P API] Field not found in batch update: 21
[KY3P API] Field not found in batch update: 22
[KY3P API] Field not found in batch update: 23
[KY3P API] Field not found in batch update: 24
[KY3P API] Field not found in batch update: 25
[KY3P API] Field not found in batch update: 26
[KY3P API] Field not found in batch update: 27
[KY3P API] Field not found in batch update: 28
[KY3P API] Field not found in batch update: 29
[KY3P API] Field not found in batch update: 30
[KY3P API] Field not found in batch update: 31
[KY3P API] Field not found in batch update: 32
[KY3P API] Field not found in batch update: 33
[KY3P API] Field not found in batch update: 34
[KY3P API] Field not found in batch update: 35
[KY3P API] Field not found in batch update: 36
[KY3P API] Field not found in batch update: 37
[KY3P API] Field not found in batch update: 38
[KY3P API] Field not found in batch update: 39
[KY3P API] Field not found in batch update: 40
[KY3P API] Field not found in batch update: 41
[KY3P API] Field not found in batch update: 42
[KY3P API] Field not found in batch update: 43
[KY3P API] Field not found in batch update: 44
[KY3P API] Field not found in batch update: 45
[KY3P API] Field not found in batch update: 46
[KY3P API] Field not found in batch update: 47
[KY3P API] Field not found in batch update: 48
[KY3P API] Field not found in batch update: 49
[KY3P API] Field not found in batch update: 50
[KY3P API] Field not found in batch update: 51
[KY3P API] Field not found in batch update: 52
[KY3P API] Field not found in batch update: 53
[KY3P API] Field not found in batch update: 54
[KY3P API] Field not found in batch update: 55
[KY3P API] Field not found in batch update: 56
[KY3P API] Field not found in batch update: 57
[KY3P API] Field not found in batch update: 58
[KY3P API] Field not found in batch update: 59
[KY3P API] Field not found in batch update: 60
[KY3P API] Field not found in batch update: 61
[KY3P API] Field not found in batch update: 62
[KY3P API] Field not found in batch update: 63
[KY3P API] Field not found in batch update: 64
[KY3P API] Field not found in batch update: 65
[KY3P API] Field not found in batch update: 66
[KY3P API] Field not found in batch update: 67
[KY3P API] Field not found in batch update: 68
[KY3P API] Field not found in batch update: 69
[KY3P API] Field not found in batch update: 70
[KY3P API] Field not found in batch update: 71
[KY3P API] Field not found in batch update: 72
[KY3P API] Field not found in batch update: 73
[KY3P API] Field not found in batch update: 74
[KY3P API] Field not found in batch update: 75
[KY3P API] Field not found in batch update: 76
[KY3P API] Field not found in batch update: 77
[KY3P API] Field not found in batch update: 78
[KY3P API] Field not found in batch update: 79
[KY3P API] Field not found in batch update: 80
[KY3P API] Field not found in batch update: 81
[KY3P API] Field not found in batch update: 82
[KY3P API] Field not found in batch update: 83
[KY3P API] Field not found in batch update: 84
[KY3P API] Field not found in batch update: 85
[KY3P API] Field not found in batch update: 86
[KY3P API] Field not found in batch update: 87
[KY3P API] Field not found in batch update: 88
[KY3P API] Field not found in batch update: 89
[KY3P API] Field not found in batch update: 90
[KY3P API] Field not found in batch update: 91
[KY3P API] Field not found in batch update: 92
[KY3P API] Field not found in batch update: 93
[KY3P API] Field not found in batch update: 94
[KY3P API] Field not found in batch update: 95
[KY3P API] Field not found in batch update: 96
[KY3P API] Field not found in batch update: 97
[KY3P API] Field not found in batch update: 98
[KY3P API] Field not found in batch update: 99
[KY3P API] Field not found in batch update: 100
[KY3P API] Field not found in batch update: 101
[KY3P API] Field not found in batch update: 102
[KY3P API] Field not found in batch update: 103
[KY3P API] Field not found in batch update: 104
[KY3P API] Field not found in batch update: 105
[KY3P API] Field not found in batch update: 106
[KY3P API] Field not found in batch update: 107
[KY3P API] Field not found in batch update: 108
[KY3P API] Field not found in batch update: 109
[KY3P API] Field not found in batch update: 110
[KY3P API] Field not found in batch update: 111
[KY3P API] Field not found in batch update: 112
[KY3P API] Field not found in batch update: 113
[KY3P API] Field not found in batch update: 114
[KY3P API] Field not found in batch update: 115
[KY3P API] Field not found in batch update: 116
[KY3P API] Field not found in batch update: 117
[KY3P API] Field not found in batch update: 118
[KY3P API] Field not found in batch update: 119
[KY3P API] No matching fields found for task 718
8:30:30 PM [info] POST /api/ky3p/batch-update/718 200 in 107ms :: {"success":true,"processedCount":0,"message":"Successfully processed 0 field ...
[2025-05-01T20:30:30.603Z] [INFO] Fetching KY3P progress for task 718 
[2025-05-01T20:30:30.666Z] [INFO] Retrieved 120 responses for task 718 
8:30:30 PM [info] GET /api/ky3p/progress/718 200 in 136ms :: {"success":true,"taskId":718,"status":"not_started","responses":[{"id":8604,"...
8:30:31 PM [warn] POST /api/ky3p/batch-update/718 400 in 34ms :: {"success":false,"message":"Invalid request: responses is required and must b...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:30:31 PM [info] POST /api/ky3p/batch-update/718 200 in 375ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[KY3P API] Received batch update for task 718 with 120 fields
8:30:32 PM [info] GET /api/companies/current 304 in 85ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[KY3P] Task 718 progress updated: 0%
8:30:33 PM [info] POST /api/ky3p/batch-update/718 200 in 511ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:30:34 PM [info] POST /api/ky3p/batch-update/718 200 in 367ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
8:30:35 PM [info] GET /api/companies/current 304 in 32ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:30:35 PM [info] POST /api/ky3p/batch-update/718 200 in 383ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:30:37 PM [info] POST /api/ky3p/batch-update/718 200 in 385ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[Current Company] Fetching company for user: { userId: 304, companyId: 262 }
[KY3P API] Received batch update for task 718 with 120 fields
[Current Company] Found company: {
  id: 262,
  name: 'DemoTest',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
8:30:38 PM [info] GET /api/companies/current 304 in 60ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[KY3P] Task 718 progress updated: 0%
8:30:38 PM [info] POST /api/ky3p/batch-update/718 200 in 376ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:30:40 PM [info] POST /api/ky3p/batch-update/718 200 in 381ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[KY3P API] Received batch update for task 718 with 120 fields
8:30:41 PM [info] GET /api/companies/current 304 in 31ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[KY3P] Task 718 progress updated: 0%
8:30:41 PM [info] POST /api/ky3p/batch-update/718 200 in 385ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:30:43 PM [info] POST /api/ky3p/batch-update/718 200 in 377ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[KY3P API] Received batch update for task 718 with 120 fields
8:30:44 PM [info] GET /api/companies/current 304 in 30ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[KY3P] Task 718 progress updated: 0%
8:30:44 PM [info] POST /api/ky3p/batch-update/718 200 in 373ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:30:46 PM [info] POST /api/ky3p/batch-update/718 200 in 395ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
8:30:47 PM [info] GET /api/companies/current 304 in 34ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:30:47 PM [info] POST /api/ky3p/batch-update/718 200 in 379ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:30:49 PM [info] POST /api/ky3p/batch-update/718 200 in 378ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[KY3P API] Received batch update for task 718 with 120 fields
8:30:50 PM [info] GET /api/companies/current 304 in 29ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[KY3P] Task 718 progress updated: 0%
8:30:50 PM [info] POST /api/ky3p/batch-update/718 200 in 405ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:30:52 PM [info] POST /api/ky3p/batch-update/718 200 in 364ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[KY3P API] Received batch update for task 718 with 120 fields
8:30:53 PM [info] GET /api/companies/current 304 in 32ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[KY3P] Task 718 progress updated: 0%
8:30:53 PM [info] POST /api/ky3p/batch-update/718 200 in 379ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:30:55 PM [info] POST /api/ky3p/batch-update/718 200 in 381ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
8:30:56 PM [info] GET /api/companies/current 304 in 29ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:30:56 PM [info] POST /api/ky3p/batch-update/718 200 in 371ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:30:58 PM [info] POST /api/ky3p/batch-update/718 200 in 407ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[KY3P API] Received batch update for task 718 with 120 fields
8:30:59 PM [info] GET /api/companies/current 304 in 29ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[KY3P] Task 718 progress updated: 0%
8:30:59 PM [info] POST /api/ky3p/batch-update/718 200 in 385ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:31:01 PM [info] POST /api/ky3p/batch-update/718 200 in 366ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
8:31:02 PM [info] GET /api/companies/current 304 in 31ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:31:02 PM [info] POST /api/ky3p/batch-update/718 200 in 374ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:31:04 PM [info] POST /api/ky3p/batch-update/718 200 in 379ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
8:31:05 PM [info] GET /api/companies/current 304 in 30ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:31:06 PM [info] POST /api/ky3p/batch-update/718 200 in 428ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:31:07 PM [info] POST /api/ky3p/batch-update/718 200 in 372ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
8:31:08 PM [info] GET /api/companies/current 304 in 34ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:31:08 PM [info] POST /api/ky3p/batch-update/718 200 in 374ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:31:10 PM [info] POST /api/ky3p/batch-update/718 200 in 376ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
8:31:11 PM [info] GET /api/companies/current 304 in 29ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:31:11 PM [info] POST /api/ky3p/batch-update/718 200 in 383ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:31:13 PM [info] POST /api/ky3p/batch-update/718 200 in 384ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
8:31:14 PM [info] GET /api/companies/current 304 in 30ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:31:14 PM [info] POST /api/ky3p/batch-update/718 200 in 375ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:31:16 PM [info] POST /api/ky3p/batch-update/718 200 in 360ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
8:31:17 PM [info] GET /api/companies/current 304 in 38ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:31:17 PM [info] POST /api/ky3p/batch-update/718 200 in 390ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:31:19 PM [info] POST /api/ky3p/batch-update/718 200 in 378ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
8:31:20 PM [info] GET /api/companies/current 304 in 30ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:31:20 PM [info] POST /api/ky3p/batch-update/718 200 in 372ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:31:22 PM [info] POST /api/ky3p/batch-update/718 200 in 372ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
8:31:23 PM [info] GET /api/companies/current 304 in 31ms :: {"id":262,"name":"DemoTest","category":"FinTech","is_demo":true,"revenue_tier...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:31:23 PM [info] POST /api/ky3p/batch-update/718 200 in 375ms :: {"success":true,"message":"Successfully processed 120 field updates","process...
[KY3P API] Received batch update for task 718 with 120 fields
[KY3P] Task 718 progress updated: 0%
8:31:25 PM [info] POST /api/ky3p/batch-update/718 200 in 383ms :: {"success":true,"message":"Successfully processed 120 field updates","process...