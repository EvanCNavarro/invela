> rest-express@1.0.0 dev
Database migrations disabled - schema already applied
[EmailService] Initializing email service
[EmailService] Email service initialized successfully
[OpenAI] Service initialized with API key: API key is set
Database module not found, creating a mock implementation
Database module not found, creating a mock implementation
[Auth] Setting up authentication...
[Auth] Setting up PostgreSQL session store
[Auth] PostgreSQL session store initialized successfully
[Auth] Authentication setup completed
[2025-05-06T20:22:23.712Z] [INFO] [KY3P-BATCH-UPDATE] Registering KY3P batch update routes
[2025-05-06T20:22:23.712Z] [INFO] Registering KY3P batch update routes
[2025-05-06T20:22:23.713Z] [INFO] [UnifiedKY3P] Registering unified KY3P update routes
[Routes] Registered KY3P field key router
[Routes] Registered KY3P field key router
[2025-05-06T20:22:23.713Z] [INFO] Registering KY3P field update routes
[2025-05-06T20:22:23.714Z] [INFO] [OpenBankingRoutes] Setting up routes...
[Routes] Setting up transaction-based unified form submission router
[Routes] Successfully registered transaction-based unified form submission router
[Routes] Setting up unified form submission router
[Routes] Successfully registered unified form submission router
[Routes] Setting up transactional form submission router
[Routes] Successfully registered transactional form submission router
[Routes] Routes setup completed
[2025-05-06T20:22:23.716Z] [INFO] [WebSocket] Setting up WebSocket server on path /ws
[INFO] Unified WebSocket server initialized successfully with details: {
  clients: 0,
  path: '/ws',
  id: 'bozdvf',
  timestamp: '2025-05-06T20:22:23.717Z'
}
[2025-05-06T20:22:23.719Z] [INFO] [WebSocket] WebSocket server initialized successfully
[2025-05-06T20:22:23.719Z] [INFO] [ServerStartup] WebSocket server initialized with unified implementation
[2025-05-06T20:22:23.719Z] [INFO] [TaskWebSocket] WebSocket server registered with unified implementation
[2025-05-06T20:22:23.720Z] [INFO] [ServerStartup] WebSocket server registered with task-update utility
[TaskBroadcast] WebSocket server reference set up
[TaskBroadcast] WebSocket server active with 0 connected clients
[2025-05-06T20:22:23.720Z] [INFO] [ServerStartup] WebSocket server registered with task-broadcast utility
[2025-05-06T20:22:23.720Z] [INFO] Setting up Vite development server
[ENV] Using PORT=5000 from environment (override: yes)
[ENV] Environment=development (production: no)
[2025-05-06T20:22:23.732Z] [INFO] Server running on 0.0.0.0:5000
[2025-05-06T20:22:23.733Z] [INFO] Environment: development
[Deployment] Server running on 0.0.0.0:5000
[Deployment] Environment: development
[Deployment] Port forwarding: Custom port: 5000
[Deployment] Development mode: Hot reloading enabled
[2025-05-06T20:22:23.735Z] [INFO] Starting periodic task reconciliation system...
[PeriodicTaskReconciliation] Stopped periodic reconciliation system
[PeriodicTaskReconciliation] Starting periodic reconciliation system (interval: 300000ms)
[2025-05-06T20:22:23.735Z] [INFO] Task reconciliation system initialized successfully
[2025-05-06T20:22:25.100Z] [INFO] [ServerStartup] WebSocket server active with 0 connected clients
[2025-05-06T20:22:25.104Z] New client connected to the pool (1/3)
[INFO] [WebSocket] Client connected: client-1746562946348-57n3cjv
[INFO] [WebSocket] Client connected: client-1746562947981-fb1p64d
[Current Company] Fetching company for user: { userId: 315, companyId: 272 }
[INFO] [WebSocket] Received message from client client-1746562946348-57n3cjv: {
  type: 'authenticate',
  userId: null,
  companyId: null,
  clientId: 'ws_1746561563940_5ldtit38q',
  timestamp: '2025-05-06T20:22:26.374Z'
}
[INFO] [WebSocket] Authentication from client client-1746562946348-57n3cjv: { userId: null, companyId: null, hasToken: true }
[Current Company] Found company: {
  id: 272,
  name: 'DevTest17',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
[2025-05-06T20:22:28.373Z] [INFO] GET /api/companies/current 200 in 354ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746562947981-fb1p64d: {
  type: 'authenticate',
  data: { timestamp: '2025-05-06T20:22:28.008Z' }
}
[INFO] [WebSocket] Authentication from client client-1746562947981-fb1p64d: { userId: undefined, companyId: undefined, hasToken: true }
[INFO] [WebSocket] Client connected: client-1746562948754-052jihf
[2025-05-06T20:22:28.923Z] [INFO] GET /api/companies/current 304 in 38ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:22:29.004Z] New client connected to the pool (2/3)
[Auth] Returning user session data
[2025-05-06T20:22:29.275Z] [INFO] GET /api/companies/current 304 in 37ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746562948754-052jihf: {
  type: 'authenticate',
  userId: 315,
  companyId: 272,
  clientId: 'ws_1746562945235_7w8m8ezv0',
  timestamp: '2025-05-06T20:22:29.295Z'
}
[INFO] [WebSocket] Authentication from client client-1746562948754-052jihf: { userId: 315, companyId: 272, hasToken: true }
[INFO] [WebSocket] Client connected: client-1746562949452-cr97tdy
[2025-05-06T20:22:29.459Z] [INFO] GET /api/companies/current 304 in 31ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[Auth] Unauthenticated user session
[INFO] [WebSocket] Received message from client client-1746562949452-cr97tdy: {
  type: 'authenticate',
  data: { timestamp: '2025-05-06T20:22:29.558Z' }
}
[INFO] [WebSocket] Authentication from client client-1746562949452-cr97tdy: { userId: undefined, companyId: undefined, hasToken: false }
[INFO] [WebSocket] Client disconnected: client-1746562949452-cr97tdy { code: 1001, reason: 'No reason provided', connectionDuration: '1s' }
[2025-05-06T20:22:32.299Z] [INFO] GET /api/companies/current 304 in 34ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:22:35.279Z] [INFO] GET /api/companies/current 304 in 32ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:22:38.281Z] [INFO] GET /api/companies/current 304 in 34ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:22:41.277Z] [INFO] GET /api/companies/current 304 in 32ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:22:44.373Z] [INFO] GET /api/companies/current 304 in 29ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
8:22:46 PM [vite] hmr update /src/components/forms/UniversalFormNew.tsx, /src/index.css?v=9FiqkVXT5fGackAna5Zck
[2025-05-06T20:22:47.288Z] [INFO] GET /api/companies/current 304 in 35ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746562948754-052jihf: {
  type: 'ping',
  timestamp: '2025-05-06T20:22:48.782Z',
  connectionId: 'ws_1746562945235_7w8m8ezv0'
}
[2025-05-06T20:22:50.280Z] [INFO] GET /api/companies/current 304 in 31ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:22:53.276Z] [INFO] GET /api/companies/current 304 in 31ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[PeriodicTaskReconciliation] Reconciling batch of 10 tasks: [
  685, 679, 751, 691,
  699, 697, 759, 707,
  689, 687
]
[Task Progress] Calculated progress for task 685 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 679 (open_banking): 44/44 = 100%
[Task Progress] Calculated progress for task 751 (ky3p): 0/120 = 0%
[Task Progress] Calculated progress for task 691 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 699 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 697 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 759 (ky3p): 0/0 = 0%
[Task Progress] Calculated progress for task 707 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 689 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 687 (open_banking): 44/44 = 100%
[2025-05-06T20:22:56.285Z] [INFO] GET /api/companies/current 304 in 30ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746562947981-fb1p64d: { type: 'ping' }
8:22:58 PM [vite] hmr update /src/components/forms/UniversalFormNew.tsx, /src/index.css?v=9FiqkVXT5fGackAna5Zck (x2)
[2025-05-06T20:22:59.278Z] [INFO] GET /api/companies/current 304 in 33ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:23:02.279Z] [INFO] GET /api/companies/current 304 in 31ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:23:05.275Z] [INFO] GET /api/companies/current 304 in 30ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:23:08.283Z] [INFO] GET /api/companies/current 304 in 29ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746562948754-052jihf: {
  type: 'ping',
  timestamp: '2025-05-06T20:23:08.783Z',
  connectionId: 'ws_1746562945235_7w8m8ezv0'
}
[2025-05-06T20:23:11.310Z] [INFO] GET /api/companies/current 304 in 60ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:23:14.297Z] [INFO] GET /api/companies/current 304 in 36ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:23:17.282Z] [INFO] GET /api/companies/current 304 in 34ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:23:20.288Z] [INFO] GET /api/companies/current 304 in 30ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:23:23.354Z] [INFO] GET /api/companies/current 304 in 41ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:23:26.279Z] [INFO] GET /api/companies/current 304 in 29ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746562947981-fb1p64d: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746562948754-052jihf: {
  type: 'ping',
  timestamp: '2025-05-06T20:23:28.784Z',
  connectionId: 'ws_1746562945235_7w8m8ezv0'
}
[Current Company] Fetching company for user: { userId: 315, companyId: 272 }
[Current Company] Found company: {
  id: 272,
  name: 'DevTest17',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
[2025-05-06T20:23:29.304Z] [INFO] GET /api/companies/current 304 in 59ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:23:32.299Z] [INFO] GET /api/companies/current 304 in 32ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
8:23:34 PM [vite] hmr update /src/components/forms/UniversalFormNew.tsx, /src/index.css?v=9FiqkVXT5fGackAna5Zck (x3)
[2025-05-06T20:23:35.281Z] [INFO] GET /api/companies/current 304 in 33ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:23:38.295Z] [INFO] GET /api/companies/current 304 in 32ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:23:41.275Z] [INFO] GET /api/companies/current 304 in 31ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:23:44.286Z] [INFO] GET /api/companies/current 304 in 30ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
8:23:46 PM [vite] hmr update /src/components/forms/UniversalFormNew.tsx, /src/index.css?v=9FiqkVXT5fGackAna5Zck (x4)
[2025-05-06T20:23:47.279Z] [INFO] GET /api/companies/current 304 in 33ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746562948754-052jihf: {
  type: 'ping',
  timestamp: '2025-05-06T20:23:48.784Z',
  connectionId: 'ws_1746562945235_7w8m8ezv0'
}
[2025-05-06T20:23:50.284Z] [INFO] GET /api/companies/current 304 in 37ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:23:53.289Z] [INFO] GET /api/companies/current 304 in 33ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Client disconnected: client-1746562948754-052jihf { code: 1001, reason: 'No reason provided', connectionDuration: '86s' }
[INFO] [WebSocket] Client disconnected: client-1746562946348-57n3cjv { code: 1001, reason: 'No reason provided', connectionDuration: '88s' }
[INFO] [WebSocket] Client disconnected: client-1746562947981-fb1p64d { code: 1001, reason: 'No reason provided', connectionDuration: '86s' }
[2025-05-06T20:23:56.401Z] New client connected to the pool (3/3)
Suppressing further connection logs. Pool size: 3
[INFO] [WebSocket] Client connected: client-1746563036839-t2kmac3
[Auth] Unauthenticated user session
[INFO] [WebSocket] Received message from client client-1746563036839-t2kmac3: {
  type: 'authenticate',
  data: { timestamp: '2025-05-06T20:23:56.923Z' }
}
[INFO] [WebSocket] Authentication from client client-1746563036839-t2kmac3: { userId: undefined, companyId: undefined, hasToken: false }
[INFO] [WebSocket] Client connected: client-1746563037907-sssbekv
[Auth] Unauthenticated user session
[INFO] [WebSocket] Received message from client client-1746563037907-sssbekv: {
  type: 'authenticate',
  userId: null,
  companyId: null,
  clientId: 'ws_1746563037894_wiuahxmxa',
  timestamp: '2025-05-06T20:23:57.969Z'
}
[INFO] [WebSocket] Authentication from client client-1746563037907-sssbekv: { userId: null, companyId: null, hasToken: false }
[INFO] [WebSocket] Client disconnected: client-1746563037907-sssbekv { code: 1001, reason: 'No reason provided', connectionDuration: '0s' }
[INFO] [WebSocket] Client disconnected: client-1746563036839-t2kmac3 { code: 1001, reason: 'No reason provided', connectionDuration: '1s' }
[Auth] Returning user session data
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 315, company_id: 272, email: '17@e.com' }
[2025-05-06T20:24:05.522Z] [INFO] Performing dynamic task unlocking check for company {"companyId":272,"userId":315}
[2025-05-06T20:24:05.554Z] [INFO] No completed KYB tasks found, skipping security task unlock check {"companyId":272}
[Tasks] Automatically unlocking all tasks for company { userId: 315, companyId: 272, requestedBy: 'automatic_task_unlock' }
[2025-05-06T20:24:05.555Z] [INFO] [TaskDependencies] Unlocking ALL tasks for company {"companyId":272}
[2025-05-06T20:24:05.558Z] [INFO] GET /api/companies/current 304 in 40ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:24:05.587Z] [INFO] [TaskDependencies] Found user onboarding task that needs completion {"taskId":757,"userEmail":"17@e.com","currentStatus":"completed","currentProgress":100}
[TaskDependencies] Skipping task 758 with submission indicators {
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasFileId: false,
  status: 'ready_for_submission',
  progress: 100,
  isReadyForSubmission: true
}
[2025-05-06T20:24:05.587Z] [INFO] [TaskDependencies] Found tasks to unlock {"companyId":272,"count":3,"taskIds":[757,759,760],"taskTypes":["user_onboarding","ky3p","open_banking"],"ky3pTaskCount":1,"ky3pTaskIds":[759]}
[2025-05-06T20:24:05.587Z] [INFO] [TaskDependencies] Setting User Onboarding task as completed {"taskId":757,"userEmail":"17@e.com","timestamp":"2025-05-06T20:24:05.587Z"}
[2025-05-06T20:24:05.610Z] [INFO] GET /api/tasks/758 304 in 86ms :: {"id":758,"title":"1. KYB Form: DevTest17","description":"Complete KYB verifi...
[INFO] [WebSocket] Client connected: client-1746563045633-9u6ishj
[2025-05-06T20:24:05.634Z] [INFO] Successfully retrieved unified WebSocket server for broadcast
[WebSocket] Broadcast task_update to 1 clients (0 errors) { messageId: 'msg_1746563045635_fqzqdx1eo' }
[2025-05-06T20:24:05.636Z] [INFO] Successfully broadcasted task_update message
[2025-05-06T20:24:05.636Z] [INFO] [TaskDependencies] Processing KY3P task {"taskId":759,"taskType":"ky3p","currentProgress":0,"currentStatus":"not_started","timestamp":"2025-05-06T20:24:05.636Z"}
[UnifiedProgress] Starting progress update for task 759 (ky3p) {
  taskId: 759,
  taskType: 'ky3p',
  diagnosticId: 'prog-1746563045636-953',
  metadata: [
    'locked',
    'prerequisite_completed',
    'prerequisite_completed_at',
    'dependencyUnlockOperation',
    'previousProgress',
    'previousStatus',
    'isKy3pTask',
    'isUserOnboardingTask'
  ]
}
[UnifiedProgressCalc] Calculating progress for task 759 (ky3p)
[KY3P Progress] Calculated progress for task 759: {
  taskId: 759,
  taskType: 'ky3p',
  normalizedTaskType: 'ky3p',
  totalFields: 120,
  completedFields: 0,
  progress: 0,
  timeStamp: '2025-05-06T20:24:05.760Z'
}
[UnifiedProgressCalc] Task 759 (ky3p) progress: 0/120 = 0%
[INFO] [WebSocket] Received message from client client-1746563045633-9u6ishj: {
  type: 'authenticate',
  data: { timestamp: '2025-05-06T20:24:05.655Z' }
}
[INFO] [WebSocket] Authentication from client client-1746563045633-9u6ishj: { userId: undefined, companyId: undefined, hasToken: true }
[INFO] [WebSocket] Broadcast task_updated to 1 clients
[2025-05-06T20:24:05.799Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":272,"taskId":759,"taskType":"ky3p","isKy3pTask":true,"calculatedProgress":{"success":true,"taskId":759,"message":"Progress unchanged","progress":0,"status":"not_started"},"previousProgress":0,"wasPreserved":false}
[UnifiedProgress] Starting progress update for task 760 (open_banking) {
  taskId: 760,
  taskType: 'open_banking',
  diagnosticId: 'prog-1746563045799-757',
  metadata: [
    'locked',
    'prerequisite_completed',
    'prerequisite_completed_at',
    'dependencyUnlockOperation',
    'previousProgress',
    'previousStatus',
    'isKy3pTask',
    'isUserOnboardingTask'
  ]
}
[Task Templates API] Fetching template for task type: company_kyb, user: 315
[2025-05-06T20:24:05.829Z] [INFO] GET /api/companies/current 304 in 38ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[Task Templates API] Found template: 1 (KYB Form) for task type: company_kyb
[2025-05-06T20:24:05.860Z] [INFO] GET /api/tasks/758 304 in 84ms :: {"id":758,"title":"1. KYB Form: DevTest17","description":"Complete KYB verifi...
[UnifiedProgressCalc] Calculating progress for task 760 (open_banking)
[Task Templates API] Retrieved 9 configuration items for template ID: 1
[2025-05-06T20:24:05.917Z] [INFO] GET /api/task-templates/by-type/company_kyb 304 in 111ms :: {"id":1,"name":"KYB Form","description":"Know Your Business form for company ...
[UnifiedProgressCalc] Task 760 (open_banking) progress: 0/44 = 0%
[INFO] [WebSocket] Broadcast task_updated to 1 clients
[2025-05-06T20:24:05.962Z] [INFO] [TaskDependencies] Unlocked task using unified progress calculator {"companyId":272,"taskId":760,"taskType":"open_banking","isKy3pTask":false,"calculatedProgress":{"success":true,"taskId":760,"message":"Progress unchanged","progress":0,"status":"not_started"},"previousProgress":0,"wasPreserved":false}
[2025-05-06T20:24:05.962Z] [INFO] [TaskDependencies] Successfully unlocked all tasks {"companyId":272,"count":3}
[Tasks] Successfully unlocked all tasks for company: 272
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 315',
    condition2: 'tasks.created_by = 315',
    condition3: "tasks.company_id = 272 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('17@e.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
[2025-05-06T20:24:06.057Z] [INFO] GET /api/tasks 200 in 536ms :: [{"id":757,"title":"New User Invitation: 17@e.com","description":"Complete us...
[2025-05-06T20:24:06.077Z] [INFO] Fetching KYB fields
[2025-05-06T20:24:06.109Z] [INFO] KYB fields retrieved successfully {"fieldCount":30,"groups":["companyProfile","financialProfile","governanceLeadership","operationsCompliance"]}
[INFO] [WebSocket] Client connected: client-1746563046135-qy3li6z
[2025-05-06T20:24:06.142Z] [INFO] GET /api/kyb/fields 304 in 65ms :: [{"id":1,"field_key":"legalEntityName","display_name":"Legal Entity Name","fi...
[2025-05-06T20:24:06.242Z] [INFO] GET /api/tasks 304 in 32ms :: [{"id":757,"title":"New User Invitation: 17@e.com","description":"Complete us...
[INFO] [WebSocket] Received message from client client-1746563046135-qy3li6z: {
  type: 'authenticate',
  userId: null,
  companyId: null,
  clientId: 'ws_1746563045131_g6zk9y6e9',
  timestamp: '2025-05-06T20:24:06.154Z'
}
[INFO] [WebSocket] Authentication from client client-1746563046135-qy3li6z: { userId: null, companyId: null, hasToken: true }
[KYB API Debug] Loading progress for task: 758
[Task Reconciliation] Found 30 responses for task 758 (type: company_kyb)
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: true,
  effectiveHasResponses: true,
  timestamp: '2025-05-06T20:24:06.379Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[Task Reconciliation] Progress calculation: {
  taskId: 758,
  currentProgress: 100,
  calculatedProgress: 100,
  currentStatus: 'ready_for_submission',
  calculatedStatus: 'ready_for_submission',
  responseCount: 30,
  completeCount: 30
}
[Task Reconciliation] No updates needed for task 758
[KYB API Debug] Retrieved task: {
  taskId: 758,
  status: 'ready_for_submission',
  progress: 100,
  metadata: [
    'company_id',
    'created_at',
    'statusFlow',
    'created_via',
    'lastUpdated',
    'status_flow',
    'company_name',
    'created_by_id',
    'progressHistory',
    'prerequisite_for',
    'lastProgressUpdate',
    'lastProgressReconciliation'
  ],
  timestamp: '2025-05-06T20:24:06.414Z'
}
[KYB API Debug] Retrieved responses: {
  responseCount: 30,
  fields: [
    {
      field: 'lifetimeCustomerValue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'annualRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'monthlyRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'investigationsIncidents',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'financialStatements',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'operationalPolicies',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'dataVolume', status: 'COMPLETE', hasValue: true },
    { field: 'dataTypes', status: 'COMPLETE', hasValue: true },
    { field: 'sanctionsCheck', status: 'COMPLETE', hasValue: true },
    { field: 'dueDiligence', status: 'COMPLETE', hasValue: true },
    { field: 'regulatoryActions', status: 'COMPLETE', hasValue: true },
    { field: 'legalEntityName', status: 'COMPLETE', hasValue: true },
    { field: 'registrationNumber', status: 'COMPLETE', hasValue: true },
    { field: 'incorporationDate', status: 'COMPLETE', hasValue: true },
    { field: 'businessType', status: 'COMPLETE', hasValue: true },
    { field: 'jurisdiction', status: 'COMPLETE', hasValue: true },
    { field: 'registeredAddress', status: 'COMPLETE', hasValue: true },
    { field: 'companyPhone', status: 'COMPLETE', hasValue: true },
    { field: 'priorNames', status: 'COMPLETE', hasValue: true },
    { field: 'licenses', status: 'COMPLETE', hasValue: true },
    { field: 'goodStanding', status: 'COMPLETE', hasValue: true },
    {
      field: 'corporateRegistration',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'externalAudit', status: 'COMPLETE', hasValue: true },
    { field: 'controlEnvironment', status: 'COMPLETE', hasValue: true },
    { field: 'authorizedSigners', status: 'COMPLETE', hasValue: true },
    {
      field: 'governmentOwnership',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'ultimateBeneficialOwners',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'directorsAndOfficers',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'contactEmail', status: 'COMPLETE', hasValue: true },
    {
      field: 'marketCapitalization',
      status: 'COMPLETE',
      hasValue: true
    }
  ],
  timestamp: '2025-05-06T20:24:06.446Z'
}
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 758,
  responseCount: 30,
  progress: 100,
  status: 'ready_for_submission',
  formDataKeys: [
    'lifetimeCustomerValue',
    'annualRecurringRevenue',
    'monthlyRecurringRevenue',
    'investigationsIncidents',
    'financialStatements',
    'operationalPolicies',
    'dataVolume',
    'dataTypes',
    'sanctionsCheck',
    'dueDiligence',
    'regulatoryActions',
    'legalEntityName',
    'registrationNumber',
    'incorporationDate',
    'businessType',
    'jurisdiction',
    'registeredAddress',
    'companyPhone',
    'priorNames',
    'licenses',
    'goodStanding',
    'corporateRegistration',
    'externalAudit',
    'controlEnvironment',
    'authorizedSigners',
    'governmentOwnership',
    'ultimateBeneficialOwners',
    'directorsAndOfficers',
    'contactEmail',
    'marketCapitalization'
  ]
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-05-06T20:24:06.447Z
[SERVER DEBUG] Task ID: 758, Found 30 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010"
[SERVER DEBUG] Checking field goodStanding in retrieved data: "Yes"
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: "Yes"
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: "No significant incidents in the past 3 years"
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 30 fields, status: ready_for_submission, progress: 100%
===============================================
[2025-05-06T20:24:06.481Z] [INFO] GET /api/kyb/progress/758 304 in 172ms :: {"formData":{"lifetimeCustomerValue":"$1,250","annualRecurringRevenue":"5,000...
[KYB API Debug] Loading progress for task: 758
[TimestampHandler] Retrieved 30 timestamps for task 758
[TimestampAPI] Returning 30 timestamps for task 758
[2025-05-06T20:24:06.696Z] [INFO] GET /api/kyb/timestamps/758 304 in 64ms :: {"legalEntityName":1746559174408,"registrationNumber":1746559174408,"incorpor...
[Task Reconciliation] Found 30 responses for task 758 (type: company_kyb)
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 100,
  currentStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: true,
  effectiveHasResponses: true,
  timestamp: '2025-05-06T20:24:06.730Z'
}
[STATUS DETERMINATION] Task has 100% progress but is not submitted, setting to READY_FOR_SUBMISSION
[Task Reconciliation] Progress calculation: {
  taskId: 758,
  currentProgress: 100,
  calculatedProgress: 100,
  currentStatus: 'ready_for_submission',
  calculatedStatus: 'ready_for_submission',
  responseCount: 30,
  completeCount: 30
}
[Task Reconciliation] No updates needed for task 758
[KYB API Debug] Retrieved task: {
  taskId: 758,
  status: 'ready_for_submission',
  progress: 100,
  metadata: [
    'company_id',
    'created_at',
    'statusFlow',
    'created_via',
    'lastUpdated',
    'status_flow',
    'company_name',
    'created_by_id',
    'progressHistory',
    'prerequisite_for',
    'lastProgressUpdate',
    'lastProgressReconciliation'
  ],
  timestamp: '2025-05-06T20:24:06.760Z'
}
[KYB API Debug] Retrieved responses: {
  responseCount: 30,
  fields: [
    {
      field: 'lifetimeCustomerValue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'annualRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'monthlyRecurringRevenue',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'investigationsIncidents',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'financialStatements',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'operationalPolicies',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'dataVolume', status: 'COMPLETE', hasValue: true },
    { field: 'dataTypes', status: 'COMPLETE', hasValue: true },
    { field: 'sanctionsCheck', status: 'COMPLETE', hasValue: true },
    { field: 'dueDiligence', status: 'COMPLETE', hasValue: true },
    { field: 'regulatoryActions', status: 'COMPLETE', hasValue: true },
    { field: 'legalEntityName', status: 'COMPLETE', hasValue: true },
    { field: 'registrationNumber', status: 'COMPLETE', hasValue: true },
    { field: 'incorporationDate', status: 'COMPLETE', hasValue: true },
    { field: 'businessType', status: 'COMPLETE', hasValue: true },
    { field: 'jurisdiction', status: 'COMPLETE', hasValue: true },
    { field: 'registeredAddress', status: 'COMPLETE', hasValue: true },
    { field: 'companyPhone', status: 'COMPLETE', hasValue: true },
    { field: 'priorNames', status: 'COMPLETE', hasValue: true },
    { field: 'licenses', status: 'COMPLETE', hasValue: true },
    { field: 'goodStanding', status: 'COMPLETE', hasValue: true },
    {
      field: 'corporateRegistration',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'externalAudit', status: 'COMPLETE', hasValue: true },
    { field: 'controlEnvironment', status: 'COMPLETE', hasValue: true },
    { field: 'authorizedSigners', status: 'COMPLETE', hasValue: true },
    {
      field: 'governmentOwnership',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'ultimateBeneficialOwners',
      status: 'COMPLETE',
      hasValue: true
    },
    {
      field: 'directorsAndOfficers',
      status: 'COMPLETE',
      hasValue: true
    },
    { field: 'contactEmail', status: 'COMPLETE', hasValue: true },
    {
      field: 'marketCapitalization',
      status: 'COMPLETE',
      hasValue: true
    }
  ],
  timestamp: '2025-05-06T20:24:06.790Z'
}
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 758,
  responseCount: 30,
  progress: 100,
  status: 'ready_for_submission',
  formDataKeys: [
    'lifetimeCustomerValue',
    'annualRecurringRevenue',
    'monthlyRecurringRevenue',
    'investigationsIncidents',
    'financialStatements',
    'operationalPolicies',
    'dataVolume',
    'dataTypes',
    'sanctionsCheck',
    'dueDiligence',
    'regulatoryActions',
    'legalEntityName',
    'registrationNumber',
    'incorporationDate',
    'businessType',
    'jurisdiction',
    'registeredAddress',
    'companyPhone',
    'priorNames',
    'licenses',
    'goodStanding',
    'corporateRegistration',
    'externalAudit',
    'controlEnvironment',
    'authorizedSigners',
    'governmentOwnership',
    'ultimateBeneficialOwners',
    'directorsAndOfficers',
    'contactEmail',
    'marketCapitalization'
  ]
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-05-06T20:24:06.792Z
[SERVER DEBUG] Task ID: 758, Found 30 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: "Delaware State Filing Number 1234567, registered as FinTech Innovations LLC on 05/12/2010"
[SERVER DEBUG] Checking field goodStanding in retrieved data: "Yes"
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: "Yes"
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: "No significant incidents in the past 3 years"
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 30 fields, status: ready_for_submission, progress: 100%
===============================================
[INFO] [WebSocket] Client connected: client-1746563046799-x9npehb
[2025-05-06T20:24:06.824Z] [INFO] GET /api/kyb/progress/758 304 in 162ms :: {"formData":{"lifetimeCustomerValue":"$1,250","annualRecurringRevenue":"5,000...
[Auth] Returning user session data
[TimestampHandler] Retrieved 30 timestamps for task 758
[TimestampAPI] Returning 30 timestamps for task 758
[2025-05-06T20:24:07.044Z] [INFO] GET /api/kyb/timestamps/758 304 in 67ms :: {"legalEntityName":1746559174408,"registrationNumber":1746559174408,"incorpor...
[2025-05-06T20:24:07.178Z] [INFO] GET /api/companies/current 304 in 33ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746563046799-x9npehb: {
  type: 'authenticate',
  userId: 315,
  companyId: 272,
  clientId: 'ws_1746563046274_zd6y0n83n',
  timestamp: '2025-05-06T20:24:07.221Z'
}
[INFO] [WebSocket] Authentication from client client-1746563046799-x9npehb: { userId: 315, companyId: 272, hasToken: true }
[2025-05-06T20:24:08.810Z] [INFO] GET /api/companies/current 304 in 32ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:24:11.807Z] [INFO] GET /api/companies/current 304 in 33ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:24:14.813Z] [INFO] GET /api/companies/current 304 in 30ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:24:17.812Z] [INFO] GET /api/companies/current 304 in 31ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:24:20.807Z] [INFO] GET /api/companies/current 304 in 35ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:24:23.805Z] [INFO] GET /api/companies/current 304 in 32ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:24:26.821Z] [INFO] GET /api/companies/current 304 in 33ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746563046799-x9npehb: {
  type: 'ping',
  timestamp: '2025-05-06T20:24:26.824Z',
  connectionId: 'ws_1746563046274_zd6y0n83n'
}
[Current Company] Fetching company for user: { userId: 315, companyId: 272 }
[Current Company] Found company: {
  id: 272,
  name: 'DevTest17',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
[2025-05-06T20:24:29.843Z] [INFO] GET /api/companies/current 304 in 66ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:24:32.805Z] [INFO] GET /api/companies/current 304 in 31ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746563045633-9u6ishj: { type: 'ping' }
[2025-05-06T20:24:35.808Z] [INFO] GET /api/companies/current 304 in 33ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:24:38.814Z] [INFO] GET /api/companies/current 304 in 32ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:24:41.820Z] [INFO] GET /api/companies/current 304 in 33ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:24:44.805Z] [INFO] GET /api/companies/current 304 in 31ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746563046799-x9npehb: {
  type: 'ping',
  timestamp: '2025-05-06T20:24:46.823Z',
  connectionId: 'ws_1746563046274_zd6y0n83n'
}
[2025-05-06T20:24:47.826Z] [INFO] GET /api/companies/current 304 in 34ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:24:50.819Z] [INFO] GET /api/companies/current 304 in 32ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:24:53.835Z] [INFO] GET /api/companies/current 304 in 45ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:24:56.805Z] [INFO] GET /api/companies/current 304 in 32ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:24:59.823Z] [INFO] GET /api/companies/current 304 in 34ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:25:02.823Z] [INFO] GET /api/companies/current 304 in 36ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746563045633-9u6ishj: { type: 'ping' }
[2025-05-06T20:25:05.828Z] [INFO] GET /api/companies/current 304 in 40ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746563046799-x9npehb: {
  type: 'ping',
  timestamp: '2025-05-06T20:25:06.821Z',
  connectionId: 'ws_1746563046274_zd6y0n83n'
}
[2025-05-06T20:25:08.809Z] [INFO] GET /api/companies/current 304 in 34ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:25:11.806Z] [INFO] GET /api/companies/current 304 in 33ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Using cached company data: 272
[2025-05-06T20:25:14.815Z] [INFO] GET /api/companies/current 304 in 31ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:25:17.810Z] [INFO] GET /api/companies/current 304 in 35ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:25:20.822Z] [INFO] GET /api/companies/current 304 in 39ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:25:23.804Z] [INFO] GET /api/companies/current 304 in 31ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:25:26.823Z] [INFO] GET /api/companies/current 304 in 32ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746563046799-x9npehb: {
  type: 'ping',
  timestamp: '2025-05-06T20:25:26.823Z',
  connectionId: 'ws_1746563046274_zd6y0n83n'
}
[2025-05-06T20:25:29.807Z] [INFO] GET /api/companies/current 304 in 31ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[Current Company] Fetching company for user: { userId: 315, companyId: 272 }
[Current Company] Found company: {
  id: 272,
  name: 'DevTest17',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
[2025-05-06T20:25:32.847Z] [INFO] GET /api/companies/current 304 in 64ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746563045633-9u6ishj: { type: 'ping' }
[2025-05-06T20:25:35.806Z] [INFO] GET /api/companies/current 304 in 32ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:25:38.818Z] [INFO] GET /api/companies/current 304 in 31ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:25:41.805Z] [INFO] GET /api/companies/current 304 in 31ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:25:44.823Z] [INFO] GET /api/companies/current 304 in 44ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746563046799-x9npehb: {
  type: 'ping',
  timestamp: '2025-05-06T20:25:46.821Z',
  connectionId: 'ws_1746563046274_zd6y0n83n'
}
[2025-05-06T20:25:47.818Z] [INFO] GET /api/companies/current 304 in 31ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:25:50.817Z] [INFO] GET /api/companies/current 304 in 33ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:25:53.818Z] [INFO] GET /api/companies/current 304 in 34ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:25:56.813Z] [INFO] GET /api/companies/current 304 in 33ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:25:59.808Z] [INFO] GET /api/companies/current 304 in 33ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:26:02.820Z] [INFO] GET /api/companies/current 304 in 35ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746563045633-9u6ishj: { type: 'ping' }
[2025-05-06T20:26:05.803Z] [INFO] GET /api/companies/current 304 in 31ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746563046135-qy3li6z: { type: 'ping' }
[INFO] [WebSocket] Received message from client client-1746563046799-x9npehb: {
  type: 'ping',
  timestamp: '2025-05-06T20:26:06.822Z',
  connectionId: 'ws_1746563046274_zd6y0n83n'
}
[2025-05-06T20:26:08.804Z] [INFO] GET /api/companies/current 304 in 32ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:26:11.806Z] [INFO] GET /api/companies/current 304 in 32ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:26:14.820Z] [INFO] GET /api/companies/current 304 in 35ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:26:17.813Z] [INFO] GET /api/companies/current 304 in 32ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:26:20.807Z] [INFO] GET /api/companies/current 304 in 32ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:26:23.808Z] [INFO] GET /api/companies/current 304 in 30ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:26:26.871Z] [INFO] GET /api/companies/current 304 in 37ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746563046799-x9npehb: {
  type: 'ping',
  timestamp: '2025-05-06T20:26:26.822Z',
  connectionId: 'ws_1746563046274_zd6y0n83n'
}
[2025-05-06T20:26:29.809Z] [INFO] GET /api/companies/current 304 in 32ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:26:32.809Z] [INFO] GET /api/companies/current 304 in 32ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746563045633-9u6ishj: { type: 'ping' }
[Current Company] Fetching company for user: { userId: 315, companyId: 272 }
[Current Company] Found company: {
  id: 272,
  name: 'DevTest17',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
[2025-05-06T20:26:35.834Z] [INFO] GET /api/companies/current 304 in 62ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:26:38.819Z] [INFO] GET /api/companies/current 304 in 39ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:26:41.815Z] [INFO] GET /api/companies/current 304 in 33ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:26:44.861Z] [INFO] GET /api/companies/current 304 in 35ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746563046799-x9npehb: {
  type: 'ping',
  timestamp: '2025-05-06T20:26:46.822Z',
  connectionId: 'ws_1746563046274_zd6y0n83n'
}
[2025-05-06T20:26:47.939Z] [INFO] GET /api/companies/current 304 in 34ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:26:50.830Z] [INFO] GET /api/companies/current 304 in 34ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:26:53.819Z] [INFO] GET /api/companies/current 304 in 36ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:26:56.805Z] [INFO] GET /api/companies/current 304 in 31ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:26:59.813Z] [INFO] GET /api/companies/current 304 in 32ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:27:02.825Z] [INFO] GET /api/companies/current 304 in 39ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746563045633-9u6ishj: { type: 'ping' }
[2025-05-06T20:27:05.830Z] [INFO] GET /api/companies/current 304 in 35ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746563046799-x9npehb: {
  type: 'ping',
  timestamp: '2025-05-06T20:27:06.823Z',
  connectionId: 'ws_1746563046274_zd6y0n83n'
}
[2025-05-06T20:27:08.819Z] [INFO] GET /api/companies/current 304 in 40ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:27:11.804Z] [INFO] GET /api/companies/current 304 in 31ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:27:14.813Z] [INFO] GET /api/companies/current 304 in 32ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:27:17.808Z] [INFO] GET /api/companies/current 304 in 33ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:27:20.804Z] [INFO] GET /api/companies/current 304 in 33ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[PeriodicTaskReconciliation] Reconciling batch of 10 tasks: [
  685, 679, 751, 691,
  699, 697, 759, 707,
  763, 698
]
[Task Progress] Calculated progress for task 685 (company_kyb): 30/30 = 100%
[2025-05-06T20:27:23.897Z] [INFO] GET /api/companies/current 304 in 30ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[Task Progress] Calculated progress for task 679 (open_banking): 44/44 = 100%
[Task Progress] Calculated progress for task 751 (ky3p): 0/120 = 0%
[Task Progress] Calculated progress for task 691 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 699 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 697 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 759 (ky3p): 0/0 = 0%
[Task Progress] Calculated progress for task 707 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 763 (ky3p): 0/0 = 0%
[Task Progress] Calculated progress for task 698 (ky3p): 0/0 = 0%
[2025-05-06T20:27:26.831Z] [INFO] GET /api/companies/current 304 in 33ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[INFO] [WebSocket] Received message from client client-1746563046799-x9npehb: {
  type: 'ping',
  timestamp: '2025-05-06T20:27:26.822Z',
  connectionId: 'ws_1746563046274_zd6y0n83n'
}
[2025-05-06T20:27:29.805Z] [INFO] GET /api/companies/current 304 in 31ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...
[2025-05-06T20:27:32.834Z] [INFO] GET /api/companies/current 304 in 48ms :: {"id":272,"name":"DevTest17","category":"FinTech","is_demo":true,"revenue_tie...