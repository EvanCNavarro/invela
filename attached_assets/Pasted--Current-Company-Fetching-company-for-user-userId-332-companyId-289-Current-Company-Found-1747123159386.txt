[Current Company] Fetching company for user: { userId: 332, companyId: 289 }
[Current Company] Found company: {
  id: 289,
  name: 'DevTest34',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
[2025-05-13T07:57:14.860Z] [INFO] [App] GET /api/companies/current 304 in 61ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-13T07:57:15.037Z] [INFO] [App] GET /api/tasks/828 200 in 60ms :: {"id":828,"title":"3. Open Banking Survey: DevTest34","description":"Complete... 
[2025-05-13T07:57:15.217Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[KY3P] Task 827 progress updated: 0% (0/0 fields complete)
[WebSocket] Server not initialized
[2025-05-13T07:57:15.499Z] [INFO] [App] POST /api/ky3p/batch-update/827 200 in 4107ms :: {"success":true,"message":"Successfully processed 120 field updates","process... 
[Auth] Returning user session data
[Task Templates API] Fetching template for task type: open_banking, user: 332
[Task Templates API] Found template: 50 (Open Banking Survey Template) for task type: open_banking
[Task Templates API] Retrieved 7 configuration items for template ID: 50
[2025-05-13T07:57:16.056Z] [INFO] [App] GET /api/tasks/828 304 in 62ms :: {"id":828,"title":"3. Open Banking Survey: DevTest34","description":"Complete... 
[2025-05-13T07:57:16.085Z] [INFO] [App] GET /api/task-templates/by-type/open_banking 304 in 91ms :: {"id":50,"name":"Open Banking Survey Template","description":"Template for Op... 
[2025-05-13T07:57:16.302Z] [INFO] [App] [OpenBankingRoutes] Fetching all fields 
[2025-05-13T07:57:16.391Z] [INFO] [App] GET /api/open-banking/fields 304 in 90ms :: [{"id":1,"order":1,"field_key":"dataSchemaAlignment","display_name":"Data Sch... 
[Tasks Routes] Synchronizing form data for task: { taskId: 828, timestamp: '2025-05-13T07:57:16.547Z' }
[Tasks Routes] Synchronizing form data for task: { taskId: 828, timestamp: '2025-05-13T07:57:16.576Z' }
[Task Reconciliation] Fetching Open Banking responses for task 828
[Task Reconciliation] Fetching Open Banking responses for task 828
[Task Reconciliation] Recalculated Open Banking progress: {
  taskId: 828,
  totalFields: '44',
  completedFields: '0',
  currentProgress: 0,
  calculatedProgress: 0
}
[Task Reconciliation] Updating Open Banking task progress: {
  taskId: 828,
  progressFrom: 0,
  progressTo: 0,
  statusFrom: 'not_started',
  statusTo: 'not_started'
}
[Task Reconciliation] Recalculated Open Banking progress: {
  taskId: 828,
  totalFields: '44',
  completedFields: '0',
  currentProgress: 0,
  calculatedProgress: 0
}
[Task Reconciliation] Updating Open Banking task progress: {
  taskId: 828,
  progressFrom: 0,
  progressTo: 0,
  statusFrom: 'not_started',
  statusTo: 'not_started'
}
[Progress Broadcast broadcast-1747123036751-345] Broadcasting progress update for task 828: {
  taskId: 828,
  progress: 0,
  status: 'not_started',
  timestamp: '2025-05-13T07:57:16.751Z',
  source: 'at reconcileTaskProgress (/home/runner/workspace/server/utils/task-reconciliation.ts:336:11)',
  hasMetadata: true
}
[Progress Utils] Broadcasting task progress update: {
  taskId: 828,
  progress: 0,
  requestedStatus: 'not_started',
  finalStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  timestamp: '2025-05-13T07:57:16.755Z'
}
[2025-05-13T07:57:16.755Z] [WARN] [App] WebSocket server not initialized, skipping broadcast 
[Progress Broadcast broadcast-1747123036751-345] Successfully broadcast progress update for task 828
[Progress Broadcast broadcast-1747123036756-824] Broadcasting progress update for task 828: {
  taskId: 828,
  progress: 0,
  status: 'not_started',
  timestamp: '2025-05-13T07:57:16.756Z',
  source: 'at reconcileTaskProgress (/home/runner/workspace/server/utils/task-reconciliation.ts:336:11)',
  hasMetadata: true
}
[Progress Utils] Broadcasting task progress update: {
  taskId: 828,
  progress: 0,
  requestedStatus: 'not_started',
  finalStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  timestamp: '2025-05-13T07:57:16.756Z'
}
[2025-05-13T07:57:16.756Z] [WARN] [App] WebSocket server not initialized, skipping broadcast 
[Progress Broadcast broadcast-1747123036756-824] Successfully broadcast progress update for task 828
[Tasks Routes] Form data synchronization completed for task: {
  taskId: 828,
  syncDirection: 'none',
  progress: 0,
  status: 'not_started',
  timestamp: '2025-05-13T07:57:16.788Z'
}
[Tasks Routes] Form data synchronization completed for task: {
  taskId: 828,
  syncDirection: 'none',
  progress: 0,
  status: 'not_started',
  timestamp: '2025-05-13T07:57:16.789Z'
}
[2025-05-13T07:57:16.821Z] [INFO] [App] POST /api/tasks/828/sync-form-data 200 in 245ms :: {"success":true,"formData":{},"progress":0,"status":"not_started","taskId":82... 
[2025-05-13T07:57:16.821Z] [INFO] [App] POST /api/tasks/828/sync-form-data 200 in 275ms :: {"success":true,"formData":{},"progress":0,"status":"not_started","taskId":82... 
[Tasks Routes] Synchronizing form data for task: { taskId: 828, timestamp: '2025-05-13T07:57:16.973Z' }
[Tasks Routes] Synchronizing form data for task: { taskId: 828, timestamp: '2025-05-13T07:57:16.975Z' }
[Task Reconciliation] Fetching Open Banking responses for task 828
[Task Reconciliation] Fetching Open Banking responses for task 828
[Task Reconciliation] Recalculated Open Banking progress: {
  taskId: 828,
  totalFields: '44',
  completedFields: '0',
  currentProgress: 0,
  calculatedProgress: 0
}
[Task Reconciliation] Updating Open Banking task progress: {
  taskId: 828,
  progressFrom: 0,
  progressTo: 0,
  statusFrom: 'not_started',
  statusTo: 'not_started'
}
[Task Reconciliation] Recalculated Open Banking progress: {
  taskId: 828,
  totalFields: '44',
  completedFields: '0',
  currentProgress: 0,
  calculatedProgress: 0
}
[Task Reconciliation] Updating Open Banking task progress: {
  taskId: 828,
  progressFrom: 0,
  progressTo: 0,
  statusFrom: 'not_started',
  statusTo: 'not_started'
}
[Progress Broadcast broadcast-1747123037160-824] Broadcasting progress update for task 828: {
  taskId: 828,
  progress: 0,
  status: 'not_started',
  timestamp: '2025-05-13T07:57:17.160Z',
  source: 'at reconcileTaskProgress (/home/runner/workspace/server/utils/task-reconciliation.ts:336:11)',
  hasMetadata: true
}
[Progress Utils] Broadcasting task progress update: {
  taskId: 828,
  progress: 0,
  requestedStatus: 'not_started',
  finalStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  timestamp: '2025-05-13T07:57:17.160Z'
}
[2025-05-13T07:57:17.160Z] [WARN] [App] WebSocket server not initialized, skipping broadcast 
[Progress Broadcast broadcast-1747123037160-824] Successfully broadcast progress update for task 828
[Progress Broadcast broadcast-1747123037162-276] Broadcasting progress update for task 828: {
  taskId: 828,
  progress: 0,
  status: 'not_started',
  timestamp: '2025-05-13T07:57:17.162Z',
  source: 'at reconcileTaskProgress (/home/runner/workspace/server/utils/task-reconciliation.ts:336:11)',
  hasMetadata: true
}
[Progress Utils] Broadcasting task progress update: {
  taskId: 828,
  progress: 0,
  requestedStatus: 'not_started',
  finalStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  timestamp: '2025-05-13T07:57:17.163Z'
}
[2025-05-13T07:57:17.163Z] [WARN] [App] WebSocket server not initialized, skipping broadcast 
[Progress Broadcast broadcast-1747123037162-276] Successfully broadcast progress update for task 828
[Tasks Routes] Form data synchronization completed for task: {
  taskId: 828,
  syncDirection: 'none',
  progress: 0,
  status: 'not_started',
  timestamp: '2025-05-13T07:57:17.189Z'
}
[Tasks Routes] Form data synchronization completed for task: {
  taskId: 828,
  syncDirection: 'none',
  progress: 0,
  status: 'not_started',
  timestamp: '2025-05-13T07:57:17.193Z'
}
[2025-05-13T07:57:17.220Z] [INFO] [App] POST /api/tasks/828/sync-form-data 200 in 246ms :: {"success":true,"formData":{},"progress":0,"status":"not_started","taskId":82... 
[2025-05-13T07:57:17.224Z] [INFO] [App] POST /api/tasks/828/sync-form-data 200 in 251ms :: {"success":true,"formData":{},"progress":0,"status":"not_started","taskId":82... 
[2025-05-13T07:57:17.434Z] [INFO] [App] GET /api/tasks/828 200 in 63ms :: {"id":828,"title":"3. Open Banking Survey: DevTest34","description":"Complete... 
[2025-05-13T07:57:17.589Z] [INFO] [App] [OpenBankingRoutes] Fetching progress for task {"taskId":828}
[2025-05-13T07:57:17.644Z] [INFO] [App] GET /api/tasks/828 304 in 61ms :: {"id":828,"title":"3. Open Banking Survey: DevTest34","description":"Complete... 
[2025-05-13T07:57:17.743Z] [INFO] [App] GET /api/open-banking/progress/828 200 in 155ms :: {"formData":{},"progress":0,"status":"not_started"} 
[2025-05-13T07:57:17.808Z] [INFO] [App] [OpenBankingRoutes] Fetching progress for task {"taskId":828}
[2025-05-13T07:57:17.931Z] [INFO] [App] GET /api/open-banking/progress/828 200 in 124ms :: {"formData":{},"progress":0,"status":"not_started"} 
[2025-05-13T07:57:18.224Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-13T07:57:20.488Z] [INFO] [App] Retrieving Open Banking demo data for task {"taskId":828,"userId":332}
[2025-05-13T07:57:20.580Z] [INFO] [App] Retrieved 44 Open Banking fields with demo values for task 828 
[2025-05-13T07:57:20.612Z] [INFO] [App] GET /api/open-banking/demo-autofill/828 200 in 125ms :: {"dataSchemaAlignment":"Our API data structures fully align with the FDX sche... 
[Tasks Routes] Synchronizing form data for task: { taskId: 828, timestamp: '2025-05-13T07:57:20.770Z' }
[2025-05-13T07:57:20.773Z] [INFO] [App] [Open Banking API] Saving progress for task 828 {"formDataKeys":0,"fieldUpdatesCount":0,"progress":0,"status":"not_started"}
[Task Reconciliation] Fetching Open Banking responses for task 828
[Task Reconciliation] Recalculated Open Banking progress: {
  taskId: 828,
  totalFields: '44',
  completedFields: '0',
  currentProgress: 0,
  calculatedProgress: 0
}
[Task Reconciliation] Updating Open Banking task progress: {
  taskId: 828,
  progressFrom: 0,
  progressTo: 0,
  statusFrom: 'not_started',
  statusTo: 'not_started'
}
[Progress Broadcast broadcast-1747123040951-861] Broadcasting progress update for task 828: {
  taskId: 828,
  progress: 0,
  status: 'not_started',
  timestamp: '2025-05-13T07:57:20.951Z',
  source: 'at reconcileTaskProgress (/home/runner/workspace/server/utils/task-reconciliation.ts:336:11)',
  hasMetadata: true
}
[Progress Utils] Broadcasting task progress update: {
  taskId: 828,
  progress: 0,
  requestedStatus: 'not_started',
  finalStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  timestamp: '2025-05-13T07:57:20.951Z'
}
[2025-05-13T07:57:20.951Z] [WARN] [App] WebSocket server not initialized, skipping broadcast 
[Progress Broadcast broadcast-1747123040951-861] Successfully broadcast progress update for task 828
[2025-05-13T07:57:20.957Z] [INFO] [App] [Open Banking API] Progress calculation: {"totalFields":"44","completedFieldsCount":"0","ratio":0}
[2025-05-13T07:57:20.957Z] [INFO] [App] [Open Banking API] Status determination: {"providedStatus":"not_started","calculatedStatus":"not_started","progress":0}
[Tasks Routes] Form data synchronization completed for task: {
  taskId: 828,
  syncDirection: 'none',
  progress: 0,
  status: 'not_started',
  timestamp: '2025-05-13T07:57:20.984Z'
}
[Progress Broadcast broadcast-1747123040989-233] Broadcasting progress update for task 828: {
  taskId: 828,
  progress: 0,
  status: 'not_started',
  timestamp: '2025-05-13T07:57:20.989Z',
  source: 'at <anonymous> (/home/runner/workspace/server/routes/open-banking-progress.ts:440:7)',
  hasMetadata: false
}
[Progress Utils] Broadcasting task progress update: {
  taskId: 828,
  progress: 0,
  requestedStatus: 'not_started',
  finalStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  timestamp: '2025-05-13T07:57:20.989Z'
}
[2025-05-13T07:57:20.989Z] [WARN] [App] WebSocket server not initialized, skipping broadcast 
[Progress Broadcast broadcast-1747123040989-233] Successfully broadcast progress update for task 828
[2025-05-13T07:57:20.991Z] [INFO] [App] [Open Banking API] Progress saved for task 828 {"progress":0,"status":"not_started","fieldsUpdated":0}
[2025-05-13T07:57:21.016Z] [INFO] [App] POST /api/tasks/828/sync-form-data 200 in 246ms :: {"success":true,"formData":{},"progress":0,"status":"not_started","taskId":82... 
[2025-05-13T07:57:21.022Z] [INFO] [App] POST /api/open-banking/progress 200 in 250ms :: {"success":true,"savedData":{"progress":0,"status":"not_started","formData":{}}} 
[2025-05-13T07:57:21.290Z] [INFO] [App] GET /api/companies/current 304 in 44ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-13T07:57:22.540Z] [DEBUG] [App] [WebSocket] Received message: {"type":"ping","timestamp":"2025-05-13T07:57:22.401Z","connectionId":"ws_1747121174688_nmpzj6cgz"}
[2025-05-13T07:57:24.174Z] [INFO] [App] [Open Banking API] Saving progress for task 828 {"formDataKeys":44,"fieldUpdatesCount":44,"progress":0,"status":"not_started"}
[2025-05-13T07:57:24.250Z] [INFO] [App] GET /api/companies/current 304 in 32ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-13T07:57:27.069Z] [DEBUG] [App] [WebSocket] Received message: {"type":"ping","timestamp":"2025-05-13T07:57:26.926Z"}
[2025-05-13T07:57:27.096Z] [INFO] [App] [Open Banking API] Progress calculation: {"totalFields":"44","completedFieldsCount":"44","ratio":1}
[2025-05-13T07:57:27.096Z] [INFO] [App] [Open Banking API] Upgrading task status due to progress: {"from":"not_started","to":"ready_for_submission","progress":100}
[2025-05-13T07:57:27.096Z] [INFO] [App] [Open Banking API] Status determination: {"providedStatus":"not_started","calculatedStatus":"ready_for_submission","progress":100}
[2025-05-13T07:57:27.240Z] [INFO] [App] GET /api/companies/current 304 in 32ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-13T07:57:27.684Z] [DEBUG] [App] [WebSocket] Received message: {"type":"ping","timestamp":"2025-05-13T07:57:27.541Z","connectionId":"ws_1747121175188_39zcnn2xv"}
[2025-05-13T07:57:28.154Z] [DEBUG] [App] [WebSocket] Received message: {"type":"ping"}
[OpenBanking TimestampHandler] Saved 44 timestamps for task 828
[Progress Broadcast broadcast-1747123048508-492] Broadcasting progress update for task 828: {
  taskId: 828,
  progress: 100,
  status: 'ready_for_submission',
  timestamp: '2025-05-13T07:57:28.508Z',
  source: 'at <anonymous> (/home/runner/workspace/server/routes/open-banking-progress.ts:440:7)',
  hasMetadata: false
}
[Progress Utils] Broadcasting task progress update: {
  taskId: 828,
  progress: 100,
  requestedStatus: 'ready_for_submission',
  finalStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  timestamp: '2025-05-13T07:57:28.509Z'
}
[2025-05-13T07:57:28.509Z] [WARN] [App] WebSocket server not initialized, skipping broadcast 
[Progress Broadcast broadcast-1747123048508-492] Successfully broadcast progress update for task 828
[2025-05-13T07:57:28.509Z] [INFO] [App] [Open Banking API] Progress saved for task 828 {"progress":100,"status":"ready_for_submission","fieldsUpdated":44}
[2025-05-13T07:57:28.541Z] [INFO] [App] POST /api/open-banking/progress 200 in 4366ms :: {"success":true,"savedData":{"progress":100,"status":"ready_for_submission","... 
[2025-05-13T07:57:28.742Z] [INFO] [App] [Open Banking API] Saving progress for task 828 {"formDataKeys":44,"fieldUpdatesCount":44,"progress":100,"status":"ready_for_submission"}
[TransactionalFormRoutes] 📬 FORM SUBMISSION START - 2025-05-13T07:57:29.638Z {
  path: '/submit/open_banking/828',
  method: 'POST',
  params: { formType: 'open_banking', taskId: '828' },
  userPresent: true,
  userIdPresent: true,
  bodyKeys: [ 'taskId', 'formType', 'formData', 'companyId' ],
  timestamp: '2025-05-13T07:57:29.638Z'
}
[TransactionalFormRoutes] 🧾 Form submission parameters validated: {
  taskId: 828,
  formType: 'open_banking',
  companyId: 289,
  userId: 332,
  formDataFields: 4
}
[2025-05-13T07:57:29.638Z] [INFO] [App] Received form submission request {"taskId":828,"formType":"open_banking","userId":332,"companyId":289,"dataKeysCount":4}
[2025-05-13T07:57:29.638Z] [WARN] [App] WebSocket server not initialized, skipping broadcast 
[2025-05-13T07:57:29.638Z] [INFO] [App] Starting transactional form submission {"taskId":828,"userId":332,"companyId":289,"formType":"open_banking","fieldsCount":4}
[2025-05-13T07:57:29.638Z] [INFO] [App] Starting form submission transaction {"taskId":828,"userId":332,"companyId":289,"formType":"open_banking","transactionId":"tx-1747123049638-m5r95","logContext":{"service":"TransactionalFormHandler"}}
[2025-05-13T07:57:29.638Z] [WARN] [WebSocket] Cannot broadcast: WebSocket server not initialized {"module":"WebSocket"}
[FormNotifications] Sent in-progress notification for open_banking task 828 (25%)
[2025-05-13T07:57:29.638Z] [DEBUG] [TransactionManager] Starting new transaction {"module":"TransactionManager"}
[2025-05-13T07:57:29.668Z] [DEBUG] [TransactionManager] Transaction started successfully {"module":"TransactionManager"}
[TransactionalFormHandler] Starting file creation for task 828 {
  taskId: 828,
  formType: 'open_banking',
  companyId: 289,
  userId: 332,
  formDataKeys: 4,
  timestamp: '2025-05-13T07:57:29.698Z'
}
[2025-05-13T07:57:29.699Z] [WARN] [WebSocket] Cannot broadcast: WebSocket server not initialized {"module":"WebSocket"}
[FormNotifications] Sent in-progress notification for open_banking task 828 (50%)
[2025-05-13T07:57:29.699Z] [INFO] [App] Creating file for open_banking task 828 {"taskId":828,"normalizedFormType":"open_banking"}
[2025-05-13T07:57:29.702Z] [INFO] [App] GET /api/tasks/828 200 in 62ms :: {"id":828,"title":"3. Open Banking Survey: DevTest34","description":"Complete... 
[FileCreation] Retrieved 44 Open Banking responses for task 828 ordered by UI form order
[2025-05-13T07:57:29.757Z] [INFO] [App] [FileCreation] Filtering responses with status 'complete' (case-insensitive) {"taskId":828,"formType":"open_banking","totalResponses":44,"completeResponses":44,"timestamp":"2025-05-13T07:57:29.757Z"}
[2025-05-13T07:57:29.757Z] [INFO] [App] Response status distribution: {"complete":44} {"taskId":828}
[2025-05-13T07:57:29.757Z] [INFO] [App] Building CSV from 44 complete responses {"taskId":828}
[2025-05-13T07:57:29.757Z] [INFO] [App] Created 44 data rows from database responses {"taskId":828}
[2025-05-13T07:57:29.757Z] [INFO] [App] Created CSV with 44 rows (form fields only, no metadata rows) {"taskId":828}
[FileCreation] Created standard CSV file with 44 data rows for task 828
[FileCreation] CSV file created with 44 fields: {
  rowCount: 45,
  headerRow: [ 'id', 'question', 'response', 'field_key', 'timestamp' ],
  contentLength: 13790
}
[FileCreation] Created CSV file for task 828
[FileCreation] Creating file with metadata for task 828: {
  taskId: 828,
  formType: 'open_banking',
  fileName: 'openbanking_828_289_v1.0_20250513075729.csv',
  metadataFields: [
    'taskId',
    'taskType',
    'submissionDate',
    'formType',
    'formSubmission',
    'fieldCount',
    'fileName',
    'version',
    'jsonBackup'
  ]
}
[2025-05-13T07:57:29.758Z] [INFO] [App] Creating file: openbanking_828_289_v1.0_20250513075729.csv {"companyId":289,"userId":332,"fileType":"text/csv","fileSize":13792}
[FileCreation] Creating file for company 289 by user 332 {
  fileName: 'openbanking_828_289_v1.0_20250513075729.csv',
  fileType: 'text/csv',
  fileSize: 13792,
  timestamp: '2025-05-13T07:57:29.758Z'
}
[2025-05-13T07:57:29.817Z] [INFO] [App] File created successfully {"fileId":917,"fileName":"openbanking_828_289_v1.0_20250513075729.csv","companyId":289}
[TransactionalFormHandler] File creation result for task 828: {
  success: true,
  fileId: 917,
  fileName: 'openbanking_828_289_v1.0_20250513075729.csv',
  error: undefined,
  timestamp: '2025-05-13T07:57:29.818Z'
}
[FileCreation] ✅ File 917 created for task 828 and linked to file vault
[TransactionalFormHandler] Updating task 828 status to 'submitted' with 100% progress
[2025-05-13T07:57:29.877Z] [INFO] [App] [TransactionalFormHandler] Starting task status update to 'submitted' for task 828 {"taskId":828,"formType":"open_banking","companyId":289,"transactionId":"tx-1747123049877-42zq2"}
[TransactionalFormHandler] 🔴 TASK UPDATE START for task 828: {
  taskType: 'open_banking',
  companyId: 289,
  submissionDate: '2025-05-13T07:57:29.878Z',
  timestamp: '2025-05-13T07:57:29.878Z',
  traceId: 'task_update_828_1747123049878',
  thread: 'main_transaction'
}
[TransactionalFormHandler] 📊 PRE-UPDATE TASK STATE for task 828: {
  originalStatus: 'submitted',
  originalProgress: 100,
  hasRows: true,
  timestamp: '2025-05-13T07:57:29.906Z'
}
[2025-05-13T07:57:29.906Z] [INFO] [App] [TransactionalFormHandler] Pre-update task state: {"taskId":828,"status":"submitted","progress":100,"timestamp":"2025-05-13T07:57:29.906Z"}
[TransactionalFormHandler] 🔄 EXECUTING SQL UPDATE for task 828...
[TransactionalFormHandler] ✅ SQL UPDATE RESULT for task 828: {
  success: true,
  rowCount: 1,
  updatedStatus: 'submitted',
  updatedProgress: 100,
  hasMetadata: true,
  returnedRowCount: 1,
  timestamp: '2025-05-13T07:57:29.935Z'
}
[TransactionalFormHandler] 🔍 VERIFICATION QUERY RESULT for task 828: {
  verifiedStatus: 'submitted',
  verifiedProgress: 100,
  submitted: true,
  submissionDate: '2025-05-13T07:57:29.878Z',
  hasRows: true,
  timestamp: '2025-05-13T07:57:29.964Z'
}
[2025-05-13T07:57:29.965Z] [INFO] [App] [TransactionalFormHandler] Task status update result: {"taskId":828,"formType":"open_banking","rowCount":1,"success":true,"returnedStatus":"submitted","returnedProgress":100,"hasMetadata":true,"submissionDate":"2025-05-13T07:57:29.878Z","timestamp":"2025-05-13T07:57:29.965Z"}
[TransactionalFormHandler] ✅ Successfully updated task 828 status: {
  updatedStatus: 'submitted',
  updatedProgress: 100,
  timestamp: '2025-05-13T07:57:29.965Z'
}
[2025-05-13T07:57:29.965Z] [INFO] [App] [TabAccess] Unlocking tabs for form submission {"companyId":289,"formType":"open_banking"}
[2025-05-13T07:57:29.965Z] [INFO] [App] [TabAccess] Adding tabs to company {"companyId":289,"tabs":["dashboard","insights"],"source":"form_submission"}
[2025-05-13T07:57:30.024Z] [ERROR] [App] WebSocket server not available, cannot broadcast company_tabs_updated message 
[2025-05-13T07:57:30.024Z] [DEBUG] [App] [TabAccess] Broadcast company tabs update via WebSocket {"companyId":289,"availableTabs":["task-center","file-vault","dashboard","insights"],"source":"form_submission"}
[2025-05-13T07:57:30.024Z] [INFO] [App] [TabAccess] Successfully added tabs to company {"companyId":289,"addedTabs":["dashboard","insights"],"allTabs":["task-center","file-vault","dashboard","insights"],"source":"form_submission"}
[TransactionalFormHandler] 🚀 Executing Open Banking post-submission actions for task 828, company 289
[OpenBankingPostSubmission] 🚀 Starting Open Banking post-submission for task 828, company 289
[2025-05-13T07:57:30.025Z] [INFO] [App] Processing Open Banking post-submission logic {"namespace":"OpenBankingPostSubmission","taskId":828,"companyId":289,"transactionId":"tx-1747123049638-m5r95","timestamp":"2025-05-13T07:57:30.025Z"}
[2025-05-13T07:57:30.027Z] [ERROR] [App] Critical error in Open Banking post-submission processing {"namespace":"OpenBankingPostSubmission","taskId":828,"companyId":289,"transactionId":"tx-1747123049638-m5r95","stepResults":{"companyVerified":false,"tabsUnlocked":false,"onboardingCompleted":false,"riskScoreGenerated":false,"accreditationUpdated":false},"error":"trx.select is not a function","stack":"TypeError: trx.select is not a function\n    at Module.handleOpenBankingPostSubmission (/home/runner/workspace/server/services/unified-form-submission-service.ts:778:36)\n    at <anonymous> (/home/runner/workspace/server/services/transactional-form-handler.ts:350:72)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async withTransactionContext (/home/runner/workspace/server/services/transaction-manager.ts:196:16)\n    at async submitFormWithTransaction (/home/runner/workspace/server/services/transactional-form-handler.ts:93:12)\n    at async <anonymous> (/home/runner/workspace/server/routes/transactional-form-routes.ts:111:22)","duration":"0.39ms","timestamp":"2025-05-13T07:57:30.027Z"}
[TransactionalFormHandler] ❌ Error in Open Banking post-submission actions: {
  error: 'trx.select is not a function',
  stack: 'TypeError: trx.select is not a function\n' +
    '    at Module.handleOpenBankingPostSubmission (/home/runner/workspace/server/services/unified-form-submission-service.ts:778:36)\n' +
    '    at <anonymous> (/home/runner/workspace/server/services/transactional-form-handler.ts:350:72)\n' +
    '    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n' +
    '    at async withTransactionContext (/home/runner/workspace/server/services/transaction-manager.ts:196:16)\n' +
    '    at async submitFormWithTransaction (/home/runner/workspace/server/services/transactional-form-handler.ts:93:12)\n' +
    '    at async <anonymous> (/home/runner/workspace/server/routes/transactional-form-routes.ts:111:22)',
  taskId: 828,
  companyId: 289,
  timestamp: '2025-05-13T07:57:30.027Z'
}
[TransactionalFormHandler] Broadcasting form submission for task 828: {
  formType: 'open_banking',
  taskId: 828,
  companyId: 289,
  hasFileId: true,
  hasUnlockedTabs: true,
  timestamp: '2025-05-13T07:57:30.027Z'
}
[2025-05-13T07:57:30.027Z] [WARN] [WebSocket] Cannot broadcast: WebSocket server not initialized {"module":"WebSocket"}
[FormNotifications] Sent in-progress notification for open_banking task 828 (90%)
[TransactionalFormHandler] Sending FINAL completion message for task 828: {
  formType: 'open_banking',
  taskId: 828,
  companyId: 289,
  hasCompletedActions: 3,
  timestamp: '2025-05-13T07:57:30.027Z'
}
[2025-05-13T07:57:30.027Z] [WARN] [WebSocket] Cannot broadcast: WebSocket server not initialized {"module":"WebSocket"}
[2025-05-13T07:57:30.027Z] [DEBUG] [TransactionManager] Committing transaction {"module":"TransactionManager"}
[2025-05-13T07:57:30.057Z] [DEBUG] [TransactionManager] Transaction committed successfully {"module":"TransactionManager"}
[2025-05-13T07:57:30.058Z] [INFO] [App] Sending form submission completion event {"taskId":828,"formType":"open_banking","companyId":289,"fileId":917,"actionCount":2,"timestamp":"2025-05-13T07:57:30.058Z"}
[2025-05-13T07:57:30.058Z] [WARN] [WebSocket] Cannot broadcast: WebSocket server not initialized {"module":"WebSocket"}
[2025-05-13T07:57:30.089Z] [INFO] [App] POST /api/forms-tx/submit/open_banking/828 200 in 451ms :: {"success":true,"message":"Form submitted successfully","fileId":917} 
[2025-05-13T07:57:30.254Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-13T07:57:32.087Z] [INFO] [App] [Open Banking API] Progress calculation: {"totalFields":"44","completedFieldsCount":"44","ratio":1}
[2025-05-13T07:57:32.088Z] [INFO] [App] [Open Banking API] Status determination: {"providedStatus":"ready_for_submission","calculatedStatus":"ready_for_submission","progress":100}
[2025-05-13T07:57:33.258Z] [INFO] [App] GET /api/companies/current 304 in 33ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[OpenBanking TimestampHandler] Saved 44 timestamps for task 828
[Progress Broadcast broadcast-1747123053530-656] Broadcasting progress update for task 828: {
  taskId: 828,
  progress: 100,
  status: 'ready_for_submission',
  timestamp: '2025-05-13T07:57:33.531Z',
  source: 'at <anonymous> (/home/runner/workspace/server/routes/open-banking-progress.ts:440:7)',
  hasMetadata: false
}
[Progress Utils] Broadcasting task progress update: {
  taskId: 828,
  progress: 100,
  requestedStatus: 'ready_for_submission',
  finalStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  timestamp: '2025-05-13T07:57:33.532Z'
}
[2025-05-13T07:57:33.533Z] [WARN] [App] WebSocket server not initialized, skipping broadcast 
[Progress Broadcast broadcast-1747123053530-656] Successfully broadcast progress update for task 828
[2025-05-13T07:57:33.533Z] [INFO] [App] [Open Banking API] Progress saved for task 828 {"progress":100,"status":"ready_for_submission","fieldsUpdated":44}
[2025-05-13T07:57:33.565Z] [INFO] [App] POST /api/open-banking/progress 200 in 4823ms :: {"success":true,"savedData":{"progress":100,"status":"ready_for_submission","... 
[2025-05-13T07:57:33.792Z] [INFO] [App] [Open Banking API] Saving progress for task 828 {"formDataKeys":44,"fieldUpdatesCount":44,"progress":100,"status":"ready_for_submission"}
[2025-05-13T07:57:34.400Z] [DEBUG] [App] [WebSocket] Received message: {"type":"ping","timestamp":"2025-05-13T07:57:34.261Z","connectionId":"ws_1747122830501_041k4ahnp"}
[2025-05-13T07:57:36.766Z] [INFO] [App] [Open Banking API] Progress calculation: {"totalFields":"44","completedFieldsCount":"44","ratio":1}
[2025-05-13T07:57:36.766Z] [INFO] [App] [Open Banking API] Status determination: {"providedStatus":"ready_for_submission","calculatedStatus":"ready_for_submission","progress":100}
[OpenBanking TimestampHandler] Saved 44 timestamps for task 828
[Progress Broadcast broadcast-1747123058190-856] Broadcasting progress update for task 828: {
  taskId: 828,
  progress: 100,
  status: 'ready_for_submission',
  timestamp: '2025-05-13T07:57:38.190Z',
  source: 'at <anonymous> (/home/runner/workspace/server/routes/open-banking-progress.ts:440:7)',
  hasMetadata: false
}
[Progress Utils] Broadcasting task progress update: {
  taskId: 828,
  progress: 100,
  requestedStatus: 'ready_for_submission',
  finalStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  timestamp: '2025-05-13T07:57:38.191Z'
}
[2025-05-13T07:57:38.191Z] [WARN] [App] WebSocket server not initialized, skipping broadcast 
[Progress Broadcast broadcast-1747123058190-856] Successfully broadcast progress update for task 828
[2025-05-13T07:57:38.191Z] [INFO] [App] [Open Banking API] Progress saved for task 828 {"progress":100,"status":"ready_for_submission","fieldsUpdated":44}
[2025-05-13T07:57:38.223Z] [INFO] [App] POST /api/open-banking/progress 200 in 4431ms :: {"success":true,"savedData":{"progress":100,"status":"ready_for_submission","... 
[2025-05-13T07:57:39.441Z] [INFO] [App] [Open Banking API] Saving progress for task 828 {"formDataKeys":44,"fieldUpdatesCount":44,"progress":100,"status":"ready_for_submission"}
[2025-05-13T07:57:39.442Z] [INFO] [App] GET /api/companies/current 304 in 37ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-13T07:57:42.070Z] [DEBUG] [App] [WebSocket] Received message: {"type":"ping","timestamp":"2025-05-13T07:57:41.927Z"}
[2025-05-13T07:57:42.229Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-13T07:57:42.470Z] [INFO] [App] [Open Banking API] Progress calculation: {"totalFields":"44","completedFieldsCount":"44","ratio":1}
[2025-05-13T07:57:42.470Z] [INFO] [App] [Open Banking API] Status determination: {"providedStatus":"ready_for_submission","calculatedStatus":"ready_for_submission","progress":100}
[OpenBanking TimestampHandler] Saved 44 timestamps for task 828
[Progress Broadcast broadcast-1747123063915-852] Broadcasting progress update for task 828: {
  taskId: 828,
  progress: 100,
  status: 'ready_for_submission',
  timestamp: '2025-05-13T07:57:43.915Z',
  source: 'at <anonymous> (/home/runner/workspace/server/routes/open-banking-progress.ts:440:7)',
  hasMetadata: false
}
[Progress Utils] Broadcasting task progress update: {
  taskId: 828,
  progress: 100,
  requestedStatus: 'ready_for_submission',
  finalStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  timestamp: '2025-05-13T07:57:43.915Z'
}
[2025-05-13T07:57:43.915Z] [WARN] [App] WebSocket server not initialized, skipping broadcast 
[Progress Broadcast broadcast-1747123063915-852] Successfully broadcast progress update for task 828
[2025-05-13T07:57:43.915Z] [INFO] [App] [Open Banking API] Progress saved for task 828 {"progress":100,"status":"ready_for_submission","fieldsUpdated":44}
[2025-05-13T07:57:43.946Z] [INFO] [App] POST /api/open-banking/progress 200 in 4506ms :: {"success":true,"savedData":{"progress":100,"status":"ready_for_submission","... 
[2025-05-13T07:57:44.135Z] [INFO] [App] [Open Banking API] Saving progress for task 828 {"formDataKeys":44,"fieldUpdatesCount":44,"progress":100,"status":"ready_for_submission"}
[2025-05-13T07:57:45.225Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-13T07:57:47.011Z] [INFO] [App] [Open Banking API] Progress calculation: {"totalFields":"44","completedFieldsCount":"44","ratio":1}
[2025-05-13T07:57:47.011Z] [INFO] [App] [Open Banking API] Status determination: {"providedStatus":"ready_for_submission","calculatedStatus":"ready_for_submission","progress":100}
[2025-05-13T07:57:48.229Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[OpenBanking TimestampHandler] Saved 44 timestamps for task 828
[Progress Broadcast broadcast-1747123068439-919] Broadcasting progress update for task 828: {
  taskId: 828,
  progress: 100,
  status: 'ready_for_submission',
  timestamp: '2025-05-13T07:57:48.439Z',
  source: 'at <anonymous> (/home/runner/workspace/server/routes/open-banking-progress.ts:440:7)',
  hasMetadata: false
}
[Progress Utils] Broadcasting task progress update: {
  taskId: 828,
  progress: 100,
  requestedStatus: 'ready_for_submission',
  finalStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  timestamp: '2025-05-13T07:57:48.440Z'
}
[2025-05-13T07:57:48.440Z] [WARN] [App] WebSocket server not initialized, skipping broadcast 
[Progress Broadcast broadcast-1747123068439-919] Successfully broadcast progress update for task 828
[2025-05-13T07:57:48.440Z] [INFO] [App] [Open Banking API] Progress saved for task 828 {"progress":100,"status":"ready_for_submission","fieldsUpdated":44}
[2025-05-13T07:57:48.478Z] [INFO] [App] POST /api/open-banking/progress 200 in 4343ms :: {"success":true,"savedData":{"progress":100,"status":"ready_for_submission","... 
[2025-05-13T07:57:48.655Z] [INFO] [App] [Open Banking API] Saving progress for task 828 {"formDataKeys":44,"fieldUpdatesCount":44,"progress":100,"status":"ready_for_submission"}
[2025-05-13T07:57:51.227Z] [INFO] [App] GET /api/companies/current 304 in 32ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-13T07:57:51.528Z] [INFO] [App] [Open Banking API] Progress calculation: {"totalFields":"44","completedFieldsCount":"44","ratio":1}
[2025-05-13T07:57:51.528Z] [INFO] [App] [Open Banking API] Status determination: {"providedStatus":"ready_for_submission","calculatedStatus":"ready_for_submission","progress":100}
[2025-05-13T07:57:52.513Z] [DEBUG] [App] [WebSocket] Received message: {"type":"ping","timestamp":"2025-05-13T07:57:52.374Z","connectionId":"ws_1747121174688_nmpzj6cgz"}
[OpenBanking TimestampHandler] Saved 44 timestamps for task 828
[Progress Broadcast broadcast-1747123073025-321] Broadcasting progress update for task 828: {
  taskId: 828,
  progress: 100,
  status: 'ready_for_submission',
  timestamp: '2025-05-13T07:57:53.025Z',
  source: 'at <anonymous> (/home/runner/workspace/server/routes/open-banking-progress.ts:440:7)',
  hasMetadata: false
}
[Progress Utils] Broadcasting task progress update: {
  taskId: 828,
  progress: 100,
  requestedStatus: 'ready_for_submission',
  finalStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  timestamp: '2025-05-13T07:57:53.025Z'
}
[2025-05-13T07:57:53.025Z] [WARN] [App] WebSocket server not initialized, skipping broadcast 
[Progress Broadcast broadcast-1747123073025-321] Successfully broadcast progress update for task 828
[2025-05-13T07:57:53.025Z] [INFO] [App] [Open Banking API] Progress saved for task 828 {"progress":100,"status":"ready_for_submission","fieldsUpdated":44}
[2025-05-13T07:57:53.057Z] [INFO] [App] POST /api/open-banking/progress 200 in 4403ms :: {"success":true,"savedData":{"progress":100,"status":"ready_for_submission","... 
[2025-05-13T07:57:53.239Z] [INFO] [App] [Open Banking API] Saving progress for task 828 {"formDataKeys":44,"fieldUpdatesCount":44,"progress":100,"status":"ready_for_submission"}
[2025-05-13T07:57:54.240Z] [INFO] [App] GET /api/companies/current 304 in 38ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-13T07:57:54.430Z] [DEBUG] [App] [WebSocket] Received message: {"type":"ping","timestamp":"2025-05-13T07:57:54.292Z","connectionId":"ws_1747122830501_041k4ahnp"}
[2025-05-13T07:57:56.177Z] [INFO] [App] [Open Banking API] Progress calculation: {"totalFields":"44","completedFieldsCount":"44","ratio":1}
[2025-05-13T07:57:56.177Z] [INFO] [App] [Open Banking API] Status determination: {"providedStatus":"ready_for_submission","calculatedStatus":"ready_for_submission","progress":100}
[2025-05-13T07:57:56.320Z] [DEBUG] [App] [WebSocket] Received message: {"type":"ping"}
[2025-05-13T07:57:57.070Z] [DEBUG] [App] [WebSocket] Received message: {"type":"ping","timestamp":"2025-05-13T07:57:56.926Z"}
[2025-05-13T07:57:57.223Z] [INFO] [App] GET /api/companies/current 304 in 32ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[OpenBanking TimestampHandler] Saved 44 timestamps for task 828
[Progress Broadcast broadcast-1747123077570-198] Broadcasting progress update for task 828: {
  taskId: 828,
  progress: 100,
  status: 'ready_for_submission',
  timestamp: '2025-05-13T07:57:57.570Z',
  source: 'at <anonymous> (/home/runner/workspace/server/routes/open-banking-progress.ts:440:7)',
  hasMetadata: false
}
[Progress Utils] Broadcasting task progress update: {
  taskId: 828,
  progress: 100,
  requestedStatus: 'ready_for_submission',
  finalStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  timestamp: '2025-05-13T07:57:57.570Z'
}
[2025-05-13T07:57:57.570Z] [WARN] [App] WebSocket server not initialized, skipping broadcast 
[Progress Broadcast broadcast-1747123077570-198] Successfully broadcast progress update for task 828
[2025-05-13T07:57:57.570Z] [INFO] [App] [Open Banking API] Progress saved for task 828 {"progress":100,"status":"ready_for_submission","fieldsUpdated":44}
[2025-05-13T07:57:57.601Z] [INFO] [App] POST /api/open-banking/progress 200 in 4362ms :: {"success":true,"savedData":{"progress":100,"status":"ready_for_submission","... 
[2025-05-13T07:57:57.684Z] [DEBUG] [App] [WebSocket] Received message: {"type":"ping","timestamp":"2025-05-13T07:57:57.541Z","connectionId":"ws_1747121175188_39zcnn2xv"}
[2025-05-13T07:57:57.772Z] [INFO] [App] [Open Banking API] Saving progress for task 828 {"formDataKeys":44,"fieldUpdatesCount":44,"progress":100,"status":"ready_for_submission"}
[2025-05-13T07:57:58.155Z] [DEBUG] [App] [WebSocket] Received message: {"type":"ping"}
[2025-05-13T07:58:00.226Z] [INFO] [App] GET /api/companies/current 304 in 33ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-13T07:58:00.600Z] [INFO] [App] [Open Banking API] Progress calculation: {"totalFields":"44","completedFieldsCount":"44","ratio":1}
[2025-05-13T07:58:00.601Z] [INFO] [App] [Open Banking API] Status determination: {"providedStatus":"ready_for_submission","calculatedStatus":"ready_for_submission","progress":100}
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 332, company_id: 289, email: '34@e.com' }
[2025-05-13T07:58:01.218Z] [INFO] [App] Performing dynamic task unlocking check for company {"companyId":289,"userId":332}
[2025-05-13T07:58:01.247Z] [INFO] [App] Found completed KYB tasks, checking security tasks to unlock {"companyId":289,"kybTaskCount":1}
[2025-05-13T07:58:01.254Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-13T07:58:01.278Z] [INFO] [App] No security tasks found for company {"companyId":289}
[Tasks] Automatically unlocking all tasks for company { userId: 332, companyId: 289, requestedBy: 'automatic_task_unlock' }
[2025-05-13T07:58:01.279Z] [INFO] [App] [TaskDependencies] Unlocking ALL tasks for company {"companyId":289}
[2025-05-13T07:58:01.309Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":837,"userEmail":"js@e.com","currentStatus":"completed","currentProgress":100}
[2025-05-13T07:58:01.309Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":838,"userEmail":"jd@e.com","currentStatus":"completed","currentProgress":100}
[TaskDependencies] Skipping task 826 with submission indicators {
  hasSubmissionDate: true,
  hasSubmittedFlag: true,
  hasFileId: true,
  status: 'submitted',
  progress: 100,
  isReadyForSubmission: false
}
[TaskDependencies] Skipping task 827 with submission indicators {
  hasSubmissionDate: true,
  hasSubmittedFlag: true,
  hasFileId: true,
  status: 'submitted',
  progress: 0,
  isReadyForSubmission: false
}
[2025-05-13T07:58:01.309Z] [INFO] [App] [TaskDependencies] Found user onboarding task that needs completion {"taskId":825,"userEmail":"34@e.com","currentStatus":"completed","currentProgress":100}
[TaskDependencies] Skipping task 828 with submission indicators {
  hasSubmissionDate: true,
  hasSubmittedFlag: true,
  hasFileId: true,
  status: 'ready_for_submission',
  progress: 100,
  isReadyForSubmission: true
}
[2025-05-13T07:58:01.309Z] [INFO] [App] [TaskDependencies] Found tasks to unlock {"companyId":289,"count":3,"taskIds":[837,838,825],"taskTypes":["user_onboarding","user_onboarding","user_onboarding"],"ky3pTaskCount":0,"ky3pTaskIds":[]}
[2025-05-13T07:58:01.309Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":837,"userEmail":"js@e.com","timestamp":"2025-05-13T07:58:01.309Z"}
[2025-05-13T07:58:01.341Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-13T07:58:01.341Z] [WARN] [WebSocket] Cannot broadcast: WebSocket server not initialized {"module":"WebSocket"}
[2025-05-13T07:58:01.341Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":837,"status":"completed"}
[2025-05-13T07:58:01.341Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":838,"userEmail":"jd@e.com","timestamp":"2025-05-13T07:58:01.341Z"}
[2025-05-13T07:58:01.372Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-13T07:58:01.372Z] [WARN] [WebSocket] Cannot broadcast: WebSocket server not initialized {"module":"WebSocket"}
[2025-05-13T07:58:01.373Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":838,"status":"completed"}
[2025-05-13T07:58:01.373Z] [INFO] [App] [TaskDependencies] Setting User Onboarding task as completed {"taskId":825,"userEmail":"34@e.com","timestamp":"2025-05-13T07:58:01.373Z"}
[2025-05-13T07:58:01.404Z] [INFO] [App] Our WebSocket server not initialized, falling back to unified implementation 
[2025-05-13T07:58:01.404Z] [WARN] [WebSocket] Cannot broadcast: WebSocket server not initialized {"module":"WebSocket"}
[2025-05-13T07:58:01.404Z] [INFO] [App] Successfully broadcast task update using unified implementation {"taskId":825,"status":"completed"}
[2025-05-13T07:58:01.404Z] [INFO] [App] [TaskDependencies] Successfully unlocked all tasks {"companyId":289,"count":3}
[Tasks] Successfully unlocked all tasks for company: 289
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 332',
    condition2: 'tasks.created_by = 332',
    condition3: "tasks.company_id = 289 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('34@e.com')"
  }
}
[Tasks] Tasks found: { count: 6 }
[2025-05-13T07:58:01.496Z] [INFO] [App] GET /api/tasks 200 in 278ms :: [{"id":838,"title":"New User Invitation: jd@e.com","description":"Invitation ... 
[2025-05-13T07:58:01.680Z] [INFO] [App] GET /api/tasks 304 in 31ms :: [{"id":838,"title":"New User Invitation: jd@e.com","description":"Invitation ... 
[2025-05-13T07:58:01.864Z] [INFO] [App] GET /api/tasks 304 in 32ms :: [{"id":838,"title":"New User Invitation: jd@e.com","description":"Invitation ... 
[2025-05-13T07:58:02.047Z] [INFO] [App] GET /api/tasks 304 in 32ms :: [{"id":838,"title":"New User Invitation: jd@e.com","description":"Invitation ... 
[OpenBanking TimestampHandler] Saved 44 timestamps for task 828
[Progress Broadcast broadcast-1747123082051-379] Broadcasting progress update for task 828: {
  taskId: 828,
  progress: 100,
  status: 'ready_for_submission',
  timestamp: '2025-05-13T07:58:02.051Z',
  source: 'at <anonymous> (/home/runner/workspace/server/routes/open-banking-progress.ts:440:7)',
  hasMetadata: false
}
[Progress Utils] Broadcasting task progress update: {
  taskId: 828,
  progress: 100,
  requestedStatus: 'ready_for_submission',
  finalStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  timestamp: '2025-05-13T07:58:02.052Z'
}
[2025-05-13T07:58:02.052Z] [WARN] [App] WebSocket server not initialized, skipping broadcast 
[Progress Broadcast broadcast-1747123082051-379] Successfully broadcast progress update for task 828
[2025-05-13T07:58:02.052Z] [INFO] [App] [Open Banking API] Progress saved for task 828 {"progress":100,"status":"ready_for_submission","fieldsUpdated":44}
[2025-05-13T07:58:02.083Z] [INFO] [App] POST /api/open-banking/progress 200 in 4311ms :: {"success":true,"savedData":{"progress":100,"status":"ready_for_submission","... 
[2025-05-13T07:58:02.243Z] [INFO] [App] [Open Banking API] Saving progress for task 828 {"formDataKeys":44,"fieldUpdatesCount":44,"progress":100,"status":"ready_for_submission"}
[2025-05-13T07:58:04.265Z] [INFO] [App] GET /api/companies/current 304 in 32ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-13T07:58:05.285Z] [INFO] [App] [Open Banking API] Progress calculation: {"totalFields":"44","completedFieldsCount":"44","ratio":1}
[2025-05-13T07:58:05.285Z] [INFO] [App] [Open Banking API] Status determination: {"providedStatus":"ready_for_submission","calculatedStatus":"ready_for_submission","progress":100}
[OpenBanking TimestampHandler] Saved 44 timestamps for task 828
[Progress Broadcast broadcast-1747123086695-233] Broadcasting progress update for task 828: {
  taskId: 828,
  progress: 100,
  status: 'ready_for_submission',
  timestamp: '2025-05-13T07:58:06.695Z',
  source: 'at <anonymous> (/home/runner/workspace/server/routes/open-banking-progress.ts:440:7)',
  hasMetadata: false
}
[Progress Utils] Broadcasting task progress update: {
  taskId: 828,
  progress: 100,
  requestedStatus: 'ready_for_submission',
  finalStatus: 'ready_for_submission',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  timestamp: '2025-05-13T07:58:06.696Z'
}
[2025-05-13T07:58:06.696Z] [WARN] [App] WebSocket server not initialized, skipping broadcast 
[Progress Broadcast broadcast-1747123086695-233] Successfully broadcast progress update for task 828
[2025-05-13T07:58:06.696Z] [INFO] [App] [Open Banking API] Progress saved for task 828 {"progress":100,"status":"ready_for_submission","fieldsUpdated":44}
[2025-05-13T07:58:06.728Z] [INFO] [App] POST /api/open-banking/progress 200 in 4485ms :: {"success":true,"savedData":{"progress":100,"status":"ready_for_submission","... 
[2025-05-13T07:58:07.254Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-13T07:58:10.253Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-13T07:58:12.071Z] [DEBUG] [App] [WebSocket] Received message: {"type":"ping","timestamp":"2025-05-13T07:58:11.928Z"}
[2025-05-13T07:58:13.374Z] [INFO] [App] GET /api/companies/current 304 in 147ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-13T07:58:14.400Z] [DEBUG] [App] [WebSocket] Received message: {"type":"ping","timestamp":"2025-05-13T07:58:14.261Z","connectionId":"ws_1747122830501_041k4ahnp"}
[Current Company] Fetching company for user: { userId: 332, companyId: 289 }
[Current Company] Found company: {
  id: 289,
  name: 'DevTest34',
  onboardingCompleted: false,
  riskScore: null,
  chosenScore: null,
  isDemo: true
}
[2025-05-13T07:58:16.293Z] [INFO] [App] GET /api/companies/current 200 in 61ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-13T07:58:17.050Z] [INFO] [App] GET /api/tasks 304 in 31ms :: [{"id":838,"title":"New User Invitation: jd@e.com","description":"Invitation ... 
[2025-05-13T07:58:19.257Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-13T07:58:20.137Z] [INFO] [App] [TabTutorials] Status request for tab "dashboard" from authenticated user ID: 332 
[2025-05-13T07:58:20.137Z] [INFO] [App] [TabTutorials] Normalizing tab name from 'dashboard' to canonical form 
[2025-05-13T07:58:20.137Z] [INFO] [App] [TabTutorials] Tab name already in canonical form: 'dashboard' 
[2025-05-13T07:58:20.137Z] [INFO] [App] [TabTutorials] Checking tutorial status for tab: dashboard (raw: dashboard), user: 332 
[2025-05-13T07:58:20.143Z] [INFO] [App] [TabTutorials] Using authenticated user ID: 332 
[2025-05-13T07:58:20.143Z] [INFO] [App] [TabTutorials] Request body: {"tabName":"dashboard","currentStep":0,"completed":false,"totalSteps":3} 
[2025-05-13T07:58:20.143Z] [INFO] [App] [TabTutorials] Normalizing tab name from 'dashboard' to canonical form 
[2025-05-13T07:58:20.143Z] [INFO] [App] [TabTutorials] Tab name already in canonical form: 'dashboard' 
[2025-05-13T07:58:20.143Z] [INFO] [App] [TabTutorials] Using normalized tab name for update: dashboard (raw: dashboard) 
[Relationships] Fetching network for company: 289
[2025-05-13T07:58:20.171Z] [INFO] [App] [TabTutorials] No tutorial status found for dashboard for user 332 
[2025-05-13T07:58:20.173Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[Relationships] Found network members: { count: 2 }
[2025-05-13T07:58:20.204Z] [INFO] [App] GET /api/user-tab-tutorials/dashboard/status 304 in 67ms :: {"exists":false,"completed":false,"currentStep":0,"tabName":"dashboard"} 
[2025-05-13T07:58:20.228Z] [INFO] [App] [TabTutorials] Created new tutorial entry for dashboard for user 332 
[2025-05-13T07:58:20.228Z] [INFO] [App] [TabTutorials] Broadcasting tutorial progress update for dashboard: step 0/3 
[WebSocketService] Broadcasting message: tutorial_progress
[WebSocketService] WebSocket is not enabled, skipping broadcast: tutorial_progress
[2025-05-13T07:58:20.235Z] [INFO] [App] GET /api/relationships 200 in 69ms :: [{"id":366,"companyId":1,"relatedCompanyId":289,"relationshipType":"network_m... 
[2025-05-13T07:58:20.259Z] [INFO] [App] POST /api/user-tab-tutorials 200 in 116ms :: {"success":true,"message":"Tutorial created successfully","tutorialStatus":{"... 
[2025-05-13T07:58:20.351Z] [INFO] [App] [TabTutorials] Status request for tab "dashboard" from authenticated user ID: 332 
[2025-05-13T07:58:20.351Z] [INFO] [App] [TabTutorials] Normalizing tab name from 'dashboard' to canonical form 
[2025-05-13T07:58:20.351Z] [INFO] [App] [TabTutorials] Tab name already in canonical form: 'dashboard' 
[2025-05-13T07:58:20.351Z] [INFO] [App] [TabTutorials] Checking tutorial status for tab: dashboard (raw: dashboard), user: 332 
[2025-05-13T07:58:20.412Z] [INFO] [App] [TabTutorials] Retrieved tutorial status for dashboard for user 332: completed=false, step=0 
[2025-05-13T07:58:20.443Z] [INFO] [App] GET /api/user-tab-tutorials/dashboard/status 200 in 92ms :: {"exists":true,"completed":false,"currentStep":0,"lastSeenAt":"2025-05-13T07:... 
[2025-05-13T07:58:20.617Z] [INFO] [App] [TabTutorials] Status request for tab "dashboard" from authenticated user ID: 332 
[2025-05-13T07:58:20.617Z] [INFO] [App] [TabTutorials] Normalizing tab name from 'dashboard' to canonical form 
[2025-05-13T07:58:20.617Z] [INFO] [App] [TabTutorials] Tab name already in canonical form: 'dashboard' 
[2025-05-13T07:58:20.617Z] [INFO] [App] [TabTutorials] Checking tutorial status for tab: dashboard (raw: dashboard), user: 332 
[2025-05-13T07:58:20.687Z] [INFO] [App] [TabTutorials] Retrieved tutorial status for dashboard for user 332: completed=false, step=0 
[2025-05-13T07:58:20.721Z] [INFO] [App] GET /api/user-tab-tutorials/dashboard/status 200 in 105ms :: {"exists":true,"completed":false,"currentStep":0,"lastSeenAt":"2025-05-13T07:... 
[2025-05-13T07:58:22.334Z] [INFO] [App] [TabTutorials] Using authenticated user ID: 332 
[2025-05-13T07:58:22.334Z] [INFO] [App] [TabTutorials] Request body: {"tabName":"dashboard","currentStep":1,"completed":false,"totalSteps":3} 
[2025-05-13T07:58:22.334Z] [INFO] [App] [TabTutorials] Normalizing tab name from 'dashboard' to canonical form 
[2025-05-13T07:58:22.334Z] [INFO] [App] [TabTutorials] Tab name already in canonical form: 'dashboard' 
[2025-05-13T07:58:22.335Z] [INFO] [App] [TabTutorials] Using normalized tab name for update: dashboard (raw: dashboard) 
[2025-05-13T07:58:22.364Z] [INFO] [App] [TabTutorials] Broadcasting tutorial progress update for dashboard: step 1/3 
[WebSocketService] Broadcasting message: tutorial_progress
[WebSocketService] WebSocket is not enabled, skipping broadcast: tutorial_progress
[2025-05-13T07:58:22.395Z] [INFO] [App] [TabTutorials] Updated tutorial dashboard for user 332 (completed: false, currentStep: 1) 
[2025-05-13T07:58:22.426Z] [INFO] [App] POST /api/user-tab-tutorials 200 in 92ms :: {"success":true,"message":"Tutorial status updated successfully","tutorialSta... 
[2025-05-13T07:58:22.511Z] [DEBUG] [App] [WebSocket] Received message: {"type":"ping","timestamp":"2025-05-13T07:58:22.373Z","connectionId":"ws_1747121174688_nmpzj6cgz"}
[2025-05-13T07:58:22.574Z] [INFO] [App] [TabTutorials] Status request for tab "dashboard" from authenticated user ID: 332 
[2025-05-13T07:58:22.574Z] [INFO] [App] [TabTutorials] Normalizing tab name from 'dashboard' to canonical form 
[2025-05-13T07:58:22.574Z] [INFO] [App] [TabTutorials] Tab name already in canonical form: 'dashboard' 
[2025-05-13T07:58:22.574Z] [INFO] [App] [TabTutorials] Checking tutorial status for tab: dashboard (raw: dashboard), user: 332 
[2025-05-13T07:58:22.635Z] [INFO] [App] [TabTutorials] Retrieved tutorial status for dashboard for user 332: completed=false, step=1 
[2025-05-13T07:58:22.667Z] [INFO] [App] GET /api/user-tab-tutorials/dashboard/status 200 in 92ms :: {"exists":true,"completed":false,"currentStep":1,"lastSeenAt":"2025-05-13T07:... 
[2025-05-13T07:58:23.176Z] [INFO] [App] GET /api/companies/current 304 in 32ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-13T07:58:23.737Z] [INFO] [App] [TabTutorials] Using authenticated user ID: 332 
[2025-05-13T07:58:23.737Z] [INFO] [App] [TabTutorials] Request body: {"tabName":"dashboard","currentStep":2,"completed":false,"totalSteps":3} 
[2025-05-13T07:58:23.737Z] [INFO] [App] [TabTutorials] Normalizing tab name from 'dashboard' to canonical form 
[2025-05-13T07:58:23.737Z] [INFO] [App] [TabTutorials] Tab name already in canonical form: 'dashboard' 
[2025-05-13T07:58:23.737Z] [INFO] [App] [TabTutorials] Using normalized tab name for update: dashboard (raw: dashboard) 
[2025-05-13T07:58:23.767Z] [INFO] [App] [TabTutorials] Broadcasting tutorial progress update for dashboard: step 2/3 
[WebSocketService] Broadcasting message: tutorial_progress
[WebSocketService] WebSocket is not enabled, skipping broadcast: tutorial_progress
[2025-05-13T07:58:23.798Z] [INFO] [App] [TabTutorials] Updated tutorial dashboard for user 332 (completed: false, currentStep: 2) 
[2025-05-13T07:58:23.828Z] [INFO] [App] POST /api/user-tab-tutorials 200 in 91ms :: {"success":true,"message":"Tutorial status updated successfully","tutorialSta... 
[2025-05-13T07:58:23.983Z] [INFO] [App] [TabTutorials] Status request for tab "dashboard" from authenticated user ID: 332 
[2025-05-13T07:58:23.983Z] [INFO] [App] [TabTutorials] Normalizing tab name from 'dashboard' to canonical form 
[2025-05-13T07:58:23.983Z] [INFO] [App] [TabTutorials] Tab name already in canonical form: 'dashboard' 
[2025-05-13T07:58:23.983Z] [INFO] [App] [TabTutorials] Checking tutorial status for tab: dashboard (raw: dashboard), user: 332 
[2025-05-13T07:58:24.047Z] [INFO] [App] [TabTutorials] Retrieved tutorial status for dashboard for user 332: completed=false, step=2 
[2025-05-13T07:58:24.080Z] [INFO] [App] GET /api/user-tab-tutorials/dashboard/status 200 in 98ms :: {"exists":true,"completed":false,"currentStep":2,"lastSeenAt":"2025-05-13T07:... 
[2025-05-13T07:58:24.389Z] [INFO] [App] [TabTutorials] Using authenticated user ID: 332 
[2025-05-13T07:58:24.389Z] [INFO] [App] [TabTutorials] Request body: {"tabName":"dashboard","currentStep":2,"completed":true,"totalSteps":3} 
[2025-05-13T07:58:24.389Z] [INFO] [App] [TabTutorials] Normalizing tab name from 'dashboard' to canonical form 
[2025-05-13T07:58:24.389Z] [INFO] [App] [TabTutorials] Tab name already in canonical form: 'dashboard' 
[2025-05-13T07:58:24.389Z] [INFO] [App] [TabTutorials] Using normalized tab name for update: dashboard (raw: dashboard) 
[2025-05-13T07:58:24.419Z] [INFO] [App] [TabTutorials] Broadcasting tutorial progress update for dashboard: step 2/3 
[WebSocketService] Broadcasting message: tutorial_progress
[WebSocketService] WebSocket is not enabled, skipping broadcast: tutorial_progress
[2025-05-13T07:58:24.419Z] [INFO] [App] [TabTutorials] Broadcasting tutorial completion for dashboard 
[WebSocketService] Broadcasting message: tutorial_completed
[WebSocketService] WebSocket is not enabled, skipping broadcast: tutorial_completed
[2025-05-13T07:58:24.449Z] [INFO] [App] [TabTutorials] Updated tutorial dashboard for user 332 (completed: true, currentStep: 2) 
[2025-05-13T07:58:24.480Z] [INFO] [App] POST /api/user-tab-tutorials 200 in 91ms :: {"success":true,"message":"Tutorial status updated successfully","tutorialSta... 
[2025-05-13T07:58:24.633Z] [INFO] [App] [TabTutorials] Status request for tab "dashboard" from authenticated user ID: 332 
[2025-05-13T07:58:24.633Z] [INFO] [App] [TabTutorials] Normalizing tab name from 'dashboard' to canonical form 
[2025-05-13T07:58:24.633Z] [INFO] [App] [TabTutorials] Tab name already in canonical form: 'dashboard' 
[2025-05-13T07:58:24.633Z] [INFO] [App] [TabTutorials] Checking tutorial status for tab: dashboard (raw: dashboard), user: 332 
[2025-05-13T07:58:24.697Z] [INFO] [App] [TabTutorials] Retrieved tutorial status for dashboard for user 332: completed=true, step=2 
[2025-05-13T07:58:24.734Z] [INFO] [App] GET /api/user-tab-tutorials/dashboard/status 200 in 101ms :: {"exists":true,"completed":true,"currentStep":2,"lastSeenAt":"2025-05-13T07:5... 
[2025-05-13T07:58:26.175Z] [INFO] [App] GET /api/companies/current 304 in 32ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-13T07:58:27.073Z] [DEBUG] [App] [WebSocket] Received message: {"type":"ping","timestamp":"2025-05-13T07:58:26.931Z"}
[2025-05-13T07:58:27.682Z] [DEBUG] [App] [WebSocket] Received message: {"type":"ping","timestamp":"2025-05-13T07:58:27.541Z","connectionId":"ws_1747121175188_39zcnn2xv"}
[2025-05-13T07:58:28.155Z] [DEBUG] [App] [WebSocket] Received message: {"type":"ping"}
[2025-05-13T07:58:29.178Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-13T07:58:32.169Z] [INFO] [App] GET /api/companies/current 304 in 32ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-13T07:58:34.401Z] [DEBUG] [App] [WebSocket] Received message: {"type":"ping","timestamp":"2025-05-13T07:58:34.262Z","connectionId":"ws_1747122830501_041k4ahnp"}
[2025-05-13T07:58:35.180Z] [INFO] [App] GET /api/companies/current 304 in 32ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-13T07:58:38.168Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-13T07:58:41.177Z] [INFO] [App] GET /api/companies/current 304 in 33ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-13T07:58:42.071Z] [DEBUG] [App] [WebSocket] Received message: {"type":"ping","timestamp":"2025-05-13T07:58:41.928Z"}
[2025-05-13T07:58:44.169Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-13T07:58:47.167Z] [INFO] [App] GET /api/companies/current 304 in 32ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-13T07:58:50.211Z] [INFO] [App] GET /api/companies/current 304 in 31ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[PeriodicTaskReconciliation] Reconciling batch of 10 tasks: [
  679, 740, 710, 691,
  707, 764, 759, 698,
  718, 693
]
[Task Progress] Calculated progress for task 679 (open_banking): 44/44 = 100%
[Task Progress] Calculated progress for task 740 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 710 (ky3p): 0/120 = 0%
[Task Progress] Calculated progress for task 691 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 707 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 764 (open_banking): 44/44 = 100%
[2025-05-13T07:58:52.511Z] [DEBUG] [App] [WebSocket] Received message: {"type":"ping","timestamp":"2025-05-13T07:58:52.373Z","connectionId":"ws_1747121174688_nmpzj6cgz"}
[Task Progress] Calculated progress for task 759 (ky3p): 0/0 = 0%
[Task Progress] Calculated progress for task 698 (ky3p): 0/0 = 0%
[Task Progress] Calculated progress for task 718 (ky3p): 1/120 = 1%
[Task Progress] Calculated progress for task 693 (company_kyb): 5/30 = 17%
[2025-05-13T07:58:53.177Z] [INFO] [App] GET /api/companies/current 304 in 33ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-13T07:58:54.400Z] [DEBUG] [App] [WebSocket] Received message: {"type":"ping","timestamp":"2025-05-13T07:58:54.262Z","connectionId":"ws_1747122830501_041k4ahnp"}
[2025-05-13T07:58:56.175Z] [INFO] [App] GET /api/companies/current 304 in 32ms :: {"id":289,"name":"DevTest34","category":"FinTech","is_demo":true,"revenue_tie... 
[2025-05-13T07:58:57.070Z] [DEBUG] [App] [WebSocket] Received message: {"type":"ping","timestamp":"2025-05-13T07:58:56.928Z"}
[2025-05-13T07:58:57.682Z] [DEBUG] [App] [WebSocket] Received message: {"type":"ping","timestam