[2025-05-26T08:09:32.154Z] [INFO] [WebSocket] Received message from client client-1748246529451-yzegwgj {"module":"WebSocket","type":"ping","timestamp":"2025-05-26T08:09:32.041Z","connectionId":"ws_1748246527218_ghfmd9enc"}
[2025-05-26T08:09:32.154Z] [INFO] [WebSocket] Received message from client client-1748246528654-6eif737 {"module":"WebSocket","type":"ping","timestamp":"2025-05-26T08:09:32.041Z","connectionId":"ws_1748246527366_dsdjyq3w1"}
[2025-05-26T08:09:32.154Z] [INFO] [WebSocket] Received message from client client-1748246527966-5qvp2ny {"module":"WebSocket","type":"ping","timestamp":"2025-05-26T08:09:32.041Z","connectionId":"ws_1748246528002_wo54stiu2"}
[2025-05-26T08:09:35.152Z] [INFO] [WebSocket] Received message from client client-1748246794536-4horavb {"module":"WebSocket","type":"ping"}
[2025-05-26T08:10:32.166Z] [INFO] [WebSocket] Received message from client client-1748246528654-6eif737 {"module":"WebSocket","type":"ping","timestamp":"2025-05-26T08:10:32.046Z","connectionId":"ws_1748246527366_dsdjyq3w1"}
[2025-05-26T08:10:32.167Z] [INFO] [WebSocket] Received message from client client-1748246527966-5qvp2ny {"module":"WebSocket","type":"ping","timestamp":"2025-05-26T08:10:32.046Z","connectionId":"ws_1748246528002_wo54stiu2"}
[2025-05-26T08:10:32.167Z] [INFO] [WebSocket] Received message from client client-1748246794536-4horavb {"module":"WebSocket","type":"ping"}
[2025-05-26T08:10:32.168Z] [INFO] [WebSocket] Received message from client client-1748246529451-yzegwgj {"module":"WebSocket","type":"ping","timestamp":"2025-05-26T08:10:32.046Z","connectionId":"ws_1748246527218_ghfmd9enc"}
[2025-05-26T08:10:59.989Z] [INFO] [WebSocket] Received message from client client-1748246794536-4horavb {"module":"WebSocket","type":"ping"}
[2025-05-26T08:10:59.995Z] [INFO] [WebSocket] Received message from client client-1748246529451-yzegwgj {"module":"WebSocket","type":"ping","timestamp":"2025-05-26T08:10:59.882Z","connectionId":"ws_1748246527218_ghfmd9enc"}
[2025-05-26T08:10:59.995Z] [INFO] [WebSocket] Received message from client client-1748246528654-6eif737 {"module":"WebSocket","type":"ping","timestamp":"2025-05-26T08:10:59.882Z","connectionId":"ws_1748246527366_dsdjyq3w1"}
[2025-05-26T08:10:59.996Z] [INFO] [WebSocket] Received message from client client-1748246527966-5qvp2ny {"module":"WebSocket","type":"ping","timestamp":"2025-05-26T08:10:59.882Z","connectionId":"ws_1748246528002_wo54stiu2"}
[2025-05-26T08:11:05.161Z] [INFO] [WebSocket] Received message from client client-1748246794536-4horavb {"module":"WebSocket","type":"ping"}
[2025-05-26T08:11:08.153Z] [INFO] [WebSocket] Received message from client client-1748246527966-5qvp2ny {"module":"WebSocket","type":"ping","timestamp":"2025-05-26T08:11:08.041Z","connectionId":"ws_1748246528002_wo54stiu2"}
[2025-05-26T08:11:09.151Z] [INFO] [WebSocket] Received message from client client-1748246528654-6eif737 {"module":"WebSocket","type":"ping","timestamp":"2025-05-26T08:11:09.042Z","connectionId":"ws_1748246527366_dsdjyq3w1"}
[2025-05-26T08:11:10.150Z] [INFO] [WebSocket] Received message from client client-1748246529451-yzegwgj {"module":"WebSocket","type":"ping","timestamp":"2025-05-26T08:11:10.042Z","connectionId":"ws_1748246527218_ghfmd9enc"}
[2025-05-26T08:11:30.151Z] [INFO] [WebSocket] Received message from client client-1748246529451-yzegwgj {"module":"WebSocket","type":"ping","timestamp":"2025-05-26T08:11:30.041Z","connectionId":"ws_1748246527218_ghfmd9enc"}
[2025-05-26T08:11:35.152Z] [INFO] [WebSocket] Received message from client client-1748246794536-4horavb {"module":"WebSocket","type":"ping"}
[2025-05-26T08:11:38.155Z] [INFO] [WebSocket] Received message from client client-1748246527966-5qvp2ny {"module":"WebSocket","type":"ping","timestamp":"2025-05-26T08:11:38.046Z","connectionId":"ws_1748246528002_wo54stiu2"}
[2025-05-26T08:11:39.152Z] [INFO] [WebSocket] Received message from client client-1748246528654-6eif737 {"module":"WebSocket","type":"ping","timestamp":"2025-05-26T08:11:39.042Z","connectionId":"ws_1748246527366_dsdjyq3w1"}
[2025-05-26T08:11:49.623Z] [INFO] [WebSocket] Received message from client client-1748246529451-yzegwgj {"module":"WebSocket","type":"ping","timestamp":"2025-05-26T08:11:49.512Z","connectionId":"ws_1748246527218_ghfmd9enc"}
[2025-05-26T08:11:54.527Z] [INFO] [Database] Successfully established new database connection {"module":"Database"}
[2025-05-26T08:11:54.573Z] [INFO] [PeriodicTaskReconciliation] Reconciling batch of tasks {"module":"PeriodicTaskReconciliation","batchSize":10,"taskIds":[973,971,978,976,981,980,982,977,984,986]}
[Task Progress] Calculated progress for task 973 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 971 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 978 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 976 (company_kyb): 0/30 = 0%
[Task Progress] Calculated progress for task 981 (ky3p): 0/0 = 0%
[Task Progress] Calculated progress for task 980 (company_kyb): 30/30 = 100%
[Task Progress] Calculated progress for task 982 (open_banking): 0/44 = 0%
[Task Progress] Calculated progress for task 977 (ky3p): 0/0 = 0%
[2025-05-26T08:11:56.238Z] [INFO] [Database] Successfully established new database connection {"module":"Database"}
[Task Progress] Calculated progress for task 984 (company_kyb): 30/30 = 100%
[DemoAPI] Company creation request received at: 2025-05-26T08:11:56.305Z
[DemoAPI] Request method: POST
[DemoAPI] Request headers: {
  'content-type': 'application/json',
  'content-length': '128',
  'user-agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) Ap...',
  origin: 'https://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev:8080'
}
[DemoAPI] Full request body received: {
  "name": "HealthCore Solutions",
  "type": "live",
  "persona": "accredited-data-recipient",
  "riskProfile": 97,
  "companySize": "extra-large"
}
[DemoAPI] Validating input parameters...
[DemoAPI] Input validation passed successfully
[DemoAPI] Extracted and validated fields: {
  name: 'HealthCore Solutions',
  type: 'live',
  persona: 'accredited-data-recipient',
  companySize: 'extra-large',
  riskProfile: 97
}
[DemoAPI] âœ… IMMEDIATE ENTERPRISE DETECTION - CREATING LARGE ENTERPRISE
[2025-05-26T08:11:56.307Z] [INFO] [App] Successfully retrieved unified WebSocket server for broadcast 
[WebSocket] Broadcast demo_action_start to 5 clients (0 errors) { messageId: 'msg_1748247116308_on9r078r2' }
[2025-05-26T08:11:56.308Z] [INFO] [App] Successfully broadcasted demo_action_start message 
[DemoAPI] Immediate enterprise generated: $1.5B, 33800 employees
[DemoAPI] Starting database insert operation for enterprise company
[DemoAPI] Database connection status check...
[DemoAPI] Database connection verified successfully
[DemoAPI] Preparing company data for database insertion...
[DemoAPI] Generated risk clusters that sum to 97: {"Dark Web Data":6,"Cyber Security":12,"Public Sentiment":7,"Data Access Scope":11,"Financial Stability":30,"Potential Liability":31}
[DemoAPI] Selected legal structure: Private Limited Company
[DemoAPI] Company data prepared: {
  "name": "HealthCore Solutions",
  "description": "Enterprise FinTech specializing in advanced financial technology solutions",
  "category": "FinTech",
  "revenue": "$1.5B",
  "num_employees": 33800,
  "revenue_tier": "xlarge",
  "is_demo": true,
  "available_tabs": [
    "dashboard",
    "task-center",
    "file-vault",
    "insights"
  ],
  "accreditation_status": "APPROVED",
  "website_url": "https://healthcoresolutions.com",
  "hq_address": "555 Mission Street, SOMA, San Francisco, CA 94105",
  "founders_and_leadership": "Enterprise Leadership Team",
  "legal_structure": "Private Limited Company",
  "risk_clusters": {
    "Dark Web Data": 6,
    "Cyber Security": 12,
    "Public Sentiment": 7,
    "Data Access Scope": 11,
    "Financial Stability": 30,
    "Potential Liability": 31
  },
  "key_clients_partners": "Fortune 500 Companies",
  "investors": "Institutional Investors",
  "certifications_compliance": "SOC 2 Type II, ISO 27001",
  "incorporation_year": 2020,
  "risk_score": 97
}
[DemoAPI] Executing database insert...
[DemoAPI] Database insert operation failed: {
  message: 'duplicate key value violates unique constraint "idx_companies_name_lower"',
  code: '23505',
  constraint: 'idx_companies_name_lower',
  detail: 'Key (lower(name))=(healthcore solutions) already exists.',
  table: 'companies',
  column: undefined,
  stack: 'error: duplicate key value violates unique constraint "idx_companies_name_lower"\n' +
    '    at /home/runner/workspace/node_modules/pg-pool/index.js:45:11\n' +
    '    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n' +
    '    at async <anonymous> (/home/runner/workspace/node_modules/src/node-postgres/session.ts:104:19)\n' +
    '    at async <anonymous> (/home/runner/workspace/server/demo-api.ts:424:24)...'
}
[Task Progress] Calculated progress for task 986 (open_banking): 44/44 = 100%
[2025-05-26T08:11:56.719Z] [INFO] [Database] Successfully established new database connection {"module":"Database"}
[2025-05-26T08:11:56.766Z] [ERROR] [App] POST /api/demo/company/create 500 in 461ms :: {"success":false,"error":"Database Insert Failed","details":"Failed to create... 
[2025-05-26T08:12:04.662Z] [INFO] [WebSocket] Received message from client client-1748246794536-4horavb {"module":"WebSocket","type":"ping"}
[2025-05-26T08:12:08.125Z] [INFO] [WebSocket] Received message from client client-1748246527966-5qvp2ny {"module":"WebSocket","type":"ping","timestamp":"2025-05-26T08:12:08.005Z","connectionId":"ws_1748246528002_wo54stiu2"}
[2025-05-26T08:12:08.784Z] [INFO] [WebSocket] Received message from client client-1748246528654-6eif737 {"module":"WebSocket","type":"ping","timestamp":"2025-05-26T08:12:08.676Z","connectionId":"ws_1748246527366_dsdjyq3w1"}
[2025-05-26T08:12:09.622Z] [INFO] [WebSocket] Received message from client client-1748246529451-yzegwgj {"module":"WebSocket","type":"ping","timestamp":"2025-05-26T08:12:09.513Z","connectionId":"ws_1748246527218_ghfmd9enc"}