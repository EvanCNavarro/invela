> rest-express@1.0.0 dev
> tsx server/index.ts

Database migrations disabled - schema already applied
[EmailService] Initializing email service
[EmailService] Email service initialized successfully
[Auth] Setting up authentication...
[Auth] Authentication setup completed
[Routes] Routes setup completed
[WebSocket] Server initialized on path: /ws
5:22:07 PM [info] Setting up Vite development server
5:22:07 PM [express] Server running on port 5000
[2025-04-20T17:22:08.409Z] New client connected to the pool (1/3)
[Auth] Deserializing user: 239
[Current Company] Fetching company for user: { userId: 239, companyId: 198 }
[Current Company] Found company: {
  id: 198,
  name: 'DevelopmentTestingR',
  onboardingCompleted: false,
  riskScore: null,
  isDemo: true
}
New WebSocket client connected
[2025-04-20T17:22:12.077Z] New client connected to the pool (2/3)
5:22:12 PM [info] GET /api/companies/current 200 in 2097ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 239, company_id: 198, email: 'email@r.com' }
New WebSocket client connected
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 239',
    condition2: 'tasks.created_by = 239',
    condition3: "tasks.company_id = 198 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('email@r.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
5:22:12 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:22:12 PM [info] GET /api/tasks 304 in 600ms :: [{"id":465,"title":"2. Security Assessment: DevelopmentTestingR","description...
5:22:12 PM [info] GET /api/companies/current 304 in 33ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:22:13 PM [info] GET /api/companies/current 304 in 59ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
[Auth] Unauthenticated user session
New WebSocket client connected
5:22:14 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
WebSocket client disconnected with code 1001 and reason: 
5:22:15 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:22:16 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:22:17 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:22:19 PM [info] GET /api/companies/current 304 in 30ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:22:20 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:22:21 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:22:22 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:22:31 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
[Current Company] Using cached company data: 198
5:22:32 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:22:33 PM [info] GET /api/companies/current 304 in 33ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:22:34 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:22:36 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:22:37 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:22:38 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
[WebSocket] Received ping
5:22:39 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:22:40 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:22:42 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 239, company_id: 198, email: 'email@r.com' }
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 239',
    condition2: 'tasks.created_by = 239',
    condition3: "tasks.company_id = 198 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('email@r.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
5:22:43 PM [info] GET /api/tasks 304 in 95ms :: [{"id":465,"title":"2. Security Assessment: DevelopmentTestingR","description...
5:22:43 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:22:44 PM [info] GET /api/companies/current 304 in 34ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
[Current Company] Using cached company data: 198
5:22:45 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:22:46 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:22:47 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:22:49 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:22:50 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:22:51 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:22:52 PM [info] GET /api/companies/current 304 in 30ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:22:53 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:22:55 PM [info] GET /api/companies/current 304 in 34ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:22:56 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:22:57 PM [info] GET /api/companies/current 304 in 30ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:22:58 PM [info] GET /api/tasks 304 in 31ms :: [{"id":465,"title":"2. Security Assessment: DevelopmentTestingR","description...
5:22:58 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:22:59 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:01 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:02 PM [info] GET /api/companies/current 304 in 34ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:03 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:04 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:05 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:06 PM [info] GET /api/companies/current 304 in 30ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:08 PM [info] GET /api/companies/current 304 in 114ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
[WebSocket] Received ping
5:23:09 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
[Current Company] Fetching company for user: { userId: 239, companyId: 198 }
[Current Company] Found company: {
  id: 198,
  name: 'DevelopmentTestingR',
  onboardingCompleted: false,
  riskScore: null,
  isDemo: true
}
5:23:10 PM [info] GET /api/companies/current 304 in 64ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:11 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:13 PM [info] GET /api/companies/current 304 in 37ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 239, company_id: 198, email: 'email@r.com' }
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 239',
    condition2: 'tasks.created_by = 239',
    condition3: "tasks.company_id = 198 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('email@r.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
5:23:13 PM [info] GET /api/tasks 304 in 95ms :: [{"id":465,"title":"2. Security Assessment: DevelopmentTestingR","description...
5:23:14 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:15 PM [info] GET /api/companies/current 304 in 34ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:16 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:17 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:18 PM [info] GET /api/companies/current 304 in 29ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:20 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:21 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:22 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:23 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:24 PM [info] GET /api/companies/current 304 in 36ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
[Auth] Using cached user data: 239
5:23:26 PM [info] GET /api/companies/current 304 in 38ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:27 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:28 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:28 PM [info] GET /api/tasks 304 in 31ms :: [{"id":465,"title":"2. Security Assessment: DevelopmentTestingR","description...
5:23:29 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:30 PM [info] GET /api/companies/current 304 in 34ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:32 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:33 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:34 PM [info] GET /api/companies/current 304 in 34ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:35 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:36 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:37 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
[WebSocket] Received ping
5:23:39 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:40 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:41 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
[Current Company] Using cached company data: 198
5:23:42 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 239, company_id: 198, email: 'email@r.com' }
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 239',
    condition2: 'tasks.created_by = 239',
    condition3: "tasks.company_id = 198 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('email@r.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
5:23:43 PM [info] GET /api/tasks 304 in 95ms :: [{"id":465,"title":"2. Security Assessment: DevelopmentTestingR","description...
[2025-04-20T17:23:44.015Z] New client connected to the pool (3/3)
5:23:44 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:45 PM [info] GET /api/companies/current 304 in 33ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:46 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
[Auth] Using cached user data: 239
5:23:47 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:48 PM [info] GET /api/companies/current 304 in 34ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:50 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:51 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:52 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:53 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:54 PM [info] GET /api/companies/current 304 in 34ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:55 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:57 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:58 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:23:59 PM [info] GET /api/tasks 304 in 31ms :: [{"id":465,"title":"2. Security Assessment: DevelopmentTestingR","description...
5:23:59 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:24:00 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:24:01 PM [info] GET /api/companies/current 304 in 33ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:24:03 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
[WebSocket] Received ping
[WebSocket] Received ping
[Current Company] Fetching company for user: { userId: 239, companyId: 198 }
[Current Company] Found company: {
  id: 198,
  name: 'DevelopmentTestingR',
  onboardingCompleted: false,
  riskScore: null,
  isDemo: true
}
5:24:23 PM [info] GET /api/companies/current 304 in 62ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:24:24 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
New WebSocket client connected
[WebSocket] Received message: {
  type: 'company_tabs_updated',
  payload: {
    companyId: 198,
    availableTabs: [ 'task-center', 'file-vault' ],
    timestamp: '2025-04-20T17:24:25.968Z',
    cache_invalidation: true
  }
}
5:24:26 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
WebSocket client disconnected with code 1005 and reason: 
5:24:27 PM [info] GET /api/companies/current 304 in 30ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:24:28 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 239, company_id: 198, email: 'email@r.com' }
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 239',
    condition2: 'tasks.created_by = 239',
    condition3: "tasks.company_id = 198 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('email@r.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
5:24:29 PM [info] GET /api/tasks 304 in 96ms :: [{"id":465,"title":"2. Security Assessment: DevelopmentTestingR","description...
5:24:29 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
WebSocket client disconnected with code 1001 and reason: 
WebSocket client disconnected with code 1001 and reason: 
[Auth] Unauthenticated user session
New WebSocket client connected
WebSocket client disconnected with code 1001 and reason: 
[Auth] Using cached user data: 239
[Auth] Using cached user data: 239
[Auth] Using cached user data: 239
[Auth] Using cached user data: 239
Suppressing further connection logs. Pool size: 3
[Auth] Returning user session data
5:24:56 PM [info] GET /api/companies/current 304 in 30ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:24:56 PM [info] GET /api/tasks 304 in 31ms :: [{"id":465,"title":"2. Security Assessment: DevelopmentTestingR","description...
New WebSocket client connected
5:24:57 PM [info] GET /api/tasks 304 in 31ms :: [{"id":465,"title":"2. Security Assessment: DevelopmentTestingR","description...
New WebSocket client connected
5:24:58 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:24:59 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:00 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:01 PM [info] GET /api/companies/current 304 in 34ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:02 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:04 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:05 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:06 PM [info] GET /api/companies/current 304 in 30ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:07 PM [info] GET /api/companies/current 304 in 33ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:08 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
[Auth] Using cached user data: 239
5:25:10 PM [info] GET /api/companies/current 304 in 30ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:11 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 239, company_id: 198, email: 'email@r.com' }
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 239',
    condition2: 'tasks.created_by = 239',
    condition3: "tasks.company_id = 198 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('email@r.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
5:25:12 PM [info] GET /api/tasks 304 in 101ms :: [{"id":465,"title":"2. Security Assessment: DevelopmentTestingR","description...
5:25:12 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:13 PM [info] GET /api/companies/current 304 in 42ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:14 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:15 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:17 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:18 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:19 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:20 PM [info] GET /api/companies/current 304 in 43ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:21 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:23 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
[Current Company] Fetching company for user: { userId: 239, companyId: 198 }
[Current Company] Found company: {
  id: 198,
  name: 'DevelopmentTestingR',
  onboardingCompleted: false,
  riskScore: null,
  isDemo: true
}
5:25:24 PM [info] GET /api/companies/current 200 in 62ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:25 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:26 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
[WebSocket] Received ping
5:25:27 PM [info] GET /api/tasks 304 in 31ms :: [{"id":465,"title":"2. Security Assessment: DevelopmentTestingR","description...
5:25:27 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:29 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:30 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:31 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:32 PM [info] GET /api/companies/current 304 in 34ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:33 PM [info] GET /api/companies/current 304 in 33ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:34 PM [info] GET /api/companies/current 304 in 30ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:36 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:37 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:38 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:39 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:40 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:42 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 239, company_id: 198, email: 'email@r.com' }
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 239',
    condition2: 'tasks.created_by = 239',
    condition3: "tasks.company_id = 198 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('email@r.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
5:25:42 PM [info] GET /api/tasks 304 in 91ms :: [{"id":465,"title":"2. Security Assessment: DevelopmentTestingR","description...
5:25:43 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:44 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:45 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:46 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:48 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:49 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:50 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:51 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:52 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:54 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:55 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:56 PM [info] GET /api/companies/current 304 in 34ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
[WebSocket] Received ping
5:25:57 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:57 PM [info] GET /api/tasks 304 in 31ms :: [{"id":465,"title":"2. Security Assessment: DevelopmentTestingR","description...
5:25:58 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:25:59 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:26:01 PM [info] GET /api/companies/current 304 in 33ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:26:02 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
[Current Company] Using cached company data: 198
5:26:04 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:26:06 PM [info] GET /api/companies/current 304 in 38ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:26:07 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:26:08 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
[Auth] Using cached user data: 239
5:26:09 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:26:10 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
[Current Company] Using cached company data: 198
5:26:12 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 239, company_id: 198, email: 'email@r.com' }
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 239',
    condition2: 'tasks.created_by = 239',
    condition3: "tasks.company_id = 198 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('email@r.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
5:26:13 PM [info] GET /api/tasks 304 in 93ms :: [{"id":465,"title":"2. Security Assessment: DevelopmentTestingR","description...
5:26:13 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:26:14 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:26:15 PM [info] GET /api/companies/current 304 in 34ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:26:16 PM [info] GET /api/companies/current 304 in 30ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:26:17 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:26:19 PM [info] GET /api/companies/current 304 in 30ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:26:20 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:26:21 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:26:22 PM [info] GET /api/companies/current 304 in 32ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:26:23 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
[Current Company] Fetching company for user: { userId: 239, companyId: 198 }
[Current Company] Found company: {
  id: 198,
  name: 'DevelopmentTestingR',
  onboardingCompleted: false,
  riskScore: null,
  isDemo: true
}
5:26:25 PM [info] GET /api/companies/current 304 in 64ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:26:26 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
[WebSocket] Received ping
[Current Company] Using cached company data: 198
5:26:27 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
[Tasks] Using cached task data for user: 239
5:26:28 PM [info] GET /api/tasks 304 in 32ms :: [{"id":465,"title":"2. Security Assessment: DevelopmentTestingR","description...
5:26:28 PM [info] GET /api/companies/current 304 in 29ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
5:26:29 PM [info] GET /api/companies/current 304 in 31ms :: {"id":198,"name":"DevelopmentTestingR","description":"FinTech partner company...
[Auth] Processing logout request
[Auth] Logout successful for user: 239
[Auth] Unauthenticated user session
[Invite Debug] Starting validation for code: 034922
[Invite Debug] Found valid invitation: {
  id: 248,
  email: 'email@s.com',
  status: 'pending',
  expires_at: 2025-04-27T15:29:55.701Z
}
5:26:47 PM [info] GET /api/invitations/034922/validate 200 in 76ms :: {"valid":true,"invitation":{"email":"email@s.com","invitee_name":"John Doe","...
[WebSocket] Received ping
[WebSocket] Received ping
[WebSocket] Received ping
[Account Setup] Processing setup request for: email@s.com
[Account Setup] Updated user: { id: 240, email: 'email@s.com', onboarding_completed: false }
[Account Setup] Updated task status: { taskId: 467, status: 'completed', progress: 100 }
[WebSocket] Broadcast "task_updated" sent to 2 clients
[Auth] Serializing user: 240
5:27:37 PM [info] POST /api/account/setup 200 in 338ms :: {"id":240,"email":"email@s.com","full_name":"John Doe","first_name":"John","l...
[Auth] Deserializing user: 240
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 240, company_id: 199, email: 'email@s.com' }
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 240',
    condition2: 'tasks.created_by = 240',
    condition3: "tasks.company_id = 199 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('email@s.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
[Network Visualization] Fetching network data for company: 199
[Current Company] Fetching company for user: { userId: 240, companyId: 199 }
5:27:37 PM [info] GET /api/tasks 200 in 94ms :: [{"id":468,"title":"1. KYB Form: DevelopmentTestingS","description":"Complete...
[Current Company] Found company: {
  id: 199,
  name: 'DevelopmentTestingS',
  onboardingCompleted: false,
  riskScore: null,
  isDemo: true
}
5:27:38 PM [info] GET /api/companies/current 200 in 62ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[Network Visualization] Found network relationships: { count: 2 }
[Network Visualization] Returning visualization data: { centerNode: 'DevelopmentTestingS', nodeCount: 2 }
5:27:38 PM [info] GET /api/network/visualization 200 in 103ms :: {"center":{"id":199,"name":"DevelopmentTestingS","riskScore":0,"riskBucket":"...
5:27:38 PM [info] GET /api/tasks 304 in 29ms :: [{"id":468,"title":"1. KYB Form: DevelopmentTestingS","description":"Complete...
[Current Company] Using cached company data: 199
5:27:38 PM [info] GET /api/companies/current 304 in 30ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:27:39 PM [info] GET /api/companies/current 304 in 30ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:27:40 PM [info] GET /api/companies/current 304 in 29ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:27:41 PM [info] GET /api/companies/current 304 in 29ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:27:42 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[User Onboarding] Completing onboarding for user: 240
[User Onboarding] Updated user onboarding status: { id: 240, onboarding_completed: true }
5:27:43 PM [info] POST /api/user/complete-onboarding 200 in 60ms :: {"id":240,"email":"email@s.com","full_name":"John Doe","first_name":"John","l...
[Auth] Returning user session data
5:27:43 PM [info] GET /api/tasks 304 in 30ms :: [{"id":468,"title":"1. KYB Form: DevelopmentTestingS","description":"Complete...
5:27:43 PM [info] GET /api/tasks 304 in 31ms :: [{"id":468,"title":"1. KYB Form: DevelopmentTestingS","description":"Complete...
5:27:44 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[Tasks Routes] Fetching task by ID: {
  taskId: 468,
  userCompanyId: 199,
  timestamp: '2025-04-20T17:27:45.331Z'
}
5:27:45 PM [info] GET /api/companies/current 304 in 32ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[Tasks Routes] Fetching latest KYB form data for task: 468
[Tasks Routes] No KYB responses found for task 468
[Tasks Routes] Task found by ID: {
  taskId: 468,
  title: '1. KYB Form: DevelopmentTestingS',
  type: 'company_kyb',
  formDataFields: 0,
  timestamp: '2025-04-20T17:27:45.436Z'
}
5:27:45 PM [info] GET /api/tasks/468 200 in 135ms :: {"id":468,"title":"1. KYB Form: DevelopmentTestingS","description":"Complete ...
[Task Templates API] Fetching template for task type: company_kyb, user: 240
5:27:45 PM [warn] GET /api/companies/is-demo 400 in 31ms :: {"message":"Invalid company ID","code":"INVALID_ID"}
[Task Templates API] Found template: 1 (KYB Form) for task type: company_kyb
[Task Templates API] Retrieved 9 configuration items for template ID: 1
5:27:45 PM [info] GET /api/task-templates/by-type/company_kyb 304 in 101ms :: {"id":1,"name":"KYB Form","description":"Know Your Business form for company ...
5:27:45 PM [info] GET /api/companies/199 200 in 58ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[Auth] Using cached user data: 240
[Tasks Routes] Fetching task by ID: {
  taskId: 468,
  userCompanyId: 199,
  timestamp: '2025-04-20T17:27:45.877Z'
}
[Tasks Routes] Fetching latest KYB form data for task: 468
[Tasks Routes] No KYB responses found for task 468
[Tasks Routes] Task found by ID: {
  taskId: 468,
  title: '1. KYB Form: DevelopmentTestingS',
  type: 'company_kyb',
  formDataFields: 0,
  timestamp: '2025-04-20T17:27:45.972Z'
}
5:27:46 PM [info] GET /api/tasks/468 304 in 126ms :: {"id":468,"title":"1. KYB Form: DevelopmentTestingS","description":"Complete ...
[2025-04-20T17:27:46.160Z] [INFO] [KYBRoutes] Fetching KYB fields
[2025-04-20T17:27:46.191Z] [INFO] [KYBRoutes] KYB fields retrieved successfully {"fieldCount":30,"groups":["companyProfile","financialProfile","governanceLeadership","operationsCompliance"]}
5:27:46 PM [info] GET /api/kyb/fields 304 in 63ms :: [{"id":1,"field_key":"legalEntityName","display_name":"Legal Entity Name","fi...
[KYB API Debug] Loading progress for task: 468
[Task Reconciliation] Found 0 responses for task 468
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-04-20T17:27:46.447Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 468,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 468
[KYB API Debug] Retrieved task: {
  taskId: 468,
  status: 'not_started',
  progress: 0,
  metadata: [
    'company_id',
    'created_at',
    'created_via',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for'
  ],
  timestamp: '2025-04-20T17:27:46.477Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-04-20T17:27:46.508Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 468,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T17:27:46.508Z
[SERVER DEBUG] Task ID: 468, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
5:27:46 PM [info] GET /api/companies/current 304 in 28ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:27:46 PM [info] GET /api/kyb/progress/468 200 in 160ms :: {"formData":{},"progress":0,"status":"not_started"}
[Auth] Using cached user data: 240
[KYB API Debug] Loading progress for task: 468
[Task Reconciliation] Found 0 responses for task 468
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-04-20T17:27:46.748Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 468,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 468
[KYB API Debug] Retrieved task: {
  taskId: 468,
  status: 'not_started',
  progress: 0,
  metadata: [
    'company_id',
    'created_at',
    'created_via',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for'
  ],
  timestamp: '2025-04-20T17:27:46.779Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-04-20T17:27:46.809Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 468,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T17:27:46.809Z
[SERVER DEBUG] Task ID: 468, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
5:27:46 PM [info] GET /api/kyb/progress/468 304 in 154ms :: {"formData":{},"progress":0,"status":"not_started"}
[KYB API Debug] Loading progress for task: 468
[Task Reconciliation] Found 0 responses for task 468
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-04-20T17:27:47.053Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 468,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 468
[KYB API Debug] Retrieved task: {
  taskId: 468,
  status: 'not_started',
  progress: 0,
  metadata: [
    'company_id',
    'created_at',
    'created_via',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for'
  ],
  timestamp: '2025-04-20T17:27:47.083Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-04-20T17:27:47.114Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 468,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T17:27:47.114Z
[SERVER DEBUG] Task ID: 468, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
5:27:47 PM [info] GET /api/kyb/progress/468 304 in 155ms :: {"formData":{},"progress":0,"status":"not_started"}
[KYB API Debug] Loading progress for task: 468
[Task Reconciliation] Found 0 responses for task 468
[STATUS DETERMINATION] Calculating status for task with: {
  progress: 0,
  currentStatus: 'not_started',
  hasSubmissionDate: false,
  hasSubmittedFlag: false,
  hasResponses: false,
  timestamp: '2025-04-20T17:27:47.355Z'
}
[STATUS DETERMINATION] Task has 0% progress, setting to NOT_STARTED
[Task Reconciliation] Progress calculation: {
  taskId: 468,
  currentProgress: 0,
  calculatedProgress: 0,
  currentStatus: 'not_started',
  calculatedStatus: 'not_started',
  responseCount: 0,
  completeCount: 0
}
[Task Reconciliation] No updates needed for task 468
[KYB API Debug] Retrieved task: {
  taskId: 468,
  status: 'not_started',
  progress: 0,
  metadata: [
    'company_id',
    'created_at',
    'created_via',
    'status_flow',
    'company_name',
    'created_by_id',
    'prerequisite_for'
  ],
  timestamp: '2025-04-20T17:27:47.385Z'
}
[KYB API Debug] Retrieved responses: { responseCount: 0, fields: [], timestamp: '2025-04-20T17:27:47.415Z' }
[SERVER DEBUG] No savedFormData found in task table
[SERVER DEBUG] No KYB form file ID found in task metadata
[KYB API Debug] Retrieved task data: {
  id: 468,
  responseCount: 0,
  progress: 0,
  status: 'not_started',
  formDataKeys: []
}
===============================================
[SERVER DEBUG] PREPARING GET RESPONSE at 2025-04-20T17:27:47.416Z
[SERVER DEBUG] Task ID: 468, Found 0 fields in database
===============================================
[SERVER DEBUG] Checking field corporateRegistration in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field goodStanding in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field regulatoryActions in retrieved data: NOT PRESENT
[SERVER DEBUG] Checking field investigationsIncidents in retrieved data: NOT PRESENT
[SERVER DEBUG] No fields with value "asdf" found in GET response data
[SERVER DEBUG] Sending GET response with 0 fields, status: not_started, progress: 0%
===============================================
5:27:47 PM [info] GET /api/kyb/progress/468 304 in 152ms :: {"formData":{},"progress":0,"status":"not_started"}
5:27:47 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:27:48 PM [info] GET /api/companies/current 304 in 42ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[2025-04-20T17:27:49.372Z] [INFO] [KYBRoutes] Demo auto-fill requested for task {"taskId":"468","userId":240}
[2025-04-20T17:27:49.462Z] [INFO] [KYBRoutes] Fetched fields for demo auto-fill {"fieldCount":30,"taskId":"468"}
[KYB Demo Auto-Fill] First 5 fields from database:
[KYB Demo Auto-Fill] Raw field objects: [
  {
    id: 1,
    field_key: 'legalEntityName',
    display_name: 'Legal Entity Name',
    field_type: 'TEXT',
    question: 'What is the registered business name?',
    group: 'companyProfile',
    required: true,
    order: 1,
    step_index: 0,
    validation_rules: null,
    help_text: 'The official name under which your business is registered with government authorities.',
    demo_autofill: null,
    created_at: 2025-03-05T07:32:29.195Z,
    updated_at: 2025-03-05T07:32:29.195Z
  },
  {
    id: 2,
    field_key: 'registrationNumber',
    display_name: 'Registration Number',
    field_type: 'TEXT',
    question: "What is your company's entity registration number (e.g., EIN or State Entity ID)?",
    group: 'companyProfile',
    required: true,
    order: 2,
    step_index: 0,
    validation_rules: null,
    help_text: 'In the US, this is typically your EIN (Employer Identification Number) or state entity registration number.',
    demo_autofill: '12-3456789',
    created_at: 2025-03-05T07:32:29.195Z,
    updated_at: 2025-03-05T07:32:29.195Z
  },
  {
    id: 3,
    field_key: 'incorporationDate',
    display_name: 'Incorporation Date',
    field_type: 'DATE',
    question: 'When was the company incorporated?',
    group: 'companyProfile',
    required: true,
    order: 3,
    step_index: 0,
    validation_rules: null,
    help_text: 'The date when your company was legally established as per your registration documents.',
    demo_autofill: '5/12/2010',
    created_at: 2025-03-05T07:32:29.195Z,
    updated_at: 2025-03-05T07:32:29.195Z
  },
  {
    id: 4,
    field_key: 'businessType',
    display_name: 'Business Type',
    field_type: 'TEXT',
    question: 'What type of business entity is this?',
    group: 'companyProfile',
    required: true,
    order: 4,
    step_index: 0,
    validation_rules: null,
    help_text: 'Examples include LLC, Corporation, Partnership, Sole Proprietorship, etc.',
    demo_autofill: 'Limited Liability Company (LLC)',
    created_at: 2025-03-05T07:32:29.195Z,
    updated_at: 2025-03-05T07:32:29.195Z
  },
  {
    id: 5,
    field_key: 'jurisdiction',
    display_name: 'Jurisdiction',
    field_type: 'TEXT',
    question: 'In which jurisdiction is the company registered?',
    group: 'companyProfile',
    required: true,
    order: 5,
    step_index: 0,
    validation_rules: null,
    help_text: 'The country, state, or region where your company is officially registered.',
    demo_autofill: 'Delaware, United States',
    created_at: 2025-03-05T07:32:29.195Z,
    updated_at: 2025-03-05T07:32:29.195Z
  }
]
[KYB Demo Auto-Fill] Field legalEntityName has these properties: [
  'id',           'field_key',
  'display_name', 'field_type',
  'question',     'group',
  'required',     'order',
  'step_index',   'validation_rules',
  'help_text',    'demo_autofill',
  'created_at',   'updated_at'
]
[KYB Demo Auto-Fill] Field legalEntityName demo_autofill = "null"
[KYB Demo Auto-Fill] Field registrationNumber has these properties: [
  'id',           'field_key',
  'display_name', 'field_type',
  'question',     'group',
  'required',     'order',
  'step_index',   'validation_rules',
  'help_text',    'demo_autofill',
  'created_at',   'updated_at'
]
[KYB Demo Auto-Fill] Field registrationNumber demo_autofill = "12-3456789"
[KYB Demo Auto-Fill] Field incorporationDate has these properties: [
  'id',           'field_key',
  'display_name', 'field_type',
  'question',     'group',
  'required',     'order',
  'step_index',   'validation_rules',
  'help_text',    'demo_autofill',
  'created_at',   'updated_at'
]
[KYB Demo Auto-Fill] Field incorporationDate demo_autofill = "5/12/2010"
[KYB Demo Auto-Fill] Field businessType has these properties: [
  'id',           'field_key',
  'display_name', 'field_type',
  'question',     'group',
  'required',     'order',
  'step_index',   'validation_rules',
  'help_text',    'demo_autofill',
  'created_at',   'updated_at'
]
[KYB Demo Auto-Fill] Field businessType demo_autofill = "Limited Liability Company (LLC)"
[KYB Demo Auto-Fill] Field jurisdiction has these properties: [
  'id',           'field_key',
  'display_name', 'field_type',
  'question',     'group',
  'required',     'order',
  'step_index',   'validation_rules',
  'help_text',    'demo_autofill',
  'created_at',   'updated_at'
]
[KYB Demo Auto-Fill] Field jurisdiction demo_autofill = "Delaware, United States"
[KYB Demo Auto-Fill] Using company name for legalEntityName: DevelopmentTestingS
[KYB Demo Auto-Fill] Used database value for registrationNumber: 12-3456789
[KYB Demo Auto-Fill] Used database value for incorporationDate: 5/12/2010
[KYB Demo Auto-Fill] Used database value for businessType: Limited Liability Company (LLC)
[KYB Demo Auto-Fill] Used database value for jurisdiction: Delaware, United States
[KYB Demo Auto-Fill] Used database value for registeredAddress: 123 Market Street, Wilmington, DE 19801
[KYB Demo Auto-Fill] Used database value for companyPhone: (302) 555-1234
[KYB Demo Auto-Fill] Used database value for priorNames: None
[KYB Demo Auto-Fill] Used database value for marketCapitalization: $75 million (privately held)
[KYB Demo Auto-Fill] Used database value for lifetimeCustomerValue: $1,250
[KYB Demo Auto-Fill] Used database value for annualRecurringRevenue: 5,000,000
[KYB Demo Auto-Fill] Used database value for monthlyRecurringRevenue: 12,500,000
[KYB Demo Auto-Fill] Used database value for licenses: Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765
[KYB Demo Auto-Fill] Used database value for goodStanding: Yes
[KYB Demo Auto-Fill] Used database value for corporateRegistration: No
[KYB Demo Auto-Fill] Used database value for externalAudit: No
[KYB Demo Auto-Fill] Used database value for controlEnvironment: Yes
[KYB Demo Auto-Fill] Used database value for authorizedSigners: John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)
[KYB Demo Auto-Fill] Used database value for governmentOwnership: No
[KYB Demo Auto-Fill] Used database value for ultimateBeneficialOwners: None
[KYB Demo Auto-Fill] Used database value for directorsAndOfficers: John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)
[KYB Demo Auto-Fill] Using current user email for contactEmail: email@s.com
[KYB Demo Auto-Fill] Used database value for investigationsIncidents: No significant incidents in the past 3 years
[KYB Demo Auto-Fill] Used database value for financialStatements: Yes
[KYB Demo Auto-Fill] Used database value for operationalPolicies: ISO 27001 certified, SOC 2 Type II compliant
[KYB Demo Auto-Fill] Used database value for dataVolume: Approximately 2 million records per month
[KYB Demo Auto-Fill] Used database value for dataTypes: Financial transaction data, Account balances, Customer KYC information
[KYB Demo Auto-Fill] Used database value for sanctionsCheck: Approximately 2 million records per month
[KYB Demo Auto-Fill] Used database value for dueDiligence: Yes
[KYB Demo Auto-Fill] Used database value for regulatoryActions: Yes
[2025-04-20T17:27:49.465Z] [INFO] [KYBRoutes] Generated demo data for auto-fill {"fieldCount":30,"taskId":"468"}
5:27:49 PM [info] GET /api/kyb/demo-autofill/468 200 in 125ms :: {"legalEntityName":"DevelopmentTestingS","registrationNumber":"12-3456789","i...
5:27:50 PM [info] GET /api/companies/current 304 in 30ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[TimestampHandler] Saving 30 timestamps for task 468
[TimestampHandler] Successfully saved timestamps for task 468
[TimestampAPI] Saved 30 timestamps for task 468
5:27:50 PM [info] POST /api/kyb/timestamps/468 200 in 85ms :: {"message":"Timestamps saved successfully","count":30}
===============================================
[SERVER DEBUG] KYB PROGRESS SAVE REQUEST RECEIVED at 2025-04-20T17:27:50.450Z
===============================================
Task ID: 468
Progress: 100
Status: ready_for_submission
Field count: 30
Sample form data values:
- legalEntityName: "DevelopmentTestingS" (string)
- registrationNumber: "12-3456789" (string)
- incorporationDate: "5/12/2010" (string)
- businessType: "Limited Liability Company (LLC)" (string)
- jurisdiction: "Delaware, United States" (string)
Request details:
- Method: POST
- Content-Type: application/json
- Content-Length: 2432
===============================================
===============================================
[SERVER DEBUG] PROCESSING FORM DATA FIELDS AT 2025-04-20T17:27:50.511Z
[SERVER DEBUG] Task ID: 468, Field count: 30
===============================================
[SERVER DEBUG] COMPLETE FORM DATA DUMP:
[SERVER DEBUG] legalEntityName: "DevelopmentTestingS" (string)
[SERVER DEBUG] registrationNumber: "12-3456789" (string)
[SERVER DEBUG] incorporationDate: "5/12/2010" (string)
[SERVER DEBUG] businessType: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] jurisdiction: "Delaware, United States" (string)
[SERVER DEBUG] registeredAddress: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] companyPhone: "(302) 555-1234" (string)
[SERVER DEBUG] priorNames: "None" (string)
[SERVER DEBUG] licenses: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] goodStanding: "Yes" (string)
[SERVER DEBUG] corporateRegistration: "No" (string)
[SERVER DEBUG] externalAudit: "No" (string)
[SERVER DEBUG] controlEnvironment: "Yes" (string)
[SERVER DEBUG] authorizedSigners: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] governmentOwnership: "No" (string)
[SERVER DEBUG] ultimateBeneficialOwners: "None" (string)
[SERVER DEBUG] directorsAndOfficers: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] contactEmail: "email@s.com" (string)
[SERVER DEBUG] marketCapitalization: "$75 million (privately held)" (string)
[SERVER DEBUG] lifetimeCustomerValue: "$1,250" (string)
[SERVER DEBUG] annualRecurringRevenue: "5,000,000" (string)
[SERVER DEBUG] monthlyRecurringRevenue: "12,500,000" (string)
[SERVER DEBUG] investigationsIncidents: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] financialStatements: "Yes" (string)
[SERVER DEBUG] operationalPolicies: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] dataVolume: "Approximately 2 million records per month" (string)
[SERVER DEBUG] dataTypes: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] sanctionsCheck: "Approximately 2 million records per month" (string)
[SERVER DEBUG] dueDiligence: "Yes" (string)
[SERVER DEBUG] regulatoryActions: "Yes" (string)
[SERVER DEBUG] END OF FORM DATA DUMP
[SERVER DEBUG] No fields with value "asdf" found in incoming data
[SERVER DEBUG] Processing field: "legalEntityName" (ID: 1)
[SERVER DEBUG] Original value: DevelopmentTestingS
[SERVER DEBUG] Normalized value: "DevelopmentTestingS" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "legalEntityName"
[SERVER DEBUG] - Value: "DevelopmentTestingS" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "legalEntityName":
[SERVER DEBUG] - Expected: "DevelopmentTestingS"
[SERVER DEBUG] - Actual: "DevelopmentTestingS"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "legalEntityName"
[SERVER DEBUG] Broadcasting legalEntityName insert via WebSocket: "DevelopmentTestingS"
[WebSocket] Broadcast "field_update" sent to 2 clients
[SERVER DEBUG] --- Finished processing field "legalEntityName" ---

[SERVER DEBUG] Processing field: "registrationNumber" (ID: 2)
[SERVER DEBUG] Original value: 12-3456789
[SERVER DEBUG] Normalized value: "12-3456789" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "registrationNumber"
[SERVER DEBUG] - Value: "12-3456789" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "registrationNumber":
[SERVER DEBUG] - Expected: "12-3456789"
[SERVER DEBUG] - Actual: "12-3456789"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "registrationNumber"
[SERVER DEBUG] --- Finished processing field "registrationNumber" ---

[SERVER DEBUG] Processing field: "incorporationDate" (ID: 3)
[SERVER DEBUG] Original value: 5/12/2010
[SERVER DEBUG] Normalized value: "5/12/2010" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "incorporationDate"
[SERVER DEBUG] - Value: "5/12/2010" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "incorporationDate":
[SERVER DEBUG] - Expected: "5/12/2010"
[SERVER DEBUG] - Actual: "5/12/2010"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "incorporationDate"
[SERVER DEBUG] --- Finished processing field "incorporationDate" ---

[SERVER DEBUG] Processing field: "businessType" (ID: 4)
[SERVER DEBUG] Original value: Limited Liability Company (LLC)
[SERVER DEBUG] Normalized value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "businessType"
[SERVER DEBUG] - Value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "businessType":
[SERVER DEBUG] - Expected: "Limited Liability Company (LLC)"
[SERVER DEBUG] - Actual: "Limited Liability Company (LLC)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "businessType"
[SERVER DEBUG] --- Finished processing field "businessType" ---

[SERVER DEBUG] Processing field: "jurisdiction" (ID: 5)
[SERVER DEBUG] Original value: Delaware, United States
[SERVER DEBUG] Normalized value: "Delaware, United States" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "jurisdiction"
[SERVER DEBUG] - Value: "Delaware, United States" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "jurisdiction":
[SERVER DEBUG] - Expected: "Delaware, United States"
[SERVER DEBUG] - Actual: "Delaware, United States"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "jurisdiction"
[SERVER DEBUG] --- Finished processing field "jurisdiction" ---

[SERVER DEBUG] Processing field: "registeredAddress" (ID: 6)
[SERVER DEBUG] Original value: 123 Market Street, Wilmington, DE 19801
[SERVER DEBUG] Normalized value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "registeredAddress"
[SERVER DEBUG] - Value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "registeredAddress":
[SERVER DEBUG] - Expected: "123 Market Street, Wilmington, DE 19801"
[SERVER DEBUG] - Actual: "123 Market Street, Wilmington, DE 19801"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "registeredAddress"
[SERVER DEBUG] --- Finished processing field "registeredAddress" ---

[SERVER DEBUG] Processing field: "companyPhone" (ID: 7)
[SERVER DEBUG] Original value: (302) 555-1234
[SERVER DEBUG] Normalized value: "(302) 555-1234" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "companyPhone"
[SERVER DEBUG] - Value: "(302) 555-1234" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "companyPhone":
[SERVER DEBUG] - Expected: "(302) 555-1234"
[SERVER DEBUG] - Actual: "(302) 555-1234"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "companyPhone"
[SERVER DEBUG] --- Finished processing field "companyPhone" ---

[SERVER DEBUG] Processing field: "priorNames" (ID: 8)
[SERVER DEBUG] Original value: None
[SERVER DEBUG] Normalized value: "None" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "priorNames"
[SERVER DEBUG] - Value: "None" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "priorNames":
[SERVER DEBUG] - Expected: "None"
[SERVER DEBUG] - Actual: "None"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "priorNames"
[SERVER DEBUG] --- Finished processing field "priorNames" ---

[SERVER DEBUG] Processing field: "licenses" (ID: 9)
[SERVER DEBUG] Original value: Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765
[SERVER DEBUG] Normalized value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] Field status: COMPLETE
5:27:51 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "licenses"
[SERVER DEBUG] - Value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "licenses":
[SERVER DEBUG] - Expected: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] - Actual: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "licenses"
[SERVER DEBUG] --- Finished processing field "licenses" ---

[SERVER DEBUG] Processing field: "goodStanding" (ID: 10)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "goodStanding"
[SERVER DEBUG] - Value: "Yes" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "goodStanding":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "goodStanding"
[SERVER DEBUG] --- Finished processing field "goodStanding" ---

[SERVER DEBUG] Processing field: "corporateRegistration" (ID: 11)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "corporateRegistration"
[SERVER DEBUG] - Value: "No" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "corporateRegistration":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "corporateRegistration"
[SERVER DEBUG] --- Finished processing field "corporateRegistration" ---

[SERVER DEBUG] Processing field: "externalAudit" (ID: 12)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "externalAudit"
[SERVER DEBUG] - Value: "No" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "externalAudit":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "externalAudit"
[SERVER DEBUG] --- Finished processing field "externalAudit" ---

[SERVER DEBUG] Processing field: "controlEnvironment" (ID: 13)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "controlEnvironment"
[SERVER DEBUG] - Value: "Yes" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "controlEnvironment":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "controlEnvironment"
[SERVER DEBUG] --- Finished processing field "controlEnvironment" ---

[SERVER DEBUG] Processing field: "authorizedSigners" (ID: 14)
[SERVER DEBUG] Original value: John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)
[SERVER DEBUG] Normalized value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "authorizedSigners"
[SERVER DEBUG] - Value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "authorizedSigners":
[SERVER DEBUG] - Expected: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] - Actual: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "authorizedSigners"
[SERVER DEBUG] --- Finished processing field "authorizedSigners" ---

[SERVER DEBUG] Processing field: "governmentOwnership" (ID: 15)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "governmentOwnership"
[SERVER DEBUG] - Value: "No" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "governmentOwnership":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "governmentOwnership"
[SERVER DEBUG] --- Finished processing field "governmentOwnership" ---

[SERVER DEBUG] Processing field: "ultimateBeneficialOwners" (ID: 16)
[SERVER DEBUG] Original value: None
[SERVER DEBUG] Normalized value: "None" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "ultimateBeneficialOwners"
[SERVER DEBUG] - Value: "None" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "ultimateBeneficialOwners":
[SERVER DEBUG] - Expected: "None"
[SERVER DEBUG] - Actual: "None"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "ultimateBeneficialOwners"
[SERVER DEBUG] --- Finished processing field "ultimateBeneficialOwners" ---

[SERVER DEBUG] Processing field: "directorsAndOfficers" (ID: 17)
[SERVER DEBUG] Original value: John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)
[SERVER DEBUG] Normalized value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "directorsAndOfficers"
[SERVER DEBUG] - Value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "directorsAndOfficers":
[SERVER DEBUG] - Expected: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] - Actual: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "directorsAndOfficers"
[SERVER DEBUG] --- Finished processing field "directorsAndOfficers" ---

[SERVER DEBUG] Processing field: "contactEmail" (ID: 18)
[SERVER DEBUG] Original value: email@s.com
[SERVER DEBUG] Normalized value: "email@s.com" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "contactEmail"
[SERVER DEBUG] - Value: "email@s.com" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "contactEmail":
[SERVER DEBUG] - Expected: "email@s.com"
[SERVER DEBUG] - Actual: "email@s.com"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "contactEmail"
[SERVER DEBUG] --- Finished processing field "contactEmail" ---

[SERVER DEBUG] Processing field: "marketCapitalization" (ID: 19)
[SERVER DEBUG] Original value: $75 million (privately held)
[SERVER DEBUG] Normalized value: "$75 million (privately held)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "marketCapitalization"
[SERVER DEBUG] - Value: "$75 million (privately held)" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "marketCapitalization":
[SERVER DEBUG] - Expected: "$75 million (privately held)"
[SERVER DEBUG] - Actual: "$75 million (privately held)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "marketCapitalization"
[SERVER DEBUG] --- Finished processing field "marketCapitalization" ---

[SERVER DEBUG] Processing field: "lifetimeCustomerValue" (ID: 20)
[SERVER DEBUG] Original value: $1,250
[SERVER DEBUG] Normalized value: "$1,250" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "lifetimeCustomerValue"
[SERVER DEBUG] - Value: "$1,250" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "lifetimeCustomerValue":
[SERVER DEBUG] - Expected: "$1,250"
[SERVER DEBUG] - Actual: "$1,250"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "lifetimeCustomerValue"
[SERVER DEBUG] --- Finished processing field "lifetimeCustomerValue" ---

[SERVER DEBUG] Processing field: "annualRecurringRevenue" (ID: 21)
[SERVER DEBUG] Original value: 5,000,000
[SERVER DEBUG] Normalized value: "5,000,000" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "annualRecurringRevenue"
[SERVER DEBUG] - Value: "5,000,000" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "annualRecurringRevenue":
[SERVER DEBUG] - Expected: "5,000,000"
[SERVER DEBUG] - Actual: "5,000,000"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "annualRecurringRevenue"
[SERVER DEBUG] --- Finished processing field "annualRecurringRevenue" ---

[SERVER DEBUG] Processing field: "monthlyRecurringRevenue" (ID: 22)
[SERVER DEBUG] Original value: 12,500,000
[SERVER DEBUG] Normalized value: "12,500,000" (string)
[SERVER DEBUG] Field status: COMPLETE
5:27:52 PM [info] GET /api/companies/current 304 in 29ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "monthlyRecurringRevenue"
[SERVER DEBUG] - Value: "12,500,000" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "monthlyRecurringRevenue":
[SERVER DEBUG] - Expected: "12,500,000"
[SERVER DEBUG] - Actual: "12,500,000"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "monthlyRecurringRevenue"
[SERVER DEBUG] --- Finished processing field "monthlyRecurringRevenue" ---

[SERVER DEBUG] Processing field: "investigationsIncidents" (ID: 23)
[SERVER DEBUG] Original value: No significant incidents in the past 3 years
[SERVER DEBUG] Normalized value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "investigationsIncidents"
[SERVER DEBUG] - Value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "investigationsIncidents":
[SERVER DEBUG] - Expected: "No significant incidents in the past 3 years"
[SERVER DEBUG] - Actual: "No significant incidents in the past 3 years"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "investigationsIncidents"
[SERVER DEBUG] --- Finished processing field "investigationsIncidents" ---

[SERVER DEBUG] Processing field: "financialStatements" (ID: 24)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "financialStatements"
[SERVER DEBUG] - Value: "Yes" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "financialStatements":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "financialStatements"
[SERVER DEBUG] --- Finished processing field "financialStatements" ---

[SERVER DEBUG] Processing field: "operationalPolicies" (ID: 25)
[SERVER DEBUG] Original value: ISO 27001 certified, SOC 2 Type II compliant
[SERVER DEBUG] Normalized value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "operationalPolicies"
[SERVER DEBUG] - Value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "operationalPolicies":
[SERVER DEBUG] - Expected: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] - Actual: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "operationalPolicies"
[SERVER DEBUG] --- Finished processing field "operationalPolicies" ---

[SERVER DEBUG] Processing field: "dataVolume" (ID: 26)
[SERVER DEBUG] Original value: Approximately 2 million records per month
[SERVER DEBUG] Normalized value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "dataVolume"
[SERVER DEBUG] - Value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "dataVolume":
[SERVER DEBUG] - Expected: "Approximately 2 million records per month"
[SERVER DEBUG] - Actual: "Approximately 2 million records per month"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "dataVolume"
[SERVER DEBUG] --- Finished processing field "dataVolume" ---

[SERVER DEBUG] Processing field: "dataTypes" (ID: 27)
[SERVER DEBUG] Original value: Financial transaction data, Account balances, Customer KYC information
[SERVER DEBUG] Normalized value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "dataTypes"
[SERVER DEBUG] - Value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "dataTypes":
[SERVER DEBUG] - Expected: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] - Actual: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "dataTypes"
[SERVER DEBUG] --- Finished processing field "dataTypes" ---

[SERVER DEBUG] Processing field: "sanctionsCheck" (ID: 28)
[SERVER DEBUG] Original value: Approximately 2 million records per month
[SERVER DEBUG] Normalized value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "sanctionsCheck"
[SERVER DEBUG] - Value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "sanctionsCheck":
[SERVER DEBUG] - Expected: "Approximately 2 million records per month"
[SERVER DEBUG] - Actual: "Approximately 2 million records per month"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "sanctionsCheck"
[SERVER DEBUG] --- Finished processing field "sanctionsCheck" ---

[SERVER DEBUG] Processing field: "dueDiligence" (ID: 29)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "dueDiligence"
[SERVER DEBUG] - Value: "Yes" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "dueDiligence":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "dueDiligence"
[SERVER DEBUG] --- Finished processing field "dueDiligence" ---

[SERVER DEBUG] Processing field: "regulatoryActions" (ID: 30)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: NO
[SERVER DEBUG] INSERTING new response for field "regulatoryActions"
[SERVER DEBUG] - Value: "Yes" (string)
[SERVER DEBUG] - Status: COMPLETE
[SERVER DEBUG] ✅ INSERT VERIFICATION for field "regulatoryActions":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ INSERT SUCCESSFUL for field "regulatoryActions"
[SERVER DEBUG] --- Finished processing field "regulatoryActions" ---

[KYB API Debug] Using client-provided status: ready_for_submission
[WebSocket] Broadcasting task update for task 468: progress=100, status=ready_for_submission
[WebSocket] Broadcast "task_updated" sent to 2 clients
===============================================
[SERVER DEBUG] PREPARING RESPONSE at 2025-04-20T17:27:53.363Z
[SERVER DEBUG] Found 30 fields in database after update
===============================================
[SERVER DEBUG] Checking field corporateRegistration in updated data: "No"
[SERVER DEBUG] Checking field goodStanding in updated data: "Yes"
[SERVER DEBUG] Checking field regulatoryActions in updated data: "Yes"
[SERVER DEBUG] Checking field investigationsIncidents in updated data: "No significant incidents in the past 3 years"
[SERVER DEBUG] No fields with value "asdf" found in response data
[SERVER DEBUG] Sending response with 30 fields, status: ready_for_submission, progress: 100%
[SERVER DEBUG] Updating task.savedFormData to ensure persistence across navigation
[SERVER DEBUG] ✅ Successfully updated task.savedFormData with latest form data
===============================================
5:27:53 PM [info] POST /api/kyb/progress 200 in 2977ms :: {"success":true,"savedData":{"progress":100,"status":"ready_for_submission","...
5:27:53 PM [info] GET /api/companies/current 304 in 32ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:27:54 PM [info] GET /api/companies/current 304 in 37ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[Auth] Using cached user data: 240
5:27:56 PM [info] GET /api/companies/current 304 in 35ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[WebSocket] Received ping
5:27:57 PM [info] GET /api/companies/current 304 in 30ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:27:58 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:27:59 PM [info] GET /api/companies/current 304 in 33ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[Current Company] Using cached company data: 199
5:28:00 PM [info] GET /api/companies/current 304 in 32ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:01 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:03 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:04 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:05 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:06 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:07 PM [info] GET /api/companies/current 304 in 29ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:09 PM [info] GET /api/companies/current 304 in 30ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:10 PM [info] GET /api/companies/current 304 in 32ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:11 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:12 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:13 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:15 PM [info] GET /api/companies/current 304 in 33ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[KYB API Debug] KYB save endpoint triggered: {
  endpoint: '/api/kyb/save',
  method: 'POST',
  url: '/api/kyb/save',
  headers: {
    contentType: 'application/json',
    accept: 'application/json',
    cookie: true
  },
  timestamp: '2025-04-20T17:28:15.096Z'
}
[KYB API Debug] User authenticated: {
  userId: 240,
  userEmail: 'email@s.com',
  companyId: 199,
  timestamp: '2025-04-20T17:28:15.096Z'
}
[2025-04-20T17:28:15.096Z] [DEBUG] [KYBRoutes] Save request received {"taskId":468,"formDataKeys":["legalEntityName","registrationNumber","incorporationDate","businessType","jurisdiction","registeredAddress","companyPhone","priorNames","licenses","goodStanding","corporateRegistration","externalAudit","controlEnvironment","authorizedSigners","governmentOwnership","ultimateBeneficialOwners","directorsAndOfficers","contactEmail","marketCapitalization","lifetimeCustomerValue","annualRecurringRevenue","monthlyRecurringRevenue","investigationsIncidents","financialStatements","operationalPolicies","dataVolume","dataTypes","sanctionsCheck","dueDiligence","regulatoryActions","completion_date"],"fileName":"kyb_form_468_2025-04-20T172814.csv","userId":240,"isSubmission":false}
[2025-04-20T17:28:15.158Z] [DEBUG] [FileCreationService] Starting file creation {"fileName":"kyb_form_468_2025-04-20T172814.csv","fileType":"text/csv","userId":183,"companyId":199}
[2025-04-20T17:28:15.158Z] [DEBUG] [FileCreationService] Storing KYB CSV content directly in database
[2025-04-20T17:28:15.201Z] [INFO] [FileCreationService] File created successfully {"fileId":736,"fileName":"kyb_form_468_2025-04-20T172814.csv","size":2161}
[SERVER DEBUG] Unlocking file vault access for company 199
[CompanyTabsService] ⚡ CRITICAL TIMING: File vault unlock operation started for company 199 at 2025-04-20T17:28:15.202Z
[CompanyTabsService] Directly updating company 199 with file-vault tab at 2025-04-20T17:28:15.202Z
[CompanyTabsService] Error unlocking file vault: TypeError: db.sql is not a function
    at Object.unlockFileVault (/home/runner/workspace/server/services/companyTabsService.ts:118:30)
    at <anonymous> (/home/runner/workspace/server/routes/kyb.ts:1049:55)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
[SERVER ERROR] Failed to unlock file vault for company 199
5:28:16 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[2025-04-20T17:28:16.228Z] [INFO] [KYBRoutes] Save completed successfully {"taskId":468,"fileId":736,"responseCount":30,"warningCount":0}
5:28:16 PM [info] POST /api/kyb/save 200 in 1164ms :: {"success":true,"fileId":736}
[WebSocket] Received message: {
  type: 'submission_status',
  payload: {
    taskId: 468,
    status: 'submitted',
    timestamp: 1745170096259,
    source: 'client-emit'
  }
}
[WebSocket] Received message: {
  type: 'submission_status',
  payload: {
    taskId: 468,
    status: 'submitted',
    verified: false,
    message: 'Status verification failed, but form data was saved',
    source: 'client-emit',
    timestamp: 1745170096272
  }
}
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 240, company_id: 199, email: 'email@s.com' }
[Tasks Routes] Fetching task by ID: {
  taskId: 468,
  userCompanyId: 199,
  timestamp: '2025-04-20T17:28:16.409Z'
}
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 240',
    condition2: 'tasks.created_by = 240',
    condition3: "tasks.company_id = 199 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('email@s.com')"
  }
}
[Tasks Routes] Fetching latest KYB form data for task: 468
5:28:16 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[Tasks] Tasks found: { count: 4 }
5:28:16 PM [info] GET /api/tasks 200 in 91ms :: [{"id":469,"title":"2. Security Assessment: DevelopmentTestingS","description...
[Tasks Routes] Found 60 KYB responses for task 468
[Tasks Routes] Constructed form data with 30 fields
[Tasks Routes] Task found by ID: {
  taskId: 468,
  title: '1. KYB Form: DevelopmentTestingS',
  type: 'company_kyb',
  formDataFields: 30,
  timestamp: '2025-04-20T17:28:16.500Z'
}
5:28:16 PM [info] GET /api/tasks/468 200 in 123ms :: {"id":468,"title":"1. KYB Form: DevelopmentTestingS","description":"Complete ...
5:28:16 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[Tasks Routes] Fetching task by ID: {
  taskId: 468,
  userCompanyId: 199,
  timestamp: '2025-04-20T17:28:16.682Z'
}
[Tasks Routes] Fetching latest KYB form data for task: 468
5:28:16 PM [info] GET /api/tasks 304 in 30ms :: [{"id":469,"title":"2. Security Assessment: DevelopmentTestingS","description...
[Tasks Routes] Found 60 KYB responses for task 468
[Tasks Routes] Constructed form data with 30 fields
[Tasks Routes] Task found by ID: {
  taskId: 468,
  title: '1. KYB Form: DevelopmentTestingS',
  type: 'company_kyb',
  formDataFields: 30,
  timestamp: '2025-04-20T17:28:16.775Z'
}
5:28:16 PM [info] GET /api/tasks/468 304 in 124ms :: {"id":468,"title":"1. KYB Form: DevelopmentTestingS","description":"Complete ...
5:28:16 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:16 PM [info] GET /api/tasks 304 in 32ms :: [{"id":469,"title":"2. Security Assessment: DevelopmentTestingS","description...
[Tasks Routes] Fetching task by ID: {
  taskId: 468,
  userCompanyId: 199,
  timestamp: '2025-04-20T17:28:16.955Z'
}
[Tasks Routes] Fetching latest KYB form data for task: 468
[Tasks Routes] Found 60 KYB responses for task 468
[Tasks Routes] Constructed form data with 30 fields
[Tasks Routes] Task found by ID: {
  taskId: 468,
  title: '1. KYB Form: DevelopmentTestingS',
  type: 'company_kyb',
  formDataFields: 30,
  timestamp: '2025-04-20T17:28:17.047Z'
}
5:28:17 PM [info] GET /api/tasks/468 304 in 123ms :: {"id":468,"title":"1. KYB Form: DevelopmentTestingS","description":"Complete ...
5:28:17 PM [info] GET /api/tasks 304 in 31ms :: [{"id":469,"title":"2. Security Assessment: DevelopmentTestingS","description...
5:28:17 PM [warn] GET /api/companies/is-demo 400 in 33ms :: {"message":"Invalid company ID","code":"INVALID_ID"}
5:28:17 PM [info] GET /api/tasks 304 in 31ms :: [{"id":469,"title":"2. Security Assessment: DevelopmentTestingS","description...
5:28:17 PM [info] GET /api/tasks 304 in 31ms :: [{"id":469,"title":"2. Security Assessment: DevelopmentTestingS","description...
5:28:17 PM [info] GET /api/companies/199 304 in 62ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:17 PM [info] GET /api/tasks 304 in 30ms :: [{"id":469,"title":"2. Security Assessment: DevelopmentTestingS","description...
[Auth] Using cached user data: 240
5:28:18 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:19 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:20 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[Auth] Using cached user data: 240
5:28:21 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:22 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:23 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:25 PM [info] GET /api/companies/current 304 in 32ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:26 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[Tasks Routes] Fetching task by ID: {
  taskId: 468,
  userCompanyId: 199,
  timestamp: '2025-04-20T17:28:26.413Z'
}
[Tasks Routes] Fetching latest KYB form data for task: 468
5:28:26 PM [info] GET /api/tasks 304 in 31ms :: [{"id":469,"title":"2. Security Assessment: DevelopmentTestingS","description...
[Tasks Routes] Found 60 KYB responses for task 468
[Tasks Routes] Constructed form data with 30 fields
[Tasks Routes] Task found by ID: {
  taskId: 468,
  title: '1. KYB Form: DevelopmentTestingS',
  type: 'company_kyb',
  formDataFields: 30,
  timestamp: '2025-04-20T17:28:26.506Z'
}
5:28:26 PM [info] GET /api/tasks/468 304 in 124ms :: {"id":468,"title":"1. KYB Form: DevelopmentTestingS","description":"Complete ...
5:28:26 PM [info] GET /api/tasks 304 in 32ms :: [{"id":469,"title":"2. Security Assessment: DevelopmentTestingS","description...
[Tasks Routes] Fetching task by ID: {
  taskId: 468,
  userCompanyId: 199,
  timestamp: '2025-04-20T17:28:26.685Z'
}
[WebSocket] Received ping
[Tasks Routes] Fetching latest KYB form data for task: 468
[Tasks Routes] Found 60 KYB responses for task 468
[Tasks Routes] Constructed form data with 30 fields
[Tasks Routes] Task found by ID: {
  taskId: 468,
  title: '1. KYB Form: DevelopmentTestingS',
  type: 'company_kyb',
  formDataFields: 30,
  timestamp: '2025-04-20T17:28:26.777Z'
}
5:28:26 PM [info] GET /api/tasks 304 in 31ms :: [{"id":469,"title":"2. Security Assessment: DevelopmentTestingS","description...
5:28:26 PM [info] GET /api/tasks/468 304 in 122ms :: {"id":468,"title":"1. KYB Form: DevelopmentTestingS","description":"Complete ...
[Tasks] Using cached task data for user: 240
5:28:26 PM [info] GET /api/tasks 304 in 31ms :: [{"id":469,"title":"2. Security Assessment: DevelopmentTestingS","description...
[Current Company] Using cached company data: 199
5:28:27 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:28 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:29 PM [info] GET /api/companies/current 304 in 33ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:31 PM [info] GET /api/companies/current 304 in 40ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:32 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:33 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:34 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:35 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:36 PM [info] GET /api/companies/current 304 in 32ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[Current Company] Fetching company for user: { userId: 240, companyId: 199 }
[Current Company] Found company: {
  id: 199,
  name: 'DevelopmentTestingS',
  onboardingCompleted: false,
  riskScore: null,
  isDemo: true
}
5:28:38 PM [info] GET /api/companies/current 304 in 62ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:39 PM [info] GET /api/companies/current 304 in 32ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:40 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:41 PM [info] GET /api/companies/current 304 in 32ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:42 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:44 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:45 PM [info] GET /api/companies/current 304 in 30ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:46 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[Current Company] Using cached company data: 199
5:28:47 PM [info] GET /api/companies/current 304 in 30ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:48 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[Auth] Using cached user data: 240
5:28:50 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:51 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[Auth] Using cached user data: 240
5:28:52 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:53 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:54 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:56 PM [info] GET /api/companies/current 304 in 32ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[WebSocket] Received ping
5:28:57 PM [info] GET /api/companies/current 304 in 32ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[WebSocket] Received ping
5:28:58 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:28:59 PM [info] GET /api/companies/current 304 in 33ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[Auth] Using cached user data: 240
5:29:00 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:29:01 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:29:03 PM [info] GET /api/companies/current 304 in 50ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[Auth] Using cached user data: 240
[Current Company] Using cached company data: 199
5:29:04 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:29:05 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:29:06 PM [info] GET /api/companies/current 304 in 34ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:29:07 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:29:09 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:29:10 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:29:11 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:29:12 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:29:13 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[Tasks Routes] Updating task progress: { taskId: 468, timestamp: '2025-04-20T17:29:14.922Z' }
[Auth] Using cached user data: 240
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 240, company_id: 199, email: 'email@s.com' }
5:29:14 PM [info] GET /api/companies/current 304 in 29ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[Task Reconciliation] Skipping task in terminal/submitted state: {
  taskId: 468,
  status: 'submitted',
  hasSubmissionDate: true,
  submissionDate: '2025-04-20T17:28:15.246Z',
  terminalState: true
}
[Tasks] KYB tasks found: { count: 1 }
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 240',
    condition2: 'tasks.created_by = 240',
    condition3: "tasks.company_id = 199 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('email@s.com')"
  }
}
[Tasks] Tasks found: { count: 4 }
[Tasks Routes] Task progress reconciled: {
  taskId: 468,
  progress: 100,
  status: 'submitted',
  timestamp: '2025-04-20T17:29:14.986Z'
}
5:29:15 PM [info] POST /api/tasks/468/update-progress 200 in 94ms :: {"success":true,"progress":100,"status":"submitted","taskId":468}
5:29:15 PM [info] GET /api/tasks 304 in 93ms :: [{"id":469,"title":"2. Security Assessment: DevelopmentTestingS","description...
5:29:15 PM [info] GET /api/tasks 304 in 31ms :: [{"id":469,"title":"2. Security Assessment: DevelopmentTestingS","description...
[TimestampHandler] Saving 31 timestamps for task 468
[TimestampHandler] Successfully saved timestamps for task 468
[TimestampAPI] Saved 31 timestamps for task 468
5:29:15 PM [info] POST /api/kyb/timestamps/468 200 in 64ms :: {"message":"Timestamps saved successfully","count":31}
[Auth] Using cached user data: 240
===============================================
[SERVER DEBUG] KYB PROGRESS SAVE REQUEST RECEIVED at 2025-04-20T17:29:15.636Z
===============================================
Task ID: 468
Progress: 100
Status: ready_for_submission
Field count: 31
Sample form data values:
- legalEntityName: "DevelopmentTestingS" (string)
- registrationNumber: "12-3456789" (string)
- incorporationDate: "5/12/2010" (string)
- businessType: "Limited Liability Company (LLC)" (string)
- jurisdiction: "Delaware, United States" (string)
Request details:
- Method: POST
- Content-Type: application/json
- Content-Length: 2468
===============================================
===============================================
[SERVER DEBUG] PROCESSING FORM DATA FIELDS AT 2025-04-20T17:29:15.708Z
[SERVER DEBUG] Task ID: 468, Field count: 31
===============================================
[SERVER DEBUG] COMPLETE FORM DATA DUMP:
[SERVER DEBUG] legalEntityName: "DevelopmentTestingS" (string)
[SERVER DEBUG] registrationNumber: "12-3456789" (string)
[SERVER DEBUG] incorporationDate: "5/12/2010" (string)
[SERVER DEBUG] businessType: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] jurisdiction: "Delaware, United States" (string)
[SERVER DEBUG] registeredAddress: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] companyPhone: "(302) 555-1234" (string)
[SERVER DEBUG] priorNames: "None" (string)
[SERVER DEBUG] licenses: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] goodStanding: "Yes" (string)
[SERVER DEBUG] corporateRegistration: "No" (string)
[SERVER DEBUG] externalAudit: "No" (string)
[SERVER DEBUG] controlEnvironment: "Yes" (string)
[SERVER DEBUG] authorizedSigners: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] governmentOwnership: "No" (string)
[SERVER DEBUG] ultimateBeneficialOwners: "None" (string)
[SERVER DEBUG] directorsAndOfficers: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] contactEmail: "email@s.com" (string)
[SERVER DEBUG] marketCapitalization: "$75 million (privately held)" (string)
[SERVER DEBUG] lifetimeCustomerValue: "$1,250" (string)
[SERVER DEBUG] annualRecurringRevenue: "5,000,000" (string)
[SERVER DEBUG] monthlyRecurringRevenue: "12,500,000" (string)
[SERVER DEBUG] investigationsIncidents: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] financialStatements: "Yes" (string)
[SERVER DEBUG] operationalPolicies: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] dataVolume: "Approximately 2 million records per month" (string)
[SERVER DEBUG] dataTypes: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] sanctionsCheck: "Approximately 2 million records per month" (string)
[SERVER DEBUG] dueDiligence: "Yes" (string)
[SERVER DEBUG] regulatoryActions: "Yes" (string)
[SERVER DEBUG] taskId: "468" (number)
[SERVER DEBUG] END OF FORM DATA DUMP
[SERVER DEBUG] No fields with value "asdf" found in incoming data
[SERVER DEBUG] Processing field: "legalEntityName" (ID: 1)
[SERVER DEBUG] Original value: DevelopmentTestingS
[SERVER DEBUG] Normalized value: "DevelopmentTestingS" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "legalEntityName" in database
[SERVER DEBUG] - Old value: "DevelopmentTestingS" (string)
[SERVER DEBUG] - New value: "DevelopmentTestingS" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: legalEntityName
[SERVER DEBUG] - field_id: 1
[SERVER DEBUG] - response_value: "DevelopmentTestingS"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "legalEntityName":
[SERVER DEBUG] - Expected: "DevelopmentTestingS"
[SERVER DEBUG] - Actual: "DevelopmentTestingS"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "legalEntityName" (ID: 1539)
[SERVER DEBUG] Broadcasting legalEntityName update via WebSocket: "DevelopmentTestingS"
[WebSocket] Broadcast "field_update" sent to 2 clients
[SERVER DEBUG] --- Finished processing field "legalEntityName" ---

[SERVER DEBUG] Processing field: "registrationNumber" (ID: 2)
[SERVER DEBUG] Original value: 12-3456789
[SERVER DEBUG] Normalized value: "12-3456789" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "registrationNumber" in database
[SERVER DEBUG] - Old value: "12-3456789" (string)
[SERVER DEBUG] - New value: "12-3456789" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: registrationNumber
[SERVER DEBUG] - field_id: 2
[SERVER DEBUG] - response_value: "12-3456789"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "registrationNumber":
[SERVER DEBUG] - Expected: "12-3456789"
[SERVER DEBUG] - Actual: "12-3456789"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "registrationNumber" (ID: 1540)
[SERVER DEBUG] --- Finished processing field "registrationNumber" ---

[SERVER DEBUG] Processing field: "incorporationDate" (ID: 3)
[SERVER DEBUG] Original value: 5/12/2010
[SERVER DEBUG] Normalized value: "5/12/2010" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "incorporationDate" in database
[SERVER DEBUG] - Old value: "5/12/2010" (string)
[SERVER DEBUG] - New value: "5/12/2010" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: incorporationDate
[SERVER DEBUG] - field_id: 3
[SERVER DEBUG] - response_value: "5/12/2010"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "incorporationDate":
[SERVER DEBUG] - Expected: "5/12/2010"
[SERVER DEBUG] - Actual: "5/12/2010"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "incorporationDate" (ID: 1541)
[SERVER DEBUG] --- Finished processing field "incorporationDate" ---

[SERVER DEBUG] Processing field: "businessType" (ID: 4)
[SERVER DEBUG] Original value: Limited Liability Company (LLC)
[SERVER DEBUG] Normalized value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "businessType" in database
[SERVER DEBUG] - Old value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] - New value: "Limited Liability Company (LLC)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: businessType
[SERVER DEBUG] - field_id: 4
[SERVER DEBUG] - response_value: "Limited Liability Company (LLC)"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "businessType":
[SERVER DEBUG] - Expected: "Limited Liability Company (LLC)"
[SERVER DEBUG] - Actual: "Limited Liability Company (LLC)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "businessType" (ID: 1542)
[SERVER DEBUG] --- Finished processing field "businessType" ---

[SERVER DEBUG] Processing field: "jurisdiction" (ID: 5)
[SERVER DEBUG] Original value: Delaware, United States
[SERVER DEBUG] Normalized value: "Delaware, United States" (string)
[SERVER DEBUG] Field status: COMPLETE
5:29:16 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "jurisdiction" in database
[SERVER DEBUG] - Old value: "Delaware, United States" (string)
[SERVER DEBUG] - New value: "Delaware, United States" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: jurisdiction
[SERVER DEBUG] - field_id: 5
[SERVER DEBUG] - response_value: "Delaware, United States"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "jurisdiction":
[SERVER DEBUG] - Expected: "Delaware, United States"
[SERVER DEBUG] - Actual: "Delaware, United States"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "jurisdiction" (ID: 1543)
[SERVER DEBUG] --- Finished processing field "jurisdiction" ---

[SERVER DEBUG] Processing field: "registeredAddress" (ID: 6)
[SERVER DEBUG] Original value: 123 Market Street, Wilmington, DE 19801
[SERVER DEBUG] Normalized value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "registeredAddress" in database
[SERVER DEBUG] - Old value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] - New value: "123 Market Street, Wilmington, DE 19801" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: registeredAddress
[SERVER DEBUG] - field_id: 6
[SERVER DEBUG] - response_value: "123 Market Street, Wilmington, DE 19801"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "registeredAddress":
[SERVER DEBUG] - Expected: "123 Market Street, Wilmington, DE 19801"
[SERVER DEBUG] - Actual: "123 Market Street, Wilmington, DE 19801"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "registeredAddress" (ID: 1544)
[SERVER DEBUG] --- Finished processing field "registeredAddress" ---

[SERVER DEBUG] Processing field: "companyPhone" (ID: 7)
[SERVER DEBUG] Original value: (302) 555-1234
[SERVER DEBUG] Normalized value: "(302) 555-1234" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "companyPhone" in database
[SERVER DEBUG] - Old value: "(302) 555-1234" (string)
[SERVER DEBUG] - New value: "(302) 555-1234" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: companyPhone
[SERVER DEBUG] - field_id: 7
[SERVER DEBUG] - response_value: "(302) 555-1234"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "companyPhone":
[SERVER DEBUG] - Expected: "(302) 555-1234"
[SERVER DEBUG] - Actual: "(302) 555-1234"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "companyPhone" (ID: 1545)
[SERVER DEBUG] --- Finished processing field "companyPhone" ---

[SERVER DEBUG] Processing field: "priorNames" (ID: 8)
[SERVER DEBUG] Original value: None
[SERVER DEBUG] Normalized value: "None" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "priorNames" in database
[SERVER DEBUG] - Old value: "None" (string)
[SERVER DEBUG] - New value: "None" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: priorNames
[SERVER DEBUG] - field_id: 8
[SERVER DEBUG] - response_value: "None"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "priorNames":
[SERVER DEBUG] - Expected: "None"
[SERVER DEBUG] - Actual: "None"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "priorNames" (ID: 1546)
[SERVER DEBUG] --- Finished processing field "priorNames" ---

[SERVER DEBUG] Processing field: "licenses" (ID: 9)
[SERVER DEBUG] Original value: Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765
[SERVER DEBUG] Normalized value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "licenses" in database
[SERVER DEBUG] - Old value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] - New value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: licenses
[SERVER DEBUG] - field_id: 9
[SERVER DEBUG] - response_value: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "licenses":
[SERVER DEBUG] - Expected: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] - Actual: "Money Transmitter License #MT-12345, Financial Data Provider License #FDP-98765"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "licenses" (ID: 1547)
[SERVER DEBUG] --- Finished processing field "licenses" ---

[SERVER DEBUG] Processing field: "goodStanding" (ID: 10)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "goodStanding" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: goodStanding
[SERVER DEBUG] - field_id: 10
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "goodStanding":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "goodStanding" (ID: 1548)
[SERVER DEBUG] --- Finished processing field "goodStanding" ---

[SERVER DEBUG] Processing field: "corporateRegistration" (ID: 11)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "corporateRegistration" in database
[SERVER DEBUG] - Old value: "No" (string)
[SERVER DEBUG] - New value: "No" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: corporateRegistration
[SERVER DEBUG] - field_id: 11
[SERVER DEBUG] - response_value: "No"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "corporateRegistration":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "corporateRegistration" (ID: 1549)
[SERVER DEBUG] --- Finished processing field "corporateRegistration" ---

[SERVER DEBUG] Processing field: "externalAudit" (ID: 12)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "externalAudit" in database
[SERVER DEBUG] - Old value: "No" (string)
[SERVER DEBUG] - New value: "No" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: externalAudit
[SERVER DEBUG] - field_id: 12
[SERVER DEBUG] - response_value: "No"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "externalAudit":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "externalAudit" (ID: 1550)
[SERVER DEBUG] --- Finished processing field "externalAudit" ---

[SERVER DEBUG] Processing field: "controlEnvironment" (ID: 13)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "controlEnvironment" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: controlEnvironment
[SERVER DEBUG] - field_id: 13
[SERVER DEBUG] - response_value: "Yes"
WebSocket client disconnected with code 1001 and reason: 
WebSocket client disconnected with code 1001 and reason: 
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "controlEnvironment":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "controlEnvironment" (ID: 1551)
[SERVER DEBUG] --- Finished processing field "controlEnvironment" ---

[SERVER DEBUG] Processing field: "authorizedSigners" (ID: 14)
[SERVER DEBUG] Original value: John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)
[SERVER DEBUG] Normalized value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "authorizedSigners" in database
[SERVER DEBUG] - Old value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] - New value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: authorizedSigners
[SERVER DEBUG] - field_id: 14
[SERVER DEBUG] - response_value: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "authorizedSigners":
[SERVER DEBUG] - Expected: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] - Actual: "John Smith (CEO), Sarah Johnson (CFO), Michael Wong (COO)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "authorizedSigners" (ID: 1552)
[SERVER DEBUG] --- Finished processing field "authorizedSigners" ---

[SERVER DEBUG] Processing field: "governmentOwnership" (ID: 15)
[SERVER DEBUG] Original value: No
[SERVER DEBUG] Normalized value: "No" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "governmentOwnership" in database
[SERVER DEBUG] - Old value: "No" (string)
[SERVER DEBUG] - New value: "No" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: governmentOwnership
[SERVER DEBUG] - field_id: 15
[SERVER DEBUG] - response_value: "No"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "governmentOwnership":
[SERVER DEBUG] - Expected: "No"
[SERVER DEBUG] - Actual: "No"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "governmentOwnership" (ID: 1553)
[SERVER DEBUG] --- Finished processing field "governmentOwnership" ---

[SERVER DEBUG] Processing field: "ultimateBeneficialOwners" (ID: 16)
[SERVER DEBUG] Original value: None
[SERVER DEBUG] Normalized value: "None" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "ultimateBeneficialOwners" in database
[SERVER DEBUG] - Old value: "None" (string)
[SERVER DEBUG] - New value: "None" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: ultimateBeneficialOwners
[SERVER DEBUG] - field_id: 16
[SERVER DEBUG] - response_value: "None"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "ultimateBeneficialOwners":
[SERVER DEBUG] - Expected: "None"
[SERVER DEBUG] - Actual: "None"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "ultimateBeneficialOwners" (ID: 1554)
[SERVER DEBUG] --- Finished processing field "ultimateBeneficialOwners" ---

[SERVER DEBUG] Processing field: "directorsAndOfficers" (ID: 17)
[SERVER DEBUG] Original value: John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)
[SERVER DEBUG] Normalized value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "directorsAndOfficers" in database
[SERVER DEBUG] - Old value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] - New value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: directorsAndOfficers
[SERVER DEBUG] - field_id: 17
[SERVER DEBUG] - response_value: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "directorsAndOfficers":
[SERVER DEBUG] - Expected: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] - Actual: "John Smith (Chairman), Jane Doe (Director), Mike Johnson (Director)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "directorsAndOfficers" (ID: 1555)
[SERVER DEBUG] --- Finished processing field "directorsAndOfficers" ---

[SERVER DEBUG] Processing field: "contactEmail" (ID: 18)
[SERVER DEBUG] Original value: email@s.com
[SERVER DEBUG] Normalized value: "email@s.com" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "contactEmail" in database
[SERVER DEBUG] - Old value: "email@s.com" (string)
[SERVER DEBUG] - New value: "email@s.com" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: contactEmail
[SERVER DEBUG] - field_id: 18
[SERVER DEBUG] - response_value: "email@s.com"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "contactEmail":
[SERVER DEBUG] - Expected: "email@s.com"
[SERVER DEBUG] - Actual: "email@s.com"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "contactEmail" (ID: 1556)
[SERVER DEBUG] --- Finished processing field "contactEmail" ---

[SERVER DEBUG] Processing field: "marketCapitalization" (ID: 19)
[SERVER DEBUG] Original value: $75 million (privately held)
[SERVER DEBUG] Normalized value: "$75 million (privately held)" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "marketCapitalization" in database
[SERVER DEBUG] - Old value: "$75 million (privately held)" (string)
[SERVER DEBUG] - New value: "$75 million (privately held)" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: marketCapitalization
[SERVER DEBUG] - field_id: 19
[SERVER DEBUG] - response_value: "$75 million (privately held)"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "marketCapitalization":
[SERVER DEBUG] - Expected: "$75 million (privately held)"
[SERVER DEBUG] - Actual: "$75 million (privately held)"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "marketCapitalization" (ID: 1557)
[SERVER DEBUG] --- Finished processing field "marketCapitalization" ---

[SERVER DEBUG] Processing field: "lifetimeCustomerValue" (ID: 20)
[SERVER DEBUG] Original value: $1,250
[SERVER DEBUG] Normalized value: "$1,250" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "lifetimeCustomerValue" in database
[SERVER DEBUG] - Old value: "$1,250" (string)
[SERVER DEBUG] - New value: "$1,250" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: lifetimeCustomerValue
[SERVER DEBUG] - field_id: 20
[SERVER DEBUG] - response_value: "$1,250"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "lifetimeCustomerValue":
[SERVER DEBUG] - Expected: "$1,250"
[SERVER DEBUG] - Actual: "$1,250"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "lifetimeCustomerValue" (ID: 1558)
[SERVER DEBUG] --- Finished processing field "lifetimeCustomerValue" ---

[SERVER DEBUG] Processing field: "annualRecurringRevenue" (ID: 21)
[SERVER DEBUG] Original value: 5,000,000
[SERVER DEBUG] Normalized value: "5,000,000" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "annualRecurringRevenue" in database
[SERVER DEBUG] - Old value: "5,000,000" (string)
[SERVER DEBUG] - New value: "5,000,000" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: annualRecurringRevenue
[SERVER DEBUG] - field_id: 21
[SERVER DEBUG] - response_value: "5,000,000"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "annualRecurringRevenue":
[SERVER DEBUG] - Expected: "5,000,000"
[SERVER DEBUG] - Actual: "5,000,000"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "annualRecurringRevenue" (ID: 1559)
[SERVER DEBUG] --- Finished processing field "annualRecurringRevenue" ---

[SERVER DEBUG] Processing field: "monthlyRecurringRevenue" (ID: 22)
[SERVER DEBUG] Original value: 12,500,000
[SERVER DEBUG] Normalized value: "12,500,000" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "monthlyRecurringRevenue" in database
[SERVER DEBUG] - Old value: "12,500,000" (string)
[SERVER DEBUG] - New value: "12,500,000" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: monthlyRecurringRevenue
[SERVER DEBUG] - field_id: 22
[SERVER DEBUG] - response_value: "12,500,000"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "monthlyRecurringRevenue":
[SERVER DEBUG] - Expected: "12,500,000"
[SERVER DEBUG] - Actual: "12,500,000"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "monthlyRecurringRevenue" (ID: 1560)
[SERVER DEBUG] --- Finished processing field "monthlyRecurringRevenue" ---

[SERVER DEBUG] Processing field: "investigationsIncidents" (ID: 23)
[SERVER DEBUG] Original value: No significant incidents in the past 3 years
[SERVER DEBUG] Normalized value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "investigationsIncidents" in database
[SERVER DEBUG] - Old value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] - New value: "No significant incidents in the past 3 years" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: investigationsIncidents
[SERVER DEBUG] - field_id: 23
[SERVER DEBUG] - response_value: "No significant incidents in the past 3 years"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "investigationsIncidents":
[SERVER DEBUG] - Expected: "No significant incidents in the past 3 years"
[SERVER DEBUG] - Actual: "No significant incidents in the past 3 years"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "investigationsIncidents" (ID: 1561)
[SERVER DEBUG] --- Finished processing field "investigationsIncidents" ---

[SERVER DEBUG] Processing field: "financialStatements" (ID: 24)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "financialStatements" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: financialStatements
[SERVER DEBUG] - field_id: 24
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "financialStatements":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "financialStatements" (ID: 1562)
[SERVER DEBUG] --- Finished processing field "financialStatements" ---

[SERVER DEBUG] Processing field: "operationalPolicies" (ID: 25)
[SERVER DEBUG] Original value: ISO 27001 certified, SOC 2 Type II compliant
[SERVER DEBUG] Normalized value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "operationalPolicies" in database
[SERVER DEBUG] - Old value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] - New value: "ISO 27001 certified, SOC 2 Type II compliant" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: operationalPolicies
[SERVER DEBUG] - field_id: 25
[SERVER DEBUG] - response_value: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "operationalPolicies":
[SERVER DEBUG] - Expected: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] - Actual: "ISO 27001 certified, SOC 2 Type II compliant"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "operationalPolicies" (ID: 1563)
[SERVER DEBUG] --- Finished processing field "operationalPolicies" ---

[SERVER DEBUG] Processing field: "dataVolume" (ID: 26)
[SERVER DEBUG] Original value: Approximately 2 million records per month
[SERVER DEBUG] Normalized value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "dataVolume" in database
[SERVER DEBUG] - Old value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - New value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: dataVolume
[SERVER DEBUG] - field_id: 26
[SERVER DEBUG] - response_value: "Approximately 2 million records per month"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "dataVolume":
[SERVER DEBUG] - Expected: "Approximately 2 million records per month"
[SERVER DEBUG] - Actual: "Approximately 2 million records per month"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "dataVolume" (ID: 1564)
[SERVER DEBUG] --- Finished processing field "dataVolume" ---

[SERVER DEBUG] Processing field: "dataTypes" (ID: 27)
[SERVER DEBUG] Original value: Financial transaction data, Account balances, Customer KYC information
[SERVER DEBUG] Normalized value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "dataTypes" in database
[SERVER DEBUG] - Old value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] - New value: "Financial transaction data, Account balances, Customer KYC information" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: dataTypes
[SERVER DEBUG] - field_id: 27
[SERVER DEBUG] - response_value: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "dataTypes":
[SERVER DEBUG] - Expected: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] - Actual: "Financial transaction data, Account balances, Customer KYC information"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "dataTypes" (ID: 1565)
[SERVER DEBUG] --- Finished processing field "dataTypes" ---

[SERVER DEBUG] Processing field: "sanctionsCheck" (ID: 28)
[SERVER DEBUG] Original value: Approximately 2 million records per month
[SERVER DEBUG] Normalized value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "sanctionsCheck" in database
[SERVER DEBUG] - Old value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - New value: "Approximately 2 million records per month" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: sanctionsCheck
[SERVER DEBUG] - field_id: 28
[SERVER DEBUG] - response_value: "Approximately 2 million records per month"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "sanctionsCheck":
[SERVER DEBUG] - Expected: "Approximately 2 million records per month"
[SERVER DEBUG] - Actual: "Approximately 2 million records per month"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "sanctionsCheck" (ID: 1566)
[SERVER DEBUG] --- Finished processing field "sanctionsCheck" ---

[SERVER DEBUG] Processing field: "dueDiligence" (ID: 29)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "dueDiligence" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: dueDiligence
[SERVER DEBUG] - field_id: 29
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "dueDiligence":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "dueDiligence" (ID: 1567)
[SERVER DEBUG] --- Finished processing field "dueDiligence" ---

[SERVER DEBUG] Processing field: "regulatoryActions" (ID: 30)
[SERVER DEBUG] Original value: Yes
[SERVER DEBUG] Normalized value: "Yes" (string)
[SERVER DEBUG] Field status: COMPLETE
[SERVER DEBUG] Existing response found: YES
[SERVER DEBUG] UPDATING field "regulatoryActions" in database
[SERVER DEBUG] - Old value: "Yes" (string)
[SERVER DEBUG] - New value: "Yes" (string)
[SERVER DEBUG] - Old status: COMPLETE, New status: COMPLETE
[SERVER DEBUG] ABOUT TO UPDATE - DOUBLE CHECK VALUES:
[SERVER DEBUG] - field_key: regulatoryActions
[SERVER DEBUG] - field_id: 30
[SERVER DEBUG] - response_value: "Yes"
[SERVER DEBUG] ✅ UPDATE VERIFICATION for field "regulatoryActions":
[SERVER DEBUG] - Expected: "Yes"
[SERVER DEBUG] - Actual: "Yes"
[SERVER DEBUG] - Match: YES
[SERVER DEBUG] ✅ UPDATE SUCCESSFUL for field "regulatoryActions" (ID: 1568)
[SERVER DEBUG] --- Finished processing field "regulatoryActions" ---

[SERVER DEBUG] ERROR: Field not found in database schema: "taskId"
[KYB API Debug] Task has submission date, enforcing SUBMITTED status and 100% progress {
  submissionDate: '2025-04-20T17:28:15.246Z',
  clientProvidedStatus: 'ready_for_submission',
  originalProgress: 100
}
[WebSocket] Broadcasting task update for task 468: progress=100, status=submitted
[WebSocket] Broadcast "task_updated" sent to 0 clients
===============================================
[SERVER DEBUG] PREPARING RESPONSE at 2025-04-20T17:29:18.655Z
[SERVER DEBUG] Found 60 fields in database after update
===============================================
[SERVER DEBUG] Checking field corporateRegistration in updated data: "No"
[SERVER DEBUG] Checking field goodStanding in updated data: "Yes"
[SERVER DEBUG] Checking field regulatoryActions in updated data: "Yes"
[SERVER DEBUG] Checking field investigationsIncidents in updated data: "No significant incidents in the past 3 years"
[SERVER DEBUG] No fields with value "asdf" found in response data
[SERVER DEBUG] Sending response with 30 fields, status: submitted, progress: 100%
[SERVER DEBUG] Updating task.savedFormData to ensure persistence across navigation
[SERVER DEBUG] ✅ Successfully updated task.savedFormData with latest form data
===============================================
[Auth] Using cached user data: 240
[Auth] Using cached user data: 240
[Auth] Using cached user data: 240
[Auth] Using cached user data: 240
[Auth] Using cached user data: 240
[Auth] Using cached user data: 240
[Auth] Using cached user data: 240
[Auth] Using cached user data: 240
[Auth] Using cached user data: 240
[Auth] Using cached user data: 240
[Auth] Returning user session data
5:29:24 PM [info] GET /api/companies/current 304 in 29ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:29:24 PM [info] GET /api/tasks 304 in 31ms :: [{"id":469,"title":"2. Security Assessment: DevelopmentTestingS","description...
New WebSocket client connected
5:29:24 PM [info] GET /api/tasks 304 in 31ms :: [{"id":469,"title":"2. Security Assessment: DevelopmentTestingS","description...
New WebSocket client connected
5:29:25 PM [info] GET /api/companies/current 304 in 30ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:29:26 PM [info] GET /api/companies/current 304 in 30ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:29:27 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:29:29 PM [info] GET /api/companies/current 304 in 30ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[Current Company] Using cached company data: 199
5:29:30 PM [info] GET /api/companies/current 304 in 32ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:29:31 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[Auth] Using cached user data: 240
5:29:32 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:29:33 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:29:35 PM [info] GET /api/companies/current 304 in 30ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:29:36 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:29:37 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
[Current Company] Fetching company for user: { userId: 240, companyId: 199 }
[Current Company] Found company: {
  id: 199,
  name: 'DevelopmentTestingS',
  onboardingCompleted: false,
  riskScore: null,
  isDemo: true
}
5:29:38 PM [info] GET /api/companies/current 304 in 63ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:29:39 PM [info] GET /api/tasks 304 in 31ms :: [{"id":469,"title":"2. Security Assessment: DevelopmentTestingS","description...
5:29:39 PM [info] GET /api/companies/current 304 in 33ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:29:41 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:29:42 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:29:43 PM [info] GET /api/companies/current 304 in 33ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...
5:29:44 PM [info] GET /api/companies/current 304 in 31ms :: {"id":199,"name":"DevelopmentTestingS","description":"FinTech partner company...