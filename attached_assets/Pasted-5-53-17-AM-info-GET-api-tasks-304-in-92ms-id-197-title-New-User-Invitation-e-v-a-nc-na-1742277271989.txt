5:53:17 AM [info] GET /api/tasks 304 in 92ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
New WebSocket client connected
WebSocket client disconnected with code 1005 and reason: 
[Auth] Deserializing user: 150
[2025-03-18T05:53:18.717Z] [INFO] [CardRoutes] Fetching CARD task {"companyName":"Vector","userId":150,"companyId":113}
[2025-03-18T05:53:18.751Z] [INFO] [CardRoutes] Task lookup result {"found":true,"taskId":196,"taskType":"company_card","taskStatus":"in_progress"}
5:53:18 AM [info] GET /api/tasks/card/Vector 304 in 66ms :: {"id":196,"title":"Company CARD: Vector","description":"Provide Compliance an...
New WebSocket client connected
[Auth] Deserializing user: 150
[Files] Processing file upload request
[Files] File details: {
  originalname: 'soc2-type2 (1).pdf',
  mimetype: 'application/pdf',
  size: 760657,
  filename: '20250318055322.pdf'
}
[Files] Document category detection: {
  filename: 'soc2-type2 (1).pdf',
  lowerFilename: 'soc2-type2 (1).pdf',
  detectedCategory: 'soc2_audit',
  timestamp: '2025-03-18T05:53:22.890Z',
  matches: {
    isSoc2: true,
    isIso27001: false,
    isPentest: false,
    isBusinessContinuity: false,
    exactMatch: 'soc2-type2 (1).pdf'
  }
}
[Files] Detected category: soc2_audit
[Files] Created file record: {
  id: 447,
  name: 'soc2-type2 (1).pdf',
  status: 'uploaded',
  category: 'soc2_audit'
}
[WebSocket] Broadcasting document count update: {
  type: 'COUNT_UPDATE',
  category: 'soc2_audit',
  count: 1,
  companyId: '113'
}
5:53:22 AM [info] POST /api/files 201 in 705ms :: {"id":447,"name":"soc2-type2 (1).pdf","size":760657,"type":"application/pdf",...
[Auth] Deserializing user: 150
[Auth] Deserializing user: 150
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
5:53:23 AM [info] GET /api/companies/current 304 in 62ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
5:53:23 AM [info] GET /api/tasks 304 in 92ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Files] Processing file upload request
[Files] File details: {
  originalname: 'Anonymised-BlackBox-Penetration-Testing-Report.pdf',
  mimetype: 'application/pdf',
  size: 2328443,
  filename: '20250318055323.pdf'
}
[Files] Document category detection: {
  filename: 'Anonymised-BlackBox-Penetration-Testing-Report.pdf',
  lowerFilename: 'anonymised-blackbox-penetration-testing-report.pdf',
  detectedCategory: 'pentest_report',
  timestamp: '2025-03-18T05:53:25.310Z',
  matches: {
    isSoc2: false,
    isIso27001: false,
    isPentest: false,
    isBusinessContinuity: false,
    exactMatch: 'anonymised-blackbox-penetration-testing-report.pdf'
  }
}
[Files] Detected category: pentest_report
[Files] Created file record: {
  id: 448,
  name: 'Anonymised-BlackBox-Penetration-Testing-Report.pdf',
  status: 'uploaded',
  category: 'pentest_report'
}
[WebSocket] Broadcasting document count update: {
  type: 'COUNT_UPDATE',
  category: 'pentest_report',
  count: 1,
  companyId: '113'
}
5:53:25 AM [info] POST /api/files 201 in 2263ms :: {"id":448,"name":"Anonymised-BlackBox-Penetration-Testing-Report.pdf","size":...
[Auth] Deserializing user: 150
[Files] Processing file upload request
[Files] File details: {
  originalname: 'spg-business-continuity-plan.pdf',
  mimetype: 'application/pdf',
  size: 200021,
  filename: '20250318055325.pdf'
}
[Files] Document category detection: {
  filename: 'spg-business-continuity-plan.pdf',
  lowerFilename: 'spg-business-continuity-plan.pdf',
  detectedCategory: 'business_continuity',
  timestamp: '2025-03-18T05:53:25.628Z',
  matches: {
    isSoc2: false,
    isIso27001: false,
    isPentest: false,
    isBusinessContinuity: false,
    exactMatch: 'spg-business-continuity-plan.pdf'
  }
}
[Files] Detected category: business_continuity
[Files] Created file record: {
  id: 449,
  name: 'spg-business-continuity-plan.pdf',
  status: 'uploaded',
  category: 'business_continuity'
}
[WebSocket] Broadcasting document count update: {
  type: 'COUNT_UPDATE',
  category: 'business_continuity',
  count: 1,
  companyId: '113'
}
5:53:25 AM [info] POST /api/files 201 in 192ms :: {"id":449,"name":"spg-business-continuity-plan.pdf","size":200021,"type":"app...
[Auth] Deserializing user: 150
[Files] Processing file upload request
[Files] File details: {
  originalname: 'Anonymized-ISO-27001-Assessment-Report (1).pdf',
  mimetype: 'application/pdf',
  size: 889081,
  filename: '20250318055325.pdf'
}
[Files] Document category detection: {
  filename: 'Anonymized-ISO-27001-Assessment-Report (1).pdf',
  lowerFilename: 'anonymized-iso-27001-assessment-report (1).pdf',
  detectedCategory: 'iso27001_cert',
  timestamp: '2025-03-18T05:53:26.643Z',
  matches: {
    isSoc2: false,
    isIso27001: false,
    isPentest: false,
    isBusinessContinuity: false,
    exactMatch: 'anonymized-iso-27001-assessment-report (1).pdf'
  }
}
[Files] Detected category: iso27001_cert
[Files] Created file record: {
  id: 450,
  name: 'Anonymized-ISO-27001-Assessment-Report (1).pdf',
  status: 'uploaded',
  category: 'iso27001_cert'
}
[WebSocket] Broadcasting document count update: {
  type: 'COUNT_UPDATE',
  category: 'iso27001_cert',
  count: 1,
  companyId: '113'
}
5:53:26 AM [info] POST /api/files 201 in 895ms :: {"id":450,"name":"Anonymized-ISO-27001-Assessment-Report (1).pdf","size":8890...
WebSocket client disconnected with code 1005 and reason: 
[Auth] Deserializing user: 150
[2025-03-18T05:53:28.105Z] [INFO] [CardRoutes] Fetching CARD fields
5:53:28 AM [info] GET /api/card/fields 304 in 119ms :: [{"id":1,"field_key":"security_access_control","wizard_section":"Security","q...
[Auth] Deserializing user: 150
[PDF Service] Extraction complete: {
  fileName: '20250318055322.pdf',
  totalPages: 56,
  extractedPages: 56,
  totalContent: 137813,
  averageContentPerPage: 2461,
  invalidContentItems: 3331,
  timestamp: '2025-03-18T05:53:29.598Z'
}
[DocumentChunking] Document prepared: {
  fileName: '20250318055322.pdf',
  totalChunks: 17,
  totalContent: 64000,
  averageChunkSize: 3765,
  invalidChunks: 0,
  timestamp: '2025-03-18T05:53:29.598Z'
}
[Document Processing] Starting document processing: { fileId: 447, totalChunks: 17, timestamp: '2025-03-18T05:53:29.629Z' }
[Document Processing] Processing chunk: {
  fileId: 447,
  chunkIndex: 0,
  totalChunks: 17,
  timestamp: '2025-03-18T05:53:29.629Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4094,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:53:29.629Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:53:29.630Z' }
[Auth] Deserializing user: 150
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
5:53:29 AM [info] POST /api/documents/447/process 200 in 1311ms :: {"status":"processing","totalChunks":17}
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
5:53:29 AM [info] GET /api/companies/current 304 in 62ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
5:53:29 AM [info] GET /api/tasks 304 in 89ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Auth] Deserializing user: 150
5:53:29 AM [info] GET /api/documents/447/progress 200 in 61ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":17},"ans...
New WebSocket client connected
[Auth] Deserializing user: 150
5:53:31 AM [info] GET /api/documents/447/progress 304 in 68ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":17},"ans...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:53:31.416Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 0,
  batchProgress: '1-1',
  answersFound: 1,
  timestamp: '2025-03-18T05:53:31.417Z'
}
[Document Processing] Progress update: {
  fileId: 447,
  chunkIndex: 0,
  answersFound: 1,
  timestamp: '2025-03-18T05:53:31.448Z'
}
[Document Processing] Processing chunk: {
  fileId: 447,
  chunkIndex: 1,
  totalChunks: 17,
  timestamp: '2025-03-18T05:53:31.548Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4055,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:53:31.548Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:53:31.548Z' }
[Auth] Deserializing user: 150
5:53:32 AM [info] GET /api/documents/447/progress 200 in 61ms :: {"status":"processing","progress":{"chunksProcessed":1,"totalChunks":17},"ans...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:53:32.644Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 1,
  batchProgress: '2-2',
  answersFound: 1,
  timestamp: '2025-03-18T05:53:32.644Z'
}
[Document Processing] Progress update: {
  fileId: 447,
  chunkIndex: 1,
  answersFound: 2,
  timestamp: '2025-03-18T05:53:32.674Z'
}
[Document Processing] Processing chunk: {
  fileId: 447,
  chunkIndex: 2,
  totalChunks: 17,
  timestamp: '2025-03-18T05:53:32.774Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3909,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:53:32.775Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:53:32.775Z' }
[Auth] Deserializing user: 150
5:53:33 AM [info] GET /api/documents/447/progress 200 in 61ms :: {"status":"processing","progress":{"chunksProcessed":2,"totalChunks":17},"ans...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:53:33.674Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 2,
  batchProgress: '3-3',
  answersFound: 1,
  timestamp: '2025-03-18T05:53:33.674Z'
}
[Document Processing] Progress update: {
  fileId: 447,
  chunkIndex: 2,
  answersFound: 3,
  timestamp: '2025-03-18T05:53:33.705Z'
}
[Document Processing] Processing chunk: {
  fileId: 447,
  chunkIndex: 3,
  totalChunks: 17,
  timestamp: '2025-03-18T05:53:33.805Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3901,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:53:33.805Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:53:33.805Z' }
[Auth] Deserializing user: 150
5:53:34 AM [info] GET /api/documents/447/progress 200 in 61ms :: {"status":"processing","progress":{"chunksProcessed":3,"totalChunks":17},"ans...
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Auth] Deserializing user: 150
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
5:53:34 AM [info] GET /api/companies/current 304 in 60ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
5:53:34 AM [info] GET /api/tasks 304 in 88ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Auth] Deserializing user: 150
5:53:35 AM [info] GET /api/documents/447/progress 304 in 58ms :: {"status":"processing","progress":{"chunksProcessed":3,"totalChunks":17},"ans...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:53:36.040Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 3,
  batchProgress: '4-4',
  answersFound: 1,
  timestamp: '2025-03-18T05:53:36.040Z'
}
[Document Processing] Progress update: {
  fileId: 447,
  chunkIndex: 3,
  answersFound: 4,
  timestamp: '2025-03-18T05:53:36.070Z'
}
[Document Processing] Processing chunk: {
  fileId: 447,
  chunkIndex: 4,
  totalChunks: 17,
  timestamp: '2025-03-18T05:53:36.171Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3981,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:53:36.172Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:53:36.172Z' }
[Auth] Deserializing user: 150
5:53:36 AM [info] GET /api/documents/447/progress 200 in 58ms :: {"status":"processing","progress":{"chunksProcessed":4,"totalChunks":17},"ans...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:53:37.297Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 4,
  batchProgress: '5-5',
  answersFound: 1,
  timestamp: '2025-03-18T05:53:37.297Z'
}
[Document Processing] Progress update: {
  fileId: 447,
  chunkIndex: 4,
  answersFound: 5,
  timestamp: '2025-03-18T05:53:37.327Z'
}
[AnswerAggregation] Answers aggregated: {
  totalAnswers: 5,
  uniqueFields: 1,
  aggregatedCount: 4,
  timestamp: '2025-03-18T05:53:37.346Z'
}
[Document Processing] Batch aggregation: {
  fileId: 447,
  chunkIndex: 4,
  aggregatedAnswers: 4,
  timestamp: '2025-03-18T05:53:37.377Z'
}
[Document Processing] Processing chunk: {
  fileId: 447,
  chunkIndex: 5,
  totalChunks: 17,
  timestamp: '2025-03-18T05:53:37.477Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3919,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:53:37.477Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:53:37.477Z' }
[Auth] Deserializing user: 150
5:53:38 AM [info] GET /api/documents/447/progress 200 in 60ms :: {"status":"processing","progress":{"chunksProcessed":5,"totalChunks":17},"ans...
[Auth] Deserializing user: 150
5:53:39 AM [info] GET /api/documents/447/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":5,"totalChunks":17},"ans...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:53:39.784Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 5,
  batchProgress: '6-6',
  answersFound: 1,
  timestamp: '2025-03-18T05:53:39.785Z'
}
[Document Processing] Progress update: {
  fileId: 447,
  chunkIndex: 5,
  answersFound: 6,
  timestamp: '2025-03-18T05:53:39.814Z'
}
[Document Processing] Processing chunk: {
  fileId: 447,
  chunkIndex: 6,
  totalChunks: 17,
  timestamp: '2025-03-18T05:53:39.915Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3915,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:53:39.915Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:53:39.915Z' }
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
[Auth] Deserializing user: 150
5:53:40 AM [info] GET /api/companies/current 304 in 60ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
5:53:40 AM [info] GET /api/tasks 304 in 92ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Auth] Deserializing user: 150
5:53:40 AM [info] GET /api/documents/447/progress 200 in 60ms :: {"status":"processing","progress":{"chunksProcessed":6,"totalChunks":17},"ans...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:53:40.879Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 6,
  batchProgress: '7-7',
  answersFound: 1,
  timestamp: '2025-03-18T05:53:40.879Z'
}
[Document Processing] Progress update: {
  fileId: 447,
  chunkIndex: 6,
  answersFound: 7,
  timestamp: '2025-03-18T05:53:40.910Z'
}
[Document Processing] Processing chunk: {
  fileId: 447,
  chunkIndex: 7,
  totalChunks: 17,
  timestamp: '2025-03-18T05:53:41.010Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4002,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:53:41.010Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:53:41.010Z' }
[Auth] Deserializing user: 150
5:53:41 AM [info] GET /api/documents/447/progress 200 in 60ms :: {"status":"processing","progress":{"chunksProcessed":7,"totalChunks":17},"ans...
[Auth] Deserializing user: 150
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:53:42.906Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 7,
  batchProgress: '8-8',
  answersFound: 1,
  timestamp: '2025-03-18T05:53:42.906Z'
}
5:53:42 AM [info] GET /api/documents/447/progress 304 in 62ms :: {"status":"processing","progress":{"chunksProcessed":7,"totalChunks":17},"ans...
[Document Processing] Progress update: {
  fileId: 447,
  chunkIndex: 7,
  answersFound: 8,
  timestamp: '2025-03-18T05:53:42.946Z'
}
[Document Processing] Processing chunk: {
  fileId: 447,
  chunkIndex: 8,
  totalChunks: 17,
  timestamp: '2025-03-18T05:53:43.046Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3938,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:53:43.046Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:53:43.047Z' }
[Auth] Deserializing user: 150
5:53:44 AM [info] GET /api/documents/447/progress 200 in 58ms :: {"status":"processing","progress":{"chunksProcessed":8,"totalChunks":17},"ans...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:53:44.895Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 8,
  batchProgress: '9-9',
  answersFound: 1,
  timestamp: '2025-03-18T05:53:44.895Z'
}
[Document Processing] Progress update: {
  fileId: 447,
  chunkIndex: 8,
  answersFound: 9,
  timestamp: '2025-03-18T05:53:44.924Z'
}
[Document Processing] Processing chunk: {
  fileId: 447,
  chunkIndex: 9,
  totalChunks: 17,
  timestamp: '2025-03-18T05:53:45.025Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3981,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:53:45.025Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:53:45.025Z' }
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Auth] Deserializing user: 150
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
5:53:45 AM [info] GET /api/companies/current 304 in 58ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Auth] Deserializing user: 150
5:53:45 AM [info] GET /api/documents/447/progress 200 in 60ms :: {"status":"processing","progress":{"chunksProcessed":9,"totalChunks":17},"ans...
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
5:53:45 AM [info] GET /api/tasks 304 in 89ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Auth] Deserializing user: 150
5:53:46 AM [info] GET /api/documents/447/progress 304 in 60ms :: {"status":"processing","progress":{"chunksProcessed":9,"totalChunks":17},"ans...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:53:47.463Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 9,
  batchProgress: '10-10',
  answersFound: 1,
  timestamp: '2025-03-18T05:53:47.464Z'
}
[Document Processing] Progress update: {
  fileId: 447,
  chunkIndex: 9,
  answersFound: 10,
  timestamp: '2025-03-18T05:53:47.495Z'
}
[AnswerAggregation] Answers aggregated: {
  totalAnswers: 10,
  uniqueFields: 1,
  aggregatedCount: 9,
  timestamp: '2025-03-18T05:53:47.526Z'
}
[Document Processing] Batch aggregation: {
  fileId: 447,
  chunkIndex: 9,
  aggregatedAnswers: 9,
  timestamp: '2025-03-18T05:53:47.556Z'
}
[Document Processing] Processing chunk: {
  fileId: 447,
  chunkIndex: 10,
  totalChunks: 17,
  timestamp: '2025-03-18T05:53:47.656Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3951,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:53:47.656Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:53:47.657Z' }
[Auth] Deserializing user: 150
5:53:48 AM [info] GET /api/documents/447/progress 200 in 61ms :: {"status":"processing","progress":{"chunksProcessed":10,"totalChunks":17},"an...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:53:48.554Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 10,
  batchProgress: '11-11',
  answersFound: 1,
  timestamp: '2025-03-18T05:53:48.554Z'
}
[Document Processing] Progress update: {
  fileId: 447,
  chunkIndex: 10,
  answersFound: 11,
  timestamp: '2025-03-18T05:53:48.586Z'
}
[Document Processing] Processing chunk: {
  fileId: 447,
  chunkIndex: 11,
  totalChunks: 17,
  timestamp: '2025-03-18T05:53:48.686Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3970,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:53:48.686Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:53:48.687Z' }
[Auth] Deserializing user: 150
5:53:49 AM [info] GET /api/documents/447/progress 200 in 61ms :: {"status":"processing","progress":{"chunksProcessed":11,"totalChunks":17},"an...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:53:49.535Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 11,
  batchProgress: '12-12',
  answersFound: 1,
  timestamp: '2025-03-18T05:53:49.535Z'
}
[Document Processing] Progress update: {
  fileId: 447,
  chunkIndex: 11,
  answersFound: 12,
  timestamp: '2025-03-18T05:53:49.566Z'
}
[Document Processing] Processing chunk: {
  fileId: 447,
  chunkIndex: 12,
  totalChunks: 17,
  timestamp: '2025-03-18T05:53:49.666Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3916,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:53:49.666Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:53:49.667Z' }
[Auth] Deserializing user: 150
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
5:53:50 AM [info] GET /api/documents/447/progress 200 in 59ms :: {"status":"processing","progress":{"chunksProcessed":12,"totalChunks":17},"an...
5:53:50 AM [info] GET /api/companies/current 304 in 60ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
5:53:50 AM [info] GET /api/tasks 304 in 91ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:53:51.442Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 12,
  batchProgress: '13-13',
  answersFound: 1,
  timestamp: '2025-03-18T05:53:51.442Z'
}
[Document Processing] Progress update: {
  fileId: 447,
  chunkIndex: 12,
  answersFound: 13,
  timestamp: '2025-03-18T05:53:51.473Z'
}
[Auth] Deserializing user: 150
[Document Processing] Processing chunk: {
  fileId: 447,
  chunkIndex: 13,
  totalChunks: 17,
  timestamp: '2025-03-18T05:53:51.574Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3922,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:53:51.574Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:53:51.574Z' }
5:53:51 AM [info] GET /api/documents/447/progress 200 in 60ms :: {"status":"processing","progress":{"chunksProcessed":13,"totalChunks":17},"an...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:53:52.479Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 13,
  batchProgress: '14-14',
  answersFound: 1,
  timestamp: '2025-03-18T05:53:52.479Z'
}
[Document Processing] Progress update: {
  fileId: 447,
  chunkIndex: 13,
  answersFound: 14,
  timestamp: '2025-03-18T05:53:52.513Z'
}
[Document Processing] Processing chunk: {
  fileId: 447,
  chunkIndex: 14,
  totalChunks: 17,
  timestamp: '2025-03-18T05:53:52.613Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4036,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:53:52.614Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:53:52.614Z' }
[Auth] Deserializing user: 150
5:53:52 AM [info] GET /api/documents/447/progress 200 in 62ms :: {"status":"processing","progress":{"chunksProcessed":14,"totalChunks":17},"an...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:53:53.687Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 14,
  batchProgress: '15-15',
  answersFound: 1,
  timestamp: '2025-03-18T05:53:53.687Z'
}
[Document Processing] Progress update: {
  fileId: 447,
  chunkIndex: 14,
  answersFound: 15,
  timestamp: '2025-03-18T05:53:53.718Z'
}
[AnswerAggregation] Answers aggregated: {
  totalAnswers: 15,
  uniqueFields: 1,
  aggregatedCount: 13,
  timestamp: '2025-03-18T05:53:53.757Z'
}
[Document Processing] Batch aggregation: {
  fileId: 447,
  chunkIndex: 14,
  aggregatedAnswers: 13,
  timestamp: '2025-03-18T05:53:53.789Z'
}
[Document Processing] Processing chunk: {
  fileId: 447,
  chunkIndex: 15,
  totalChunks: 17,
  timestamp: '2025-03-18T05:53:53.890Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4030,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:53:53.890Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:53:53.890Z' }
[Auth] Deserializing user: 150
5:53:53 AM [info] GET /api/documents/447/progress 200 in 62ms :: {"status":"processing","progress":{"chunksProcessed":15,"totalChunks":17},"an...
[Auth] Deserializing user: 150
5:53:55 AM [info] GET /api/documents/447/progress 304 in 61ms :: {"status":"processing","progress":{"chunksProcessed":15,"totalChunks":17},"an...
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
5:53:55 AM [info] GET /api/companies/current 304 in 59ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:53:55.721Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 15,
  batchProgress: '16-16',
  answersFound: 1,
  timestamp: '2025-03-18T05:53:55.722Z'
}
[Auth] Deserializing user: 150
[Document Processing] Progress update: {
  fileId: 447,
  chunkIndex: 15,
  answersFound: 16,
  timestamp: '2025-03-18T05:53:55.753Z'
}
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
[Document Processing] Processing chunk: {
  fileId: 447,
  chunkIndex: 16,
  totalChunks: 17,
  timestamp: '2025-03-18T05:53:55.853Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 462,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:53:55.853Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:53:55.853Z' }
5:53:55 AM [info] GET /api/tasks 304 in 90ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Auth] Deserializing user: 150
5:53:56 AM [info] GET /api/documents/447/progress 200 in 86ms :: {"status":"processing","progress":{"chunksProcessed":16,"totalChunks":17},"an...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:53:57.090Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 16,
  batchProgress: '17-17',
  answersFound: 1,
  timestamp: '2025-03-18T05:53:57.090Z'
}
[Document Processing] Progress update: {
  fileId: 447,
  chunkIndex: 16,
  answersFound: 17,
  timestamp: '2025-03-18T05:53:57.121Z'
}
[AnswerAggregation] Answers aggregated: {
  totalAnswers: 17,
  uniqueFields: 1,
  aggregatedCount: 15,
  timestamp: '2025-03-18T05:53:57.171Z'
}
[Document Processing] Batch aggregation: {
  fileId: 447,
  chunkIndex: 16,
  aggregatedAnswers: 15,
  timestamp: '2025-03-18T05:53:57.203Z'
}
[AnswerAggregation] Answers aggregated: {
  totalAnswers: 17,
  uniqueFields: 1,
  aggregatedCount: 15,
  timestamp: '2025-03-18T05:53:57.355Z'
}
[Document Processing] Processing completed: {
  fileId: 447,
  totalAnswers: 17,
  aggregatedAnswers: 15,
  timestamp: '2025-03-18T05:53:57.385Z'
}
[Auth] Deserializing user: 150
5:53:57 AM [info] GET /api/documents/447/progress 200 in 87ms :: {"status":"processed","progress":{"chunksProcessed":17,"totalChunks":17},"ans...
[Auth] Deserializing user: 150
[PDF Service] Extraction complete: {
  fileName: '20250318055323.pdf',
  totalPages: 60,
  extractedPages: 60,
  totalContent: 72286,
  averageContentPerPage: 1205,
  invalidContentItems: 497,
  timestamp: '2025-03-18T05:53:58.721Z'
}
[DocumentChunking] Document prepared: {
  fileName: '20250318055323.pdf',
  totalChunks: 17,
  totalContent: 64000,
  averageChunkSize: 3765,
  invalidChunks: 0,
  timestamp: '2025-03-18T05:53:58.721Z'
}
[Document Processing] Starting document processing: { fileId: 448, totalChunks: 17, timestamp: '2025-03-18T05:53:58.753Z' }
[Document Processing] Processing chunk: {
  fileId: 448,
  chunkIndex: 0,
  totalChunks: 17,
  timestamp: '2025-03-18T05:53:58.753Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3906,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:53:58.753Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:53:58.753Z' }
5:53:58 AM [info] POST /api/documents/448/process 200 in 936ms :: {"status":"processing","totalChunks":17}
[Auth] Deserializing user: 150
5:53:58 AM [info] GET /api/documents/448/progress 200 in 61ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":17},"ans...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:53:59.505Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 0,
  batchProgress: '1-1',
  answersFound: 1,
  timestamp: '2025-03-18T05:53:59.505Z'
}
[Document Processing] Progress update: {
  fileId: 448,
  chunkIndex: 0,
  answersFound: 1,
  timestamp: '2025-03-18T05:53:59.535Z'
}
[Document Processing] Processing chunk: {
  fileId: 448,
  chunkIndex: 1,
  totalChunks: 17,
  timestamp: '2025-03-18T05:53:59.636Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3978,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:53:59.636Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:53:59.636Z' }
[Auth] Deserializing user: 150
5:54:00 AM [info] GET /api/documents/448/progress 200 in 60ms :: {"status":"processing","progress":{"chunksProcessed":1,"totalChunks":17},"ans...
[WebSocket] Received pong
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:54:00.681Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 1,
  batchProgress: '2-2',
  answersFound: 1,
  timestamp: '2025-03-18T05:54:00.681Z'
}
[Document Processing] Progress update: {
  fileId: 448,
  chunkIndex: 1,
  answersFound: 2,
  timestamp: '2025-03-18T05:54:00.712Z'
}
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
[Document Processing] Processing chunk: {
  fileId: 448,
  chunkIndex: 2,
  totalChunks: 17,
  timestamp: '2025-03-18T05:54:00.812Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4000,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:54:00.812Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:54:00.812Z' }
5:54:00 AM [info] GET /api/companies/current 304 in 61ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
5:54:01 AM [info] GET /api/tasks 304 in 93ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Auth] Deserializing user: 150
5:54:01 AM [info] GET /api/documents/448/progress 200 in 59ms :: {"status":"processing","progress":{"chunksProcessed":2,"totalChunks":17},"ans...
[Auth] Deserializing user: 150
5:54:02 AM [info] GET /api/documents/448/progress 304 in 60ms :: {"status":"processing","progress":{"chunksProcessed":2,"totalChunks":17},"ans...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:54:02.737Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 2,
  batchProgress: '3-3',
  answersFound: 1,
  timestamp: '2025-03-18T05:54:02.737Z'
}
[Document Processing] Progress update: {
  fileId: 448,
  chunkIndex: 2,
  answersFound: 3,
  timestamp: '2025-03-18T05:54:02.767Z'
}
[Document Processing] Processing chunk: {
  fileId: 448,
  chunkIndex: 3,
  totalChunks: 17,
  timestamp: '2025-03-18T05:54:02.867Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3980,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:54:02.867Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:54:02.867Z' }
[Auth] Deserializing user: 150
5:54:03 AM [info] GET /api/documents/448/progress 200 in 60ms :: {"status":"processing","progress":{"chunksProcessed":3,"totalChunks":17},"ans...
[Auth] Deserializing user: 150
5:54:04 AM [info] GET /api/documents/448/progress 304 in 61ms :: {"status":"processing","progress":{"chunksProcessed":3,"totalChunks":17},"ans...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:54:05.145Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 3,
  batchProgress: '4-4',
  answersFound: 1,
  timestamp: '2025-03-18T05:54:05.145Z'
}
[Document Processing] Progress update: {
  fileId: 448,
  chunkIndex: 3,
  answersFound: 4,
  timestamp: '2025-03-18T05:54:05.176Z'
}
[Document Processing] Processing chunk: {
  fileId: 448,
  chunkIndex: 4,
  totalChunks: 17,
  timestamp: '2025-03-18T05:54:05.277Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4000,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:54:05.277Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:54:05.277Z' }
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
[Auth] Deserializing user: 150
5:54:06 AM [info] GET /api/companies/current 304 in 61ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
5:54:06 AM [info] GET /api/documents/448/progress 200 in 61ms :: {"status":"processing","progress":{"chunksProcessed":4,"totalChunks":17},"ans...
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
5:54:06 AM [info] GET /api/tasks 304 in 89ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:54:06.610Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 4,
  batchProgress: '5-5',
  answersFound: 1,
  timestamp: '2025-03-18T05:54:06.610Z'
}
[Document Processing] Progress update: {
  fileId: 448,
  chunkIndex: 4,
  answersFound: 5,
  timestamp: '2025-03-18T05:54:06.640Z'
}
[AnswerAggregation] Answers aggregated: {
  totalAnswers: 5,
  uniqueFields: 1,
  aggregatedCount: 5,
  timestamp: '2025-03-18T05:54:06.645Z'
}
[Document Processing] Batch aggregation: {
  fileId: 448,
  chunkIndex: 4,
  aggregatedAnswers: 5,
  timestamp: '2025-03-18T05:54:06.675Z'
}
[Document Processing] Processing chunk: {
  fileId: 448,
  chunkIndex: 5,
  totalChunks: 17,
  timestamp: '2025-03-18T05:54:06.775Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4000,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:54:06.776Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:54:06.776Z' }
[Auth] Deserializing user: 150
5:54:07 AM [info] GET /api/documents/448/progress 200 in 61ms :: {"status":"processing","progress":{"chunksProcessed":5,"totalChunks":17},"ans...
[Auth] Deserializing user: 150
5:54:08 AM [info] GET /api/documents/448/progress 304 in 60ms :: {"status":"processing","progress":{"chunksProcessed":5,"totalChunks":17},"ans...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:54:09.494Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 5,
  batchProgress: '6-6',
  answersFound: 1,
  timestamp: '2025-03-18T05:54:09.494Z'
}
[Document Processing] Progress update: {
  fileId: 448,
  chunkIndex: 5,
  answersFound: 6,
  timestamp: '2025-03-18T05:54:09.524Z'
}
[Auth] Deserializing user: 150
[Document Processing] Processing chunk: {
  fileId: 448,
  chunkIndex: 6,
  totalChunks: 17,
  timestamp: '2025-03-18T05:54:09.624Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3929,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:54:09.624Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:54:09.624Z' }
5:54:09 AM [info] GET /api/documents/448/progress 200 in 60ms :: {"status":"processing","progress":{"chunksProcessed":6,"totalChunks":17},"ans...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:54:10.503Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 6,
  batchProgress: '7-7',
  answersFound: 1,
  timestamp: '2025-03-18T05:54:10.503Z'
}
[Document Processing] Progress update: {
  fileId: 448,
  chunkIndex: 6,
  answersFound: 7,
  timestamp: '2025-03-18T05:54:10.534Z'
}
[Document Processing] Processing chunk: {
  fileId: 448,
  chunkIndex: 7,
  totalChunks: 17,
  timestamp: '2025-03-18T05:54:10.634Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3945,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:54:10.634Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:54:10.634Z' }
[Auth] Deserializing user: 150
5:54:10 AM [info] GET /api/documents/448/progress 200 in 58ms :: {"status":"processing","progress":{"chunksProcessed":7,"totalChunks":17},"ans...
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
5:54:11 AM [info] GET /api/companies/current 304 in 61ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
5:54:11 AM [info] GET /api/tasks 304 in 91ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:54:11.705Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 7,
  batchProgress: '8-8',
  answersFound: 1,
  timestamp: '2025-03-18T05:54:11.705Z'
}
[Document Processing] Progress update: {
  fileId: 448,
  chunkIndex: 7,
  answersFound: 8,
  timestamp: '2025-03-18T05:54:11.737Z'
}
[Document Processing] Processing chunk: {
  fileId: 448,
  chunkIndex: 8,
  totalChunks: 17,
  timestamp: '2025-03-18T05:54:11.837Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4000,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:54:11.837Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:54:11.837Z' }
[Auth] Deserializing user: 150
5:54:12 AM [info] GET /api/documents/448/progress 200 in 60ms :: {"status":"processing","progress":{"chunksProcessed":8,"totalChunks":17},"ans...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:54:13.019Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 8,
  batchProgress: '9-9',
  answersFound: 1,
  timestamp: '2025-03-18T05:54:13.019Z'
}
[Document Processing] Progress update: {
  fileId: 448,
  chunkIndex: 8,
  answersFound: 9,
  timestamp: '2025-03-18T05:54:13.049Z'
}
[Auth] Deserializing user: 150
[Document Processing] Processing chunk: {
  fileId: 448,
  chunkIndex: 9,
  totalChunks: 17,
  timestamp: '2025-03-18T05:54:13.149Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4059,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:54:13.150Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:54:13.150Z' }
5:54:13 AM [info] GET /api/documents/448/progress 200 in 62ms :: {"status":"processing","progress":{"chunksProcessed":9,"totalChunks":17},"ans...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:54:14.026Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 9,
  batchProgress: '10-10',
  answersFound: 1,
  timestamp: '2025-03-18T05:54:14.026Z'
}
[Document Processing] Progress update: {
  fileId: 448,
  chunkIndex: 9,
  answersFound: 10,
  timestamp: '2025-03-18T05:54:14.056Z'
}
[AnswerAggregation] Answers aggregated: {
  totalAnswers: 10,
  uniqueFields: 1,
  aggregatedCount: 9,
  timestamp: '2025-03-18T05:54:14.068Z'
}
[Document Processing] Batch aggregation: {
  fileId: 448,
  chunkIndex: 9,
  aggregatedAnswers: 9,
  timestamp: '2025-03-18T05:54:14.099Z'
}
[Document Processing] Processing chunk: {
  fileId: 448,
  chunkIndex: 10,
  totalChunks: 17,
  timestamp: '2025-03-18T05:54:14.200Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4000,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:54:14.201Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:54:14.201Z' }
[Auth] Deserializing user: 150
5:54:14 AM [info] GET /api/documents/448/progress 200 in 59ms :: {"status":"processing","progress":{"chunksProcessed":10,"totalChunks":17},"an...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:54:15.047Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 10,
  batchProgress: '11-11',
  answersFound: 1,
  timestamp: '2025-03-18T05:54:15.047Z'
}
[Document Processing] Progress update: {
  fileId: 448,
  chunkIndex: 10,
  answersFound: 11,
  timestamp: '2025-03-18T05:54:15.078Z'
}
[Document Processing] Processing chunk: {
  fileId: 448,
  chunkIndex: 11,
  totalChunks: 17,
  timestamp: '2025-03-18T05:54:15.178Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3953,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:54:15.178Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:54:15.178Z' }
[WebSocket] Received pong
[Auth] Deserializing user: 150
5:54:15 AM [info] GET /api/documents/448/progress 200 in 60ms :: {"status":"processing","progress":{"chunksProcessed":11,"totalChunks":17},"an...
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
5:54:16 AM [info] GET /api/companies/current 304 in 62ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:54:16.466Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 11,
  batchProgress: '12-12',
  answersFound: 1,
  timestamp: '2025-03-18T05:54:16.466Z'
}
[Document Processing] Progress update: {
  fileId: 448,
  chunkIndex: 11,
  answersFound: 12,
  timestamp: '2025-03-18T05:54:16.497Z'
}
[Document Processing] Processing chunk: {
  fileId: 448,
  chunkIndex: 12,
  totalChunks: 17,
  timestamp: '2025-03-18T05:54:16.597Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4049,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:54:16.597Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:54:16.597Z' }
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Auth] Deserializing user: 150
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
5:54:16 AM [info] GET /api/tasks 304 in 89ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
5:54:16 AM [info] GET /api/documents/448/progress 200 in 61ms :: {"status":"processing","progress":{"chunksProcessed":12,"totalChunks":17},"an...
[Auth] Deserializing user: 150
5:54:17 AM [info] GET /api/documents/448/progress 304 in 61ms :: {"status":"processing","progress":{"chunksProcessed":12,"totalChunks":17},"an...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:54:18.244Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 12,
  batchProgress: '13-13',
  answersFound: 1,
  timestamp: '2025-03-18T05:54:18.245Z'
}
[Document Processing] Progress update: {
  fileId: 448,
  chunkIndex: 12,
  answersFound: 13,
  timestamp: '2025-03-18T05:54:18.275Z'
}
[Document Processing] Processing chunk: {
  fileId: 448,
  chunkIndex: 13,
  totalChunks: 17,
  timestamp: '2025-03-18T05:54:18.375Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4000,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:54:18.375Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:54:18.375Z' }
[Auth] Deserializing user: 150
5:54:19 AM [info] GET /api/documents/448/progress 200 in 62ms :: {"status":"processing","progress":{"chunksProcessed":13,"totalChunks":17},"an...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:54:19.852Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 13,
  batchProgress: '14-14',
  answersFound: 1,
  timestamp: '2025-03-18T05:54:19.852Z'
}
[Document Processing] Progress update: {
  fileId: 448,
  chunkIndex: 13,
  answersFound: 14,
  timestamp: '2025-03-18T05:54:19.883Z'
}
[Document Processing] Processing chunk: {
  fileId: 448,
  chunkIndex: 14,
  totalChunks: 17,
  timestamp: '2025-03-18T05:54:19.983Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3999,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:54:19.983Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:54:19.983Z' }
[Auth] Deserializing user: 150
5:54:20 AM [info] GET /api/documents/448/progress 200 in 61ms :: {"status":"processing","progress":{"chunksProcessed":14,"totalChunks":17},"an...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:54:21.304Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 14,
  batchProgress: '15-15',
  answersFound: 1,
  timestamp: '2025-03-18T05:54:21.304Z'
}
[Document Processing] Progress update: {
  fileId: 448,
  chunkIndex: 14,
  answersFound: 15,
  timestamp: '2025-03-18T05:54:21.335Z'
}
[AnswerAggregation] Answers aggregated: {
  totalAnswers: 15,
  uniqueFields: 1,
  aggregatedCount: 13,
  timestamp: '2025-03-18T05:54:21.358Z'
}
[Document Processing] Batch aggregation: {
  fileId: 448,
  chunkIndex: 14,
  aggregatedAnswers: 13,
  timestamp: '2025-03-18T05:54:21.390Z'
}
[Auth] Deserializing user: 150
[Document Processing] Processing chunk: {
  fileId: 448,
  chunkIndex: 15,
  totalChunks: 17,
  timestamp: '2025-03-18T05:54:21.491Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4074,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:54:21.491Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:54:21.491Z' }
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
5:54:21 AM [info] GET /api/documents/448/progress 200 in 61ms :: {"status":"processing","progress":{"chunksProcessed":15,"totalChunks":17},"an...
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
5:54:21 AM [info] GET /api/companies/current 304 in 58ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
5:54:21 AM [info] GET /api/tasks 304 in 90ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:54:22.524Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 15,
  batchProgress: '16-16',
  answersFound: 1,
  timestamp: '2025-03-18T05:54:22.525Z'
}
[Document Processing] Progress update: {
  fileId: 448,
  chunkIndex: 15,
  answersFound: 16,
  timestamp: '2025-03-18T05:54:22.555Z'
}
[Auth] Deserializing user: 150
[Document Processing] Processing chunk: {
  fileId: 448,
  chunkIndex: 16,
  totalChunks: 17,
  timestamp: '2025-03-18T05:54:22.655Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 114,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:54:22.655Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:54:22.655Z' }
5:54:22 AM [info] GET /api/documents/448/progress 200 in 59ms :: {"status":"processing","progress":{"chunksProcessed":16,"totalChunks":17},"an...
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:54:23.468Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 16,
  batchProgress: '17-17',
  answersFound: 1,
  timestamp: '2025-03-18T05:54:23.468Z'
}
[Document Processing] Progress update: {
  fileId: 448,
  chunkIndex: 16,
  answersFound: 17,
  timestamp: '2025-03-18T05:54:23.499Z'
}
[AnswerAggregation] Answers aggregated: {
  totalAnswers: 17,
  uniqueFields: 1,
  aggregatedCount: 14,
  timestamp: '2025-03-18T05:54:23.520Z'
}
[Document Processing] Batch aggregation: {
  fileId: 448,
  chunkIndex: 16,
  aggregatedAnswers: 14,
  timestamp: '2025-03-18T05:54:23.550Z'
}
[AnswerAggregation] Answers aggregated: {
  totalAnswers: 17,
  uniqueFields: 1,
  aggregatedCount: 14,
  timestamp: '2025-03-18T05:54:23.674Z'
}
[Document Processing] Processing completed: {
  fileId: 448,
  totalAnswers: 17,
  aggregatedAnswers: 14,
  timestamp: '2025-03-18T05:54:23.705Z'
}
[Auth] Deserializing user: 150
5:54:23 AM [info] GET /api/documents/448/progress 200 in 59ms :: {"status":"processed","progress":{"chunksProcessed":17,"totalChunks":17},"ans...
[Auth] Deserializing user: 150
[PDF Service] Extraction complete: {
  fileName: '20250318055325.pdf',
  totalPages: 50,
  extractedPages: 50,
  totalContent: 71903,
  averageContentPerPage: 1438,
  invalidContentItems: 1551,
  timestamp: '2025-03-18T05:54:25.144Z'
}
[DocumentChunking] Document prepared: {
  fileName: '20250318055325.pdf',
  totalChunks: 17,
  totalContent: 64000,
  averageChunkSize: 3765,
  invalidChunks: 0,
  timestamp: '2025-03-18T05:54:25.144Z'
}
[Document Processing] Starting document processing: { fileId: 449, totalChunks: 17, timestamp: '2025-03-18T05:54:25.175Z' }
[Document Processing] Processing chunk: {
  fileId: 449,
  chunkIndex: 0,
  totalChunks: 17,
  timestamp: '2025-03-18T05:54:25.175Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4000,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:54:25.175Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:54:25.176Z' }
5:54:25 AM [info] POST /api/documents/449/process 200 in 1163ms :: {"status":"processing","totalChunks":17}
[Auth] Deserializing user: 150
5:54:25 AM [info] GET /api/documents/449/progress 200 in 60ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":17},"ans...
[Auth] Deserializing user: 150
[OpenAI Service] Answers by field: {
  total: 1,
  byField: { all: 1 },
  timestamp: '2025-03-18T05:54:26.509Z'
}
[DocumentChunking] Processing status: {
  chunkIndex: 0,
  batchProgress: '1-1',
  answersFound: 1,
  timestamp: '2025-03-18T05:54:26.509Z'
}
[Document Processing] Progress update: {
  fileId: 449,
  chunkIndex: 0,
  answersFound: 1,
  timestamp: '2025-03-18T05:54:26.540Z'
}
5:54:26 AM [info] GET /api/documents/449/progress 200 in 60ms :: {"status":"processing","progress":{"chunksProcessed":1,"totalChunks":17},"ans...
[Document Processing] Processing chunk: {
  fileId: 449,
  chunkIndex: 1,
  totalChunks: 17,
  timestamp: '2025-03-18T05:54:26.640Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3920,
  fieldsCount: 1,
  fieldKeys: [ 'all' ],
  timestamp: '2025-03-18T05:54:26.641Z'
}
[OpenAI Service] Sending request with field keys: { fieldKeys: [ 'all' ], timestamp: '2025-03-18T05:54:26.641Z' }