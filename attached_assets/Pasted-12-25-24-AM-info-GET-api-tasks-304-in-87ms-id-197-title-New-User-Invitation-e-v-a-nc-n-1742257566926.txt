12:25:24 AM [info] GET /api/tasks 304 in 87ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
WebSocket client disconnected with code 1005 and reason: 
New WebSocket client connected
WebSocket client disconnected with code 1005 and reason: 
[Auth] Deserializing user: 150
[2025-03-18T00:25:25.823Z] [INFO] [CardRoutes] Fetching CARD task {"companyName":"Vector","userId":150,"companyId":113}
[2025-03-18T00:25:25.857Z] [INFO] [CardRoutes] Task lookup result {"found":true,"taskId":196,"taskType":"company_card","taskStatus":"in_progress"}
12:25:25 AM [info] GET /api/tasks/card/Vector 304 in 65ms :: {"id":196,"title":"Company CARD: Vector","description":"Provide Compliance an...
New WebSocket client connected
New WebSocket client connected
WebSocket client disconnected with code 1005 and reason: 
[Auth] Deserializing user: 150
New WebSocket client connected
[Files] Processing file upload request
[Files] File details: {
  originalname: 'soc2-type2 (1).pdf',
  mimetype: 'application/pdf',
  size: 760657,
  filename: '20250318002530.pdf'
}
[Files] Processing PDF file, extracting first pages
[PDF Service] Starting text extraction from first pages: {
  filePath: '/home/runner/workspace/uploads/documents/20250318002530.pdf',
  maxPages: 3,
  timestamp: '2025-03-18T00:25:30.894Z'
}
[PDF Service] Reading PDF file
[PDF Service] Extraction successful: {
  totalPages: 56,
  extractedPages: 3,
  timestamp: '2025-03-18T00:25:32.168Z'
}
[PDF Service] Truncating text to stay within token limits: {
  originalLength: 145279,
  truncatedLength: 64000,
  timestamp: '2025-03-18T00:25:32.169Z'
}
[Files] Starting document classification
[Auth] Deserializing user: 150
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
12:25:32 AM [info] GET /api/companies/current 304 in 59ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
12:25:32 AM [info] GET /api/tasks 304 in 119ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Files] Classification result: {
  category: 'soc2_audit',
  confidence: 0.95,
  reasoning: "The document is structured as an Independent Service Auditor's Report relevant to controls concerning Security, Confidentiality, and Availability of a cloud-hosted software application. It details the examination, management's assertion, system description, testing matrices, and relevant trust services criteria, aligning with the structure of a SOC 2 Audit Report."
}
[Files] Created file record: { id: 282, name: 'soc2-type2 (1).pdf', status: 'uploaded' }
12:25:34 AM [info] POST /api/files 201 in 3874ms :: {"id":282,"name":"soc2-type2 (1).pdf","size":760657,"type":"application/pdf",...
WebSocket client disconnected with code 1005 and reason: 
[Auth] Deserializing user: 150
New WebSocket client connected
[Files] Processing file upload request
[Files] File details: {
  originalname: 'Anonymized-ISO-27001-Assessment-Report.pdf',
  mimetype: 'application/pdf',
  size: 889081,
  filename: '20250318002534.pdf'
}
[Files] Processing PDF file, extracting first pages
[PDF Service] Starting text extraction from first pages: {
  filePath: '/home/runner/workspace/uploads/documents/20250318002534.pdf',
  maxPages: 3,
  timestamp: '2025-03-18T00:25:35.187Z'
}
[PDF Service] Reading PDF file
[PDF Service] Extraction successful: {
  totalPages: 50,
  extractedPages: 3,
  timestamp: '2025-03-18T00:25:36.648Z'
}
[PDF Service] Truncating text to stay within token limits: {
  originalLength: 75824,
  truncatedLength: 64000,
  timestamp: '2025-03-18T00:25:36.650Z'
}
[Files] Starting document classification
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Auth] Deserializing user: 150
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
12:25:37 AM [info] GET /api/companies/current 304 in 63ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
12:25:37 AM [info] GET /api/tasks 304 in 90ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Files] Classification result: {
  category: 'iso27001_cert',
  confidence: 1,
  reasoning: "The document is an Initial Assessment Report for ISO 27001, outlining the current state of the Information Security Management System (ISMS) and Annex A controls at the client's sites. It includes methodology, key stakeholder interviews, maturity levels for each clause of ISO 27001, recommendations, and action plans for achieving ISO/IEC 27001 certification."
}
[Files] Created file record: {
  id: 283,
  name: 'Anonymized-ISO-27001-Assessment-Report.pdf',
  status: 'uploaded'
}
12:25:38 AM [info] POST /api/files 201 in 4194ms :: {"id":283,"name":"Anonymized-ISO-27001-Assessment-Report.pdf","size":889081,"...
WebSocket client disconnected with code 1005 and reason: 
New WebSocket client connected
WebSocket client disconnected with code 1005 and reason: 
New WebSocket client connected
WebSocket client disconnected with code 1005 and reason: 
[Auth] Deserializing user: 150
[2025-03-18T00:25:40.345Z] [INFO] [CardRoutes] Fetching CARD fields
12:25:40 AM [info] GET /api/card/fields 304 in 117ms :: [{"id":1,"field_key":"security_access_control","wizard_section":"Security","q...
[Auth] Deserializing user: 150
[Document Processing] Creating chunks for file: {
  fileId: 282,
  fileName: 'soc2-type2 (1).pdf',
  mimeType: 'application/pdf',
  timestamp: '2025-03-18T00:25:40.655Z'
}
[DocumentChunking] Starting document chunking: {
  filePath: '/home/runner/workspace/uploads/documents/20250318002530.pdf',
  mimeType: 'application/pdf',
  chunkSize: 4000,
  timestamp: '2025-03-18T00:25:40.655Z'
}
[PDF Service] Starting text extraction from first pages: {
  filePath: '/home/runner/workspace/uploads/documents/20250318002530.pdf',
  maxPages: 0,
  timestamp: '2025-03-18T00:25:40.655Z'
}
[PDF Service] Reading PDF file
[PDF Service] Extraction successful: {
  totalPages: 56,
  extractedPages: 0,
  timestamp: '2025-03-18T00:25:41.653Z'
}
[PDF Service] Truncating text to stay within token limits: {
  originalLength: 145279,
  truncatedLength: 64000,
  timestamp: '2025-03-18T00:25:41.654Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 0,
  chunkSize: 0,
  totalChunks: 1,
  timestamp: '2025-03-18T00:25:41.655Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 1,
  chunkSize: 0,
  totalChunks: 2,
  timestamp: '2025-03-18T00:25:41.655Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 2,
  chunkSize: 0,
  totalChunks: 3,
  timestamp: '2025-03-18T00:25:41.655Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 3,
  chunkSize: 0,
  totalChunks: 4,
  timestamp: '2025-03-18T00:25:41.655Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 4,
  chunkSize: 0,
  totalChunks: 5,
  timestamp: '2025-03-18T00:25:41.655Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 5,
  chunkSize: 0,
  totalChunks: 6,
  timestamp: '2025-03-18T00:25:41.655Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 6,
  chunkSize: 0,
  totalChunks: 7,
  timestamp: '2025-03-18T00:25:41.655Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 7,
  chunkSize: 0,
  totalChunks: 8,
  timestamp: '2025-03-18T00:25:41.655Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 8,
  chunkSize: 0,
  totalChunks: 9,
  timestamp: '2025-03-18T00:25:41.655Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 9,
  chunkSize: 0,
  totalChunks: 10,
  timestamp: '2025-03-18T00:25:41.655Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 10,
  chunkSize: 0,
  totalChunks: 11,
  timestamp: '2025-03-18T00:25:41.655Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 11,
  chunkSize: 0,
  totalChunks: 12,
  timestamp: '2025-03-18T00:25:41.655Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 12,
  chunkSize: 0,
  totalChunks: 13,
  timestamp: '2025-03-18T00:25:41.655Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 13,
  chunkSize: 0,
  totalChunks: 14,
  timestamp: '2025-03-18T00:25:41.656Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 14,
  chunkSize: 0,
  totalChunks: 15,
  timestamp: '2025-03-18T00:25:41.656Z'
}
[DocumentChunking] Created chunk: {
  chunkIndex: 15,
  chunkSize: 0,
  totalChunks: 16,
  timestamp: '2025-03-18T00:25:41.656Z'
}
[DocumentChunking] Chunks created: {
  totalChunks: 16,
  averageChunkSize: 4000,
  timestamp: '2025-03-18T00:25:41.656Z'
}
[Document Processing] Processing chunk: {
  fileId: 282,
  chunkIndex: 0,
  progress: '1/16',
  timestamp: '2025-03-18T00:25:41.687Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 0,
  contentLength: 3926,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:25:41.687Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3926,
  fieldsCount: 90,
  fieldKeys: [
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null
  ],
  timestamp: '2025-03-18T00:25:41.687Z'
}
[OpenAI Service] Sending request: { promptLength: 15943, timestamp: '2025-03-18T00:25:41.689Z' }
12:25:41 AM [info] POST /api/documents/282/process 200 in 1110ms :: {"status":"processing","totalChunks":16}
[Auth] Deserializing user: 150
12:25:41 AM [info] GET /api/documents/282/progress 200 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
12:25:42 AM [info] GET /api/companies/current 304 in 60ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
12:25:42 AM [info] GET /api/tasks 304 in 90ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Auth] Deserializing user: 150
12:25:43 AM [info] GET /api/documents/282/progress 304 in 61ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
12:25:44 AM [info] GET /api/documents/282/progress 304 in 61ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 2694,
  fieldsAnswered: [ 'null' ],
  timestamp: '2025-03-18T00:25:44.381Z'
}
[DocumentChunking] Chunk processed: {
  chunkIndex: 0,
  answersFound: 1,
  timestamp: '2025-03-18T00:25:44.445Z'
}
[Document Processing] Chunk processing error: {
  fileId: 282,
  chunkIndex: 0,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T00:25:44.475Z'
}
[Document Processing] Processing chunk: {
  fileId: 282,
  chunkIndex: 1,
  progress: '2/16',
  timestamp: '2025-03-18T00:25:44.475Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 1,
  contentLength: 4000,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:25:44.475Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4000,
  fieldsCount: 90,
  fieldKeys: [
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null
  ],
  timestamp: '2025-03-18T00:25:44.475Z'
}
[OpenAI Service] Sending request: { promptLength: 16017, timestamp: '2025-03-18T00:25:44.476Z' }
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 758,
  fieldsAnswered: [ 'null' ],
  timestamp: '2025-03-18T00:25:45.233Z'
}
[DocumentChunking] Chunk processed: {
  chunkIndex: 1,
  answersFound: 1,
  timestamp: '2025-03-18T00:25:45.290Z'
}
[Document Processing] Chunk processing error: {
  fileId: 282,
  chunkIndex: 1,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T00:25:45.319Z'
}
[Document Processing] Processing chunk: {
  fileId: 282,
  chunkIndex: 2,
  progress: '3/16',
  timestamp: '2025-03-18T00:25:45.319Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 2,
  contentLength: 4024,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:25:45.319Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4024,
  fieldsCount: 90,
  fieldKeys: [
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null
  ],
  timestamp: '2025-03-18T00:25:45.319Z'
}
[OpenAI Service] Sending request: { promptLength: 16041, timestamp: '2025-03-18T00:25:45.319Z' }
[Auth] Deserializing user: 150
12:25:45 AM [info] GET /api/documents/282/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 737,
  fieldsAnswered: [ 'null' ],
  timestamp: '2025-03-18T00:25:46.056Z'
}
[DocumentChunking] Chunk processed: {
  chunkIndex: 2,
  answersFound: 1,
  timestamp: '2025-03-18T00:25:46.126Z'
}
[Document Processing] Chunk processing error: {
  fileId: 282,
  chunkIndex: 2,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T00:25:46.154Z'
}
[Document Processing] Processing chunk: {
  fileId: 282,
  chunkIndex: 3,
  progress: '4/16',
  timestamp: '2025-03-18T00:25:46.154Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 3,
  contentLength: 4000,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:25:46.154Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4000,
  fieldsCount: 90,
  fieldKeys: [
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null
  ],
  timestamp: '2025-03-18T00:25:46.155Z'
}
[OpenAI Service] Sending request: { promptLength: 16017, timestamp: '2025-03-18T00:25:46.155Z' }
[Auth] Deserializing user: 150
12:25:46 AM [info] GET /api/documents/282/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 745,
  fieldsAnswered: [ 'null' ],
  timestamp: '2025-03-18T00:25:46.899Z'
}
[DocumentChunking] Chunk processed: {
  chunkIndex: 3,
  answersFound: 1,
  timestamp: '2025-03-18T00:25:46.956Z'
}
[Document Processing] Chunk processing error: {
  fileId: 282,
  chunkIndex: 3,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T00:25:46.984Z'
}
[Document Processing] Processing chunk: {
  fileId: 282,
  chunkIndex: 4,
  progress: '5/16',
  timestamp: '2025-03-18T00:25:46.984Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 4,
  contentLength: 3955,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:25:46.984Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3955,
  fieldsCount: 90,
  fieldKeys: [
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null
  ],
  timestamp: '2025-03-18T00:25:46.984Z'
}
[OpenAI Service] Sending request: { promptLength: 15972, timestamp: '2025-03-18T00:25:46.985Z' }
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 721,
  fieldsAnswered: [ 'null' ],
  timestamp: '2025-03-18T00:25:47.705Z'
}
[2025-03-18T00:25:47.816Z] New client connected to the pool
[2025-03-18T00:25:47.819Z] New client connected to the pool
[Auth] Deserializing user: 150
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
12:25:47 AM [info] GET /api/documents/282/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
12:25:47 AM [info] GET /api/companies/current 304 in 60ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[2025-03-18T00:25:47.965Z] New client connected to the pool
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[DocumentChunking] Chunk processed: {
  chunkIndex: 4,
  answersFound: 1,
  timestamp: '2025-03-18T00:25:48.072Z'
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
[Document Processing] Chunk processing error: {
  fileId: 282,
  chunkIndex: 4,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T00:25:48.102Z'
}
[Document Processing] Processing chunk: {
  fileId: 282,
  chunkIndex: 5,
  progress: '6/16',
  timestamp: '2025-03-18T00:25:48.102Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 5,
  contentLength: 4079,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:25:48.102Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4079,
  fieldsCount: 90,
  fieldKeys: [
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null
  ],
  timestamp: '2025-03-18T00:25:48.102Z'
}
[OpenAI Service] Sending request: { promptLength: 16096, timestamp: '2025-03-18T00:25:48.103Z' }
12:25:48 AM [info] GET /api/tasks 304 in 101ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 759,
  fieldsAnswered: [ 'null' ],
  timestamp: '2025-03-18T00:25:48.861Z'
}
[DocumentChunking] Chunk processed: {
  chunkIndex: 5,
  answersFound: 1,
  timestamp: '2025-03-18T00:25:48.927Z'
}
[Document Processing] Chunk processing error: {
  fileId: 282,
  chunkIndex: 5,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T00:25:48.956Z'
}
[Document Processing] Processing chunk: {
  fileId: 282,
  chunkIndex: 6,
  progress: '7/16',
  timestamp: '2025-03-18T00:25:48.957Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 6,
  contentLength: 4000,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:25:48.957Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4000,
  fieldsCount: 90,
  fieldKeys: [
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null
  ],
  timestamp: '2025-03-18T00:25:48.957Z'
}
[OpenAI Service] Sending request: { promptLength: 16017, timestamp: '2025-03-18T00:25:48.958Z' }
[Auth] Deserializing user: 150
12:25:49 AM [info] GET /api/documents/282/progress 304 in 61ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
12:25:50 AM [info] GET /api/documents/282/progress 304 in 76ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
12:25:51 AM [info] GET /api/documents/282/progress 304 in 61ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 3,
  duration: 3522,
  fieldsAnswered: [ 'null', 'null', 'null' ],
  timestamp: '2025-03-18T00:25:52.479Z'
}
[DocumentChunking] Chunk processed: {
  chunkIndex: 6,
  answersFound: 3,
  timestamp: '2025-03-18T00:25:52.542Z'
}
[Document Processing] Chunk processing error: {
  fileId: 282,
  chunkIndex: 6,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T00:25:52.572Z'
}
[Document Processing] Processing chunk: {
  fileId: 282,
  chunkIndex: 7,
  progress: '8/16',
  timestamp: '2025-03-18T00:25:52.572Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 7,
  contentLength: 4017,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:25:52.572Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4017,
  fieldsCount: 90,
  fieldKeys: [
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null
  ],
  timestamp: '2025-03-18T00:25:52.572Z'
}
[OpenAI Service] Sending request: { promptLength: 16034, timestamp: '2025-03-18T00:25:52.572Z' }
[Auth] Deserializing user: 150
12:25:52 AM [info] GET /api/documents/282/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
12:25:53 AM [info] GET /api/companies/current 304 in 59ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 649,
  fieldsAnswered: [ 'null' ],
  timestamp: '2025-03-18T00:25:53.221Z'
}
[DocumentChunking] Chunk processed: {
  chunkIndex: 7,
  answersFound: 1,
  timestamp: '2025-03-18T00:25:53.281Z'
}
[2025-03-18T00:25:53.307Z] New client connected to the pool
[Document Processing] Chunk processing error: {
  fileId: 282,
  chunkIndex: 7,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T00:25:53.309Z'
}
[Document Processing] Processing chunk: {
  fileId: 282,
  chunkIndex: 8,
  progress: '9/16',
  timestamp: '2025-03-18T00:25:53.309Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 8,
  contentLength: 3972,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:25:53.309Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3972,
  fieldsCount: 90,
  fieldKeys: [
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null
  ],
  timestamp: '2025-03-18T00:25:53.310Z'
}
[OpenAI Service] Sending request: { promptLength: 15989, timestamp: '2025-03-18T00:25:53.310Z' }
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
12:25:53 AM [info] GET /api/tasks 304 in 92ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Auth] Deserializing user: 150
12:25:53 AM [info] GET /api/documents/282/progress 304 in 60ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 715,
  fieldsAnswered: [ 'null' ],
  timestamp: '2025-03-18T00:25:54.025Z'
}
[DocumentChunking] Chunk processed: {
  chunkIndex: 8,
  answersFound: 1,
  timestamp: '2025-03-18T00:25:54.084Z'
}
[Document Processing] Chunk processing error: {
  fileId: 282,
  chunkIndex: 8,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T00:25:54.113Z'
}
[Document Processing] Processing chunk: {
  fileId: 282,
  chunkIndex: 9,
  progress: '10/16',
  timestamp: '2025-03-18T00:25:54.113Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 9,
  contentLength: 3978,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:25:54.114Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 3978,
  fieldsCount: 90,
  fieldKeys: [
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null
  ],
  timestamp: '2025-03-18T00:25:54.114Z'
}
[OpenAI Service] Sending request: { promptLength: 15995, timestamp: '2025-03-18T00:25:54.114Z' }
[2025-03-18T00:25:55.118Z] New client connected to the pool
[Auth] Deserializing user: 150
12:25:55 AM [info] GET /api/documents/282/progress 304 in 59ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
12:25:56 AM [info] GET /api/documents/282/progress 304 in 58ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
12:25:57 AM [info] GET /api/documents/282/progress 304 in 65ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[Auth] Deserializing user: 150
[Current Company] Fetching company for user: { userId: 150, companyId: 113 }
[Current Company] Found company: { id: 113, name: 'Vector', onboardingCompleted: true }
12:25:58 AM [info] GET /api/companies/current 304 in 66ms :: {"id":113,"name":"Vector","description":"FinTech partner company Vector","cat...
[Auth] Deserializing user: 150
[Tasks] ====== Starting task fetch =====
[Tasks] User details: { id: 150, company_id: 113, email: 'e.v.a.nc.na.va.r.r.o@gmail.com' }
[Tasks] KYB tasks found: {
  count: 1,
  tasks: [
    {
      id: 195,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      assigned_to: null,
      status: 'submitted'
    }
  ]
}
[Tasks] Query conditions: {
  conditions: {
    condition1: 'tasks.assigned_to = 150',
    condition2: 'tasks.created_by = 150',
    condition3: "tasks.company_id = 113 AND tasks.assigned_to IS NULL AND tasks.task_scope = 'company'",
    condition4: "tasks.task_type = 'user_onboarding' AND LOWER(tasks.user_email) = LOWER('e.v.a.nc.na.va.r.r.o@gmail.com')"
  }
}
[Tasks] Tasks found: {
  count: 3,
  tasks: [
    {
      id: 197,
      title: 'New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com',
      assigned_to: 150,
      company_id: 113,
      task_scope: 'user',
      task_type: 'user_onboarding',
      status: 'completed'
    },
    {
      id: 195,
      title: 'Company KYB: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_kyb',
      status: 'submitted'
    },
    {
      id: 196,
      title: 'Company CARD: Vector',
      assigned_to: null,
      company_id: 113,
      task_scope: 'company',
      task_type: 'company_card',
      status: 'in_progress'
    }
  ]
}
12:25:58 AM [info] GET /api/tasks 304 in 103ms :: [{"id":197,"title":"New User Invitation: e.v.a.nc.na.va.r.r.o@gmail.com","des...
[Auth] Deserializing user: 150
12:25:58 AM [info] GET /api/documents/282/progress 304 in 63ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 8,
  duration: 5047,
  fieldsAnswered: [
    'null', 'null',
    'null', 'null',
    'null', 'null',
    'null', 'null'
  ],
  timestamp: '2025-03-18T00:25:59.161Z'
}
[DocumentChunking] Chunk processed: {
  chunkIndex: 9,
  answersFound: 8,
  timestamp: '2025-03-18T00:25:59.219Z'
}
[Document Processing] Chunk processing error: {
  fileId: 282,
  chunkIndex: 9,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T00:25:59.253Z'
}
[Document Processing] Processing chunk: {
  fileId: 282,
  chunkIndex: 10,
  progress: '11/16',
  timestamp: '2025-03-18T00:25:59.253Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 10,
  contentLength: 4027,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:25:59.253Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4027,
  fieldsCount: 90,
  fieldKeys: [
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null
  ],
  timestamp: '2025-03-18T00:25:59.253Z'
}
[OpenAI Service] Sending request: { promptLength: 16044, timestamp: '2025-03-18T00:25:59.254Z' }
[OpenAI Service] Analysis completed: {
  answersFound: 0,
  duration: 391,
  fieldsAnswered: [],
  timestamp: '2025-03-18T00:25:59.644Z'
}
[2025-03-18T00:25:59.731Z] New client connected to the pool
[DocumentChunking] Chunk processed: {
  chunkIndex: 10,
  answersFound: 0,
  timestamp: '2025-03-18T00:25:59.802Z'
}
[Document Processing] Processing chunk: {
  fileId: 282,
  chunkIndex: 11,
  progress: '12/16',
  timestamp: '2025-03-18T00:25:59.903Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 11,
  contentLength: 4018,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:25:59.903Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4018,
  fieldsCount: 90,
  fieldKeys: [
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null
  ],
  timestamp: '2025-03-18T00:25:59.903Z'
}
[OpenAI Service] Sending request: { promptLength: 16035, timestamp: '2025-03-18T00:25:59.903Z' }
[Auth] Deserializing user: 150
12:26:00 AM [info] GET /api/documents/282/progress 304 in 67ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 763,
  fieldsAnswered: [ 'null' ],
  timestamp: '2025-03-18T00:26:00.666Z'
}
[DocumentChunking] Chunk processed: {
  chunkIndex: 11,
  answersFound: 1,
  timestamp: '2025-03-18T00:26:00.724Z'
}
[Document Processing] Chunk processing error: {
  fileId: 282,
  chunkIndex: 11,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T00:26:00.754Z'
}
[Document Processing] Processing chunk: {
  fileId: 282,
  chunkIndex: 12,
  progress: '13/16',
  timestamp: '2025-03-18T00:26:00.754Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 12,
  contentLength: 4006,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:26:00.754Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4006,
  fieldsCount: 90,
  fieldKeys: [
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null
  ],
  timestamp: '2025-03-18T00:26:00.755Z'
}
[OpenAI Service] Sending request: { promptLength: 16023, timestamp: '2025-03-18T00:26:00.755Z' }
[2025-03-18T00:26:01.266Z] New client connected to the pool
[Auth] Deserializing user: 150
12:26:01 AM [info] GET /api/documents/282/progress 304 in 66ms :: {"status":"processing","progress":{"chunksProcessed":0,"totalChunks":1},"answ...
[OpenAI Service] Analysis completed: {
  answersFound: 1,
  duration: 675,
  fieldsAnswered: [ 'null' ],
  timestamp: '2025-03-18T00:26:01.431Z'
}
[DocumentChunking] Chunk processed: {
  chunkIndex: 12,
  answersFound: 1,
  timestamp: '2025-03-18T00:26:01.488Z'
}
[Document Processing] Chunk processing error: {
  fileId: 282,
  chunkIndex: 12,
  error: 'syntax error at or near "where"',
  timestamp: '2025-03-18T00:26:01.517Z'
}
[Document Processing] Processing chunk: {
  fileId: 282,
  chunkIndex: 13,
  progress: '14/16',
  timestamp: '2025-03-18T00:26:01.517Z'
}
[DocumentChunking] Processing chunk: {
  chunkIndex: 13,
  contentLength: 4037,
  fieldsCount: 90,
  timestamp: '2025-03-18T00:26:01.517Z'
}
[OpenAI Service] Starting document analysis: {
  textLength: 4037,
  fieldsCount: 90,
  fieldKeys: [
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, null,
    null, null, null, null, null, null, null, null, n