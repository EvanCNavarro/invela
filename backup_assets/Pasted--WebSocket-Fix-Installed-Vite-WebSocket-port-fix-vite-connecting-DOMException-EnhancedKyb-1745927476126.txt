[WebSocket Fix] Installed Vite WebSocket port fix
[vite] connecting...
DOMException {}

[EnhancedKybServiceFactory] Creating app-level EnhancedKybFormService instance
[Enhanced KYB Service] Enhanced KYB Form Service initialized with timestamp tracking
[KY3PFormService] [KY3P Form Service] Initializing KY3P Form Service 
Object {companyId: undefined, taskId: undefined}
[Enhanced KYB Service] Enhanced KYB Form Service initialized with timestamp tracking
INFO: [OpenBankingFormService] Initializing Open Banking Form Service 
Object {companyId: undefined, taskId: undefined}
[Enhanced KYB Service] Enhanced KYB Form Service initialized with timestamp tracking
[KY3PFormService] [KY3P Form Service] Initializing KY3P Form Service 
Object {companyId: undefined, taskId: undefined}
[RegisterStandardizedServices] Registering standardized form services
[RegisterStandardizedServices] Registering enhanced KY3P form service
[ComponentFactory] Registering form service for task type: ky3p 
Object {serviceType: "Function", timestamp: "2025-04-29T11:48:21.186Z"}
[ComponentFactory] Current registered services: [ky3p: Function]
[RegisterStandardizedServices] Successfully registered enhanced KY3P form service
[RegisterStandardizedServices] All standardized form services registered successfully
[Router] Current location: /ky3p-test
Creating enhanced KY3P form service for task 662
Creating enhanced KY3P form service for company 248 and task 662
[FormServiceFactory] Creating form service for type: ky3p 
Object {companyId: 248, taskId: 662, useEnhanced: true}
[FormServiceFactory] Using enhanced KY3P form service for company 248, task 662
[EnhancedKY3PFormService] [EnhancedKY3PFactory] Creating service instance for company 248, task 662
[EnhancedKY3PFormService] Initializing EnhancedKY3PFormService 
Object {companyId: 248, taskId: 662, timestamp: "2025-04-29T11:48:21.207Z"}
[Enhanced KYB Service] Enhanced KYB Form Service initialized with timestamp tracking
[KY3PFormService] [KY3P Form Service] Initializing KY3P Form Service 
Object {companyId: 248, taskId: 662}
[EnhancedKY3PFormService] Original KY3P service created successfully
Initializing form service with template 1
[EnhancedKY3PFormService] [EnhancedKY3P] Initializing with template ID: 1
[KY3PFormService] [KY3P Form Service] Initializing with template ID: 1
[KY3PFormService] [KY3P Form Service] getKybFields called - using KY3P fields instead of KYB fields
[WebSocket] Connecting to: wss://9606074c-a9ad-4fe1-8fe5-3d9c3eed0606-00-33ar2rv36ligj.picard.replit.dev/ws
[TanStack Query] Fetching: /api/user
[App] Registering form services at application startup
[Service Registration] Registering form services... 
Object {timestamp: "2025-04-29T11:48:21.211Z", kybServiceState: "initialized"}
[Service Registration] Getting registered services before registration
[ComponentFactory] Getting all registered form services (1 total)
[ComponentFactory] Registered service: ky3p -> Function
[Service Registration] Found 1 existing services: [ky3p]
[Service Registration] Registering Enhanced KYB service for type: kyb
[ComponentFactory] Registering form service for task type: kyb 
Object {serviceType: "EnhancedKybFormService", timestamp: "2025-04-29T11:48:21.211Z"}
[ComponentFactory] Current registered services: [ky3p: Function, kyb: EnhancedKybFormService]
[Service Registration] Registering Enhanced KYB service for type: company_kyb
[ComponentFactory] Registering form service for task type: company_kyb 
Object {serviceType: "EnhancedKybFormService", timestamp: "2025-04-29T11:48:21.211Z"}
[ComponentFactory] Current registered services: [ky3p: Function, kyb: EnhancedKybFormService, company_kyb: EnhancedKybFormService]
[Service Registration] EnhancedKybServiceFactory initialized and ready for isolated service creation
[ComponentFactory] Getting all registered form services (3 total)
[ComponentFactory] Registered service: ky3p -> Function
[ComponentFactory] Registered service: kyb -> EnhancedKybFormService
[ComponentFactory] Registered service: company_kyb -> EnhancedKybFormService
[Service Registration] After registration: 3 services registered
[Service Registration] - Service 'ky3p' registered with Function instance
[Service Registration] - Service 'kyb' registered with EnhancedKybFormService instance
[Service Registration] - Service 'company_kyb' registered with EnhancedKybFormService instance
[Service Registration] Registering KY3P form service for standard type: ky3p
[ComponentFactory] Registering form service for task type: ky3p 
Object {serviceType: "KY3PFormService", timestamp: "2025-04-29T11:48:21.211Z"}
[ComponentFactory] Overriding existing service for task type: ky3p 
Object {oldServiceType: "Function", newServiceType: "KY3PFormService"}
[ComponentFactory] Current registered services: [ky3p: KY3PFormService, kyb: EnhancedKybFormService, company_kyb: EnhancedKybFormService]
[Service Registration] Registering KY3P form service for legacy type: sp_ky3p_assessment
[ComponentFactory] Registering form service for task type: sp_ky3p_assessment 
Object {serviceType: "KY3PFormService", timestamp: "2025-04-29T11:48:21.211Z"}
[ComponentFactory] Current registered services: [ky3p: KY3PFormService, kyb: EnhancedKybFormService, company_kyb: EnhancedKybFormService, sp_ky3p_assessment: KY3PFormService]
[Service Registration] Registering KY3P form service for legacy type: security
[ComponentFactory] Registering form service for task type: security 
Object {serviceType: "KY3PFormService", timestamp: "2025-04-29T11:48:21.211Z"}
[ComponentFactory] Current registered services: [ky3p: KY3PFormService, kyb: EnhancedKybFormService, company_kyb: EnhancedKybFormService, sp_ky3p_assessment: KY3PFormService, security: KY3PFormService]
[Service Registration] Registering KY3P form service for legacy type: security_assessment
[ComponentFactory] Registering form service for task type: security_assessment 
Object {serviceType: "KY3PFormService", timestamp: "2025-04-29T11:48:21.211Z"}
[ComponentFactory] Current registered services: [ky3p: KY3PFormService, kyb: EnhancedKybFormService, company_kyb: EnhancedKybFormService, sp_ky3p_assessment: KY3PFormService, security: KY3PFormService, security_assessment: KY3PFormService]
[Service Registration] KY3PFormServiceFactory initialized and ready for isolated service creation
[Service Registration] Registering Open Banking form service for type: open_banking_survey
[ComponentFactory] Registering form service for task type: open_banking_survey 
Object {serviceType: "OpenBankingFormService", timestamp: "2025-04-29T11:48:21.211Z"}
[ComponentFactory] Current registered services: [ky3p: KY3PFormService, kyb: EnhancedKybFormService, company_kyb: EnhancedKybFormService, sp_ky3p_assessment: KY3PFormService, security: KY3PFormService, security_assessment: KY3PFormService, open_banking_survey: OpenBankingFormService]
[Service Registration] Registering Open Banking form service for client type: open_banking
[ComponentFactory] Registering form service for task type: open_banking 
Object {serviceType: "OpenBankingFormService", timestamp: "2025-04-29T11:48:21.212Z"}
[ComponentFactory] Current registered services: [ky3p: KY3PFormService, kyb: EnhancedKybFormService, company_kyb: EnhancedKybFormService, sp_ky3p_assessment: KY3PFormService, security: KY3PFormService, security_assessment: KY3PFormService, open_banking_survey: OpenBankingFormService, open_banking: OpenBankingFormService]
[Service Registration] OpenBankingFormServiceFactory initialized and ready for isolated service creation
[ComponentFactory] Looking up form service for task type: kyb 
Object {found: true, serviceType: "EnhancedKybFormService", timestamp: "2025-04-29T11:48:21.212Z"}
[ComponentFactory] Looking up form service for task type: company_kyb 
Object {found: true, serviceType: "EnhancedKybFormService", timestamp: "2025-04-29T11:48:21.212Z"}
[Service Registration] Final verification: 
Object {kybRegistered: true, companyKybRegistered: true, kybServiceType: "EnhancedKybFormService", companyKybServiceType: "EnhancedKybFormService", isEnhanced: true}
[Service Registration] Services registered successfully
[App] Initializing core services with explicit context values
[App] Using application context: 
Object {companyId: 0, taskId: 0}
[App] Registering standardized form services
[App] Using standardized form services by default
[RegisterStandardizedServices] Setting standardized form services as default
[ComponentFactory] Registering form service for task type: ky3p 
Object {serviceType: "Function", timestamp: "2025-04-29T11:48:21.239Z"}
[ComponentFactory] Overriding existing service for task type: ky3p 
Object {oldServiceType: "KY3PFormService", newServiceType: "Function"}
[ComponentFactory] Current registered services: [ky3p: Function, kyb: EnhancedKybFormService, company_kyb: EnhancedKybFormService, sp_ky3p_assessment: KY3PFormService, security: KY3PFormService, security_assessment: KY3PFormService, open_banking_survey: OpenBankingFormService, open_banking: OpenBankingFormService]
[RegisterStandardizedServices] Standardized form services are now the default
[TanStack Query] Response for /api/user: Status 200
[ONBOARDING DEBUG] User object in AuthProvider changed: 
Object {userId: 290, onboardingCompleted: true, typeOfOnboardingFlag: "boolean", timestamp: "2025-04-29T11:48:21.390Z"}
[KY3PFormService] [KY3P Form Service] Successfully loaded 120 fields from API
[KY3PFormService] [KY3P Form Service] Sample KY3P fields: 
(3) [{…}, {…}, {…}]
[KY3PFormService] [KY3P Form Service] Retrieved KY3P fields from API: 120
[KY3PFormService] [KY3P Form Service] Field grouping result: 4 groups found
[KY3PFormService] [KY3P Form Service] Groups found: Development, Governance, Resilience, Security
[KY3PFormService] [KY3P Form Service] Creating section "Development" with ID "section-0" (31 fields)
[Enhanced KYB Service] Converting field "externalSystems" to form field format. Section: section-0
[Enhanced KYB Service] Converting field "breachNotification" to form field format. Section: section-0
[Enhanced KYB Service] Converting field "privacyIncidentProcedure" to form field format. Section: section-0
[Enhanced KYB Service] Converting field "publicPrivacyNotice" to form field format. Section: section-0
[Enhanced KYB Service] Converting field "privacyLawCompliance" to form field format. Section: section-0
[Enhanced KYB Service] Converting field "dataRetentionLimits" to form field format. Section: section-0
[Enhanced KYB Service] Converting field "personalDataMinimization" to form field format. Section: section-0
[Enhanced KYB Service] Converting field "dataMinimizationTechniques" to form field format. Section: section-0
[Enhanced KYB Service] Converting field "dpoAppointment" to form field format. Section: section-0
[Enhanced KYB Service] Converting field "developmentLifecycle" to form field format. Section: section-0
[Enhanced KYB Service] Converting field "secureCodeReviews" to form field format. Section: section-0
[Enhanced KYB Service] Converting field "codeScanning" to form field format. Section: section-0
[Enhanced KYB Service] Converting field "developerAccessControls" to form field format. Section: section-0
[Enhanced KYB Service] Converting field "backupRecoveryDocument" to form field format. Section: section-0
[Enhanced KYB Service] Converting field "cyberLiabilityInsurance" to form field format. Section: section-0
[Enhanced KYB Service] Converting field "dataLocationTracking" to form field format. Section: section-0
[Enhanced KYB Service] Converting field "alternateFacilities" to form field format. Section: section-0
[Enhanced KYB Service] Converting field "logicalAccess" to form field format. Section: section-0
[Enhanced KYB Service] Converting field "detectionSystems" to form field format. Section: section-0
[Enhanced KYB Service] Converting field "disasterRecoveryTesting" to form field format. Section: section-0
[Enhanced KYB Service] Converting field "appVulnerabilityScanning" to form field format. Section: section-0
[Enhanced KYB Service] Converting field "testingIssueTracking" to form field format. Section: section-0
[Enhanced KYB Service] Converting field "cloudDataRetrieval" to form field format. Section: section-0
[Enhanced KYB Service] Converting field "recoverySystemsUpdate" to form field format. Section: section-0
[Enhanced KYB Service] Converting field "webApplicationSecurity" to form field format. Section: section-0
[Enhanced KYB Service] Converting field "technicalResilience" to form field format. Section: section-0
[Enhanced KYB Service] Converting field "externalDependencyResilience" to form field format. Section: section-0
[Enhanced KYB Service] Converting field "backupProcessTesting" to form field format. Section: section-0
[Enhanced KYB Service] Converting field "penetrationTesting" to form field format. Section: section-0
[Enhanced KYB Service] Converting field "incidentContainment" to form field format. Section: section-0
[Enhanced KYB Service] Converting field "privacyPolicyDocument" to form field format. Section: section-0
[KY3PFormService] [KY3P Form Service] Creating section "Governance" with ID "section-1" (30 fields)
[Enhanced KYB Service] Converting field "policyAcknowledgement" to form field format. Section: section-1
[Enhanced KYB Service] Converting field "changeManagement" to form field format. Section: section-1
[Enhanced KYB Service] Converting field "remoteMfa" to form field format. Section: section-1
[Enhanced KYB Service] Converting field "securityPolicy" to form field format. Section: section-1
[Enhanced KYB Service] Converting field "changeAuditTrail" to form field format. Section: section-1
[Enhanced KYB Service] Converting field "regulatoryCompliance" to form field format. Section: section-1
[Enhanced KYB Service] Converting field "dataRetentionGovernance" to form field format. Section: section-1
[Enhanced KYB Service] Converting field "acceptableUse" to form field format. Section: section-1
[Enhanced KYB Service] Converting field "centralizedAuthentication" to form field format. Section: section-1
[Enhanced KYB Service] Converting field "dataClassificationGovernance" to form field format. Section: section-1
[Enhanced KYB Service] Converting field "iamGovernance" to form field format. Section: section-1
[Enhanced KYB Service] Converting field "cloudSecurityRequirements" to form field format. Section: section-1
[Enhanced KYB Service] Converting field "threatManagementGovernance" to form field format. Section: section-1
[Enhanced KYB Service] Converting field "amlGovernance" to form field format. Section: section-1
[Enhanced KYB Service] Converting field "antiFraudGovernance" to form field format. Section: section-1
[Enhanced KYB Service] Converting field "loggingGovernance" to form field format. Section: section-1
[Enhanced KYB Service] Converting field "encryptionGovernance" to form field format. Section: section-1
[Enhanced KYB Service] Converting field "transactionAuthentication" to form field format. Section: section-1
[Enhanced KYB Service] Converting field "equipmentRedundancy" to form field format. Section: section-1
[Enhanced KYB Service] Converting field "passwordVisibility" to form field format. Section: section-1
[Enhanced KYB Service] Converting field "privilegedUserLogs" to form field format. Section: section-1
[Enhanced KYB Service] Converting field "physicalMfa" to form field format. Section: section-1
[Enhanced KYB Service] Converting field "executiveCyberTraining" to form field format. Section: section-1
[Enhanced KYB Service] Converting field "complianceTraining" to form field format. Section: section-1
[Enhanced KYB Service] Converting field "annualSecurityTraining" to form field format. Section: section-1
[Enhanced KYB Service] Converting field "developerTraining" to form field format. Section: section-1
[Enhanced KYB Service] Converting field "accountCompromise" to form field format. Section: section-1
[Enhanced KYB Service] Converting field "passwordPolicies" to form field format. Section: section-1
[Enhanced KYB Service] Converting field "defaultPasswords" to form field format. Section: section-1
[Enhanced KYB Service] Converting field "deviceAccessMonitoring" to form field format. Section: section-1
[KY3PFormService] [KY3P Form Service] Creating section "Resilience" with ID "section-2" (27 fields)
[Enhanced KYB Service] Converting field "crisisTeamAvailability" to form field format. Section: section-2
[Enhanced KYB Service] Converting field "vendorContracts" to form field format. Section: section-2
[Enhanced KYB Service] Converting field "staffResilience" to form field format. Section: section-2
[Enhanced KYB Service] Converting field "pandemicResponse" to form field format. Section: section-2
[Enhanced KYB Service] Converting field "vendorBcmReview" to form field format. Section: section-2
[Enhanced KYB Service] Converting field "continuityTesting" to form field format. Section: section-2
[Enhanced KYB Service] Converting field "resiliencePolicy" to form field format. Section: section-2
[Enhanced KYB Service] Converting field "bcpRolesResponsibilities" to form field format. Section: section-2